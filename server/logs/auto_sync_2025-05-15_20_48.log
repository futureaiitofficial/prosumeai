[2025-05-15T20:48:54.942Z] === Razorpay Invoice Auto-Sync Started ===
[2025-05-15T20:48:54.942Z] Process ID: 50510
[2025-05-15T20:48:54.942Z] Current directory: /Users/raja/Development/ProsumeAI/server
[2025-05-15T20:48:54.942Z] Log file: /Users/raja/Development/ProsumeAI/server/logs/auto_sync_2025-05-15_20_48.log
[2025-05-15T20:48:54.942Z] Sync interval: 5 seconds
[2025-05-15T20:48:54.942Z] Starting invoice synchronization...
[2025-05-15T20:48:54.942Z] Running sync script: /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:48:54.942Z] Executing command: cd /Users/raja/Development/ProsumeAI/server && npx tsx /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:48:59.543Z] [STDOUT] Using database connection: postgres://***:***@localhost:5432/prosumeai
[2025-05-15T20:48:59.544Z] [STDOUT] Starting subscription invoice synchronization...
[2025-05-15T20:48:59.544Z] [STDOUT] Database schema validated successfully
[2025-05-15T20:48:59.544Z] [STDOUT] Found 4 active Razorpay subscriptions to sync
[2025-05-15T20:48:59.544Z] [STDOUT] Processing subscription 20 with Razorpay ID: sub_QUxcCis3igdqUA
[2025-05-15T20:48:59.544Z] [STDOUT] Subscription 20 has 1 existing transactions
[2025-05-15T20:48:59.544Z] [STDOUT] Razorpay initialization in progress, waiting...
[2025-05-15T20:48:59.544Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:48:59.544Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:48:59.544Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:48:59.544Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:48:59.544Z] [STDOUT] Fetching invoices for subscription ID: sub_QUxcCis3igdqUA
[2025-05-15T20:48:59.544Z] [STDOUT] Found 0 invoices for subscription: sub_QUxcCis3igdqUA
[2025-05-15T20:48:59.544Z] [STDOUT] Found 0 invoices for subscription sub_QUxcCis3igdqUA
[2025-05-15T20:48:59.544Z] [STDOUT] Processing subscription 24 with Razorpay ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:48:59.544Z] [STDOUT] Subscription 24 has 1 existing transactions
[2025-05-15T20:48:59.544Z] [STDOUT] Fetching invoices for subscription ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:48:59.544Z] [STDOUT] Found 1 invoices for subscription: sub_QV05DCrgh3A2rL
[2025-05-15T20:48:59.544Z] [STDOUT] Transaction for payment pay_QV05q44fHQzL1q already exists in database (1 records), skipping
[2025-05-15T20:48:59.544Z] [STDOUT] Found 1 invoices for subscription sub_QV05DCrgh3A2rL
[2025-05-15T20:48:59.544Z] [STDOUT] Processing subscription 25 with Razorpay ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:48:59.544Z] [STDOUT] Subscription 25 has 2 existing transactions
[2025-05-15T20:48:59.544Z] [STDOUT] Fetching invoices for subscription ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:48:59.544Z] [STDOUT] Found 1 invoices for subscription: sub_QV1W0JNq2cOk7s
[2025-05-15T20:48:59.544Z] [STDOUT] Transaction for payment pay_QV1WoyCgCY23iO already exists in database (2 records), skipping
[2025-05-15T20:48:59.544Z] [STDOUT] Found 1 invoices for subscription sub_QV1W0JNq2cOk7s
[2025-05-15T20:48:59.544Z] [STDOUT] Processing subscription 26 with Razorpay ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:48:59.544Z] [STDOUT] Subscription 26 has 2 existing transactions
[2025-05-15T20:48:59.544Z] [STDOUT] Fetching invoices for subscription ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:48:59.545Z] [STDOUT] Found 2 invoices for subscription: sub_QVIG6dAuP0UXXn
[2025-05-15T20:48:59.545Z] [STDOUT] Transaction for payment pay_QVILKDuy9v6ovq already exists in database (1 records), skipping
[2025-05-15T20:48:59.545Z] [STDOUT] Transaction for payment pay_QVIGtXTXkm93W8 already exists in database (1 records), skipping
[2025-05-15T20:48:59.545Z] [STDOUT] Found 2 invoices for subscription sub_QVIG6dAuP0UXXn
[2025-05-15T20:48:59.545Z] [STDOUT] Subscription invoice synchronization complete!
[2025-05-15T20:48:59.545Z] [STDOUT] Processed 4 subscriptions
[2025-05-15T20:48:59.545Z] [STDOUT] Success: 4, Errors: 0
[2025-05-15T20:48:59.545Z] [STDOUT] Added 0 new transactions
[2025-05-15T20:48:59.545Z] [STDOUT] Script execution completed
[2025-05-15T20:48:59.545Z] Synchronization completed successfully
[2025-05-15T20:48:59.545Z] Next sync scheduled in 5 seconds
[2025-05-15T20:48:59.945Z] Starting invoice synchronization...
[2025-05-15T20:48:59.946Z] Running sync script: /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:48:59.946Z] Executing command: cd /Users/raja/Development/ProsumeAI/server && npx tsx /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:49:04.946Z] Starting invoice synchronization...
[2025-05-15T20:49:04.946Z] Running sync script: /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:49:04.946Z] Executing command: cd /Users/raja/Development/ProsumeAI/server && npx tsx /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:49:05.149Z] [STDOUT] Using database connection: postgres://***:***@localhost:5432/prosumeai
[2025-05-15T20:49:05.149Z] [STDOUT] Starting subscription invoice synchronization...
[2025-05-15T20:49:05.149Z] [STDOUT] Database schema validated successfully
[2025-05-15T20:49:05.149Z] [STDOUT] Found 4 active Razorpay subscriptions to sync
[2025-05-15T20:49:05.149Z] [STDOUT] Processing subscription 20 with Razorpay ID: sub_QUxcCis3igdqUA
[2025-05-15T20:49:05.149Z] [STDOUT] Subscription 20 has 1 existing transactions
[2025-05-15T20:49:05.149Z] [STDOUT] Razorpay initialization in progress, waiting...
[2025-05-15T20:49:05.149Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:49:05.149Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:49:05.149Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:49:05.149Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:49:05.149Z] [STDOUT] Fetching invoices for subscription ID: sub_QUxcCis3igdqUA
[2025-05-15T20:49:05.149Z] [STDOUT] Found 0 invoices for subscription: sub_QUxcCis3igdqUA
[2025-05-15T20:49:05.149Z] [STDOUT] Found 0 invoices for subscription sub_QUxcCis3igdqUA
[2025-05-15T20:49:05.149Z] [STDOUT] Processing subscription 24 with Razorpay ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:49:05.149Z] [STDOUT] Subscription 24 has 1 existing transactions
[2025-05-15T20:49:05.149Z] [STDOUT] Fetching invoices for subscription ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:49:05.149Z] [STDOUT] Found 1 invoices for subscription: sub_QV05DCrgh3A2rL
[2025-05-15T20:49:05.149Z] [STDOUT] Transaction for payment pay_QV05q44fHQzL1q already exists in database (1 records), skipping
[2025-05-15T20:49:05.149Z] [STDOUT] Found 1 invoices for subscription sub_QV05DCrgh3A2rL
[2025-05-15T20:49:05.149Z] [STDOUT] Processing subscription 25 with Razorpay ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:49:05.149Z] [STDOUT] Subscription 25 has 2 existing transactions
[2025-05-15T20:49:05.149Z] [STDOUT] Fetching invoices for subscription ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:49:05.149Z] [STDOUT] Found 1 invoices for subscription: sub_QV1W0JNq2cOk7s
[2025-05-15T20:49:05.149Z] [STDOUT] Transaction for payment pay_QV1WoyCgCY23iO already exists in database (2 records), skipping
[2025-05-15T20:49:05.149Z] [STDOUT] Found 1 invoices for subscription sub_QV1W0JNq2cOk7s
[2025-05-15T20:49:05.149Z] [STDOUT] Processing subscription 26 with Razorpay ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:49:05.149Z] [STDOUT] Subscription 26 has 2 existing transactions
[2025-05-15T20:49:05.149Z] [STDOUT] Fetching invoices for subscription ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:49:05.149Z] [STDOUT] Found 2 invoices for subscription: sub_QVIG6dAuP0UXXn
[2025-05-15T20:49:05.149Z] [STDOUT] Transaction for payment pay_QVILKDuy9v6ovq already exists in database (1 records), skipping
[2025-05-15T20:49:05.149Z] [STDOUT] Transaction for payment pay_QVIGtXTXkm93W8 already exists in database (1 records), skipping
[2025-05-15T20:49:05.149Z] [STDOUT] Found 2 invoices for subscription sub_QVIG6dAuP0UXXn
[2025-05-15T20:49:05.149Z] [STDOUT] Subscription invoice synchronization complete!
[2025-05-15T20:49:05.149Z] [STDOUT] Processed 4 subscriptions
[2025-05-15T20:49:05.149Z] [STDOUT] Success: 4, Errors: 0
[2025-05-15T20:49:05.149Z] [STDOUT] Added 0 new transactions
[2025-05-15T20:49:05.149Z] [STDOUT] Script execution completed
[2025-05-15T20:49:05.149Z] Synchronization completed successfully
[2025-05-15T20:49:05.149Z] Next sync scheduled in 5 seconds
[2025-05-15T20:49:09.947Z] Starting invoice synchronization...
[2025-05-15T20:49:09.947Z] Running sync script: /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:49:09.947Z] Executing command: cd /Users/raja/Development/ProsumeAI/server && npx tsx /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:49:10.267Z] [STDOUT] Using database connection: postgres://***:***@localhost:5432/prosumeai
[2025-05-15T20:49:10.267Z] [STDOUT] Starting subscription invoice synchronization...
[2025-05-15T20:49:10.267Z] [STDOUT] Found 4 active Razorpay subscriptions to sync
[2025-05-15T20:49:10.267Z] [STDOUT] Processing subscription 20 with Razorpay ID: sub_QUxcCis3igdqUA
[2025-05-15T20:49:10.267Z] [STDOUT] Database schema validated successfully
[2025-05-15T20:49:10.267Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:49:10.267Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:49:10.267Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:49:10.267Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:49:10.267Z] [STDOUT] Subscription 20 has 1 existing transactions
[2025-05-15T20:49:10.267Z] [STDOUT] Fetching invoices for subscription ID: sub_QUxcCis3igdqUA
[2025-05-15T20:49:10.267Z] [STDOUT] Found 0 invoices for subscription: sub_QUxcCis3igdqUA
[2025-05-15T20:49:10.267Z] [STDOUT] Found 0 invoices for subscription sub_QUxcCis3igdqUA
[2025-05-15T20:49:10.267Z] [STDOUT] Processing subscription 24 with Razorpay ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:49:10.267Z] [STDOUT] Subscription 24 has 1 existing transactions
[2025-05-15T20:49:10.267Z] [STDOUT] Fetching invoices for subscription ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:49:10.267Z] [STDOUT] Found 1 invoices for subscription: sub_QV05DCrgh3A2rL
[2025-05-15T20:49:10.267Z] [STDOUT] Transaction for payment pay_QV05q44fHQzL1q already exists in database (1 records), skipping
[2025-05-15T20:49:10.267Z] [STDOUT] Found 1 invoices for subscription sub_QV05DCrgh3A2rL
[2025-05-15T20:49:10.267Z] [STDOUT] Processing subscription 25 with Razorpay ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:49:10.267Z] [STDOUT] Subscription 25 has 2 existing transactions
[2025-05-15T20:49:10.267Z] [STDOUT] Fetching invoices for subscription ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:49:10.267Z] [STDOUT] Found 1 invoices for subscription: sub_QV1W0JNq2cOk7s
[2025-05-15T20:49:10.267Z] [STDOUT] Transaction for payment pay_QV1WoyCgCY23iO already exists in database (2 records), skipping
[2025-05-15T20:49:10.267Z] [STDOUT] Found 1 invoices for subscription sub_QV1W0JNq2cOk7s
[2025-05-15T20:49:10.267Z] [STDOUT] Processing subscription 26 with Razorpay ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:49:10.267Z] [STDOUT] Subscription 26 has 2 existing transactions
[2025-05-15T20:49:10.267Z] [STDOUT] Fetching invoices for subscription ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:49:10.267Z] [STDOUT] Found 2 invoices for subscription: sub_QVIG6dAuP0UXXn
[2025-05-15T20:49:10.267Z] [STDOUT] Transaction for payment pay_QVILKDuy9v6ovq already exists in database (1 records), skipping
[2025-05-15T20:49:10.267Z] [STDOUT] Transaction for payment pay_QVIGtXTXkm93W8 already exists in database (1 records), skipping
[2025-05-15T20:49:10.267Z] [STDOUT] Found 2 invoices for subscription sub_QVIG6dAuP0UXXn
[2025-05-15T20:49:10.267Z] [STDOUT] Subscription invoice synchronization complete!
[2025-05-15T20:49:10.267Z] [STDOUT] Processed 4 subscriptions
[2025-05-15T20:49:10.267Z] [STDOUT] Success: 4, Errors: 0
[2025-05-15T20:49:10.267Z] [STDOUT] Added 0 new transactions
[2025-05-15T20:49:10.267Z] [STDOUT] Script execution completed
[2025-05-15T20:49:10.267Z] Synchronization completed successfully
[2025-05-15T20:49:10.267Z] Next sync scheduled in 5 seconds
[2025-05-15T20:49:14.948Z] Starting invoice synchronization...
[2025-05-15T20:49:14.949Z] Running sync script: /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:49:14.949Z] Executing command: cd /Users/raja/Development/ProsumeAI/server && npx tsx /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:49:14.992Z] [STDOUT] Using database connection: postgres://***:***@localhost:5432/prosumeai
[2025-05-15T20:49:14.992Z] [STDOUT] Starting subscription invoice synchronization...
[2025-05-15T20:49:14.992Z] [STDOUT] Database schema validated successfully
[2025-05-15T20:49:14.992Z] [STDOUT] Found 4 active Razorpay subscriptions to sync
[2025-05-15T20:49:14.992Z] [STDOUT] Processing subscription 20 with Razorpay ID: sub_QUxcCis3igdqUA
[2025-05-15T20:49:14.992Z] [STDOUT] Subscription 20 has 1 existing transactions
[2025-05-15T20:49:14.992Z] [STDOUT] Razorpay initialization in progress, waiting...
[2025-05-15T20:49:14.992Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:49:14.992Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:49:14.992Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:49:14.993Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:49:14.993Z] [STDOUT] Fetching invoices for subscription ID: sub_QUxcCis3igdqUA
[2025-05-15T20:49:14.993Z] [STDOUT] Found 0 invoices for subscription: sub_QUxcCis3igdqUA
[2025-05-15T20:49:14.993Z] [STDOUT] Found 0 invoices for subscription sub_QUxcCis3igdqUA
[2025-05-15T20:49:14.993Z] [STDOUT] Processing subscription 24 with Razorpay ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:49:14.993Z] [STDOUT] Subscription 24 has 1 existing transactions
[2025-05-15T20:49:14.993Z] [STDOUT] Fetching invoices for subscription ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:49:14.993Z] [STDOUT] Found 1 invoices for subscription: sub_QV05DCrgh3A2rL
[2025-05-15T20:49:14.993Z] [STDOUT] Transaction for payment pay_QV05q44fHQzL1q already exists in database (1 records), skipping
[2025-05-15T20:49:14.993Z] [STDOUT] Found 1 invoices for subscription sub_QV05DCrgh3A2rL
[2025-05-15T20:49:14.993Z] [STDOUT] Processing subscription 25 with Razorpay ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:49:14.993Z] [STDOUT] Subscription 25 has 2 existing transactions
[2025-05-15T20:49:14.993Z] [STDOUT] Fetching invoices for subscription ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:49:14.993Z] [STDOUT] Found 1 invoices for subscription: sub_QV1W0JNq2cOk7s
[2025-05-15T20:49:14.993Z] [STDOUT] Transaction for payment pay_QV1WoyCgCY23iO already exists in database (2 records), skipping
[2025-05-15T20:49:14.993Z] [STDOUT] Found 1 invoices for subscription sub_QV1W0JNq2cOk7s
[2025-05-15T20:49:14.993Z] [STDOUT] Processing subscription 26 with Razorpay ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:49:14.993Z] [STDOUT] Subscription 26 has 2 existing transactions
[2025-05-15T20:49:14.993Z] [STDOUT] Fetching invoices for subscription ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:49:14.993Z] [STDOUT] Found 2 invoices for subscription: sub_QVIG6dAuP0UXXn
[2025-05-15T20:49:14.993Z] [STDOUT] Transaction for payment pay_QVILKDuy9v6ovq already exists in database (1 records), skipping
[2025-05-15T20:49:14.993Z] [STDOUT] Transaction for payment pay_QVIGtXTXkm93W8 already exists in database (1 records), skipping
[2025-05-15T20:49:14.993Z] [STDOUT] Found 2 invoices for subscription sub_QVIG6dAuP0UXXn
[2025-05-15T20:49:14.993Z] [STDOUT] Subscription invoice synchronization complete!
[2025-05-15T20:49:14.993Z] [STDOUT] Processed 4 subscriptions
[2025-05-15T20:49:14.993Z] [STDOUT] Success: 4, Errors: 0
[2025-05-15T20:49:14.993Z] [STDOUT] Added 0 new transactions
[2025-05-15T20:49:14.993Z] [STDOUT] Script execution completed
[2025-05-15T20:49:14.993Z] Synchronization completed successfully
[2025-05-15T20:49:14.993Z] Next sync scheduled in 5 seconds
[2025-05-15T20:49:19.400Z] [STDOUT] Using database connection: postgres://***:***@localhost:5432/prosumeai
[2025-05-15T20:49:19.400Z] [STDOUT] Starting subscription invoice synchronization...
[2025-05-15T20:49:19.400Z] [STDOUT] Database schema validated successfully
[2025-05-15T20:49:19.400Z] [STDOUT] Found 4 active Razorpay subscriptions to sync
[2025-05-15T20:49:19.400Z] [STDOUT] Processing subscription 20 with Razorpay ID: sub_QUxcCis3igdqUA
[2025-05-15T20:49:19.400Z] [STDOUT] Subscription 20 has 1 existing transactions
[2025-05-15T20:49:19.400Z] [STDOUT] Razorpay initialization in progress, waiting...
[2025-05-15T20:49:19.400Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:49:19.400Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:49:19.400Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:49:19.400Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:49:19.400Z] [STDOUT] Fetching invoices for subscription ID: sub_QUxcCis3igdqUA
[2025-05-15T20:49:19.400Z] [STDOUT] Found 0 invoices for subscription: sub_QUxcCis3igdqUA
[2025-05-15T20:49:19.400Z] [STDOUT] Found 0 invoices for subscription sub_QUxcCis3igdqUA
[2025-05-15T20:49:19.400Z] [STDOUT] Processing subscription 24 with Razorpay ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:49:19.400Z] [STDOUT] Subscription 24 has 1 existing transactions
[2025-05-15T20:49:19.400Z] [STDOUT] Fetching invoices for subscription ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:49:19.400Z] [STDOUT] Found 1 invoices for subscription: sub_QV05DCrgh3A2rL
[2025-05-15T20:49:19.400Z] [STDOUT] Transaction for payment pay_QV05q44fHQzL1q already exists in database (1 records), skipping
[2025-05-15T20:49:19.400Z] [STDOUT] Found 1 invoices for subscription sub_QV05DCrgh3A2rL
[2025-05-15T20:49:19.400Z] [STDOUT] Processing subscription 25 with Razorpay ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:49:19.400Z] [STDOUT] Subscription 25 has 2 existing transactions
[2025-05-15T20:49:19.400Z] [STDOUT] Fetching invoices for subscription ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:49:19.400Z] [STDOUT] Found 1 invoices for subscription: sub_QV1W0JNq2cOk7s
[2025-05-15T20:49:19.400Z] [STDOUT] Transaction for payment pay_QV1WoyCgCY23iO already exists in database (2 records), skipping
[2025-05-15T20:49:19.400Z] [STDOUT] Found 1 invoices for subscription sub_QV1W0JNq2cOk7s
[2025-05-15T20:49:19.400Z] [STDOUT] Processing subscription 26 with Razorpay ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:49:19.400Z] [STDOUT] Subscription 26 has 2 existing transactions
[2025-05-15T20:49:19.400Z] [STDOUT] Fetching invoices for subscription ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:49:19.400Z] [STDOUT] Found 2 invoices for subscription: sub_QVIG6dAuP0UXXn
[2025-05-15T20:49:19.401Z] [STDOUT] Transaction for payment pay_QVILKDuy9v6ovq already exists in database (1 records), skipping
[2025-05-15T20:49:19.401Z] [STDOUT] Transaction for payment pay_QVIGtXTXkm93W8 already exists in database (1 records), skipping
[2025-05-15T20:49:19.401Z] [STDOUT] Found 2 invoices for subscription sub_QVIG6dAuP0UXXn
[2025-05-15T20:49:19.401Z] [STDOUT] Subscription invoice synchronization complete!
[2025-05-15T20:49:19.401Z] [STDOUT] Processed 4 subscriptions
[2025-05-15T20:49:19.401Z] [STDOUT] Success: 4, Errors: 0
[2025-05-15T20:49:19.401Z] [STDOUT] Added 0 new transactions
[2025-05-15T20:49:19.401Z] [STDOUT] Script execution completed
[2025-05-15T20:49:19.401Z] Synchronization completed successfully
[2025-05-15T20:49:19.401Z] Next sync scheduled in 5 seconds
[2025-05-15T20:49:19.949Z] Starting invoice synchronization...
[2025-05-15T20:49:19.950Z] Running sync script: /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:49:19.950Z] Executing command: cd /Users/raja/Development/ProsumeAI/server && npx tsx /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:49:24.390Z] [STDOUT] Using database connection: postgres://***:***@localhost:5432/prosumeai
[2025-05-15T20:49:24.390Z] [STDOUT] Starting subscription invoice synchronization...
[2025-05-15T20:49:24.390Z] [STDOUT] Found 4 active Razorpay subscriptions to sync
[2025-05-15T20:49:24.391Z] [STDOUT] Processing subscription 20 with Razorpay ID: sub_QUxcCis3igdqUA
[2025-05-15T20:49:24.391Z] [STDOUT] Database schema validated successfully
[2025-05-15T20:49:24.391Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:49:24.391Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:49:24.391Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:49:24.391Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:49:24.391Z] [STDOUT] Subscription 20 has 1 existing transactions
[2025-05-15T20:49:24.391Z] [STDOUT] Fetching invoices for subscription ID: sub_QUxcCis3igdqUA
[2025-05-15T20:49:24.391Z] [STDOUT] Found 0 invoices for subscription: sub_QUxcCis3igdqUA
[2025-05-15T20:49:24.391Z] [STDOUT] Found 0 invoices for subscription sub_QUxcCis3igdqUA
[2025-05-15T20:49:24.391Z] [STDOUT] Processing subscription 24 with Razorpay ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:49:24.391Z] [STDOUT] Subscription 24 has 1 existing transactions
[2025-05-15T20:49:24.391Z] [STDOUT] Fetching invoices for subscription ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:49:24.391Z] [STDOUT] Found 1 invoices for subscription: sub_QV05DCrgh3A2rL
[2025-05-15T20:49:24.391Z] [STDOUT] Transaction for payment pay_QV05q44fHQzL1q already exists in database (1 records), skipping
[2025-05-15T20:49:24.391Z] [STDOUT] Found 1 invoices for subscription sub_QV05DCrgh3A2rL
[2025-05-15T20:49:24.391Z] [STDOUT] Processing subscription 25 with Razorpay ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:49:24.391Z] [STDOUT] Subscription 25 has 2 existing transactions
[2025-05-15T20:49:24.391Z] [STDOUT] Fetching invoices for subscription ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:49:24.391Z] [STDOUT] Found 1 invoices for subscription: sub_QV1W0JNq2cOk7s
[2025-05-15T20:49:24.391Z] [STDOUT] Transaction for payment pay_QV1WoyCgCY23iO already exists in database (2 records), skipping
[2025-05-15T20:49:24.391Z] [STDOUT] Found 1 invoices for subscription sub_QV1W0JNq2cOk7s
[2025-05-15T20:49:24.391Z] [STDOUT] Processing subscription 26 with Razorpay ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:49:24.391Z] [STDOUT] Subscription 26 has 2 existing transactions
[2025-05-15T20:49:24.391Z] [STDOUT] Fetching invoices for subscription ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:49:24.391Z] [STDOUT] Found 2 invoices for subscription: sub_QVIG6dAuP0UXXn
[2025-05-15T20:49:24.391Z] [STDOUT] Transaction for payment pay_QVILKDuy9v6ovq already exists in database (1 records), skipping
[2025-05-15T20:49:24.391Z] [STDOUT] Transaction for payment pay_QVIGtXTXkm93W8 already exists in database (1 records), skipping
[2025-05-15T20:49:24.391Z] [STDOUT] Found 2 invoices for subscription sub_QVIG6dAuP0UXXn
[2025-05-15T20:49:24.391Z] [STDOUT] Subscription invoice synchronization complete!
[2025-05-15T20:49:24.391Z] [STDOUT] Processed 4 subscriptions
[2025-05-15T20:49:24.391Z] [STDOUT] Success: 4, Errors: 0
[2025-05-15T20:49:24.391Z] [STDOUT] Added 0 new transactions
[2025-05-15T20:49:24.391Z] [STDOUT] Script execution completed
[2025-05-15T20:49:24.391Z] Synchronization completed successfully
[2025-05-15T20:49:24.391Z] Next sync scheduled in 5 seconds
[2025-05-15T20:49:24.950Z] Starting invoice synchronization...
[2025-05-15T20:49:24.951Z] Running sync script: /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:49:24.951Z] Executing command: cd /Users/raja/Development/ProsumeAI/server && npx tsx /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:49:29.952Z] Starting invoice synchronization...
[2025-05-15T20:49:29.952Z] Running sync script: /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:49:29.952Z] Executing command: cd /Users/raja/Development/ProsumeAI/server && npx tsx /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:49:30.191Z] [STDOUT] Using database connection: postgres://***:***@localhost:5432/prosumeai
[2025-05-15T20:49:30.191Z] [STDOUT] Starting subscription invoice synchronization...
[2025-05-15T20:49:30.191Z] [STDOUT] Database schema validated successfully
[2025-05-15T20:49:30.191Z] [STDOUT] Found 4 active Razorpay subscriptions to sync
[2025-05-15T20:49:30.191Z] [STDOUT] Processing subscription 20 with Razorpay ID: sub_QUxcCis3igdqUA
[2025-05-15T20:49:30.191Z] [STDOUT] Subscription 20 has 1 existing transactions
[2025-05-15T20:49:30.191Z] [STDOUT] Razorpay initialization in progress, waiting...
[2025-05-15T20:49:30.191Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:49:30.191Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:49:30.191Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:49:30.192Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:49:30.192Z] [STDOUT] Fetching invoices for subscription ID: sub_QUxcCis3igdqUA
[2025-05-15T20:49:30.192Z] [STDOUT] Found 0 invoices for subscription: sub_QUxcCis3igdqUA
[2025-05-15T20:49:30.192Z] [STDOUT] Found 0 invoices for subscription sub_QUxcCis3igdqUA
[2025-05-15T20:49:30.192Z] [STDOUT] Processing subscription 24 with Razorpay ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:49:30.192Z] [STDOUT] Subscription 24 has 1 existing transactions
[2025-05-15T20:49:30.192Z] [STDOUT] Fetching invoices for subscription ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:49:30.192Z] [STDOUT] Found 1 invoices for subscription: sub_QV05DCrgh3A2rL
[2025-05-15T20:49:30.192Z] [STDOUT] Transaction for payment pay_QV05q44fHQzL1q already exists in database (1 records), skipping
[2025-05-15T20:49:30.192Z] [STDOUT] Found 1 invoices for subscription sub_QV05DCrgh3A2rL
[2025-05-15T20:49:30.192Z] [STDOUT] Processing subscription 25 with Razorpay ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:49:30.192Z] [STDOUT] Subscription 25 has 2 existing transactions
[2025-05-15T20:49:30.192Z] [STDOUT] Fetching invoices for subscription ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:49:30.192Z] [STDOUT] Found 1 invoices for subscription: sub_QV1W0JNq2cOk7s
[2025-05-15T20:49:30.192Z] [STDOUT] Transaction for payment pay_QV1WoyCgCY23iO already exists in database (2 records), skipping
[2025-05-15T20:49:30.192Z] [STDOUT] Found 1 invoices for subscription sub_QV1W0JNq2cOk7s
[2025-05-15T20:49:30.192Z] [STDOUT] Processing subscription 26 with Razorpay ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:49:30.192Z] [STDOUT] Subscription 26 has 2 existing transactions
[2025-05-15T20:49:30.192Z] [STDOUT] Fetching invoices for subscription ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:49:30.192Z] [STDOUT] Found 2 invoices for subscription: sub_QVIG6dAuP0UXXn
[2025-05-15T20:49:30.192Z] [STDOUT] Transaction for payment pay_QVILKDuy9v6ovq already exists in database (1 records), skipping
[2025-05-15T20:49:30.192Z] [STDOUT] Transaction for payment pay_QVIGtXTXkm93W8 already exists in database (1 records), skipping
[2025-05-15T20:49:30.192Z] [STDOUT] Found 2 invoices for subscription sub_QVIG6dAuP0UXXn
[2025-05-15T20:49:30.192Z] [STDOUT] Subscription invoice synchronization complete!
[2025-05-15T20:49:30.192Z] [STDOUT] Processed 4 subscriptions
[2025-05-15T20:49:30.192Z] [STDOUT] Success: 4, Errors: 0
[2025-05-15T20:49:30.192Z] [STDOUT] Added 0 new transactions
[2025-05-15T20:49:30.192Z] [STDOUT] Script execution completed
[2025-05-15T20:49:30.192Z] Synchronization completed successfully
[2025-05-15T20:49:30.192Z] Next sync scheduled in 5 seconds
[2025-05-15T20:49:34.952Z] Starting invoice synchronization...
[2025-05-15T20:49:34.952Z] Running sync script: /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:49:34.952Z] Executing command: cd /Users/raja/Development/ProsumeAI/server && npx tsx /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:49:35.132Z] [STDOUT] Using database connection: postgres://***:***@localhost:5432/prosumeai
[2025-05-15T20:49:35.132Z] [STDOUT] Starting subscription invoice synchronization...
[2025-05-15T20:49:35.132Z] [STDOUT] Database schema validated successfully
[2025-05-15T20:49:35.133Z] [STDOUT] Found 4 active Razorpay subscriptions to sync
[2025-05-15T20:49:35.133Z] [STDOUT] Processing subscription 20 with Razorpay ID: sub_QUxcCis3igdqUA
[2025-05-15T20:49:35.133Z] [STDOUT] Subscription 20 has 1 existing transactions
[2025-05-15T20:49:35.133Z] [STDOUT] Razorpay initialization in progress, waiting...
[2025-05-15T20:49:35.133Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:49:35.133Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:49:35.133Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:49:35.133Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:49:35.133Z] [STDOUT] Fetching invoices for subscription ID: sub_QUxcCis3igdqUA
[2025-05-15T20:49:35.133Z] [STDOUT] Found 0 invoices for subscription: sub_QUxcCis3igdqUA
[2025-05-15T20:49:35.133Z] [STDOUT] Found 0 invoices for subscription sub_QUxcCis3igdqUA
[2025-05-15T20:49:35.133Z] [STDOUT] Processing subscription 24 with Razorpay ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:49:35.133Z] [STDOUT] Subscription 24 has 1 existing transactions
[2025-05-15T20:49:35.133Z] [STDOUT] Fetching invoices for subscription ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:49:35.133Z] [STDOUT] Found 1 invoices for subscription: sub_QV05DCrgh3A2rL
[2025-05-15T20:49:35.133Z] [STDOUT] Transaction for payment pay_QV05q44fHQzL1q already exists in database (1 records), skipping
[2025-05-15T20:49:35.133Z] [STDOUT] Found 1 invoices for subscription sub_QV05DCrgh3A2rL
[2025-05-15T20:49:35.133Z] [STDOUT] Processing subscription 25 with Razorpay ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:49:35.133Z] [STDOUT] Subscription 25 has 2 existing transactions
[2025-05-15T20:49:35.133Z] [STDOUT] Fetching invoices for subscription ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:49:35.133Z] [STDOUT] Found 1 invoices for subscription: sub_QV1W0JNq2cOk7s
[2025-05-15T20:49:35.133Z] [STDOUT] Transaction for payment pay_QV1WoyCgCY23iO already exists in database (2 records), skipping
[2025-05-15T20:49:35.133Z] [STDOUT] Found 1 invoices for subscription sub_QV1W0JNq2cOk7s
[2025-05-15T20:49:35.133Z] [STDOUT] Processing subscription 26 with Razorpay ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:49:35.133Z] [STDOUT] Subscription 26 has 2 existing transactions
[2025-05-15T20:49:35.133Z] [STDOUT] Fetching invoices for subscription ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:49:35.133Z] [STDOUT] Found 2 invoices for subscription: sub_QVIG6dAuP0UXXn
[2025-05-15T20:49:35.133Z] [STDOUT] Transaction for payment pay_QVILKDuy9v6ovq already exists in database (1 records), skipping
[2025-05-15T20:49:35.133Z] [STDOUT] Transaction for payment pay_QVIGtXTXkm93W8 already exists in database (1 records), skipping
[2025-05-15T20:49:35.133Z] [STDOUT] Found 2 invoices for subscription sub_QVIG6dAuP0UXXn
[2025-05-15T20:49:35.133Z] [STDOUT] Subscription invoice synchronization complete!
[2025-05-15T20:49:35.133Z] [STDOUT] Processed 4 subscriptions
[2025-05-15T20:49:35.133Z] [STDOUT] Success: 4, Errors: 0
[2025-05-15T20:49:35.133Z] [STDOUT] Added 0 new transactions
[2025-05-15T20:49:35.133Z] [STDOUT] Script execution completed
[2025-05-15T20:49:35.133Z] Synchronization completed successfully
[2025-05-15T20:49:35.133Z] Next sync scheduled in 5 seconds
[2025-05-15T20:49:39.481Z] [STDOUT] Using database connection: postgres://***:***@localhost:5432/prosumeai
[2025-05-15T20:49:39.481Z] [STDOUT] Starting subscription invoice synchronization...
[2025-05-15T20:49:39.481Z] [STDOUT] Database schema validated successfully
[2025-05-15T20:49:39.481Z] [STDOUT] Found 4 active Razorpay subscriptions to sync
[2025-05-15T20:49:39.481Z] [STDOUT] Processing subscription 20 with Razorpay ID: sub_QUxcCis3igdqUA
[2025-05-15T20:49:39.481Z] [STDOUT] Subscription 20 has 1 existing transactions
[2025-05-15T20:49:39.481Z] [STDOUT] Razorpay initialization in progress, waiting...
[2025-05-15T20:49:39.482Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:49:39.482Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:49:39.482Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:49:39.482Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:49:39.482Z] [STDOUT] Fetching invoices for subscription ID: sub_QUxcCis3igdqUA
[2025-05-15T20:49:39.482Z] [STDOUT] Found 0 invoices for subscription: sub_QUxcCis3igdqUA
[2025-05-15T20:49:39.482Z] [STDOUT] Found 0 invoices for subscription sub_QUxcCis3igdqUA
[2025-05-15T20:49:39.482Z] [STDOUT] Processing subscription 24 with Razorpay ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:49:39.482Z] [STDOUT] Subscription 24 has 1 existing transactions
[2025-05-15T20:49:39.482Z] [STDOUT] Fetching invoices for subscription ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:49:39.482Z] [STDOUT] Found 1 invoices for subscription: sub_QV05DCrgh3A2rL
[2025-05-15T20:49:39.482Z] [STDOUT] Transaction for payment pay_QV05q44fHQzL1q already exists in database (1 records), skipping
[2025-05-15T20:49:39.482Z] [STDOUT] Found 1 invoices for subscription sub_QV05DCrgh3A2rL
[2025-05-15T20:49:39.482Z] [STDOUT] Processing subscription 25 with Razorpay ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:49:39.482Z] [STDOUT] Subscription 25 has 2 existing transactions
[2025-05-15T20:49:39.482Z] [STDOUT] Fetching invoices for subscription ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:49:39.482Z] [STDOUT] Found 1 invoices for subscription: sub_QV1W0JNq2cOk7s
[2025-05-15T20:49:39.482Z] [STDOUT] Transaction for payment pay_QV1WoyCgCY23iO already exists in database (2 records), skipping
[2025-05-15T20:49:39.482Z] [STDOUT] Found 1 invoices for subscription sub_QV1W0JNq2cOk7s
[2025-05-15T20:49:39.482Z] [STDOUT] Processing subscription 26 with Razorpay ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:49:39.482Z] [STDOUT] Subscription 26 has 2 existing transactions
[2025-05-15T20:49:39.482Z] [STDOUT] Fetching invoices for subscription ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:49:39.482Z] [STDOUT] Found 2 invoices for subscription: sub_QVIG6dAuP0UXXn
[2025-05-15T20:49:39.482Z] [STDOUT] Transaction for payment pay_QVILKDuy9v6ovq already exists in database (1 records), skipping
[2025-05-15T20:49:39.482Z] [STDOUT] Transaction for payment pay_QVIGtXTXkm93W8 already exists in database (1 records), skipping
[2025-05-15T20:49:39.482Z] [STDOUT] Found 2 invoices for subscription sub_QVIG6dAuP0UXXn
[2025-05-15T20:49:39.482Z] [STDOUT] Subscription invoice synchronization complete!
[2025-05-15T20:49:39.482Z] [STDOUT] Processed 4 subscriptions
[2025-05-15T20:49:39.482Z] [STDOUT] Success: 4, Errors: 0
[2025-05-15T20:49:39.482Z] [STDOUT] Added 0 new transactions
[2025-05-15T20:49:39.482Z] [STDOUT] Script execution completed
[2025-05-15T20:49:39.482Z] Synchronization completed successfully
[2025-05-15T20:49:39.482Z] Next sync scheduled in 5 seconds
[2025-05-15T20:49:39.953Z] Starting invoice synchronization...
[2025-05-15T20:49:39.954Z] Running sync script: /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:49:39.954Z] Executing command: cd /Users/raja/Development/ProsumeAI/server && npx tsx /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:49:44.954Z] Starting invoice synchronization...
[2025-05-15T20:49:44.955Z] Running sync script: /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:49:44.955Z] Executing command: cd /Users/raja/Development/ProsumeAI/server && npx tsx /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:49:49.698Z] [STDOUT] Using database connection: postgres://***:***@localhost:5432/prosumeai
[2025-05-15T20:49:49.698Z] [STDOUT] Starting subscription invoice synchronization...
[2025-05-15T20:49:49.698Z] [STDOUT] Database schema validated successfully
[2025-05-15T20:49:49.698Z] [STDOUT] Found 4 active Razorpay subscriptions to sync
[2025-05-15T20:49:49.698Z] [STDOUT] Processing subscription 20 with Razorpay ID: sub_QUxcCis3igdqUA
[2025-05-15T20:49:49.698Z] [STDOUT] Subscription 20 has 1 existing transactions
[2025-05-15T20:49:49.698Z] [STDOUT] Razorpay initialization in progress, waiting...
[2025-05-15T20:49:49.698Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:49:49.698Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:49:49.698Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:49:49.698Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:49:49.698Z] [STDOUT] Fetching invoices for subscription ID: sub_QUxcCis3igdqUA
[2025-05-15T20:49:49.698Z] [STDOUT] Found 0 invoices for subscription: sub_QUxcCis3igdqUA
[2025-05-15T20:49:49.698Z] [STDOUT] Found 0 invoices for subscription sub_QUxcCis3igdqUA
[2025-05-15T20:49:49.698Z] [STDOUT] Processing subscription 24 with Razorpay ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:49:49.698Z] [STDOUT] Subscription 24 has 1 existing transactions
[2025-05-15T20:49:49.698Z] [STDOUT] Fetching invoices for subscription ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:49:49.698Z] [STDOUT] Found 1 invoices for subscription: sub_QV05DCrgh3A2rL
[2025-05-15T20:49:49.698Z] [STDOUT] Transaction for payment pay_QV05q44fHQzL1q already exists in database (1 records), skipping
[2025-05-15T20:49:49.698Z] [STDOUT] Found 1 invoices for subscription sub_QV05DCrgh3A2rL
[2025-05-15T20:49:49.698Z] [STDOUT] Processing subscription 25 with Razorpay ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:49:49.698Z] [STDOUT] Subscription 25 has 2 existing transactions
[2025-05-15T20:49:49.698Z] [STDOUT] Fetching invoices for subscription ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:49:49.698Z] [STDOUT] Found 1 invoices for subscription: sub_QV1W0JNq2cOk7s
[2025-05-15T20:49:49.698Z] [STDOUT] Transaction for payment pay_QV1WoyCgCY23iO already exists in database (2 records), skipping
[2025-05-15T20:49:49.698Z] [STDOUT] Found 1 invoices for subscription sub_QV1W0JNq2cOk7s
[2025-05-15T20:49:49.698Z] [STDOUT] Processing subscription 26 with Razorpay ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:49:49.698Z] [STDOUT] Subscription 26 has 2 existing transactions
[2025-05-15T20:49:49.698Z] [STDOUT] Fetching invoices for subscription ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:49:49.698Z] [STDOUT] Found 2 invoices for subscription: sub_QVIG6dAuP0UXXn
[2025-05-15T20:49:49.698Z] [STDOUT] Transaction for payment pay_QVILKDuy9v6ovq already exists in database (1 records), skipping
[2025-05-15T20:49:49.698Z] [STDOUT] Transaction for payment pay_QVIGtXTXkm93W8 already exists in database (1 records), skipping
[2025-05-15T20:49:49.698Z] [STDOUT] Found 2 invoices for subscription sub_QVIG6dAuP0UXXn
[2025-05-15T20:49:49.698Z] [STDOUT] Subscription invoice synchronization complete!
[2025-05-15T20:49:49.698Z] [STDOUT] Processed 4 subscriptions
[2025-05-15T20:49:49.698Z] [STDOUT] Success: 4, Errors: 0
[2025-05-15T20:49:49.698Z] [STDOUT] Added 0 new transactions
[2025-05-15T20:49:49.698Z] [STDOUT] Script execution completed
[2025-05-15T20:49:49.698Z] Synchronization completed successfully
[2025-05-15T20:49:49.698Z] Next sync scheduled in 5 seconds
[2025-05-15T20:49:49.954Z] Starting invoice synchronization...
[2025-05-15T20:49:49.954Z] Running sync script: /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:49:49.954Z] Executing command: cd /Users/raja/Development/ProsumeAI/server && npx tsx /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:49:53.364Z] [STDOUT] Using database connection: postgres://***:***@localhost:5432/prosumeai
[2025-05-15T20:49:53.364Z] [STDOUT] Starting subscription invoice synchronization...
[2025-05-15T20:49:53.364Z] [STDOUT] Database schema validated successfully
[2025-05-15T20:49:53.364Z] [STDOUT] Found 4 active Razorpay subscriptions to sync
[2025-05-15T20:49:53.364Z] [STDOUT] Processing subscription 20 with Razorpay ID: sub_QUxcCis3igdqUA
[2025-05-15T20:49:53.364Z] [STDOUT] Subscription 20 has 1 existing transactions
[2025-05-15T20:49:53.364Z] [STDOUT] Razorpay initialization in progress, waiting...
[2025-05-15T20:49:53.364Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:49:53.364Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:49:53.364Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:49:53.364Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:49:53.364Z] [STDOUT] Fetching invoices for subscription ID: sub_QUxcCis3igdqUA
[2025-05-15T20:49:53.364Z] [STDOUT] Found 0 invoices for subscription: sub_QUxcCis3igdqUA
[2025-05-15T20:49:53.364Z] [STDOUT] Found 0 invoices for subscription sub_QUxcCis3igdqUA
[2025-05-15T20:49:53.364Z] [STDOUT] Processing subscription 24 with Razorpay ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:49:53.364Z] [STDOUT] Subscription 24 has 1 existing transactions
[2025-05-15T20:49:53.364Z] [STDOUT] Fetching invoices for subscription ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:49:53.364Z] [STDOUT] Found 1 invoices for subscription: sub_QV05DCrgh3A2rL
[2025-05-15T20:49:53.364Z] [STDOUT] Transaction for payment pay_QV05q44fHQzL1q already exists in database (1 records), skipping
[2025-05-15T20:49:53.364Z] [STDOUT] Found 1 invoices for subscription sub_QV05DCrgh3A2rL
[2025-05-15T20:49:53.364Z] [STDOUT] Processing subscription 25 with Razorpay ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:49:53.364Z] [STDOUT] Subscription 25 has 2 existing transactions
[2025-05-15T20:49:53.364Z] [STDOUT] Fetching invoices for subscription ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:49:53.364Z] [STDOUT] Found 1 invoices for subscription: sub_QV1W0JNq2cOk7s
[2025-05-15T20:49:53.364Z] [STDOUT] Transaction for payment pay_QV1WoyCgCY23iO already exists in database (2 records), skipping
[2025-05-15T20:49:53.364Z] [STDOUT] Found 1 invoices for subscription sub_QV1W0JNq2cOk7s
[2025-05-15T20:49:53.364Z] [STDOUT] Processing subscription 26 with Razorpay ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:49:53.364Z] [STDOUT] Subscription 26 has 2 existing transactions
[2025-05-15T20:49:53.364Z] [STDOUT] Fetching invoices for subscription ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:49:53.364Z] [STDOUT] Found 2 invoices for subscription: sub_QVIG6dAuP0UXXn
[2025-05-15T20:49:53.364Z] [STDOUT] Transaction for payment pay_QVILKDuy9v6ovq already exists in database (1 records), skipping
[2025-05-15T20:49:53.364Z] [STDOUT] Transaction for payment pay_QVIGtXTXkm93W8 already exists in database (1 records), skipping
[2025-05-15T20:49:53.364Z] [STDOUT] Found 2 invoices for subscription sub_QVIG6dAuP0UXXn
[2025-05-15T20:49:53.364Z] [STDOUT] Subscription invoice synchronization complete!
[2025-05-15T20:49:53.364Z] [STDOUT] Processed 4 subscriptions
[2025-05-15T20:49:53.364Z] [STDOUT] Success: 4, Errors: 0
[2025-05-15T20:49:53.364Z] [STDOUT] Added 0 new transactions
[2025-05-15T20:49:53.364Z] [STDOUT] Script execution completed
[2025-05-15T20:49:53.364Z] Synchronization completed successfully
[2025-05-15T20:49:53.364Z] Next sync scheduled in 5 seconds
[2025-05-15T20:49:54.179Z] [STDOUT] Using database connection: postgres://***:***@localhost:5432/prosumeai
[2025-05-15T20:49:54.179Z] [STDOUT] Starting subscription invoice synchronization...
[2025-05-15T20:49:54.179Z] [STDOUT] Found 4 active Razorpay subscriptions to sync
[2025-05-15T20:49:54.179Z] [STDOUT] Processing subscription 20 with Razorpay ID: sub_QUxcCis3igdqUA
[2025-05-15T20:49:54.179Z] [STDOUT] Database schema validated successfully
[2025-05-15T20:49:54.179Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:49:54.179Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:49:54.179Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:49:54.179Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:49:54.179Z] [STDOUT] Subscription 20 has 1 existing transactions
[2025-05-15T20:49:54.179Z] [STDOUT] Fetching invoices for subscription ID: sub_QUxcCis3igdqUA
[2025-05-15T20:49:54.179Z] [STDOUT] Found 0 invoices for subscription: sub_QUxcCis3igdqUA
[2025-05-15T20:49:54.179Z] [STDOUT] Found 0 invoices for subscription sub_QUxcCis3igdqUA
[2025-05-15T20:49:54.179Z] [STDOUT] Processing subscription 24 with Razorpay ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:49:54.179Z] [STDOUT] Subscription 24 has 1 existing transactions
[2025-05-15T20:49:54.179Z] [STDOUT] Fetching invoices for subscription ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:49:54.179Z] [STDOUT] Found 1 invoices for subscription: sub_QV05DCrgh3A2rL
[2025-05-15T20:49:54.179Z] [STDOUT] Transaction for payment pay_QV05q44fHQzL1q already exists in database (1 records), skipping
[2025-05-15T20:49:54.179Z] [STDOUT] Found 1 invoices for subscription sub_QV05DCrgh3A2rL
[2025-05-15T20:49:54.179Z] [STDOUT] Processing subscription 25 with Razorpay ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:49:54.179Z] [STDOUT] Subscription 25 has 2 existing transactions
[2025-05-15T20:49:54.179Z] [STDOUT] Fetching invoices for subscription ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:49:54.179Z] [STDOUT] Found 1 invoices for subscription: sub_QV1W0JNq2cOk7s
[2025-05-15T20:49:54.179Z] [STDOUT] Transaction for payment pay_QV1WoyCgCY23iO already exists in database (2 records), skipping
[2025-05-15T20:49:54.179Z] [STDOUT] Found 1 invoices for subscription sub_QV1W0JNq2cOk7s
[2025-05-15T20:49:54.179Z] [STDOUT] Processing subscription 26 with Razorpay ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:49:54.179Z] [STDOUT] Subscription 26 has 2 existing transactions
[2025-05-15T20:49:54.179Z] [STDOUT] Fetching invoices for subscription ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:49:54.179Z] [STDOUT] Found 2 invoices for subscription: sub_QVIG6dAuP0UXXn
[2025-05-15T20:49:54.179Z] [STDOUT] Transaction for payment pay_QVILKDuy9v6ovq already exists in database (1 records), skipping
[2025-05-15T20:49:54.179Z] [STDOUT] Transaction for payment pay_QVIGtXTXkm93W8 already exists in database (1 records), skipping
[2025-05-15T20:49:54.179Z] [STDOUT] Found 2 invoices for subscription sub_QVIG6dAuP0UXXn
[2025-05-15T20:49:54.179Z] [STDOUT] Subscription invoice synchronization complete!
[2025-05-15T20:49:54.179Z] [STDOUT] Processed 4 subscriptions
[2025-05-15T20:49:54.179Z] [STDOUT] Success: 4, Errors: 0
[2025-05-15T20:49:54.179Z] [STDOUT] Added 0 new transactions
[2025-05-15T20:49:54.179Z] [STDOUT] Script execution completed
[2025-05-15T20:49:54.179Z] Synchronization completed successfully
[2025-05-15T20:49:54.179Z] Next sync scheduled in 5 seconds
[2025-05-15T20:49:54.955Z] Starting invoice synchronization...
[2025-05-15T20:49:54.955Z] Running sync script: /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:49:54.955Z] Executing command: cd /Users/raja/Development/ProsumeAI/server && npx tsx /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:49:59.515Z] [STDOUT] Using database connection: postgres://***:***@localhost:5432/prosumeai
[2025-05-15T20:49:59.516Z] [STDOUT] Starting subscription invoice synchronization...
[2025-05-15T20:49:59.516Z] [STDOUT] Database schema validated successfully
[2025-05-15T20:49:59.516Z] [STDOUT] Found 4 active Razorpay subscriptions to sync
[2025-05-15T20:49:59.516Z] [STDOUT] Processing subscription 20 with Razorpay ID: sub_QUxcCis3igdqUA
[2025-05-15T20:49:59.516Z] [STDOUT] Subscription 20 has 1 existing transactions
[2025-05-15T20:49:59.516Z] [STDOUT] Razorpay initialization in progress, waiting...
[2025-05-15T20:49:59.516Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:49:59.516Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:49:59.516Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:49:59.516Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:49:59.516Z] [STDOUT] Fetching invoices for subscription ID: sub_QUxcCis3igdqUA
[2025-05-15T20:49:59.516Z] [STDOUT] Found 0 invoices for subscription: sub_QUxcCis3igdqUA
[2025-05-15T20:49:59.516Z] [STDOUT] Found 0 invoices for subscription sub_QUxcCis3igdqUA
[2025-05-15T20:49:59.516Z] [STDOUT] Processing subscription 24 with Razorpay ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:49:59.516Z] [STDOUT] Subscription 24 has 1 existing transactions
[2025-05-15T20:49:59.516Z] [STDOUT] Fetching invoices for subscription ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:49:59.516Z] [STDOUT] Found 1 invoices for subscription: sub_QV05DCrgh3A2rL
[2025-05-15T20:49:59.516Z] [STDOUT] Transaction for payment pay_QV05q44fHQzL1q already exists in database (1 records), skipping
[2025-05-15T20:49:59.516Z] [STDOUT] Found 1 invoices for subscription sub_QV05DCrgh3A2rL
[2025-05-15T20:49:59.516Z] [STDOUT] Processing subscription 25 with Razorpay ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:49:59.516Z] [STDOUT] Subscription 25 has 2 existing transactions
[2025-05-15T20:49:59.516Z] [STDOUT] Fetching invoices for subscription ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:49:59.516Z] [STDOUT] Found 1 invoices for subscription: sub_QV1W0JNq2cOk7s
[2025-05-15T20:49:59.516Z] [STDOUT] Transaction for payment pay_QV1WoyCgCY23iO already exists in database (2 records), skipping
[2025-05-15T20:49:59.516Z] [STDOUT] Found 1 invoices for subscription sub_QV1W0JNq2cOk7s
[2025-05-15T20:49:59.516Z] [STDOUT] Processing subscription 26 with Razorpay ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:49:59.516Z] [STDOUT] Subscription 26 has 2 existing transactions
[2025-05-15T20:49:59.516Z] [STDOUT] Fetching invoices for subscription ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:49:59.516Z] [STDOUT] Found 2 invoices for subscription: sub_QVIG6dAuP0UXXn
[2025-05-15T20:49:59.516Z] [STDOUT] Transaction for payment pay_QVILKDuy9v6ovq already exists in database (1 records), skipping
[2025-05-15T20:49:59.516Z] [STDOUT] Transaction for payment pay_QVIGtXTXkm93W8 already exists in database (1 records), skipping
[2025-05-15T20:49:59.516Z] [STDOUT] Found 2 invoices for subscription sub_QVIG6dAuP0UXXn
[2025-05-15T20:49:59.516Z] [STDOUT] Subscription invoice synchronization complete!
[2025-05-15T20:49:59.516Z] [STDOUT] Processed 4 subscriptions
[2025-05-15T20:49:59.516Z] [STDOUT] Success: 4, Errors: 0
[2025-05-15T20:49:59.516Z] [STDOUT] Added 0 new transactions
[2025-05-15T20:49:59.516Z] [STDOUT] Script execution completed
[2025-05-15T20:49:59.516Z] Synchronization completed successfully
[2025-05-15T20:49:59.516Z] Next sync scheduled in 5 seconds
[2025-05-15T20:49:59.956Z] Starting invoice synchronization...
[2025-05-15T20:49:59.956Z] Running sync script: /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:49:59.957Z] Executing command: cd /Users/raja/Development/ProsumeAI/server && npx tsx /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:50:04.957Z] Starting invoice synchronization...
[2025-05-15T20:50:04.957Z] Running sync script: /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:50:04.957Z] Executing command: cd /Users/raja/Development/ProsumeAI/server && npx tsx /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:50:05.062Z] [STDOUT] Using database connection: postgres://***:***@localhost:5432/prosumeai
[2025-05-15T20:50:05.062Z] [STDOUT] Starting subscription invoice synchronization...
[2025-05-15T20:50:05.062Z] [STDOUT] Database schema validated successfully
[2025-05-15T20:50:05.062Z] [STDOUT] Found 4 active Razorpay subscriptions to sync
[2025-05-15T20:50:05.062Z] [STDOUT] Processing subscription 20 with Razorpay ID: sub_QUxcCis3igdqUA
[2025-05-15T20:50:05.062Z] [STDOUT] Subscription 20 has 1 existing transactions
[2025-05-15T20:50:05.062Z] [STDOUT] Razorpay initialization in progress, waiting...
[2025-05-15T20:50:05.062Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:50:05.062Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:50:05.062Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:50:05.062Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:50:05.062Z] [STDOUT] Fetching invoices for subscription ID: sub_QUxcCis3igdqUA
[2025-05-15T20:50:05.062Z] [STDOUT] Found 0 invoices for subscription: sub_QUxcCis3igdqUA
[2025-05-15T20:50:05.062Z] [STDOUT] Found 0 invoices for subscription sub_QUxcCis3igdqUA
[2025-05-15T20:50:05.062Z] [STDOUT] Processing subscription 24 with Razorpay ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:50:05.062Z] [STDOUT] Subscription 24 has 1 existing transactions
[2025-05-15T20:50:05.062Z] [STDOUT] Fetching invoices for subscription ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:50:05.062Z] [STDOUT] Found 1 invoices for subscription: sub_QV05DCrgh3A2rL
[2025-05-15T20:50:05.062Z] [STDOUT] Transaction for payment pay_QV05q44fHQzL1q already exists in database (1 records), skipping
[2025-05-15T20:50:05.062Z] [STDOUT] Found 1 invoices for subscription sub_QV05DCrgh3A2rL
[2025-05-15T20:50:05.062Z] [STDOUT] Processing subscription 25 with Razorpay ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:50:05.062Z] [STDOUT] Subscription 25 has 2 existing transactions
[2025-05-15T20:50:05.062Z] [STDOUT] Fetching invoices for subscription ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:50:05.062Z] [STDOUT] Found 1 invoices for subscription: sub_QV1W0JNq2cOk7s
[2025-05-15T20:50:05.062Z] [STDOUT] Transaction for payment pay_QV1WoyCgCY23iO already exists in database (2 records), skipping
[2025-05-15T20:50:05.062Z] [STDOUT] Found 1 invoices for subscription sub_QV1W0JNq2cOk7s
[2025-05-15T20:50:05.062Z] [STDOUT] Processing subscription 26 with Razorpay ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:50:05.062Z] [STDOUT] Subscription 26 has 2 existing transactions
[2025-05-15T20:50:05.062Z] [STDOUT] Fetching invoices for subscription ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:50:05.062Z] [STDOUT] Found 2 invoices for subscription: sub_QVIG6dAuP0UXXn
[2025-05-15T20:50:05.062Z] [STDOUT] Transaction for payment pay_QVILKDuy9v6ovq already exists in database (1 records), skipping
[2025-05-15T20:50:05.062Z] [STDOUT] Transaction for payment pay_QVIGtXTXkm93W8 already exists in database (1 records), skipping
[2025-05-15T20:50:05.062Z] [STDOUT] Found 2 invoices for subscription sub_QVIG6dAuP0UXXn
[2025-05-15T20:50:05.062Z] [STDOUT] Subscription invoice synchronization complete!
[2025-05-15T20:50:05.062Z] [STDOUT] Processed 4 subscriptions
[2025-05-15T20:50:05.062Z] [STDOUT] Success: 4, Errors: 0
[2025-05-15T20:50:05.062Z] [STDOUT] Added 0 new transactions
[2025-05-15T20:50:05.062Z] [STDOUT] Script execution completed
[2025-05-15T20:50:05.062Z] Synchronization completed successfully
[2025-05-15T20:50:05.062Z] Next sync scheduled in 5 seconds
[2025-05-15T20:50:09.693Z] [STDOUT] Using database connection: postgres://***:***@localhost:5432/prosumeai
[2025-05-15T20:50:09.694Z] [STDOUT] Starting subscription invoice synchronization...
[2025-05-15T20:50:09.694Z] [STDOUT] Database schema validated successfully
[2025-05-15T20:50:09.694Z] [STDOUT] Found 4 active Razorpay subscriptions to sync
[2025-05-15T20:50:09.694Z] [STDOUT] Processing subscription 20 with Razorpay ID: sub_QUxcCis3igdqUA
[2025-05-15T20:50:09.694Z] [STDOUT] Subscription 20 has 1 existing transactions
[2025-05-15T20:50:09.694Z] [STDOUT] Razorpay initialization in progress, waiting...
[2025-05-15T20:50:09.694Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:50:09.694Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:50:09.694Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:50:09.694Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:50:09.694Z] [STDOUT] Fetching invoices for subscription ID: sub_QUxcCis3igdqUA
[2025-05-15T20:50:09.694Z] [STDOUT] Found 0 invoices for subscription: sub_QUxcCis3igdqUA
[2025-05-15T20:50:09.694Z] [STDOUT] Found 0 invoices for subscription sub_QUxcCis3igdqUA
[2025-05-15T20:50:09.694Z] [STDOUT] Processing subscription 24 with Razorpay ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:50:09.694Z] [STDOUT] Subscription 24 has 1 existing transactions
[2025-05-15T20:50:09.694Z] [STDOUT] Fetching invoices for subscription ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:50:09.694Z] [STDOUT] Found 1 invoices for subscription: sub_QV05DCrgh3A2rL
[2025-05-15T20:50:09.694Z] [STDOUT] Transaction for payment pay_QV05q44fHQzL1q already exists in database (1 records), skipping
[2025-05-15T20:50:09.694Z] [STDOUT] Found 1 invoices for subscription sub_QV05DCrgh3A2rL
[2025-05-15T20:50:09.694Z] [STDOUT] Processing subscription 25 with Razorpay ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:50:09.694Z] [STDOUT] Subscription 25 has 2 existing transactions
[2025-05-15T20:50:09.694Z] [STDOUT] Fetching invoices for subscription ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:50:09.694Z] [STDOUT] Found 1 invoices for subscription: sub_QV1W0JNq2cOk7s
[2025-05-15T20:50:09.694Z] [STDOUT] Transaction for payment pay_QV1WoyCgCY23iO already exists in database (2 records), skipping
[2025-05-15T20:50:09.694Z] [STDOUT] Found 1 invoices for subscription sub_QV1W0JNq2cOk7s
[2025-05-15T20:50:09.694Z] [STDOUT] Processing subscription 26 with Razorpay ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:50:09.694Z] [STDOUT] Subscription 26 has 2 existing transactions
[2025-05-15T20:50:09.694Z] [STDOUT] Fetching invoices for subscription ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:50:09.694Z] [STDOUT] Found 2 invoices for subscription: sub_QVIG6dAuP0UXXn
[2025-05-15T20:50:09.694Z] [STDOUT] Transaction for payment pay_QVILKDuy9v6ovq already exists in database (1 records), skipping
[2025-05-15T20:50:09.694Z] [STDOUT] Transaction for payment pay_QVIGtXTXkm93W8 already exists in database (1 records), skipping
[2025-05-15T20:50:09.694Z] [STDOUT] Found 2 invoices for subscription sub_QVIG6dAuP0UXXn
[2025-05-15T20:50:09.694Z] [STDOUT] Subscription invoice synchronization complete!
[2025-05-15T20:50:09.694Z] [STDOUT] Processed 4 subscriptions
[2025-05-15T20:50:09.694Z] [STDOUT] Success: 4, Errors: 0
[2025-05-15T20:50:09.694Z] [STDOUT] Added 0 new transactions
[2025-05-15T20:50:09.694Z] [STDOUT] Script execution completed
[2025-05-15T20:50:09.694Z] Synchronization completed successfully
[2025-05-15T20:50:09.694Z] Next sync scheduled in 5 seconds
[2025-05-15T20:50:09.958Z] Starting invoice synchronization...
[2025-05-15T20:50:09.959Z] Running sync script: /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:50:09.959Z] Executing command: cd /Users/raja/Development/ProsumeAI/server && npx tsx /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:50:14.948Z] [STDOUT] Using database connection: postgres://***:***@localhost:5432/prosumeai
[2025-05-15T20:50:14.948Z] [STDOUT] Starting subscription invoice synchronization...
[2025-05-15T20:50:14.948Z] [STDOUT] Database schema validated successfully
[2025-05-15T20:50:14.948Z] [STDOUT] Found 4 active Razorpay subscriptions to sync
[2025-05-15T20:50:14.948Z] [STDOUT] Processing subscription 20 with Razorpay ID: sub_QUxcCis3igdqUA
[2025-05-15T20:50:14.948Z] [STDOUT] Subscription 20 has 1 existing transactions
[2025-05-15T20:50:14.948Z] [STDOUT] Razorpay initialization in progress, waiting...
[2025-05-15T20:50:14.948Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:50:14.948Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:50:14.948Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:50:14.948Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:50:14.948Z] [STDOUT] Fetching invoices for subscription ID: sub_QUxcCis3igdqUA
[2025-05-15T20:50:14.948Z] [STDOUT] Found 0 invoices for subscription: sub_QUxcCis3igdqUA
[2025-05-15T20:50:14.949Z] [STDOUT] Found 0 invoices for subscription sub_QUxcCis3igdqUA
[2025-05-15T20:50:14.949Z] [STDOUT] Processing subscription 24 with Razorpay ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:50:14.949Z] [STDOUT] Subscription 24 has 1 existing transactions
[2025-05-15T20:50:14.949Z] [STDOUT] Fetching invoices for subscription ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:50:14.949Z] [STDOUT] Found 1 invoices for subscription: sub_QV05DCrgh3A2rL
[2025-05-15T20:50:14.949Z] [STDOUT] Transaction for payment pay_QV05q44fHQzL1q already exists in database (1 records), skipping
[2025-05-15T20:50:14.949Z] [STDOUT] Found 1 invoices for subscription sub_QV05DCrgh3A2rL
[2025-05-15T20:50:14.949Z] [STDOUT] Processing subscription 25 with Razorpay ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:50:14.949Z] [STDOUT] Subscription 25 has 2 existing transactions
[2025-05-15T20:50:14.949Z] [STDOUT] Fetching invoices for subscription ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:50:14.949Z] [STDOUT] Found 1 invoices for subscription: sub_QV1W0JNq2cOk7s
[2025-05-15T20:50:14.949Z] [STDOUT] Transaction for payment pay_QV1WoyCgCY23iO already exists in database (2 records), skipping
[2025-05-15T20:50:14.949Z] [STDOUT] Found 1 invoices for subscription sub_QV1W0JNq2cOk7s
[2025-05-15T20:50:14.949Z] [STDOUT] Processing subscription 26 with Razorpay ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:50:14.949Z] [STDOUT] Subscription 26 has 2 existing transactions
[2025-05-15T20:50:14.949Z] [STDOUT] Fetching invoices for subscription ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:50:14.949Z] [STDOUT] Found 2 invoices for subscription: sub_QVIG6dAuP0UXXn
[2025-05-15T20:50:14.949Z] [STDOUT] Transaction for payment pay_QVILKDuy9v6ovq already exists in database (1 records), skipping
[2025-05-15T20:50:14.949Z] [STDOUT] Transaction for payment pay_QVIGtXTXkm93W8 already exists in database (1 records), skipping
[2025-05-15T20:50:14.949Z] [STDOUT] Found 2 invoices for subscription sub_QVIG6dAuP0UXXn
[2025-05-15T20:50:14.949Z] [STDOUT] Subscription invoice synchronization complete!
[2025-05-15T20:50:14.949Z] [STDOUT] Processed 4 subscriptions
[2025-05-15T20:50:14.949Z] [STDOUT] Success: 4, Errors: 0
[2025-05-15T20:50:14.949Z] [STDOUT] Added 0 new transactions
[2025-05-15T20:50:14.949Z] [STDOUT] Script execution completed
[2025-05-15T20:50:14.949Z] Synchronization completed successfully
[2025-05-15T20:50:14.949Z] Next sync scheduled in 5 seconds
[2025-05-15T20:50:14.959Z] Starting invoice synchronization...
[2025-05-15T20:50:14.959Z] Running sync script: /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:50:14.959Z] Executing command: cd /Users/raja/Development/ProsumeAI/server && npx tsx /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:50:19.360Z] [STDOUT] Using database connection: postgres://***:***@localhost:5432/prosumeai
[2025-05-15T20:50:19.360Z] [STDOUT] Starting subscription invoice synchronization...
[2025-05-15T20:50:19.360Z] [STDOUT] Database schema validated successfully
[2025-05-15T20:50:19.360Z] [STDOUT] Found 4 active Razorpay subscriptions to sync
[2025-05-15T20:50:19.360Z] [STDOUT] Processing subscription 20 with Razorpay ID: sub_QUxcCis3igdqUA
[2025-05-15T20:50:19.360Z] [STDOUT] Subscription 20 has 1 existing transactions
[2025-05-15T20:50:19.360Z] [STDOUT] Razorpay initialization in progress, waiting...
[2025-05-15T20:50:19.360Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:50:19.360Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:50:19.360Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:50:19.360Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:50:19.360Z] [STDOUT] Fetching invoices for subscription ID: sub_QUxcCis3igdqUA
[2025-05-15T20:50:19.360Z] [STDOUT] Found 0 invoices for subscription: sub_QUxcCis3igdqUA
[2025-05-15T20:50:19.360Z] [STDOUT] Found 0 invoices for subscription sub_QUxcCis3igdqUA
[2025-05-15T20:50:19.360Z] [STDOUT] Processing subscription 24 with Razorpay ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:50:19.360Z] [STDOUT] Subscription 24 has 1 existing transactions
[2025-05-15T20:50:19.360Z] [STDOUT] Fetching invoices for subscription ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:50:19.360Z] [STDOUT] Found 1 invoices for subscription: sub_QV05DCrgh3A2rL
[2025-05-15T20:50:19.360Z] [STDOUT] Transaction for payment pay_QV05q44fHQzL1q already exists in database (1 records), skipping
[2025-05-15T20:50:19.360Z] [STDOUT] Found 1 invoices for subscription sub_QV05DCrgh3A2rL
[2025-05-15T20:50:19.360Z] [STDOUT] Processing subscription 25 with Razorpay ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:50:19.360Z] [STDOUT] Subscription 25 has 2 existing transactions
[2025-05-15T20:50:19.360Z] [STDOUT] Fetching invoices for subscription ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:50:19.360Z] [STDOUT] Found 1 invoices for subscription: sub_QV1W0JNq2cOk7s
[2025-05-15T20:50:19.360Z] [STDOUT] Transaction for payment pay_QV1WoyCgCY23iO already exists in database (2 records), skipping
[2025-05-15T20:50:19.360Z] [STDOUT] Found 1 invoices for subscription sub_QV1W0JNq2cOk7s
[2025-05-15T20:50:19.360Z] [STDOUT] Processing subscription 26 with Razorpay ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:50:19.360Z] [STDOUT] Subscription 26 has 2 existing transactions
[2025-05-15T20:50:19.360Z] [STDOUT] Fetching invoices for subscription ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:50:19.360Z] [STDOUT] Found 2 invoices for subscription: sub_QVIG6dAuP0UXXn
[2025-05-15T20:50:19.360Z] [STDOUT] Transaction for payment pay_QVILKDuy9v6ovq already exists in database (1 records), skipping
[2025-05-15T20:50:19.360Z] [STDOUT] Transaction for payment pay_QVIGtXTXkm93W8 already exists in database (1 records), skipping
[2025-05-15T20:50:19.360Z] [STDOUT] Found 2 invoices for subscription sub_QVIG6dAuP0UXXn
[2025-05-15T20:50:19.360Z] [STDOUT] Subscription invoice synchronization complete!
[2025-05-15T20:50:19.360Z] [STDOUT] Processed 4 subscriptions
[2025-05-15T20:50:19.360Z] [STDOUT] Success: 4, Errors: 0
[2025-05-15T20:50:19.360Z] [STDOUT] Added 0 new transactions
[2025-05-15T20:50:19.360Z] [STDOUT] Script execution completed
[2025-05-15T20:50:19.360Z] Synchronization completed successfully
[2025-05-15T20:50:19.360Z] Next sync scheduled in 5 seconds
[2025-05-15T20:50:19.960Z] Starting invoice synchronization...
[2025-05-15T20:50:19.961Z] Running sync script: /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:50:19.961Z] Executing command: cd /Users/raja/Development/ProsumeAI/server && npx tsx /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:50:24.961Z] Starting invoice synchronization...
[2025-05-15T20:50:24.961Z] Running sync script: /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:50:24.961Z] Executing command: cd /Users/raja/Development/ProsumeAI/server && npx tsx /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:50:24.978Z] [STDOUT] Using database connection: postgres://***:***@localhost:5432/prosumeai
[2025-05-15T20:50:24.978Z] [STDOUT] Starting subscription invoice synchronization...
[2025-05-15T20:50:24.978Z] [STDOUT] Found 4 active Razorpay subscriptions to sync
[2025-05-15T20:50:24.978Z] [STDOUT] Processing subscription 20 with Razorpay ID: sub_QUxcCis3igdqUA
[2025-05-15T20:50:24.978Z] [STDOUT] Database schema validated successfully
[2025-05-15T20:50:24.978Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:50:24.978Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:50:24.978Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:50:24.978Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:50:24.978Z] [STDOUT] Subscription 20 has 1 existing transactions
[2025-05-15T20:50:24.978Z] [STDOUT] Fetching invoices for subscription ID: sub_QUxcCis3igdqUA
[2025-05-15T20:50:24.978Z] [STDOUT] Found 0 invoices for subscription: sub_QUxcCis3igdqUA
[2025-05-15T20:50:24.978Z] [STDOUT] Found 0 invoices for subscription sub_QUxcCis3igdqUA
[2025-05-15T20:50:24.978Z] [STDOUT] Processing subscription 24 with Razorpay ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:50:24.978Z] [STDOUT] Subscription 24 has 1 existing transactions
[2025-05-15T20:50:24.978Z] [STDOUT] Fetching invoices for subscription ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:50:24.978Z] [STDOUT] Found 1 invoices for subscription: sub_QV05DCrgh3A2rL
[2025-05-15T20:50:24.978Z] [STDOUT] Transaction for payment pay_QV05q44fHQzL1q already exists in database (1 records), skipping
[2025-05-15T20:50:24.978Z] [STDOUT] Found 1 invoices for subscription sub_QV05DCrgh3A2rL
[2025-05-15T20:50:24.978Z] [STDOUT] Processing subscription 25 with Razorpay ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:50:24.978Z] [STDOUT] Subscription 25 has 2 existing transactions
[2025-05-15T20:50:24.978Z] [STDOUT] Fetching invoices for subscription ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:50:24.978Z] [STDOUT] Found 1 invoices for subscription: sub_QV1W0JNq2cOk7s
[2025-05-15T20:50:24.978Z] [STDOUT] Transaction for payment pay_QV1WoyCgCY23iO already exists in database (2 records), skipping
[2025-05-15T20:50:24.978Z] [STDOUT] Found 1 invoices for subscription sub_QV1W0JNq2cOk7s
[2025-05-15T20:50:24.978Z] [STDOUT] Processing subscription 26 with Razorpay ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:50:24.978Z] [STDOUT] Subscription 26 has 2 existing transactions
[2025-05-15T20:50:24.978Z] [STDOUT] Fetching invoices for subscription ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:50:24.978Z] [STDOUT] Found 2 invoices for subscription: sub_QVIG6dAuP0UXXn
[2025-05-15T20:50:24.978Z] [STDOUT] Transaction for payment pay_QVILKDuy9v6ovq already exists in database (1 records), skipping
[2025-05-15T20:50:24.978Z] [STDOUT] Transaction for payment pay_QVIGtXTXkm93W8 already exists in database (1 records), skipping
[2025-05-15T20:50:24.978Z] [STDOUT] Found 2 invoices for subscription sub_QVIG6dAuP0UXXn
[2025-05-15T20:50:24.978Z] [STDOUT] Subscription invoice synchronization complete!
[2025-05-15T20:50:24.978Z] [STDOUT] Processed 4 subscriptions
[2025-05-15T20:50:24.978Z] [STDOUT] Success: 4, Errors: 0
[2025-05-15T20:50:24.978Z] [STDOUT] Added 0 new transactions
[2025-05-15T20:50:24.978Z] [STDOUT] Script execution completed
[2025-05-15T20:50:24.978Z] Synchronization completed successfully
[2025-05-15T20:50:24.978Z] Next sync scheduled in 5 seconds
[2025-05-15T20:50:29.962Z] Starting invoice synchronization...
[2025-05-15T20:50:29.963Z] Running sync script: /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:50:29.963Z] Executing command: cd /Users/raja/Development/ProsumeAI/server && npx tsx /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:50:34.379Z] [STDOUT] Using database connection: postgres://***:***@localhost:5432/prosumeai
[2025-05-15T20:50:34.379Z] [STDOUT] Starting subscription invoice synchronization...
[2025-05-15T20:50:34.379Z] [STDOUT] Database schema validated successfully
[2025-05-15T20:50:34.379Z] [STDOUT] Found 4 active Razorpay subscriptions to sync
[2025-05-15T20:50:34.379Z] [STDOUT] Processing subscription 20 with Razorpay ID: sub_QUxcCis3igdqUA
[2025-05-15T20:50:34.379Z] [STDOUT] Subscription 20 has 1 existing transactions
[2025-05-15T20:50:34.380Z] [STDOUT] Razorpay initialization in progress, waiting...
[2025-05-15T20:50:34.380Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:50:34.380Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:50:34.380Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:50:34.380Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:50:34.380Z] [STDOUT] Fetching invoices for subscription ID: sub_QUxcCis3igdqUA
[2025-05-15T20:50:34.380Z] [STDOUT] Found 0 invoices for subscription: sub_QUxcCis3igdqUA
[2025-05-15T20:50:34.380Z] [STDOUT] Found 0 invoices for subscription sub_QUxcCis3igdqUA
[2025-05-15T20:50:34.380Z] [STDOUT] Processing subscription 24 with Razorpay ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:50:34.380Z] [STDOUT] Subscription 24 has 1 existing transactions
[2025-05-15T20:50:34.380Z] [STDOUT] Fetching invoices for subscription ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:50:34.380Z] [STDOUT] Found 1 invoices for subscription: sub_QV05DCrgh3A2rL
[2025-05-15T20:50:34.380Z] [STDOUT] Transaction for payment pay_QV05q44fHQzL1q already exists in database (1 records), skipping
[2025-05-15T20:50:34.380Z] [STDOUT] Found 1 invoices for subscription sub_QV05DCrgh3A2rL
[2025-05-15T20:50:34.380Z] [STDOUT] Processing subscription 25 with Razorpay ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:50:34.380Z] [STDOUT] Subscription 25 has 2 existing transactions
[2025-05-15T20:50:34.380Z] [STDOUT] Fetching invoices for subscription ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:50:34.380Z] [STDOUT] Found 1 invoices for subscription: sub_QV1W0JNq2cOk7s
[2025-05-15T20:50:34.380Z] [STDOUT] Transaction for payment pay_QV1WoyCgCY23iO already exists in database (2 records), skipping
[2025-05-15T20:50:34.380Z] [STDOUT] Found 1 invoices for subscription sub_QV1W0JNq2cOk7s
[2025-05-15T20:50:34.380Z] [STDOUT] Processing subscription 26 with Razorpay ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:50:34.380Z] [STDOUT] Subscription 26 has 2 existing transactions
[2025-05-15T20:50:34.380Z] [STDOUT] Fetching invoices for subscription ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:50:34.380Z] [STDOUT] Found 2 invoices for subscription: sub_QVIG6dAuP0UXXn
[2025-05-15T20:50:34.380Z] [STDOUT] Transaction for payment pay_QVILKDuy9v6ovq already exists in database (1 records), skipping
[2025-05-15T20:50:34.380Z] [STDOUT] Transaction for payment pay_QVIGtXTXkm93W8 already exists in database (1 records), skipping
[2025-05-15T20:50:34.380Z] [STDOUT] Found 2 invoices for subscription sub_QVIG6dAuP0UXXn
[2025-05-15T20:50:34.380Z] [STDOUT] Subscription invoice synchronization complete!
[2025-05-15T20:50:34.380Z] [STDOUT] Processed 4 subscriptions
[2025-05-15T20:50:34.380Z] [STDOUT] Success: 4, Errors: 0
[2025-05-15T20:50:34.380Z] [STDOUT] Added 0 new transactions
[2025-05-15T20:50:34.380Z] [STDOUT] Script execution completed
[2025-05-15T20:50:34.380Z] Synchronization completed successfully
[2025-05-15T20:50:34.380Z] Next sync scheduled in 5 seconds
[2025-05-15T20:50:34.963Z] Starting invoice synchronization...
[2025-05-15T20:50:34.963Z] Running sync script: /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:50:34.963Z] Executing command: cd /Users/raja/Development/ProsumeAI/server && npx tsx /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:50:38.959Z] [STDOUT] Using database connection: postgres://***:***@localhost:5432/prosumeai
[2025-05-15T20:50:38.959Z] [STDOUT] Starting subscription invoice synchronization...
[2025-05-15T20:50:38.959Z] [STDOUT] Database schema validated successfully
[2025-05-15T20:50:38.959Z] [STDOUT] Found 4 active Razorpay subscriptions to sync
[2025-05-15T20:50:38.959Z] [STDOUT] Processing subscription 20 with Razorpay ID: sub_QUxcCis3igdqUA
[2025-05-15T20:50:38.959Z] [STDOUT] Subscription 20 has 1 existing transactions
[2025-05-15T20:50:38.959Z] [STDOUT] Razorpay initialization in progress, waiting...
[2025-05-15T20:50:38.959Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:50:38.959Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:50:38.959Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:50:38.959Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:50:38.959Z] [STDOUT] Fetching invoices for subscription ID: sub_QUxcCis3igdqUA
[2025-05-15T20:50:38.959Z] [STDOUT] Found 0 invoices for subscription: sub_QUxcCis3igdqUA
[2025-05-15T20:50:38.959Z] [STDOUT] Found 0 invoices for subscription sub_QUxcCis3igdqUA
[2025-05-15T20:50:38.959Z] [STDOUT] Processing subscription 24 with Razorpay ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:50:38.959Z] [STDOUT] Subscription 24 has 1 existing transactions
[2025-05-15T20:50:38.959Z] [STDOUT] Fetching invoices for subscription ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:50:38.959Z] [STDOUT] Found 1 invoices for subscription: sub_QV05DCrgh3A2rL
[2025-05-15T20:50:38.960Z] [STDOUT] Transaction for payment pay_QV05q44fHQzL1q already exists in database (1 records), skipping
[2025-05-15T20:50:38.960Z] [STDOUT] Found 1 invoices for subscription sub_QV05DCrgh3A2rL
[2025-05-15T20:50:38.960Z] [STDOUT] Processing subscription 25 with Razorpay ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:50:38.960Z] [STDOUT] Subscription 25 has 2 existing transactions
[2025-05-15T20:50:38.960Z] [STDOUT] Fetching invoices for subscription ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:50:38.960Z] [STDOUT] Found 1 invoices for subscription: sub_QV1W0JNq2cOk7s
[2025-05-15T20:50:38.960Z] [STDOUT] Transaction for payment pay_QV1WoyCgCY23iO already exists in database (2 records), skipping
[2025-05-15T20:50:38.960Z] [STDOUT] Found 1 invoices for subscription sub_QV1W0JNq2cOk7s
[2025-05-15T20:50:38.960Z] [STDOUT] Processing subscription 26 with Razorpay ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:50:38.960Z] [STDOUT] Subscription 26 has 2 existing transactions
[2025-05-15T20:50:38.960Z] [STDOUT] Fetching invoices for subscription ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:50:38.960Z] [STDOUT] Found 2 invoices for subscription: sub_QVIG6dAuP0UXXn
[2025-05-15T20:50:38.960Z] [STDOUT] Transaction for payment pay_QVILKDuy9v6ovq already exists in database (1 records), skipping
[2025-05-15T20:50:38.960Z] [STDOUT] Transaction for payment pay_QVIGtXTXkm93W8 already exists in database (1 records), skipping
[2025-05-15T20:50:38.960Z] [STDOUT] Found 2 invoices for subscription sub_QVIG6dAuP0UXXn
[2025-05-15T20:50:38.960Z] [STDOUT] Subscription invoice synchronization complete!
[2025-05-15T20:50:38.960Z] [STDOUT] Processed 4 subscriptions
[2025-05-15T20:50:38.960Z] [STDOUT] Success: 4, Errors: 0
[2025-05-15T20:50:38.960Z] [STDOUT] Added 0 new transactions
[2025-05-15T20:50:38.960Z] [STDOUT] Script execution completed
[2025-05-15T20:50:38.960Z] Synchronization completed successfully
[2025-05-15T20:50:38.960Z] Next sync scheduled in 5 seconds
[2025-05-15T20:50:39.278Z] [STDOUT] Using database connection: postgres://***:***@localhost:5432/prosumeai
[2025-05-15T20:50:39.278Z] [STDOUT] Starting subscription invoice synchronization...
[2025-05-15T20:50:39.278Z] [STDOUT] Database schema validated successfully
[2025-05-15T20:50:39.279Z] [STDOUT] Found 4 active Razorpay subscriptions to sync
[2025-05-15T20:50:39.279Z] [STDOUT] Processing subscription 20 with Razorpay ID: sub_QUxcCis3igdqUA
[2025-05-15T20:50:39.279Z] [STDOUT] Subscription 20 has 1 existing transactions
[2025-05-15T20:50:39.279Z] [STDOUT] Razorpay initialization in progress, waiting...
[2025-05-15T20:50:39.279Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:50:39.279Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:50:39.279Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:50:39.279Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:50:39.279Z] [STDOUT] Fetching invoices for subscription ID: sub_QUxcCis3igdqUA
[2025-05-15T20:50:39.279Z] [STDOUT] Found 0 invoices for subscription: sub_QUxcCis3igdqUA
[2025-05-15T20:50:39.279Z] [STDOUT] Found 0 invoices for subscription sub_QUxcCis3igdqUA
[2025-05-15T20:50:39.279Z] [STDOUT] Processing subscription 24 with Razorpay ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:50:39.279Z] [STDOUT] Subscription 24 has 1 existing transactions
[2025-05-15T20:50:39.279Z] [STDOUT] Fetching invoices for subscription ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:50:39.279Z] [STDOUT] Found 1 invoices for subscription: sub_QV05DCrgh3A2rL
[2025-05-15T20:50:39.279Z] [STDOUT] Transaction for payment pay_QV05q44fHQzL1q already exists in database (1 records), skipping
[2025-05-15T20:50:39.279Z] [STDOUT] Found 1 invoices for subscription sub_QV05DCrgh3A2rL
[2025-05-15T20:50:39.279Z] [STDOUT] Processing subscription 25 with Razorpay ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:50:39.279Z] [STDOUT] Subscription 25 has 2 existing transactions
[2025-05-15T20:50:39.279Z] [STDOUT] Fetching invoices for subscription ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:50:39.279Z] [STDOUT] Found 1 invoices for subscription: sub_QV1W0JNq2cOk7s
[2025-05-15T20:50:39.279Z] [STDOUT] Transaction for payment pay_QV1WoyCgCY23iO already exists in database (2 records), skipping
[2025-05-15T20:50:39.279Z] [STDOUT] Found 1 invoices for subscription sub_QV1W0JNq2cOk7s
[2025-05-15T20:50:39.279Z] [STDOUT] Processing subscription 26 with Razorpay ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:50:39.279Z] [STDOUT] Subscription 26 has 2 existing transactions
[2025-05-15T20:50:39.279Z] [STDOUT] Fetching invoices for subscription ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:50:39.279Z] [STDOUT] Found 2 invoices for subscription: sub_QVIG6dAuP0UXXn
[2025-05-15T20:50:39.279Z] [STDOUT] Transaction for payment pay_QVILKDuy9v6ovq already exists in database (1 records), skipping
[2025-05-15T20:50:39.279Z] [STDOUT] Transaction for payment pay_QVIGtXTXkm93W8 already exists in database (1 records), skipping
[2025-05-15T20:50:39.279Z] [STDOUT] Found 2 invoices for subscription sub_QVIG6dAuP0UXXn
[2025-05-15T20:50:39.279Z] [STDOUT] Subscription invoice synchronization complete!
[2025-05-15T20:50:39.279Z] [STDOUT] Processed 4 subscriptions
[2025-05-15T20:50:39.279Z] [STDOUT] Success: 4, Errors: 0
[2025-05-15T20:50:39.279Z] [STDOUT] Added 0 new transactions
[2025-05-15T20:50:39.279Z] [STDOUT] Script execution completed
[2025-05-15T20:50:39.279Z] Synchronization completed successfully
[2025-05-15T20:50:39.279Z] Next sync scheduled in 5 seconds
[2025-05-15T20:50:39.964Z] Starting invoice synchronization...
[2025-05-15T20:50:39.964Z] Running sync script: /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:50:39.964Z] Executing command: cd /Users/raja/Development/ProsumeAI/server && npx tsx /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:50:44.459Z] [STDOUT] Using database connection: postgres://***:***@localhost:5432/prosumeai
[2025-05-15T20:50:44.459Z] [STDOUT] Starting subscription invoice synchronization...
[2025-05-15T20:50:44.459Z] [STDOUT] Database schema validated successfully
[2025-05-15T20:50:44.459Z] [STDOUT] Found 4 active Razorpay subscriptions to sync
[2025-05-15T20:50:44.459Z] [STDOUT] Processing subscription 20 with Razorpay ID: sub_QUxcCis3igdqUA
[2025-05-15T20:50:44.459Z] [STDOUT] Subscription 20 has 1 existing transactions
[2025-05-15T20:50:44.459Z] [STDOUT] Razorpay initialization in progress, waiting...
[2025-05-15T20:50:44.459Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:50:44.459Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:50:44.459Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:50:44.459Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:50:44.459Z] [STDOUT] Fetching invoices for subscription ID: sub_QUxcCis3igdqUA
[2025-05-15T20:50:44.459Z] [STDOUT] Found 0 invoices for subscription: sub_QUxcCis3igdqUA
[2025-05-15T20:50:44.459Z] [STDOUT] Found 0 invoices for subscription sub_QUxcCis3igdqUA
[2025-05-15T20:50:44.459Z] [STDOUT] Processing subscription 24 with Razorpay ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:50:44.459Z] [STDOUT] Subscription 24 has 1 existing transactions
[2025-05-15T20:50:44.459Z] [STDOUT] Fetching invoices for subscription ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:50:44.459Z] [STDOUT] Found 1 invoices for subscription: sub_QV05DCrgh3A2rL
[2025-05-15T20:50:44.459Z] [STDOUT] Transaction for payment pay_QV05q44fHQzL1q already exists in database (1 records), skipping
[2025-05-15T20:50:44.459Z] [STDOUT] Found 1 invoices for subscription sub_QV05DCrgh3A2rL
[2025-05-15T20:50:44.459Z] [STDOUT] Processing subscription 25 with Razorpay ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:50:44.459Z] [STDOUT] Subscription 25 has 2 existing transactions
[2025-05-15T20:50:44.459Z] [STDOUT] Fetching invoices for subscription ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:50:44.459Z] [STDOUT] Found 1 invoices for subscription: sub_QV1W0JNq2cOk7s
[2025-05-15T20:50:44.459Z] [STDOUT] Transaction for payment pay_QV1WoyCgCY23iO already exists in database (2 records), skipping
[2025-05-15T20:50:44.459Z] [STDOUT] Found 1 invoices for subscription sub_QV1W0JNq2cOk7s
[2025-05-15T20:50:44.459Z] [STDOUT] Processing subscription 26 with Razorpay ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:50:44.459Z] [STDOUT] Subscription 26 has 2 existing transactions
[2025-05-15T20:50:44.459Z] [STDOUT] Fetching invoices for subscription ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:50:44.459Z] [STDOUT] Found 2 invoices for subscription: sub_QVIG6dAuP0UXXn
[2025-05-15T20:50:44.459Z] [STDOUT] Transaction for payment pay_QVILKDuy9v6ovq already exists in database (1 records), skipping
[2025-05-15T20:50:44.459Z] [STDOUT] Transaction for payment pay_QVIGtXTXkm93W8 already exists in database (1 records), skipping
[2025-05-15T20:50:44.459Z] [STDOUT] Found 2 invoices for subscription sub_QVIG6dAuP0UXXn
[2025-05-15T20:50:44.459Z] [STDOUT] Subscription invoice synchronization complete!
[2025-05-15T20:50:44.459Z] [STDOUT] Processed 4 subscriptions
[2025-05-15T20:50:44.459Z] [STDOUT] Success: 4, Errors: 0
[2025-05-15T20:50:44.459Z] [STDOUT] Added 0 new transactions
[2025-05-15T20:50:44.459Z] [STDOUT] Script execution completed
[2025-05-15T20:50:44.459Z] Synchronization completed successfully
[2025-05-15T20:50:44.459Z] Next sync scheduled in 5 seconds
[2025-05-15T20:50:44.966Z] Starting invoice synchronization...
[2025-05-15T20:50:44.966Z] Running sync script: /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:50:44.966Z] Executing command: cd /Users/raja/Development/ProsumeAI/server && npx tsx /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:50:49.770Z] [STDOUT] Using database connection: postgres://***:***@localhost:5432/prosumeai
[2025-05-15T20:50:49.770Z] [STDOUT] Starting subscription invoice synchronization...
[2025-05-15T20:50:49.770Z] [STDOUT] Database schema validated successfully
[2025-05-15T20:50:49.770Z] [STDOUT] Found 4 active Razorpay subscriptions to sync
[2025-05-15T20:50:49.770Z] [STDOUT] Processing subscription 20 with Razorpay ID: sub_QUxcCis3igdqUA
[2025-05-15T20:50:49.770Z] [STDOUT] Subscription 20 has 1 existing transactions
[2025-05-15T20:50:49.770Z] [STDOUT] Razorpay initialization in progress, waiting...
[2025-05-15T20:50:49.770Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:50:49.770Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:50:49.770Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:50:49.770Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:50:49.770Z] [STDOUT] Fetching invoices for subscription ID: sub_QUxcCis3igdqUA
[2025-05-15T20:50:49.770Z] [STDOUT] Found 0 invoices for subscription: sub_QUxcCis3igdqUA
[2025-05-15T20:50:49.770Z] [STDOUT] Found 0 invoices for subscription sub_QUxcCis3igdqUA
[2025-05-15T20:50:49.770Z] [STDOUT] Processing subscription 24 with Razorpay ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:50:49.770Z] [STDOUT] Subscription 24 has 1 existing transactions
[2025-05-15T20:50:49.770Z] [STDOUT] Fetching invoices for subscription ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:50:49.770Z] [STDOUT] Found 1 invoices for subscription: sub_QV05DCrgh3A2rL
[2025-05-15T20:50:49.770Z] [STDOUT] Transaction for payment pay_QV05q44fHQzL1q already exists in database (1 records), skipping
[2025-05-15T20:50:49.770Z] [STDOUT] Found 1 invoices for subscription sub_QV05DCrgh3A2rL
[2025-05-15T20:50:49.770Z] [STDOUT] Processing subscription 25 with Razorpay ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:50:49.770Z] [STDOUT] Subscription 25 has 2 existing transactions
[2025-05-15T20:50:49.770Z] [STDOUT] Fetching invoices for subscription ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:50:49.770Z] [STDOUT] Found 1 invoices for subscription: sub_QV1W0JNq2cOk7s
[2025-05-15T20:50:49.770Z] [STDOUT] Transaction for payment pay_QV1WoyCgCY23iO already exists in database (2 records), skipping
[2025-05-15T20:50:49.770Z] [STDOUT] Found 1 invoices for subscription sub_QV1W0JNq2cOk7s
[2025-05-15T20:50:49.770Z] [STDOUT] Processing subscription 26 with Razorpay ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:50:49.770Z] [STDOUT] Subscription 26 has 2 existing transactions
[2025-05-15T20:50:49.770Z] [STDOUT] Fetching invoices for subscription ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:50:49.770Z] [STDOUT] Found 2 invoices for subscription: sub_QVIG6dAuP0UXXn
[2025-05-15T20:50:49.770Z] [STDOUT] Transaction for payment pay_QVILKDuy9v6ovq already exists in database (1 records), skipping
[2025-05-15T20:50:49.770Z] [STDOUT] Transaction for payment pay_QVIGtXTXkm93W8 already exists in database (1 records), skipping
[2025-05-15T20:50:49.770Z] [STDOUT] Found 2 invoices for subscription sub_QVIG6dAuP0UXXn
[2025-05-15T20:50:49.770Z] [STDOUT] Subscription invoice synchronization complete!
[2025-05-15T20:50:49.770Z] [STDOUT] Processed 4 subscriptions
[2025-05-15T20:50:49.770Z] [STDOUT] Success: 4, Errors: 0
[2025-05-15T20:50:49.770Z] [STDOUT] Added 0 new transactions
[2025-05-15T20:50:49.770Z] [STDOUT] Script execution completed
[2025-05-15T20:50:49.770Z] Synchronization completed successfully
[2025-05-15T20:50:49.770Z] Next sync scheduled in 5 seconds
[2025-05-15T20:50:49.966Z] Starting invoice synchronization...
[2025-05-15T20:50:49.966Z] Running sync script: /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:50:49.966Z] Executing command: cd /Users/raja/Development/ProsumeAI/server && npx tsx /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:50:54.952Z] [STDOUT] Using database connection: postgres://***:***@localhost:5432/prosumeai
[2025-05-15T20:50:54.952Z] [STDOUT] Starting subscription invoice synchronization...
[2025-05-15T20:50:54.952Z] [STDOUT] Found 4 active Razorpay subscriptions to sync
[2025-05-15T20:50:54.952Z] [STDOUT] Processing subscription 20 with Razorpay ID: sub_QUxcCis3igdqUA
[2025-05-15T20:50:54.952Z] [STDOUT] Database schema validated successfully
[2025-05-15T20:50:54.952Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:50:54.952Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:50:54.952Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:50:54.952Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:50:54.952Z] [STDOUT] Subscription 20 has 1 existing transactions
[2025-05-15T20:50:54.952Z] [STDOUT] Fetching invoices for subscription ID: sub_QUxcCis3igdqUA
[2025-05-15T20:50:54.952Z] [STDOUT] Found 0 invoices for subscription: sub_QUxcCis3igdqUA
[2025-05-15T20:50:54.952Z] [STDOUT] Found 0 invoices for subscription sub_QUxcCis3igdqUA
[2025-05-15T20:50:54.952Z] [STDOUT] Processing subscription 24 with Razorpay ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:50:54.952Z] [STDOUT] Subscription 24 has 1 existing transactions
[2025-05-15T20:50:54.952Z] [STDOUT] Fetching invoices for subscription ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:50:54.952Z] [STDOUT] Found 1 invoices for subscription: sub_QV05DCrgh3A2rL
[2025-05-15T20:50:54.952Z] [STDOUT] Transaction for payment pay_QV05q44fHQzL1q already exists in database (1 records), skipping
[2025-05-15T20:50:54.952Z] [STDOUT] Found 1 invoices for subscription sub_QV05DCrgh3A2rL
[2025-05-15T20:50:54.952Z] [STDOUT] Processing subscription 25 with Razorpay ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:50:54.952Z] [STDOUT] Subscription 25 has 2 existing transactions
[2025-05-15T20:50:54.952Z] [STDOUT] Fetching invoices for subscription ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:50:54.952Z] [STDOUT] Found 1 invoices for subscription: sub_QV1W0JNq2cOk7s
[2025-05-15T20:50:54.952Z] [STDOUT] Transaction for payment pay_QV1WoyCgCY23iO already exists in database (2 records), skipping
[2025-05-15T20:50:54.952Z] [STDOUT] Found 1 invoices for subscription sub_QV1W0JNq2cOk7s
[2025-05-15T20:50:54.952Z] [STDOUT] Processing subscription 26 with Razorpay ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:50:54.952Z] [STDOUT] Subscription 26 has 2 existing transactions
[2025-05-15T20:50:54.952Z] [STDOUT] Fetching invoices for subscription ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:50:54.952Z] [STDOUT] Found 2 invoices for subscription: sub_QVIG6dAuP0UXXn
[2025-05-15T20:50:54.952Z] [STDOUT] Transaction for payment pay_QVILKDuy9v6ovq already exists in database (1 records), skipping
[2025-05-15T20:50:54.952Z] [STDOUT] Transaction for payment pay_QVIGtXTXkm93W8 already exists in database (1 records), skipping
[2025-05-15T20:50:54.952Z] [STDOUT] Found 2 invoices for subscription sub_QVIG6dAuP0UXXn
[2025-05-15T20:50:54.952Z] [STDOUT] Subscription invoice synchronization complete!
[2025-05-15T20:50:54.952Z] [STDOUT] Processed 4 subscriptions
[2025-05-15T20:50:54.952Z] [STDOUT] Success: 4, Errors: 0
[2025-05-15T20:50:54.952Z] [STDOUT] Added 0 new transactions
[2025-05-15T20:50:54.952Z] [STDOUT] Script execution completed
[2025-05-15T20:50:54.952Z] Synchronization completed successfully
[2025-05-15T20:50:54.952Z] Next sync scheduled in 5 seconds
[2025-05-15T20:50:54.967Z] Starting invoice synchronization...
[2025-05-15T20:50:54.968Z] Running sync script: /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:50:54.968Z] Executing command: cd /Users/raja/Development/ProsumeAI/server && npx tsx /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:50:59.968Z] Starting invoice synchronization...
[2025-05-15T20:50:59.968Z] Running sync script: /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:50:59.968Z] Executing command: cd /Users/raja/Development/ProsumeAI/server && npx tsx /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:51:00.003Z] [STDOUT] Using database connection: postgres://***:***@localhost:5432/prosumeai
[2025-05-15T20:51:00.003Z] [STDOUT] Starting subscription invoice synchronization...
[2025-05-15T20:51:00.003Z] [STDOUT] Database schema validated successfully
[2025-05-15T20:51:00.003Z] [STDOUT] Found 4 active Razorpay subscriptions to sync
[2025-05-15T20:51:00.003Z] [STDOUT] Processing subscription 20 with Razorpay ID: sub_QUxcCis3igdqUA
[2025-05-15T20:51:00.003Z] [STDOUT] Subscription 20 has 1 existing transactions
[2025-05-15T20:51:00.003Z] [STDOUT] Razorpay initialization in progress, waiting...
[2025-05-15T20:51:00.003Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:51:00.003Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:51:00.003Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:51:00.003Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:51:00.003Z] [STDOUT] Fetching invoices for subscription ID: sub_QUxcCis3igdqUA
[2025-05-15T20:51:00.003Z] [STDOUT] Found 0 invoices for subscription: sub_QUxcCis3igdqUA
[2025-05-15T20:51:00.003Z] [STDOUT] Found 0 invoices for subscription sub_QUxcCis3igdqUA
[2025-05-15T20:51:00.003Z] [STDOUT] Processing subscription 24 with Razorpay ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:51:00.003Z] [STDOUT] Subscription 24 has 1 existing transactions
[2025-05-15T20:51:00.003Z] [STDOUT] Fetching invoices for subscription ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:51:00.003Z] [STDOUT] Found 1 invoices for subscription: sub_QV05DCrgh3A2rL
[2025-05-15T20:51:00.003Z] [STDOUT] Transaction for payment pay_QV05q44fHQzL1q already exists in database (1 records), skipping
[2025-05-15T20:51:00.003Z] [STDOUT] Found 1 invoices for subscription sub_QV05DCrgh3A2rL
[2025-05-15T20:51:00.003Z] [STDOUT] Processing subscription 25 with Razorpay ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:51:00.003Z] [STDOUT] Subscription 25 has 2 existing transactions
[2025-05-15T20:51:00.003Z] [STDOUT] Fetching invoices for subscription ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:51:00.003Z] [STDOUT] Found 1 invoices for subscription: sub_QV1W0JNq2cOk7s
[2025-05-15T20:51:00.003Z] [STDOUT] Transaction for payment pay_QV1WoyCgCY23iO already exists in database (2 records), skipping
[2025-05-15T20:51:00.003Z] [STDOUT] Found 1 invoices for subscription sub_QV1W0JNq2cOk7s
[2025-05-15T20:51:00.003Z] [STDOUT] Processing subscription 26 with Razorpay ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:51:00.003Z] [STDOUT] Subscription 26 has 2 existing transactions
[2025-05-15T20:51:00.003Z] [STDOUT] Fetching invoices for subscription ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:51:00.003Z] [STDOUT] Found 2 invoices for subscription: sub_QVIG6dAuP0UXXn
[2025-05-15T20:51:00.003Z] [STDOUT] Transaction for payment pay_QVILKDuy9v6ovq already exists in database (1 records), skipping
[2025-05-15T20:51:00.003Z] [STDOUT] Transaction for payment pay_QVIGtXTXkm93W8 already exists in database (1 records), skipping
[2025-05-15T20:51:00.003Z] [STDOUT] Found 2 invoices for subscription sub_QVIG6dAuP0UXXn
[2025-05-15T20:51:00.003Z] [STDOUT] Subscription invoice synchronization complete!
[2025-05-15T20:51:00.003Z] [STDOUT] Processed 4 subscriptions
[2025-05-15T20:51:00.003Z] [STDOUT] Success: 4, Errors: 0
[2025-05-15T20:51:00.003Z] [STDOUT] Added 0 new transactions
[2025-05-15T20:51:00.003Z] [STDOUT] Script execution completed
[2025-05-15T20:51:00.003Z] Synchronization completed successfully
[2025-05-15T20:51:00.003Z] Next sync scheduled in 5 seconds
[2025-05-15T20:51:04.969Z] Starting invoice synchronization...
[2025-05-15T20:51:04.970Z] Running sync script: /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:51:04.970Z] Executing command: cd /Users/raja/Development/ProsumeAI/server && npx tsx /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:51:09.246Z] [STDOUT] Using database connection: postgres://***:***@localhost:5432/prosumeai
[2025-05-15T20:51:09.246Z] [STDOUT] Starting subscription invoice synchronization...
[2025-05-15T20:51:09.246Z] [STDOUT] Database schema validated successfully
[2025-05-15T20:51:09.246Z] [STDOUT] Found 4 active Razorpay subscriptions to sync
[2025-05-15T20:51:09.246Z] [STDOUT] Processing subscription 20 with Razorpay ID: sub_QUxcCis3igdqUA
[2025-05-15T20:51:09.246Z] [STDOUT] Subscription 20 has 1 existing transactions
[2025-05-15T20:51:09.246Z] [STDOUT] Razorpay initialization in progress, waiting...
[2025-05-15T20:51:09.246Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:51:09.246Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:51:09.246Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:51:09.246Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:51:09.246Z] [STDOUT] Fetching invoices for subscription ID: sub_QUxcCis3igdqUA
[2025-05-15T20:51:09.246Z] [STDOUT] Found 0 invoices for subscription: sub_QUxcCis3igdqUA
[2025-05-15T20:51:09.246Z] [STDOUT] Found 0 invoices for subscription sub_QUxcCis3igdqUA
[2025-05-15T20:51:09.246Z] [STDOUT] Processing subscription 24 with Razorpay ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:51:09.246Z] [STDOUT] Subscription 24 has 1 existing transactions
[2025-05-15T20:51:09.246Z] [STDOUT] Fetching invoices for subscription ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:51:09.246Z] [STDOUT] Found 1 invoices for subscription: sub_QV05DCrgh3A2rL
[2025-05-15T20:51:09.246Z] [STDOUT] Transaction for payment pay_QV05q44fHQzL1q already exists in database (1 records), skipping
[2025-05-15T20:51:09.246Z] [STDOUT] Found 1 invoices for subscription sub_QV05DCrgh3A2rL
[2025-05-15T20:51:09.246Z] [STDOUT] Processing subscription 25 with Razorpay ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:51:09.246Z] [STDOUT] Subscription 25 has 2 existing transactions
[2025-05-15T20:51:09.246Z] [STDOUT] Fetching invoices for subscription ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:51:09.246Z] [STDOUT] Found 1 invoices for subscription: sub_QV1W0JNq2cOk7s
[2025-05-15T20:51:09.246Z] [STDOUT] Transaction for payment pay_QV1WoyCgCY23iO already exists in database (2 records), skipping
[2025-05-15T20:51:09.246Z] [STDOUT] Found 1 invoices for subscription sub_QV1W0JNq2cOk7s
[2025-05-15T20:51:09.246Z] [STDOUT] Processing subscription 26 with Razorpay ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:51:09.246Z] [STDOUT] Subscription 26 has 2 existing transactions
[2025-05-15T20:51:09.246Z] [STDOUT] Fetching invoices for subscription ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:51:09.246Z] [STDOUT] Found 2 invoices for subscription: sub_QVIG6dAuP0UXXn
[2025-05-15T20:51:09.246Z] [STDOUT] Transaction for payment pay_QVILKDuy9v6ovq already exists in database (1 records), skipping
[2025-05-15T20:51:09.246Z] [STDOUT] Transaction for payment pay_QVIGtXTXkm93W8 already exists in database (1 records), skipping
[2025-05-15T20:51:09.246Z] [STDOUT] Found 2 invoices for subscription sub_QVIG6dAuP0UXXn
[2025-05-15T20:51:09.246Z] [STDOUT] Subscription invoice synchronization complete!
[2025-05-15T20:51:09.246Z] [STDOUT] Processed 4 subscriptions
[2025-05-15T20:51:09.246Z] [STDOUT] Success: 4, Errors: 0
[2025-05-15T20:51:09.246Z] [STDOUT] Added 0 new transactions
[2025-05-15T20:51:09.246Z] [STDOUT] Script execution completed
[2025-05-15T20:51:09.246Z] Synchronization completed successfully
[2025-05-15T20:51:09.246Z] Next sync scheduled in 5 seconds
[2025-05-15T20:51:09.527Z] [STDOUT] Using database connection: postgres://***:***@localhost:5432/prosumeai
[2025-05-15T20:51:09.527Z] [STDOUT] Starting subscription invoice synchronization...
[2025-05-15T20:51:09.527Z] [STDOUT] Database schema validated successfully
[2025-05-15T20:51:09.527Z] [STDOUT] Found 4 active Razorpay subscriptions to sync
[2025-05-15T20:51:09.527Z] [STDOUT] Processing subscription 20 with Razorpay ID: sub_QUxcCis3igdqUA
[2025-05-15T20:51:09.527Z] [STDOUT] Subscription 20 has 1 existing transactions
[2025-05-15T20:51:09.527Z] [STDOUT] Razorpay initialization in progress, waiting...
[2025-05-15T20:51:09.527Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:51:09.527Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:51:09.527Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:51:09.527Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:51:09.527Z] [STDOUT] Fetching invoices for subscription ID: sub_QUxcCis3igdqUA
[2025-05-15T20:51:09.527Z] [STDOUT] Found 0 invoices for subscription: sub_QUxcCis3igdqUA
[2025-05-15T20:51:09.527Z] [STDOUT] Found 0 invoices for subscription sub_QUxcCis3igdqUA
[2025-05-15T20:51:09.527Z] [STDOUT] Processing subscription 24 with Razorpay ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:51:09.527Z] [STDOUT] Subscription 24 has 1 existing transactions
[2025-05-15T20:51:09.527Z] [STDOUT] Fetching invoices for subscription ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:51:09.527Z] [STDOUT] Found 1 invoices for subscription: sub_QV05DCrgh3A2rL
[2025-05-15T20:51:09.527Z] [STDOUT] Transaction for payment pay_QV05q44fHQzL1q already exists in database (1 records), skipping
[2025-05-15T20:51:09.527Z] [STDOUT] Found 1 invoices for subscription sub_QV05DCrgh3A2rL
[2025-05-15T20:51:09.527Z] [STDOUT] Processing subscription 25 with Razorpay ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:51:09.527Z] [STDOUT] Subscription 25 has 2 existing transactions
[2025-05-15T20:51:09.527Z] [STDOUT] Fetching invoices for subscription ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:51:09.527Z] [STDOUT] Found 1 invoices for subscription: sub_QV1W0JNq2cOk7s
[2025-05-15T20:51:09.527Z] [STDOUT] Transaction for payment pay_QV1WoyCgCY23iO already exists in database (2 records), skipping
[2025-05-15T20:51:09.527Z] [STDOUT] Found 1 invoices for subscription sub_QV1W0JNq2cOk7s
[2025-05-15T20:51:09.527Z] [STDOUT] Processing subscription 26 with Razorpay ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:51:09.527Z] [STDOUT] Subscription 26 has 2 existing transactions
[2025-05-15T20:51:09.527Z] [STDOUT] Fetching invoices for subscription ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:51:09.527Z] [STDOUT] Found 2 invoices for subscription: sub_QVIG6dAuP0UXXn
[2025-05-15T20:51:09.527Z] [STDOUT] Transaction for payment pay_QVILKDuy9v6ovq already exists in database (1 records), skipping
[2025-05-15T20:51:09.527Z] [STDOUT] Transaction for payment pay_QVIGtXTXkm93W8 already exists in database (1 records), skipping
[2025-05-15T20:51:09.527Z] [STDOUT] Found 2 invoices for subscription sub_QVIG6dAuP0UXXn
[2025-05-15T20:51:09.527Z] [STDOUT] Subscription invoice synchronization complete!
[2025-05-15T20:51:09.527Z] [STDOUT] Processed 4 subscriptions
[2025-05-15T20:51:09.527Z] [STDOUT] Success: 4, Errors: 0
[2025-05-15T20:51:09.527Z] [STDOUT] Added 0 new transactions
[2025-05-15T20:51:09.527Z] [STDOUT] Script execution completed
[2025-05-15T20:51:09.527Z] Synchronization completed successfully
[2025-05-15T20:51:09.527Z] Next sync scheduled in 5 seconds
[2025-05-15T20:51:09.969Z] Starting invoice synchronization...
[2025-05-15T20:51:09.970Z] Running sync script: /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:51:09.970Z] Executing command: cd /Users/raja/Development/ProsumeAI/server && npx tsx /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:51:14.478Z] [STDOUT] Using database connection: postgres://***:***@localhost:5432/prosumeai
[2025-05-15T20:51:14.478Z] [STDOUT] Starting subscription invoice synchronization...
[2025-05-15T20:51:14.478Z] [STDOUT] Database schema validated successfully
[2025-05-15T20:51:14.478Z] [STDOUT] Found 4 active Razorpay subscriptions to sync
[2025-05-15T20:51:14.478Z] [STDOUT] Processing subscription 20 with Razorpay ID: sub_QUxcCis3igdqUA
[2025-05-15T20:51:14.478Z] [STDOUT] Subscription 20 has 1 existing transactions
[2025-05-15T20:51:14.478Z] [STDOUT] Razorpay initialization in progress, waiting...
[2025-05-15T20:51:14.478Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:51:14.478Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:51:14.478Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:51:14.478Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:51:14.478Z] [STDOUT] Fetching invoices for subscription ID: sub_QUxcCis3igdqUA
[2025-05-15T20:51:14.478Z] [STDOUT] Found 0 invoices for subscription: sub_QUxcCis3igdqUA
[2025-05-15T20:51:14.478Z] [STDOUT] Found 0 invoices for subscription sub_QUxcCis3igdqUA
[2025-05-15T20:51:14.478Z] [STDOUT] Processing subscription 24 with Razorpay ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:51:14.478Z] [STDOUT] Subscription 24 has 1 existing transactions
[2025-05-15T20:51:14.478Z] [STDOUT] Fetching invoices for subscription ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:51:14.478Z] [STDOUT] Found 1 invoices for subscription: sub_QV05DCrgh3A2rL
[2025-05-15T20:51:14.478Z] [STDOUT] Transaction for payment pay_QV05q44fHQzL1q already exists in database (1 records), skipping
[2025-05-15T20:51:14.478Z] [STDOUT] Found 1 invoices for subscription sub_QV05DCrgh3A2rL
[2025-05-15T20:51:14.478Z] [STDOUT] Processing subscription 25 with Razorpay ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:51:14.478Z] [STDOUT] Subscription 25 has 2 existing transactions
[2025-05-15T20:51:14.478Z] [STDOUT] Fetching invoices for subscription ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:51:14.478Z] [STDOUT] Found 1 invoices for subscription: sub_QV1W0JNq2cOk7s
[2025-05-15T20:51:14.478Z] [STDOUT] Transaction for payment pay_QV1WoyCgCY23iO already exists in database (2 records), skipping
[2025-05-15T20:51:14.478Z] [STDOUT] Found 1 invoices for subscription sub_QV1W0JNq2cOk7s
[2025-05-15T20:51:14.478Z] [STDOUT] Processing subscription 26 with Razorpay ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:51:14.478Z] [STDOUT] Subscription 26 has 2 existing transactions
[2025-05-15T20:51:14.478Z] [STDOUT] Fetching invoices for subscription ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:51:14.478Z] [STDOUT] Found 2 invoices for subscription: sub_QVIG6dAuP0UXXn
[2025-05-15T20:51:14.478Z] [STDOUT] Transaction for payment pay_QVILKDuy9v6ovq already exists in database (1 records), skipping
[2025-05-15T20:51:14.478Z] [STDOUT] Transaction for payment pay_QVIGtXTXkm93W8 already exists in database (1 records), skipping
[2025-05-15T20:51:14.478Z] [STDOUT] Found 2 invoices for subscription sub_QVIG6dAuP0UXXn
[2025-05-15T20:51:14.478Z] [STDOUT] Subscription invoice synchronization complete!
[2025-05-15T20:51:14.478Z] [STDOUT] Processed 4 subscriptions
[2025-05-15T20:51:14.478Z] [STDOUT] Success: 4, Errors: 0
[2025-05-15T20:51:14.478Z] [STDOUT] Added 0 new transactions
[2025-05-15T20:51:14.478Z] [STDOUT] Script execution completed
[2025-05-15T20:51:14.478Z] Synchronization completed successfully
[2025-05-15T20:51:14.478Z] Next sync scheduled in 5 seconds
[2025-05-15T20:51:14.971Z] Starting invoice synchronization...
[2025-05-15T20:51:14.971Z] Running sync script: /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:51:14.971Z] Executing command: cd /Users/raja/Development/ProsumeAI/server && npx tsx /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:51:19.972Z] Starting invoice synchronization...
[2025-05-15T20:51:19.972Z] Running sync script: /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:51:19.972Z] Executing command: cd /Users/raja/Development/ProsumeAI/server && npx tsx /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:51:20.022Z] [STDOUT] Using database connection: postgres://***:***@localhost:5432/prosumeai
[2025-05-15T20:51:20.022Z] [STDOUT] Starting subscription invoice synchronization...
[2025-05-15T20:51:20.022Z] [STDOUT] Database schema validated successfully
[2025-05-15T20:51:20.022Z] [STDOUT] Found 4 active Razorpay subscriptions to sync
[2025-05-15T20:51:20.022Z] [STDOUT] Processing subscription 20 with Razorpay ID: sub_QUxcCis3igdqUA
[2025-05-15T20:51:20.022Z] [STDOUT] Subscription 20 has 1 existing transactions
[2025-05-15T20:51:20.022Z] [STDOUT] Razorpay initialization in progress, waiting...
[2025-05-15T20:51:20.022Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:51:20.022Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:51:20.022Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:51:20.022Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:51:20.022Z] [STDOUT] Fetching invoices for subscription ID: sub_QUxcCis3igdqUA
[2025-05-15T20:51:20.022Z] [STDOUT] Found 0 invoices for subscription: sub_QUxcCis3igdqUA
[2025-05-15T20:51:20.022Z] [STDOUT] Found 0 invoices for subscription sub_QUxcCis3igdqUA
[2025-05-15T20:51:20.022Z] [STDOUT] Processing subscription 24 with Razorpay ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:51:20.022Z] [STDOUT] Subscription 24 has 1 existing transactions
[2025-05-15T20:51:20.022Z] [STDOUT] Fetching invoices for subscription ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:51:20.022Z] [STDOUT] Found 1 invoices for subscription: sub_QV05DCrgh3A2rL
[2025-05-15T20:51:20.022Z] [STDOUT] Transaction for payment pay_QV05q44fHQzL1q already exists in database (1 records), skipping
[2025-05-15T20:51:20.022Z] [STDOUT] Found 1 invoices for subscription sub_QV05DCrgh3A2rL
[2025-05-15T20:51:20.022Z] [STDOUT] Processing subscription 25 with Razorpay ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:51:20.022Z] [STDOUT] Subscription 25 has 2 existing transactions
[2025-05-15T20:51:20.022Z] [STDOUT] Fetching invoices for subscription ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:51:20.022Z] [STDOUT] Found 1 invoices for subscription: sub_QV1W0JNq2cOk7s
[2025-05-15T20:51:20.022Z] [STDOUT] Transaction for payment pay_QV1WoyCgCY23iO already exists in database (2 records), skipping
[2025-05-15T20:51:20.022Z] [STDOUT] Found 1 invoices for subscription sub_QV1W0JNq2cOk7s
[2025-05-15T20:51:20.022Z] [STDOUT] Processing subscription 26 with Razorpay ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:51:20.022Z] [STDOUT] Subscription 26 has 2 existing transactions
[2025-05-15T20:51:20.022Z] [STDOUT] Fetching invoices for subscription ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:51:20.022Z] [STDOUT] Found 2 invoices for subscription: sub_QVIG6dAuP0UXXn
[2025-05-15T20:51:20.022Z] [STDOUT] Transaction for payment pay_QVILKDuy9v6ovq already exists in database (1 records), skipping
[2025-05-15T20:51:20.022Z] [STDOUT] Transaction for payment pay_QVIGtXTXkm93W8 already exists in database (1 records), skipping
[2025-05-15T20:51:20.022Z] [STDOUT] Found 2 invoices for subscription sub_QVIG6dAuP0UXXn
[2025-05-15T20:51:20.022Z] [STDOUT] Subscription invoice synchronization complete!
[2025-05-15T20:51:20.022Z] [STDOUT] Processed 4 subscriptions
[2025-05-15T20:51:20.022Z] [STDOUT] Success: 4, Errors: 0
[2025-05-15T20:51:20.022Z] [STDOUT] Added 0 new transactions
[2025-05-15T20:51:20.022Z] [STDOUT] Script execution completed
[2025-05-15T20:51:20.022Z] Synchronization completed successfully
[2025-05-15T20:51:20.022Z] Next sync scheduled in 5 seconds
[2025-05-15T20:51:24.296Z] [STDOUT] Using database connection: postgres://***:***@localhost:5432/prosumeai
[2025-05-15T20:51:24.296Z] [STDOUT] Starting subscription invoice synchronization...
[2025-05-15T20:51:24.296Z] [STDOUT] Found 4 active Razorpay subscriptions to sync
[2025-05-15T20:51:24.296Z] [STDOUT] Processing subscription 20 with Razorpay ID: sub_QUxcCis3igdqUA
[2025-05-15T20:51:24.296Z] [STDOUT] Database schema validated successfully
[2025-05-15T20:51:24.296Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:51:24.296Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:51:24.296Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:51:24.296Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:51:24.296Z] [STDOUT] Subscription 20 has 1 existing transactions
[2025-05-15T20:51:24.296Z] [STDOUT] Fetching invoices for subscription ID: sub_QUxcCis3igdqUA
[2025-05-15T20:51:24.296Z] [STDOUT] Found 0 invoices for subscription: sub_QUxcCis3igdqUA
[2025-05-15T20:51:24.296Z] [STDOUT] Found 0 invoices for subscription sub_QUxcCis3igdqUA
[2025-05-15T20:51:24.296Z] [STDOUT] Processing subscription 24 with Razorpay ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:51:24.296Z] [STDOUT] Subscription 24 has 1 existing transactions
[2025-05-15T20:51:24.296Z] [STDOUT] Fetching invoices for subscription ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:51:24.296Z] [STDOUT] Found 1 invoices for subscription: sub_QV05DCrgh3A2rL
[2025-05-15T20:51:24.296Z] [STDOUT] Transaction for payment pay_QV05q44fHQzL1q already exists in database (1 records), skipping
[2025-05-15T20:51:24.296Z] [STDOUT] Found 1 invoices for subscription sub_QV05DCrgh3A2rL
[2025-05-15T20:51:24.296Z] [STDOUT] Processing subscription 25 with Razorpay ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:51:24.296Z] [STDOUT] Subscription 25 has 2 existing transactions
[2025-05-15T20:51:24.296Z] [STDOUT] Fetching invoices for subscription ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:51:24.296Z] [STDOUT] Found 1 invoices for subscription: sub_QV1W0JNq2cOk7s
[2025-05-15T20:51:24.296Z] [STDOUT] Transaction for payment pay_QV1WoyCgCY23iO already exists in database (2 records), skipping
[2025-05-15T20:51:24.296Z] [STDOUT] Found 1 invoices for subscription sub_QV1W0JNq2cOk7s
[2025-05-15T20:51:24.296Z] [STDOUT] Processing subscription 26 with Razorpay ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:51:24.296Z] [STDOUT] Subscription 26 has 2 existing transactions
[2025-05-15T20:51:24.296Z] [STDOUT] Fetching invoices for subscription ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:51:24.296Z] [STDOUT] Found 2 invoices for subscription: sub_QVIG6dAuP0UXXn
[2025-05-15T20:51:24.296Z] [STDOUT] Transaction for payment pay_QVILKDuy9v6ovq already exists in database (1 records), skipping
[2025-05-15T20:51:24.296Z] [STDOUT] Transaction for payment pay_QVIGtXTXkm93W8 already exists in database (1 records), skipping
[2025-05-15T20:51:24.296Z] [STDOUT] Found 2 invoices for subscription sub_QVIG6dAuP0UXXn
[2025-05-15T20:51:24.296Z] [STDOUT] Subscription invoice synchronization complete!
[2025-05-15T20:51:24.296Z] [STDOUT] Processed 4 subscriptions
[2025-05-15T20:51:24.296Z] [STDOUT] Success: 4, Errors: 0
[2025-05-15T20:51:24.296Z] [STDOUT] Added 0 new transactions
[2025-05-15T20:51:24.296Z] [STDOUT] Script execution completed
[2025-05-15T20:51:24.296Z] Synchronization completed successfully
[2025-05-15T20:51:24.296Z] Next sync scheduled in 5 seconds
[2025-05-15T20:51:24.973Z] Starting invoice synchronization...
[2025-05-15T20:51:24.974Z] Running sync script: /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:51:24.974Z] Executing command: cd /Users/raja/Development/ProsumeAI/server && npx tsx /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:51:29.658Z] [STDOUT] Using database connection: postgres://***:***@localhost:5432/prosumeai
[2025-05-15T20:51:29.659Z] [STDOUT] Starting subscription invoice synchronization...
[2025-05-15T20:51:29.659Z] [STDOUT] Database schema validated successfully
[2025-05-15T20:51:29.659Z] [STDOUT] Found 4 active Razorpay subscriptions to sync
[2025-05-15T20:51:29.659Z] [STDOUT] Processing subscription 20 with Razorpay ID: sub_QUxcCis3igdqUA
[2025-05-15T20:51:29.659Z] [STDOUT] Subscription 20 has 1 existing transactions
[2025-05-15T20:51:29.659Z] [STDOUT] Razorpay initialization in progress, waiting...
[2025-05-15T20:51:29.659Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:51:29.659Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:51:29.659Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:51:29.659Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:51:29.659Z] [STDOUT] Fetching invoices for subscription ID: sub_QUxcCis3igdqUA
[2025-05-15T20:51:29.659Z] [STDOUT] Found 0 invoices for subscription: sub_QUxcCis3igdqUA
[2025-05-15T20:51:29.659Z] [STDOUT] Found 0 invoices for subscription sub_QUxcCis3igdqUA
[2025-05-15T20:51:29.659Z] [STDOUT] Processing subscription 24 with Razorpay ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:51:29.659Z] [STDOUT] Subscription 24 has 1 existing transactions
[2025-05-15T20:51:29.659Z] [STDOUT] Fetching invoices for subscription ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:51:29.659Z] [STDOUT] Found 1 invoices for subscription: sub_QV05DCrgh3A2rL
[2025-05-15T20:51:29.659Z] [STDOUT] Transaction for payment pay_QV05q44fHQzL1q already exists in database (1 records), skipping
[2025-05-15T20:51:29.659Z] [STDOUT] Found 1 invoices for subscription sub_QV05DCrgh3A2rL
[2025-05-15T20:51:29.659Z] [STDOUT] Processing subscription 25 with Razorpay ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:51:29.659Z] [STDOUT] Subscription 25 has 2 existing transactions
[2025-05-15T20:51:29.659Z] [STDOUT] Fetching invoices for subscription ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:51:29.659Z] [STDOUT] Found 1 invoices for subscription: sub_QV1W0JNq2cOk7s
[2025-05-15T20:51:29.659Z] [STDOUT] Transaction for payment pay_QV1WoyCgCY23iO already exists in database (2 records), skipping
[2025-05-15T20:51:29.659Z] [STDOUT] Found 1 invoices for subscription sub_QV1W0JNq2cOk7s
[2025-05-15T20:51:29.659Z] [STDOUT] Processing subscription 26 with Razorpay ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:51:29.659Z] [STDOUT] Subscription 26 has 2 existing transactions
[2025-05-15T20:51:29.659Z] [STDOUT] Fetching invoices for subscription ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:51:29.659Z] [STDOUT] Found 2 invoices for subscription: sub_QVIG6dAuP0UXXn
[2025-05-15T20:51:29.659Z] [STDOUT] Transaction for payment pay_QVILKDuy9v6ovq already exists in database (1 records), skipping
[2025-05-15T20:51:29.659Z] [STDOUT] Transaction for payment pay_QVIGtXTXkm93W8 already exists in database (1 records), skipping
[2025-05-15T20:51:29.659Z] [STDOUT] Found 2 invoices for subscription sub_QVIG6dAuP0UXXn
[2025-05-15T20:51:29.659Z] [STDOUT] Subscription invoice synchronization complete!
[2025-05-15T20:51:29.659Z] [STDOUT] Processed 4 subscriptions
[2025-05-15T20:51:29.659Z] [STDOUT] Success: 4, Errors: 0
[2025-05-15T20:51:29.659Z] [STDOUT] Added 0 new transactions
[2025-05-15T20:51:29.659Z] [STDOUT] Script execution completed
[2025-05-15T20:51:29.659Z] Synchronization completed successfully
[2025-05-15T20:51:29.659Z] Next sync scheduled in 5 seconds
[2025-05-15T20:51:29.973Z] Starting invoice synchronization...
[2025-05-15T20:51:29.974Z] Running sync script: /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:51:29.974Z] Executing command: cd /Users/raja/Development/ProsumeAI/server && npx tsx /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:51:34.974Z] Starting invoice synchronization...
[2025-05-15T20:51:34.974Z] Running sync script: /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:51:34.974Z] Executing command: cd /Users/raja/Development/ProsumeAI/server && npx tsx /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:51:35.206Z] [STDOUT] Using database connection: postgres://***:***@localhost:5432/prosumeai
[2025-05-15T20:51:35.206Z] [STDOUT] Starting subscription invoice synchronization...
[2025-05-15T20:51:35.206Z] [STDOUT] Database schema validated successfully
[2025-05-15T20:51:35.206Z] [STDOUT] Found 4 active Razorpay subscriptions to sync
[2025-05-15T20:51:35.206Z] [STDOUT] Processing subscription 20 with Razorpay ID: sub_QUxcCis3igdqUA
[2025-05-15T20:51:35.206Z] [STDOUT] Subscription 20 has 1 existing transactions
[2025-05-15T20:51:35.206Z] [STDOUT] Razorpay initialization in progress, waiting...
[2025-05-15T20:51:35.207Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:51:35.207Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:51:35.207Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:51:35.207Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:51:35.207Z] [STDOUT] Fetching invoices for subscription ID: sub_QUxcCis3igdqUA
[2025-05-15T20:51:35.207Z] [STDOUT] Found 0 invoices for subscription: sub_QUxcCis3igdqUA
[2025-05-15T20:51:35.207Z] [STDOUT] Found 0 invoices for subscription sub_QUxcCis3igdqUA
[2025-05-15T20:51:35.207Z] [STDOUT] Processing subscription 24 with Razorpay ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:51:35.207Z] [STDOUT] Subscription 24 has 1 existing transactions
[2025-05-15T20:51:35.207Z] [STDOUT] Fetching invoices for subscription ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:51:35.207Z] [STDOUT] Found 1 invoices for subscription: sub_QV05DCrgh3A2rL
[2025-05-15T20:51:35.207Z] [STDOUT] Transaction for payment pay_QV05q44fHQzL1q already exists in database (1 records), skipping
[2025-05-15T20:51:35.207Z] [STDOUT] Found 1 invoices for subscription sub_QV05DCrgh3A2rL
[2025-05-15T20:51:35.207Z] [STDOUT] Processing subscription 25 with Razorpay ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:51:35.207Z] [STDOUT] Subscription 25 has 2 existing transactions
[2025-05-15T20:51:35.207Z] [STDOUT] Fetching invoices for subscription ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:51:35.207Z] [STDOUT] Found 1 invoices for subscription: sub_QV1W0JNq2cOk7s
[2025-05-15T20:51:35.207Z] [STDOUT] Transaction for payment pay_QV1WoyCgCY23iO already exists in database (2 records), skipping
[2025-05-15T20:51:35.207Z] [STDOUT] Found 1 invoices for subscription sub_QV1W0JNq2cOk7s
[2025-05-15T20:51:35.207Z] [STDOUT] Processing subscription 26 with Razorpay ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:51:35.207Z] [STDOUT] Subscription 26 has 2 existing transactions
[2025-05-15T20:51:35.207Z] [STDOUT] Fetching invoices for subscription ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:51:35.207Z] [STDOUT] Found 2 invoices for subscription: sub_QVIG6dAuP0UXXn
[2025-05-15T20:51:35.207Z] [STDOUT] Transaction for payment pay_QVILKDuy9v6ovq already exists in database (1 records), skipping
[2025-05-15T20:51:35.207Z] [STDOUT] Transaction for payment pay_QVIGtXTXkm93W8 already exists in database (1 records), skipping
[2025-05-15T20:51:35.207Z] [STDOUT] Found 2 invoices for subscription sub_QVIG6dAuP0UXXn
[2025-05-15T20:51:35.207Z] [STDOUT] Subscription invoice synchronization complete!
[2025-05-15T20:51:35.207Z] [STDOUT] Processed 4 subscriptions
[2025-05-15T20:51:35.207Z] [STDOUT] Success: 4, Errors: 0
[2025-05-15T20:51:35.207Z] [STDOUT] Added 0 new transactions
[2025-05-15T20:51:35.207Z] [STDOUT] Script execution completed
[2025-05-15T20:51:35.207Z] Synchronization completed successfully
[2025-05-15T20:51:35.207Z] Next sync scheduled in 5 seconds
[2025-05-15T20:51:39.975Z] Starting invoice synchronization...
[2025-05-15T20:51:39.976Z] Running sync script: /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:51:39.976Z] Executing command: cd /Users/raja/Development/ProsumeAI/server && npx tsx /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:51:40.297Z] [STDOUT] Using database connection: postgres://***:***@localhost:5432/prosumeai
[2025-05-15T20:51:40.297Z] [STDOUT] Starting subscription invoice synchronization...
[2025-05-15T20:51:40.297Z] [STDOUT] Database schema validated successfully
[2025-05-15T20:51:40.297Z] [STDOUT] Found 4 active Razorpay subscriptions to sync
[2025-05-15T20:51:40.297Z] [STDOUT] Processing subscription 20 with Razorpay ID: sub_QUxcCis3igdqUA
[2025-05-15T20:51:40.297Z] [STDOUT] Subscription 20 has 1 existing transactions
[2025-05-15T20:51:40.297Z] [STDOUT] Razorpay initialization in progress, waiting...
[2025-05-15T20:51:40.297Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:51:40.297Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:51:40.297Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:51:40.297Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:51:40.297Z] [STDOUT] Fetching invoices for subscription ID: sub_QUxcCis3igdqUA
[2025-05-15T20:51:40.297Z] [STDOUT] Found 0 invoices for subscription: sub_QUxcCis3igdqUA
[2025-05-15T20:51:40.297Z] [STDOUT] Found 0 invoices for subscription sub_QUxcCis3igdqUA
[2025-05-15T20:51:40.297Z] [STDOUT] Processing subscription 24 with Razorpay ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:51:40.297Z] [STDOUT] Subscription 24 has 1 existing transactions
[2025-05-15T20:51:40.297Z] [STDOUT] Fetching invoices for subscription ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:51:40.297Z] [STDOUT] Found 1 invoices for subscription: sub_QV05DCrgh3A2rL
[2025-05-15T20:51:40.297Z] [STDOUT] Transaction for payment pay_QV05q44fHQzL1q already exists in database (1 records), skipping
[2025-05-15T20:51:40.297Z] [STDOUT] Found 1 invoices for subscription sub_QV05DCrgh3A2rL
[2025-05-15T20:51:40.297Z] [STDOUT] Processing subscription 25 with Razorpay ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:51:40.297Z] [STDOUT] Subscription 25 has 2 existing transactions
[2025-05-15T20:51:40.297Z] [STDOUT] Fetching invoices for subscription ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:51:40.297Z] [STDOUT] Found 1 invoices for subscription: sub_QV1W0JNq2cOk7s
[2025-05-15T20:51:40.297Z] [STDOUT] Transaction for payment pay_QV1WoyCgCY23iO already exists in database (2 records), skipping
[2025-05-15T20:51:40.297Z] [STDOUT] Found 1 invoices for subscription sub_QV1W0JNq2cOk7s
[2025-05-15T20:51:40.297Z] [STDOUT] Processing subscription 26 with Razorpay ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:51:40.297Z] [STDOUT] Subscription 26 has 2 existing transactions
[2025-05-15T20:51:40.297Z] [STDOUT] Fetching invoices for subscription ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:51:40.297Z] [STDOUT] Found 2 invoices for subscription: sub_QVIG6dAuP0UXXn
[2025-05-15T20:51:40.297Z] [STDOUT] Transaction for payment pay_QVILKDuy9v6ovq already exists in database (1 records), skipping
[2025-05-15T20:51:40.297Z] [STDOUT] Transaction for payment pay_QVIGtXTXkm93W8 already exists in database (1 records), skipping
[2025-05-15T20:51:40.297Z] [STDOUT] Found 2 invoices for subscription sub_QVIG6dAuP0UXXn
[2025-05-15T20:51:40.297Z] [STDOUT] Subscription invoice synchronization complete!
[2025-05-15T20:51:40.297Z] [STDOUT] Processed 4 subscriptions
[2025-05-15T20:51:40.297Z] [STDOUT] Success: 4, Errors: 0
[2025-05-15T20:51:40.297Z] [STDOUT] Added 0 new transactions
[2025-05-15T20:51:40.297Z] [STDOUT] Script execution completed
[2025-05-15T20:51:40.297Z] Synchronization completed successfully
[2025-05-15T20:51:40.297Z] Next sync scheduled in 5 seconds
[2025-05-15T20:51:44.953Z] [STDOUT] Using database connection: postgres://***:***@localhost:5432/prosumeai
[2025-05-15T20:51:44.954Z] [STDOUT] Starting subscription invoice synchronization...
[2025-05-15T20:51:44.954Z] [STDOUT] Database schema validated successfully
[2025-05-15T20:51:44.954Z] [STDOUT] Found 4 active Razorpay subscriptions to sync
[2025-05-15T20:51:44.954Z] [STDOUT] Processing subscription 20 with Razorpay ID: sub_QUxcCis3igdqUA
[2025-05-15T20:51:44.954Z] [STDOUT] Subscription 20 has 1 existing transactions
[2025-05-15T20:51:44.954Z] [STDOUT] Razorpay initialization in progress, waiting...
[2025-05-15T20:51:44.954Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:51:44.954Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:51:44.954Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:51:44.954Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:51:44.954Z] [STDOUT] Fetching invoices for subscription ID: sub_QUxcCis3igdqUA
[2025-05-15T20:51:44.954Z] [STDOUT] Found 0 invoices for subscription: sub_QUxcCis3igdqUA
[2025-05-15T20:51:44.954Z] [STDOUT] Found 0 invoices for subscription sub_QUxcCis3igdqUA
[2025-05-15T20:51:44.954Z] [STDOUT] Processing subscription 24 with Razorpay ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:51:44.954Z] [STDOUT] Subscription 24 has 1 existing transactions
[2025-05-15T20:51:44.954Z] [STDOUT] Fetching invoices for subscription ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:51:44.954Z] [STDOUT] Found 1 invoices for subscription: sub_QV05DCrgh3A2rL
[2025-05-15T20:51:44.954Z] [STDOUT] Transaction for payment pay_QV05q44fHQzL1q already exists in database (1 records), skipping
[2025-05-15T20:51:44.954Z] [STDOUT] Found 1 invoices for subscription sub_QV05DCrgh3A2rL
[2025-05-15T20:51:44.954Z] [STDOUT] Processing subscription 25 with Razorpay ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:51:44.954Z] [STDOUT] Subscription 25 has 2 existing transactions
[2025-05-15T20:51:44.954Z] [STDOUT] Fetching invoices for subscription ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:51:44.954Z] [STDOUT] Found 1 invoices for subscription: sub_QV1W0JNq2cOk7s
[2025-05-15T20:51:44.954Z] [STDOUT] Transaction for payment pay_QV1WoyCgCY23iO already exists in database (2 records), skipping
[2025-05-15T20:51:44.954Z] [STDOUT] Found 1 invoices for subscription sub_QV1W0JNq2cOk7s
[2025-05-15T20:51:44.954Z] [STDOUT] Processing subscription 26 with Razorpay ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:51:44.954Z] [STDOUT] Subscription 26 has 2 existing transactions
[2025-05-15T20:51:44.954Z] [STDOUT] Fetching invoices for subscription ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:51:44.954Z] [STDOUT] Found 2 invoices for subscription: sub_QVIG6dAuP0UXXn
[2025-05-15T20:51:44.954Z] [STDOUT] Transaction for payment pay_QVILKDuy9v6ovq already exists in database (1 records), skipping
[2025-05-15T20:51:44.954Z] [STDOUT] Transaction for payment pay_QVIGtXTXkm93W8 already exists in database (1 records), skipping
[2025-05-15T20:51:44.954Z] [STDOUT] Found 2 invoices for subscription sub_QVIG6dAuP0UXXn
[2025-05-15T20:51:44.954Z] [STDOUT] Subscription invoice synchronization complete!
[2025-05-15T20:51:44.954Z] [STDOUT] Processed 4 subscriptions
[2025-05-15T20:51:44.954Z] [STDOUT] Success: 4, Errors: 0
[2025-05-15T20:51:44.954Z] [STDOUT] Added 0 new transactions
[2025-05-15T20:51:44.954Z] [STDOUT] Script execution completed
[2025-05-15T20:51:44.954Z] Synchronization completed successfully
[2025-05-15T20:51:44.954Z] Next sync scheduled in 5 seconds
[2025-05-15T20:51:44.976Z] Starting invoice synchronization...
[2025-05-15T20:51:44.976Z] Running sync script: /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:51:44.976Z] Executing command: cd /Users/raja/Development/ProsumeAI/server && npx tsx /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:51:49.977Z] Starting invoice synchronization...
[2025-05-15T20:51:49.978Z] Running sync script: /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:51:49.978Z] Executing command: cd /Users/raja/Development/ProsumeAI/server && npx tsx /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:51:50.187Z] [STDOUT] Using database connection: postgres://***:***@localhost:5432/prosumeai
[2025-05-15T20:51:50.187Z] [STDOUT] Starting subscription invoice synchronization...
[2025-05-15T20:51:50.187Z] [STDOUT] Database schema validated successfully
[2025-05-15T20:51:50.187Z] [STDOUT] Found 4 active Razorpay subscriptions to sync
[2025-05-15T20:51:50.187Z] [STDOUT] Processing subscription 20 with Razorpay ID: sub_QUxcCis3igdqUA
[2025-05-15T20:51:50.187Z] [STDOUT] Subscription 20 has 1 existing transactions
[2025-05-15T20:51:50.187Z] [STDOUT] Razorpay initialization in progress, waiting...
[2025-05-15T20:51:50.187Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:51:50.187Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:51:50.187Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:51:50.187Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:51:50.187Z] [STDOUT] Fetching invoices for subscription ID: sub_QUxcCis3igdqUA
[2025-05-15T20:51:50.187Z] [STDOUT] Found 0 invoices for subscription: sub_QUxcCis3igdqUA
[2025-05-15T20:51:50.187Z] [STDOUT] Found 0 invoices for subscription sub_QUxcCis3igdqUA
[2025-05-15T20:51:50.187Z] [STDOUT] Processing subscription 24 with Razorpay ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:51:50.187Z] [STDOUT] Subscription 24 has 1 existing transactions
[2025-05-15T20:51:50.187Z] [STDOUT] Fetching invoices for subscription ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:51:50.187Z] [STDOUT] Found 1 invoices for subscription: sub_QV05DCrgh3A2rL
[2025-05-15T20:51:50.187Z] [STDOUT] Transaction for payment pay_QV05q44fHQzL1q already exists in database (1 records), skipping
[2025-05-15T20:51:50.187Z] [STDOUT] Found 1 invoices for subscription sub_QV05DCrgh3A2rL
[2025-05-15T20:51:50.187Z] [STDOUT] Processing subscription 25 with Razorpay ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:51:50.187Z] [STDOUT] Subscription 25 has 2 existing transactions
[2025-05-15T20:51:50.187Z] [STDOUT] Fetching invoices for subscription ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:51:50.187Z] [STDOUT] Found 1 invoices for subscription: sub_QV1W0JNq2cOk7s
[2025-05-15T20:51:50.187Z] [STDOUT] Transaction for payment pay_QV1WoyCgCY23iO already exists in database (2 records), skipping
[2025-05-15T20:51:50.187Z] [STDOUT] Found 1 invoices for subscription sub_QV1W0JNq2cOk7s
[2025-05-15T20:51:50.187Z] [STDOUT] Processing subscription 26 with Razorpay ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:51:50.187Z] [STDOUT] Subscription 26 has 2 existing transactions
[2025-05-15T20:51:50.187Z] [STDOUT] Fetching invoices for subscription ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:51:50.187Z] [STDOUT] Found 2 invoices for subscription: sub_QVIG6dAuP0UXXn
[2025-05-15T20:51:50.187Z] [STDOUT] Transaction for payment pay_QVILKDuy9v6ovq already exists in database (1 records), skipping
[2025-05-15T20:51:50.187Z] [STDOUT] Transaction for payment pay_QVIGtXTXkm93W8 already exists in database (1 records), skipping
[2025-05-15T20:51:50.187Z] [STDOUT] Found 2 invoices for subscription sub_QVIG6dAuP0UXXn
[2025-05-15T20:51:50.187Z] [STDOUT] Subscription invoice synchronization complete!
[2025-05-15T20:51:50.187Z] [STDOUT] Processed 4 subscriptions
[2025-05-15T20:51:50.187Z] [STDOUT] Success: 4, Errors: 0
[2025-05-15T20:51:50.187Z] [STDOUT] Added 0 new transactions
[2025-05-15T20:51:50.187Z] [STDOUT] Script execution completed
[2025-05-15T20:51:50.187Z] Synchronization completed successfully
[2025-05-15T20:51:50.187Z] Next sync scheduled in 5 seconds
[2025-05-15T20:51:54.978Z] Starting invoice synchronization...
[2025-05-15T20:51:54.978Z] Running sync script: /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:51:54.978Z] Executing command: cd /Users/raja/Development/ProsumeAI/server && npx tsx /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:51:55.026Z] [STDOUT] Using database connection: postgres://***:***@localhost:5432/prosumeai
[2025-05-15T20:51:55.026Z] [STDOUT] Starting subscription invoice synchronization...
[2025-05-15T20:51:55.026Z] [STDOUT] Database schema validated successfully
[2025-05-15T20:51:55.026Z] [STDOUT] Found 4 active Razorpay subscriptions to sync
[2025-05-15T20:51:55.026Z] [STDOUT] Processing subscription 20 with Razorpay ID: sub_QUxcCis3igdqUA
[2025-05-15T20:51:55.026Z] [STDOUT] Subscription 20 has 1 existing transactions
[2025-05-15T20:51:55.026Z] [STDOUT] Razorpay initialization in progress, waiting...
[2025-05-15T20:51:55.026Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:51:55.026Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:51:55.026Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:51:55.026Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:51:55.026Z] [STDOUT] Fetching invoices for subscription ID: sub_QUxcCis3igdqUA
[2025-05-15T20:51:55.026Z] [STDOUT] Found 0 invoices for subscription: sub_QUxcCis3igdqUA
[2025-05-15T20:51:55.026Z] [STDOUT] Found 0 invoices for subscription sub_QUxcCis3igdqUA
[2025-05-15T20:51:55.026Z] [STDOUT] Processing subscription 24 with Razorpay ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:51:55.026Z] [STDOUT] Subscription 24 has 1 existing transactions
[2025-05-15T20:51:55.026Z] [STDOUT] Fetching invoices for subscription ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:51:55.026Z] [STDOUT] Found 1 invoices for subscription: sub_QV05DCrgh3A2rL
[2025-05-15T20:51:55.026Z] [STDOUT] Transaction for payment pay_QV05q44fHQzL1q already exists in database (1 records), skipping
[2025-05-15T20:51:55.026Z] [STDOUT] Found 1 invoices for subscription sub_QV05DCrgh3A2rL
[2025-05-15T20:51:55.026Z] [STDOUT] Processing subscription 25 with Razorpay ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:51:55.026Z] [STDOUT] Subscription 25 has 2 existing transactions
[2025-05-15T20:51:55.026Z] [STDOUT] Fetching invoices for subscription ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:51:55.026Z] [STDOUT] Found 1 invoices for subscription: sub_QV1W0JNq2cOk7s
[2025-05-15T20:51:55.026Z] [STDOUT] Transaction for payment pay_QV1WoyCgCY23iO already exists in database (2 records), skipping
[2025-05-15T20:51:55.026Z] [STDOUT] Found 1 invoices for subscription sub_QV1W0JNq2cOk7s
[2025-05-15T20:51:55.026Z] [STDOUT] Processing subscription 26 with Razorpay ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:51:55.026Z] [STDOUT] Subscription 26 has 2 existing transactions
[2025-05-15T20:51:55.026Z] [STDOUT] Fetching invoices for subscription ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:51:55.026Z] [STDOUT] Found 2 invoices for subscription: sub_QVIG6dAuP0UXXn
[2025-05-15T20:51:55.026Z] [STDOUT] Transaction for payment pay_QVILKDuy9v6ovq already exists in database (1 records), skipping
[2025-05-15T20:51:55.026Z] [STDOUT] Transaction for payment pay_QVIGtXTXkm93W8 already exists in database (1 records), skipping
[2025-05-15T20:51:55.026Z] [STDOUT] Found 2 invoices for subscription sub_QVIG6dAuP0UXXn
[2025-05-15T20:51:55.026Z] [STDOUT] Subscription invoice synchronization complete!
[2025-05-15T20:51:55.026Z] [STDOUT] Processed 4 subscriptions
[2025-05-15T20:51:55.026Z] [STDOUT] Success: 4, Errors: 0
[2025-05-15T20:51:55.026Z] [STDOUT] Added 0 new transactions
[2025-05-15T20:51:55.026Z] [STDOUT] Script execution completed
[2025-05-15T20:51:55.026Z] Synchronization completed successfully
[2025-05-15T20:51:55.026Z] Next sync scheduled in 5 seconds
[2025-05-15T20:51:59.928Z] [STDOUT] Using database connection: postgres://***:***@localhost:5432/prosumeai
[2025-05-15T20:51:59.928Z] [STDOUT] Starting subscription invoice synchronization...
[2025-05-15T20:51:59.928Z] [STDOUT] Database schema validated successfully
[2025-05-15T20:51:59.928Z] [STDOUT] Found 4 active Razorpay subscriptions to sync
[2025-05-15T20:51:59.928Z] [STDOUT] Processing subscription 20 with Razorpay ID: sub_QUxcCis3igdqUA
[2025-05-15T20:51:59.928Z] [STDOUT] Subscription 20 has 1 existing transactions
[2025-05-15T20:51:59.928Z] [STDOUT] Razorpay initialization in progress, waiting...
[2025-05-15T20:51:59.928Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:51:59.928Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:51:59.928Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:51:59.928Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:51:59.928Z] [STDOUT] Fetching invoices for subscription ID: sub_QUxcCis3igdqUA
[2025-05-15T20:51:59.928Z] [STDOUT] Found 0 invoices for subscription: sub_QUxcCis3igdqUA
[2025-05-15T20:51:59.928Z] [STDOUT] Found 0 invoices for subscription sub_QUxcCis3igdqUA
[2025-05-15T20:51:59.928Z] [STDOUT] Processing subscription 24 with Razorpay ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:51:59.928Z] [STDOUT] Subscription 24 has 1 existing transactions
[2025-05-15T20:51:59.928Z] [STDOUT] Fetching invoices for subscription ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:51:59.928Z] [STDOUT] Found 1 invoices for subscription: sub_QV05DCrgh3A2rL
[2025-05-15T20:51:59.928Z] [STDOUT] Transaction for payment pay_QV05q44fHQzL1q already exists in database (1 records), skipping
[2025-05-15T20:51:59.928Z] [STDOUT] Found 1 invoices for subscription sub_QV05DCrgh3A2rL
[2025-05-15T20:51:59.928Z] [STDOUT] Processing subscription 25 with Razorpay ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:51:59.928Z] [STDOUT] Subscription 25 has 2 existing transactions
[2025-05-15T20:51:59.928Z] [STDOUT] Fetching invoices for subscription ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:51:59.928Z] [STDOUT] Found 1 invoices for subscription: sub_QV1W0JNq2cOk7s
[2025-05-15T20:51:59.928Z] [STDOUT] Transaction for payment pay_QV1WoyCgCY23iO already exists in database (2 records), skipping
[2025-05-15T20:51:59.928Z] [STDOUT] Found 1 invoices for subscription sub_QV1W0JNq2cOk7s
[2025-05-15T20:51:59.928Z] [STDOUT] Processing subscription 26 with Razorpay ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:51:59.928Z] [STDOUT] Subscription 26 has 2 existing transactions
[2025-05-15T20:51:59.928Z] [STDOUT] Fetching invoices for subscription ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:51:59.928Z] [STDOUT] Found 2 invoices for subscription: sub_QVIG6dAuP0UXXn
[2025-05-15T20:51:59.928Z] [STDOUT] Transaction for payment pay_QVILKDuy9v6ovq already exists in database (1 records), skipping
[2025-05-15T20:51:59.928Z] [STDOUT] Transaction for payment pay_QVIGtXTXkm93W8 already exists in database (1 records), skipping
[2025-05-15T20:51:59.928Z] [STDOUT] Found 2 invoices for subscription sub_QVIG6dAuP0UXXn
[2025-05-15T20:51:59.928Z] [STDOUT] Subscription invoice synchronization complete!
[2025-05-15T20:51:59.928Z] [STDOUT] Processed 4 subscriptions
[2025-05-15T20:51:59.928Z] [STDOUT] Success: 4, Errors: 0
[2025-05-15T20:51:59.928Z] [STDOUT] Added 0 new transactions
[2025-05-15T20:51:59.928Z] [STDOUT] Script execution completed
[2025-05-15T20:51:59.928Z] Synchronization completed successfully
[2025-05-15T20:51:59.928Z] Next sync scheduled in 5 seconds
[2025-05-15T20:51:59.979Z] Starting invoice synchronization...
[2025-05-15T20:51:59.979Z] Running sync script: /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:51:59.979Z] Executing command: cd /Users/raja/Development/ProsumeAI/server && npx tsx /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:52:04.693Z] [STDOUT] Using database connection: postgres://***:***@localhost:5432/prosumeai
[2025-05-15T20:52:04.693Z] [STDOUT] Starting subscription invoice synchronization...
[2025-05-15T20:52:04.693Z] [STDOUT] Database schema validated successfully
[2025-05-15T20:52:04.693Z] [STDOUT] Found 4 active Razorpay subscriptions to sync
[2025-05-15T20:52:04.693Z] [STDOUT] Processing subscription 20 with Razorpay ID: sub_QUxcCis3igdqUA
[2025-05-15T20:52:04.693Z] [STDOUT] Subscription 20 has 1 existing transactions
[2025-05-15T20:52:04.693Z] [STDOUT] Razorpay initialization in progress, waiting...
[2025-05-15T20:52:04.693Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:52:04.693Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:52:04.693Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:52:04.693Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:52:04.693Z] [STDOUT] Fetching invoices for subscription ID: sub_QUxcCis3igdqUA
[2025-05-15T20:52:04.693Z] [STDOUT] Found 0 invoices for subscription: sub_QUxcCis3igdqUA
[2025-05-15T20:52:04.693Z] [STDOUT] Found 0 invoices for subscription sub_QUxcCis3igdqUA
[2025-05-15T20:52:04.693Z] [STDOUT] Processing subscription 24 with Razorpay ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:52:04.693Z] [STDOUT] Subscription 24 has 1 existing transactions
[2025-05-15T20:52:04.693Z] [STDOUT] Fetching invoices for subscription ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:52:04.693Z] [STDOUT] Found 1 invoices for subscription: sub_QV05DCrgh3A2rL
[2025-05-15T20:52:04.693Z] [STDOUT] Transaction for payment pay_QV05q44fHQzL1q already exists in database (1 records), skipping
[2025-05-15T20:52:04.693Z] [STDOUT] Found 1 invoices for subscription sub_QV05DCrgh3A2rL
[2025-05-15T20:52:04.693Z] [STDOUT] Processing subscription 25 with Razorpay ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:52:04.693Z] [STDOUT] Subscription 25 has 2 existing transactions
[2025-05-15T20:52:04.693Z] [STDOUT] Fetching invoices for subscription ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:52:04.693Z] [STDOUT] Found 1 invoices for subscription: sub_QV1W0JNq2cOk7s
[2025-05-15T20:52:04.693Z] [STDOUT] Transaction for payment pay_QV1WoyCgCY23iO already exists in database (2 records), skipping
[2025-05-15T20:52:04.693Z] [STDOUT] Found 1 invoices for subscription sub_QV1W0JNq2cOk7s
[2025-05-15T20:52:04.693Z] [STDOUT] Processing subscription 26 with Razorpay ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:52:04.693Z] [STDOUT] Subscription 26 has 2 existing transactions
[2025-05-15T20:52:04.693Z] [STDOUT] Fetching invoices for subscription ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:52:04.693Z] [STDOUT] Found 2 invoices for subscription: sub_QVIG6dAuP0UXXn
[2025-05-15T20:52:04.693Z] [STDOUT] Transaction for payment pay_QVILKDuy9v6ovq already exists in database (1 records), skipping
[2025-05-15T20:52:04.693Z] [STDOUT] Transaction for payment pay_QVIGtXTXkm93W8 already exists in database (1 records), skipping
[2025-05-15T20:52:04.693Z] [STDOUT] Found 2 invoices for subscription sub_QVIG6dAuP0UXXn
[2025-05-15T20:52:04.693Z] [STDOUT] Subscription invoice synchronization complete!
[2025-05-15T20:52:04.693Z] [STDOUT] Processed 4 subscriptions
[2025-05-15T20:52:04.693Z] [STDOUT] Success: 4, Errors: 0
[2025-05-15T20:52:04.693Z] [STDOUT] Added 0 new transactions
[2025-05-15T20:52:04.693Z] [STDOUT] Script execution completed
[2025-05-15T20:52:04.693Z] Synchronization completed successfully
[2025-05-15T20:52:04.693Z] Next sync scheduled in 5 seconds
[2025-05-15T20:52:04.980Z] Starting invoice synchronization...
[2025-05-15T20:52:04.981Z] Running sync script: /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:52:04.981Z] Executing command: cd /Users/raja/Development/ProsumeAI/server && npx tsx /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:52:09.981Z] Starting invoice synchronization...
[2025-05-15T20:52:09.981Z] Running sync script: /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:52:09.981Z] Executing command: cd /Users/raja/Development/ProsumeAI/server && npx tsx /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:52:12.640Z] [STDOUT] Using database connection: postgres://***:***@localhost:5432/prosumeai
[2025-05-15T20:52:12.640Z] [STDOUT] Starting subscription invoice synchronization...
[2025-05-15T20:52:12.640Z] [STDOUT] Database schema validated successfully
[2025-05-15T20:52:12.640Z] [STDOUT] Found 4 active Razorpay subscriptions to sync
[2025-05-15T20:52:12.640Z] [STDOUT] Processing subscription 20 with Razorpay ID: sub_QUxcCis3igdqUA
[2025-05-15T20:52:12.640Z] [STDOUT] Subscription 20 has 1 existing transactions
[2025-05-15T20:52:12.640Z] [STDOUT] Razorpay initialization in progress, waiting...
[2025-05-15T20:52:12.640Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:52:12.640Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:52:12.640Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:52:12.640Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:52:12.640Z] [STDOUT] Fetching invoices for subscription ID: sub_QUxcCis3igdqUA
[2025-05-15T20:52:12.640Z] [STDOUT] Found 0 invoices for subscription: sub_QUxcCis3igdqUA
[2025-05-15T20:52:12.640Z] [STDOUT] Found 0 invoices for subscription sub_QUxcCis3igdqUA
[2025-05-15T20:52:12.640Z] [STDOUT] Processing subscription 24 with Razorpay ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:52:12.640Z] [STDOUT] Subscription 24 has 1 existing transactions
[2025-05-15T20:52:12.640Z] [STDOUT] Fetching invoices for subscription ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:52:12.640Z] [STDOUT] Found 1 invoices for subscription: sub_QV05DCrgh3A2rL
[2025-05-15T20:52:12.640Z] [STDOUT] Transaction for payment pay_QV05q44fHQzL1q already exists in database (1 records), skipping
[2025-05-15T20:52:12.640Z] [STDOUT] Found 1 invoices for subscription sub_QV05DCrgh3A2rL
[2025-05-15T20:52:12.640Z] [STDOUT] Processing subscription 25 with Razorpay ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:52:12.640Z] [STDOUT] Subscription 25 has 2 existing transactions
[2025-05-15T20:52:12.640Z] [STDOUT] Fetching invoices for subscription ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:52:12.640Z] [STDOUT] Found 1 invoices for subscription: sub_QV1W0JNq2cOk7s
[2025-05-15T20:52:12.640Z] [STDOUT] Transaction for payment pay_QV1WoyCgCY23iO already exists in database (2 records), skipping
[2025-05-15T20:52:12.640Z] [STDOUT] Found 1 invoices for subscription sub_QV1W0JNq2cOk7s
[2025-05-15T20:52:12.640Z] [STDOUT] Processing subscription 26 with Razorpay ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:52:12.640Z] [STDOUT] Subscription 26 has 2 existing transactions
[2025-05-15T20:52:12.640Z] [STDOUT] Fetching invoices for subscription ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:52:12.640Z] [STDOUT] Found 2 invoices for subscription: sub_QVIG6dAuP0UXXn
[2025-05-15T20:52:12.640Z] [STDOUT] Transaction for payment pay_QVILKDuy9v6ovq already exists in database (1 records), skipping
[2025-05-15T20:52:12.640Z] [STDOUT] Transaction for payment pay_QVIGtXTXkm93W8 already exists in database (1 records), skipping
[2025-05-15T20:52:12.640Z] [STDOUT] Found 2 invoices for subscription sub_QVIG6dAuP0UXXn
[2025-05-15T20:52:12.640Z] [STDOUT] Subscription invoice synchronization complete!
[2025-05-15T20:52:12.640Z] [STDOUT] Processed 4 subscriptions
[2025-05-15T20:52:12.640Z] [STDOUT] Success: 4, Errors: 0
[2025-05-15T20:52:12.640Z] [STDOUT] Added 0 new transactions
[2025-05-15T20:52:12.640Z] [STDOUT] Script execution completed
[2025-05-15T20:52:12.640Z] Synchronization completed successfully
[2025-05-15T20:52:12.640Z] Next sync scheduled in 5 seconds
[2025-05-15T20:52:14.394Z] [STDOUT] Using database connection: postgres://***:***@localhost:5432/prosumeai
[2025-05-15T20:52:14.394Z] [STDOUT] Starting subscription invoice synchronization...
[2025-05-15T20:52:14.394Z] [STDOUT] Database schema validated successfully
[2025-05-15T20:52:14.394Z] [STDOUT] Found 4 active Razorpay subscriptions to sync
[2025-05-15T20:52:14.394Z] [STDOUT] Processing subscription 20 with Razorpay ID: sub_QUxcCis3igdqUA
[2025-05-15T20:52:14.394Z] [STDOUT] Subscription 20 has 1 existing transactions
[2025-05-15T20:52:14.394Z] [STDOUT] Razorpay initialization in progress, waiting...
[2025-05-15T20:52:14.394Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:52:14.394Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:52:14.394Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:52:14.394Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:52:14.394Z] [STDOUT] Fetching invoices for subscription ID: sub_QUxcCis3igdqUA
[2025-05-15T20:52:14.394Z] [STDOUT] Found 0 invoices for subscription: sub_QUxcCis3igdqUA
[2025-05-15T20:52:14.394Z] [STDOUT] Found 0 invoices for subscription sub_QUxcCis3igdqUA
[2025-05-15T20:52:14.394Z] [STDOUT] Processing subscription 24 with Razorpay ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:52:14.394Z] [STDOUT] Subscription 24 has 1 existing transactions
[2025-05-15T20:52:14.394Z] [STDOUT] Fetching invoices for subscription ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:52:14.394Z] [STDOUT] Found 1 invoices for subscription: sub_QV05DCrgh3A2rL
[2025-05-15T20:52:14.394Z] [STDOUT] Transaction for payment pay_QV05q44fHQzL1q already exists in database (1 records), skipping
[2025-05-15T20:52:14.394Z] [STDOUT] Found 1 invoices for subscription sub_QV05DCrgh3A2rL
[2025-05-15T20:52:14.394Z] [STDOUT] Processing subscription 25 with Razorpay ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:52:14.394Z] [STDOUT] Subscription 25 has 2 existing transactions
[2025-05-15T20:52:14.394Z] [STDOUT] Fetching invoices for subscription ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:52:14.394Z] [STDOUT] Found 1 invoices for subscription: sub_QV1W0JNq2cOk7s
[2025-05-15T20:52:14.394Z] [STDOUT] Transaction for payment pay_QV1WoyCgCY23iO already exists in database (2 records), skipping
[2025-05-15T20:52:14.394Z] [STDOUT] Found 1 invoices for subscription sub_QV1W0JNq2cOk7s
[2025-05-15T20:52:14.394Z] [STDOUT] Processing subscription 26 with Razorpay ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:52:14.394Z] [STDOUT] Subscription 26 has 2 existing transactions
[2025-05-15T20:52:14.394Z] [STDOUT] Fetching invoices for subscription ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:52:14.394Z] [STDOUT] Found 2 invoices for subscription: sub_QVIG6dAuP0UXXn
[2025-05-15T20:52:14.394Z] [STDOUT] Transaction for payment pay_QVILKDuy9v6ovq already exists in database (1 records), skipping
[2025-05-15T20:52:14.394Z] [STDOUT] Transaction for payment pay_QVIGtXTXkm93W8 already exists in database (1 records), skipping
[2025-05-15T20:52:14.394Z] [STDOUT] Found 2 invoices for subscription sub_QVIG6dAuP0UXXn
[2025-05-15T20:52:14.394Z] [STDOUT] Subscription invoice synchronization complete!
[2025-05-15T20:52:14.394Z] [STDOUT] Processed 4 subscriptions
[2025-05-15T20:52:14.394Z] [STDOUT] Success: 4, Errors: 0
[2025-05-15T20:52:14.394Z] [STDOUT] Added 0 new transactions
[2025-05-15T20:52:14.394Z] [STDOUT] Script execution completed
[2025-05-15T20:52:14.394Z] Synchronization completed successfully
[2025-05-15T20:52:14.394Z] Next sync scheduled in 5 seconds
[2025-05-15T20:52:14.983Z] Starting invoice synchronization...
[2025-05-15T20:52:14.983Z] Running sync script: /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:52:14.983Z] Executing command: cd /Users/raja/Development/ProsumeAI/server && npx tsx /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:52:19.984Z] Starting invoice synchronization...
[2025-05-15T20:52:19.985Z] Running sync script: /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:52:19.985Z] Executing command: cd /Users/raja/Development/ProsumeAI/server && npx tsx /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:52:21.320Z] [STDOUT] Using database connection: postgres://***:***@localhost:5432/prosumeai
[2025-05-15T20:52:21.320Z] [STDOUT] Starting subscription invoice synchronization...
[2025-05-15T20:52:21.320Z] [STDOUT] Database schema validated successfully
[2025-05-15T20:52:21.320Z] [STDOUT] Found 4 active Razorpay subscriptions to sync
[2025-05-15T20:52:21.320Z] [STDOUT] Processing subscription 20 with Razorpay ID: sub_QUxcCis3igdqUA
[2025-05-15T20:52:21.320Z] [STDOUT] Subscription 20 has 1 existing transactions
[2025-05-15T20:52:21.320Z] [STDOUT] Razorpay initialization in progress, waiting...
[2025-05-15T20:52:21.320Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:52:21.320Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:52:21.320Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:52:21.320Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:52:21.320Z] [STDOUT] Fetching invoices for subscription ID: sub_QUxcCis3igdqUA
[2025-05-15T20:52:21.320Z] [STDOUT] Found 0 invoices for subscription: sub_QUxcCis3igdqUA
[2025-05-15T20:52:21.320Z] [STDOUT] Found 0 invoices for subscription sub_QUxcCis3igdqUA
[2025-05-15T20:52:21.320Z] [STDOUT] Processing subscription 24 with Razorpay ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:52:21.320Z] [STDOUT] Subscription 24 has 1 existing transactions
[2025-05-15T20:52:21.320Z] [STDOUT] Fetching invoices for subscription ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:52:21.320Z] [STDOUT] Found 1 invoices for subscription: sub_QV05DCrgh3A2rL
[2025-05-15T20:52:21.320Z] [STDOUT] Transaction for payment pay_QV05q44fHQzL1q already exists in database (1 records), skipping
[2025-05-15T20:52:21.320Z] [STDOUT] Found 1 invoices for subscription sub_QV05DCrgh3A2rL
[2025-05-15T20:52:21.320Z] [STDOUT] Processing subscription 25 with Razorpay ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:52:21.320Z] [STDOUT] Subscription 25 has 2 existing transactions
[2025-05-15T20:52:21.320Z] [STDOUT] Fetching invoices for subscription ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:52:21.320Z] [STDOUT] Found 1 invoices for subscription: sub_QV1W0JNq2cOk7s
[2025-05-15T20:52:21.320Z] [STDOUT] Transaction for payment pay_QV1WoyCgCY23iO already exists in database (2 records), skipping
[2025-05-15T20:52:21.320Z] [STDOUT] Found 1 invoices for subscription sub_QV1W0JNq2cOk7s
[2025-05-15T20:52:21.320Z] [STDOUT] Processing subscription 26 with Razorpay ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:52:21.320Z] [STDOUT] Subscription 26 has 2 existing transactions
[2025-05-15T20:52:21.320Z] [STDOUT] Fetching invoices for subscription ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:52:21.320Z] [STDOUT] Found 2 invoices for subscription: sub_QVIG6dAuP0UXXn
[2025-05-15T20:52:21.320Z] [STDOUT] Transaction for payment pay_QVILKDuy9v6ovq already exists in database (1 records), skipping
[2025-05-15T20:52:21.321Z] [STDOUT] Transaction for payment pay_QVIGtXTXkm93W8 already exists in database (1 records), skipping
[2025-05-15T20:52:21.321Z] [STDOUT] Found 2 invoices for subscription sub_QVIG6dAuP0UXXn
[2025-05-15T20:52:21.321Z] [STDOUT] Subscription invoice synchronization complete!
[2025-05-15T20:52:21.321Z] [STDOUT] Processed 4 subscriptions
[2025-05-15T20:52:21.321Z] [STDOUT] Success: 4, Errors: 0
[2025-05-15T20:52:21.321Z] [STDOUT] Added 0 new transactions
[2025-05-15T20:52:21.321Z] [STDOUT] Script execution completed
[2025-05-15T20:52:21.321Z] Synchronization completed successfully
[2025-05-15T20:52:21.321Z] Next sync scheduled in 5 seconds
[2025-05-15T20:52:24.393Z] [STDOUT] Using database connection: postgres://***:***@localhost:5432/prosumeai
[2025-05-15T20:52:24.393Z] [STDOUT] Starting subscription invoice synchronization...
[2025-05-15T20:52:24.393Z] [STDOUT] Database schema validated successfully
[2025-05-15T20:52:24.393Z] [STDOUT] Found 4 active Razorpay subscriptions to sync
[2025-05-15T20:52:24.393Z] [STDOUT] Processing subscription 20 with Razorpay ID: sub_QUxcCis3igdqUA
[2025-05-15T20:52:24.393Z] [STDOUT] Subscription 20 has 1 existing transactions
[2025-05-15T20:52:24.393Z] [STDOUT] Razorpay initialization in progress, waiting...
[2025-05-15T20:52:24.393Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:52:24.393Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:52:24.393Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:52:24.393Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:52:24.393Z] [STDOUT] Fetching invoices for subscription ID: sub_QUxcCis3igdqUA
[2025-05-15T20:52:24.393Z] [STDOUT] Found 0 invoices for subscription: sub_QUxcCis3igdqUA
[2025-05-15T20:52:24.393Z] [STDOUT] Found 0 invoices for subscription sub_QUxcCis3igdqUA
[2025-05-15T20:52:24.393Z] [STDOUT] Processing subscription 24 with Razorpay ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:52:24.393Z] [STDOUT] Subscription 24 has 1 existing transactions
[2025-05-15T20:52:24.393Z] [STDOUT] Fetching invoices for subscription ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:52:24.393Z] [STDOUT] Found 1 invoices for subscription: sub_QV05DCrgh3A2rL
[2025-05-15T20:52:24.393Z] [STDOUT] Transaction for payment pay_QV05q44fHQzL1q already exists in database (1 records), skipping
[2025-05-15T20:52:24.393Z] [STDOUT] Found 1 invoices for subscription sub_QV05DCrgh3A2rL
[2025-05-15T20:52:24.393Z] [STDOUT] Processing subscription 25 with Razorpay ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:52:24.393Z] [STDOUT] Subscription 25 has 2 existing transactions
[2025-05-15T20:52:24.393Z] [STDOUT] Fetching invoices for subscription ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:52:24.393Z] [STDOUT] Found 1 invoices for subscription: sub_QV1W0JNq2cOk7s
[2025-05-15T20:52:24.393Z] [STDOUT] Transaction for payment pay_QV1WoyCgCY23iO already exists in database (2 records), skipping
[2025-05-15T20:52:24.393Z] [STDOUT] Found 1 invoices for subscription sub_QV1W0JNq2cOk7s
[2025-05-15T20:52:24.393Z] [STDOUT] Processing subscription 26 with Razorpay ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:52:24.393Z] [STDOUT] Subscription 26 has 2 existing transactions
[2025-05-15T20:52:24.393Z] [STDOUT] Fetching invoices for subscription ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:52:24.393Z] [STDOUT] Found 2 invoices for subscription: sub_QVIG6dAuP0UXXn
[2025-05-15T20:52:24.393Z] [STDOUT] Transaction for payment pay_QVILKDuy9v6ovq already exists in database (1 records), skipping
[2025-05-15T20:52:24.393Z] [STDOUT] Transaction for payment pay_QVIGtXTXkm93W8 already exists in database (1 records), skipping
[2025-05-15T20:52:24.393Z] [STDOUT] Found 2 invoices for subscription sub_QVIG6dAuP0UXXn
[2025-05-15T20:52:24.393Z] [STDOUT] Subscription invoice synchronization complete!
[2025-05-15T20:52:24.393Z] [STDOUT] Processed 4 subscriptions
[2025-05-15T20:52:24.393Z] [STDOUT] Success: 4, Errors: 0
[2025-05-15T20:52:24.393Z] [STDOUT] Added 0 new transactions
[2025-05-15T20:52:24.393Z] [STDOUT] Script execution completed
[2025-05-15T20:52:24.393Z] Synchronization completed successfully
[2025-05-15T20:52:24.393Z] Next sync scheduled in 5 seconds
[2025-05-15T20:52:24.986Z] Starting invoice synchronization...
[2025-05-15T20:52:24.986Z] Running sync script: /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:52:24.986Z] Executing command: cd /Users/raja/Development/ProsumeAI/server && npx tsx /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:52:29.987Z] Starting invoice synchronization...
[2025-05-15T20:52:29.987Z] Running sync script: /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:52:29.987Z] Executing command: cd /Users/raja/Development/ProsumeAI/server && npx tsx /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:52:30.183Z] [STDOUT] Using database connection: postgres://***:***@localhost:5432/prosumeai
[2025-05-15T20:52:30.183Z] [STDOUT] Starting subscription invoice synchronization...
[2025-05-15T20:52:30.184Z] [STDOUT] Database schema validated successfully
[2025-05-15T20:52:30.184Z] [STDOUT] Found 4 active Razorpay subscriptions to sync
[2025-05-15T20:52:30.184Z] [STDOUT] Processing subscription 20 with Razorpay ID: sub_QUxcCis3igdqUA
[2025-05-15T20:52:30.184Z] [STDOUT] Subscription 20 has 1 existing transactions
[2025-05-15T20:52:30.184Z] [STDOUT] Razorpay initialization in progress, waiting...
[2025-05-15T20:52:30.184Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:52:30.184Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:52:30.184Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:52:30.184Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:52:30.184Z] [STDOUT] Fetching invoices for subscription ID: sub_QUxcCis3igdqUA
[2025-05-15T20:52:30.184Z] [STDOUT] Found 0 invoices for subscription: sub_QUxcCis3igdqUA
[2025-05-15T20:52:30.184Z] [STDOUT] Found 0 invoices for subscription sub_QUxcCis3igdqUA
[2025-05-15T20:52:30.184Z] [STDOUT] Processing subscription 24 with Razorpay ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:52:30.184Z] [STDOUT] Subscription 24 has 1 existing transactions
[2025-05-15T20:52:30.184Z] [STDOUT] Fetching invoices for subscription ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:52:30.184Z] [STDOUT] Found 1 invoices for subscription: sub_QV05DCrgh3A2rL
[2025-05-15T20:52:30.184Z] [STDOUT] Transaction for payment pay_QV05q44fHQzL1q already exists in database (1 records), skipping
[2025-05-15T20:52:30.184Z] [STDOUT] Found 1 invoices for subscription sub_QV05DCrgh3A2rL
[2025-05-15T20:52:30.184Z] [STDOUT] Processing subscription 25 with Razorpay ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:52:30.184Z] [STDOUT] Subscription 25 has 2 existing transactions
[2025-05-15T20:52:30.184Z] [STDOUT] Fetching invoices for subscription ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:52:30.184Z] [STDOUT] Found 1 invoices for subscription: sub_QV1W0JNq2cOk7s
[2025-05-15T20:52:30.184Z] [STDOUT] Transaction for payment pay_QV1WoyCgCY23iO already exists in database (2 records), skipping
[2025-05-15T20:52:30.184Z] [STDOUT] Found 1 invoices for subscription sub_QV1W0JNq2cOk7s
[2025-05-15T20:52:30.184Z] [STDOUT] Processing subscription 26 with Razorpay ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:52:30.184Z] [STDOUT] Subscription 26 has 2 existing transactions
[2025-05-15T20:52:30.184Z] [STDOUT] Fetching invoices for subscription ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:52:30.184Z] [STDOUT] Found 2 invoices for subscription: sub_QVIG6dAuP0UXXn
[2025-05-15T20:52:30.184Z] [STDOUT] Transaction for payment pay_QVILKDuy9v6ovq already exists in database (1 records), skipping
[2025-05-15T20:52:30.184Z] [STDOUT] Transaction for payment pay_QVIGtXTXkm93W8 already exists in database (1 records), skipping
[2025-05-15T20:52:30.184Z] [STDOUT] Found 2 invoices for subscription sub_QVIG6dAuP0UXXn
[2025-05-15T20:52:30.184Z] [STDOUT] Subscription invoice synchronization complete!
[2025-05-15T20:52:30.184Z] [STDOUT] Processed 4 subscriptions
[2025-05-15T20:52:30.184Z] [STDOUT] Success: 4, Errors: 0
[2025-05-15T20:52:30.184Z] [STDOUT] Added 0 new transactions
[2025-05-15T20:52:30.184Z] [STDOUT] Script execution completed
[2025-05-15T20:52:30.184Z] Synchronization completed successfully
[2025-05-15T20:52:30.184Z] Next sync scheduled in 5 seconds
[2025-05-15T20:52:34.731Z] [STDOUT] Using database connection: postgres://***:***@localhost:5432/prosumeai
[2025-05-15T20:52:34.731Z] [STDOUT] Starting subscription invoice synchronization...
[2025-05-15T20:52:34.731Z] [STDOUT] Database schema validated successfully
[2025-05-15T20:52:34.731Z] [STDOUT] Found 4 active Razorpay subscriptions to sync
[2025-05-15T20:52:34.731Z] [STDOUT] Processing subscription 20 with Razorpay ID: sub_QUxcCis3igdqUA
[2025-05-15T20:52:34.731Z] [STDOUT] Subscription 20 has 1 existing transactions
[2025-05-15T20:52:34.731Z] [STDOUT] Razorpay initialization in progress, waiting...
[2025-05-15T20:52:34.731Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:52:34.731Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:52:34.731Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:52:34.731Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:52:34.731Z] [STDOUT] Fetching invoices for subscription ID: sub_QUxcCis3igdqUA
[2025-05-15T20:52:34.731Z] [STDOUT] Found 0 invoices for subscription: sub_QUxcCis3igdqUA
[2025-05-15T20:52:34.731Z] [STDOUT] Found 0 invoices for subscription sub_QUxcCis3igdqUA
[2025-05-15T20:52:34.731Z] [STDOUT] Processing subscription 24 with Razorpay ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:52:34.731Z] [STDOUT] Subscription 24 has 1 existing transactions
[2025-05-15T20:52:34.731Z] [STDOUT] Fetching invoices for subscription ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:52:34.731Z] [STDOUT] Found 1 invoices for subscription: sub_QV05DCrgh3A2rL
[2025-05-15T20:52:34.731Z] [STDOUT] Transaction for payment pay_QV05q44fHQzL1q already exists in database (1 records), skipping
[2025-05-15T20:52:34.731Z] [STDOUT] Found 1 invoices for subscription sub_QV05DCrgh3A2rL
[2025-05-15T20:52:34.731Z] [STDOUT] Processing subscription 25 with Razorpay ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:52:34.731Z] [STDOUT] Subscription 25 has 2 existing transactions
[2025-05-15T20:52:34.731Z] [STDOUT] Fetching invoices for subscription ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:52:34.731Z] [STDOUT] Found 1 invoices for subscription: sub_QV1W0JNq2cOk7s
[2025-05-15T20:52:34.731Z] [STDOUT] Transaction for payment pay_QV1WoyCgCY23iO already exists in database (2 records), skipping
[2025-05-15T20:52:34.731Z] [STDOUT] Found 1 invoices for subscription sub_QV1W0JNq2cOk7s
[2025-05-15T20:52:34.731Z] [STDOUT] Processing subscription 26 with Razorpay ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:52:34.731Z] [STDOUT] Subscription 26 has 2 existing transactions
[2025-05-15T20:52:34.731Z] [STDOUT] Fetching invoices for subscription ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:52:34.731Z] [STDOUT] Found 2 invoices for subscription: sub_QVIG6dAuP0UXXn
[2025-05-15T20:52:34.731Z] [STDOUT] Transaction for payment pay_QVILKDuy9v6ovq already exists in database (1 records), skipping
[2025-05-15T20:52:34.731Z] [STDOUT] Transaction for payment pay_QVIGtXTXkm93W8 already exists in database (1 records), skipping
[2025-05-15T20:52:34.731Z] [STDOUT] Found 2 invoices for subscription sub_QVIG6dAuP0UXXn
[2025-05-15T20:52:34.731Z] [STDOUT] Subscription invoice synchronization complete!
[2025-05-15T20:52:34.732Z] [STDOUT] Processed 4 subscriptions
[2025-05-15T20:52:34.732Z] [STDOUT] Success: 4, Errors: 0
[2025-05-15T20:52:34.732Z] [STDOUT] Added 0 new transactions
[2025-05-15T20:52:34.732Z] [STDOUT] Script execution completed
[2025-05-15T20:52:34.732Z] Synchronization completed successfully
[2025-05-15T20:52:34.732Z] Next sync scheduled in 5 seconds
[2025-05-15T20:52:34.988Z] Starting invoice synchronization...
[2025-05-15T20:52:34.988Z] Running sync script: /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:52:34.988Z] Executing command: cd /Users/raja/Development/ProsumeAI/server && npx tsx /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:52:39.325Z] [STDOUT] Using database connection: postgres://***:***@localhost:5432/prosumeai
[2025-05-15T20:52:39.325Z] [STDOUT] Starting subscription invoice synchronization...
[2025-05-15T20:52:39.325Z] [STDOUT] Database schema validated successfully
[2025-05-15T20:52:39.325Z] [STDOUT] Found 4 active Razorpay subscriptions to sync
[2025-05-15T20:52:39.325Z] [STDOUT] Processing subscription 20 with Razorpay ID: sub_QUxcCis3igdqUA
[2025-05-15T20:52:39.325Z] [STDOUT] Subscription 20 has 1 existing transactions
[2025-05-15T20:52:39.325Z] [STDOUT] Razorpay initialization in progress, waiting...
[2025-05-15T20:52:39.325Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:52:39.325Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:52:39.325Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:52:39.325Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:52:39.325Z] [STDOUT] Fetching invoices for subscription ID: sub_QUxcCis3igdqUA
[2025-05-15T20:52:39.325Z] [STDOUT] Found 0 invoices for subscription: sub_QUxcCis3igdqUA
[2025-05-15T20:52:39.325Z] [STDOUT] Found 0 invoices for subscription sub_QUxcCis3igdqUA
[2025-05-15T20:52:39.325Z] [STDOUT] Processing subscription 24 with Razorpay ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:52:39.325Z] [STDOUT] Subscription 24 has 1 existing transactions
[2025-05-15T20:52:39.325Z] [STDOUT] Fetching invoices for subscription ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:52:39.325Z] [STDOUT] Found 1 invoices for subscription: sub_QV05DCrgh3A2rL
[2025-05-15T20:52:39.325Z] [STDOUT] Transaction for payment pay_QV05q44fHQzL1q already exists in database (1 records), skipping
[2025-05-15T20:52:39.325Z] [STDOUT] Found 1 invoices for subscription sub_QV05DCrgh3A2rL
[2025-05-15T20:52:39.325Z] [STDOUT] Processing subscription 25 with Razorpay ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:52:39.325Z] [STDOUT] Subscription 25 has 2 existing transactions
[2025-05-15T20:52:39.325Z] [STDOUT] Fetching invoices for subscription ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:52:39.325Z] [STDOUT] Found 1 invoices for subscription: sub_QV1W0JNq2cOk7s
[2025-05-15T20:52:39.325Z] [STDOUT] Transaction for payment pay_QV1WoyCgCY23iO already exists in database (2 records), skipping
[2025-05-15T20:52:39.325Z] [STDOUT] Found 1 invoices for subscription sub_QV1W0JNq2cOk7s
[2025-05-15T20:52:39.325Z] [STDOUT] Processing subscription 26 with Razorpay ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:52:39.325Z] [STDOUT] Subscription 26 has 2 existing transactions
[2025-05-15T20:52:39.325Z] [STDOUT] Fetching invoices for subscription ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:52:39.325Z] [STDOUT] Found 2 invoices for subscription: sub_QVIG6dAuP0UXXn
[2025-05-15T20:52:39.325Z] [STDOUT] Transaction for payment pay_QVILKDuy9v6ovq already exists in database (1 records), skipping
[2025-05-15T20:52:39.325Z] [STDOUT] Transaction for payment pay_QVIGtXTXkm93W8 already exists in database (1 records), skipping
[2025-05-15T20:52:39.325Z] [STDOUT] Found 2 invoices for subscription sub_QVIG6dAuP0UXXn
[2025-05-15T20:52:39.325Z] [STDOUT] Subscription invoice synchronization complete!
[2025-05-15T20:52:39.325Z] [STDOUT] Processed 4 subscriptions
[2025-05-15T20:52:39.325Z] [STDOUT] Success: 4, Errors: 0
[2025-05-15T20:52:39.325Z] [STDOUT] Added 0 new transactions
[2025-05-15T20:52:39.325Z] [STDOUT] Script execution completed
[2025-05-15T20:52:39.325Z] Synchronization completed successfully
[2025-05-15T20:52:39.325Z] Next sync scheduled in 5 seconds
[2025-05-15T20:52:39.989Z] Starting invoice synchronization...
[2025-05-15T20:52:39.989Z] Running sync script: /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:52:39.989Z] Executing command: cd /Users/raja/Development/ProsumeAI/server && npx tsx /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:52:44.880Z] [STDOUT] Using database connection: postgres://***:***@localhost:5432/prosumeai
[2025-05-15T20:52:44.881Z] [STDOUT] Starting subscription invoice synchronization...
[2025-05-15T20:52:44.881Z] [STDOUT] Found 4 active Razorpay subscriptions to sync
[2025-05-15T20:52:44.881Z] [STDOUT] Processing subscription 20 with Razorpay ID: sub_QUxcCis3igdqUA
[2025-05-15T20:52:44.881Z] [STDOUT] Database schema validated successfully
[2025-05-15T20:52:44.881Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:52:44.881Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:52:44.881Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:52:44.881Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:52:44.881Z] [STDOUT] Subscription 20 has 1 existing transactions
[2025-05-15T20:52:44.881Z] [STDOUT] Fetching invoices for subscription ID: sub_QUxcCis3igdqUA
[2025-05-15T20:52:44.881Z] [STDOUT] Found 0 invoices for subscription: sub_QUxcCis3igdqUA
[2025-05-15T20:52:44.881Z] [STDOUT] Found 0 invoices for subscription sub_QUxcCis3igdqUA
[2025-05-15T20:52:44.881Z] [STDOUT] Processing subscription 24 with Razorpay ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:52:44.881Z] [STDOUT] Subscription 24 has 1 existing transactions
[2025-05-15T20:52:44.881Z] [STDOUT] Fetching invoices for subscription ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:52:44.881Z] [STDOUT] Found 1 invoices for subscription: sub_QV05DCrgh3A2rL
[2025-05-15T20:52:44.881Z] [STDOUT] Transaction for payment pay_QV05q44fHQzL1q already exists in database (1 records), skipping
[2025-05-15T20:52:44.881Z] [STDOUT] Found 1 invoices for subscription sub_QV05DCrgh3A2rL
[2025-05-15T20:52:44.881Z] [STDOUT] Processing subscription 25 with Razorpay ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:52:44.881Z] [STDOUT] Subscription 25 has 2 existing transactions
[2025-05-15T20:52:44.881Z] [STDOUT] Fetching invoices for subscription ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:52:44.881Z] [STDOUT] Found 1 invoices for subscription: sub_QV1W0JNq2cOk7s
[2025-05-15T20:52:44.881Z] [STDOUT] Transaction for payment pay_QV1WoyCgCY23iO already exists in database (2 records), skipping
[2025-05-15T20:52:44.881Z] [STDOUT] Found 1 invoices for subscription sub_QV1W0JNq2cOk7s
[2025-05-15T20:52:44.881Z] [STDOUT] Processing subscription 26 with Razorpay ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:52:44.881Z] [STDOUT] Subscription 26 has 2 existing transactions
[2025-05-15T20:52:44.881Z] [STDOUT] Fetching invoices for subscription ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:52:44.881Z] [STDOUT] Found 2 invoices for subscription: sub_QVIG6dAuP0UXXn
[2025-05-15T20:52:44.881Z] [STDOUT] Transaction for payment pay_QVILKDuy9v6ovq already exists in database (1 records), skipping
[2025-05-15T20:52:44.881Z] [STDOUT] Transaction for payment pay_QVIGtXTXkm93W8 already exists in database (1 records), skipping
[2025-05-15T20:52:44.881Z] [STDOUT] Found 2 invoices for subscription sub_QVIG6dAuP0UXXn
[2025-05-15T20:52:44.881Z] [STDOUT] Subscription invoice synchronization complete!
[2025-05-15T20:52:44.881Z] [STDOUT] Processed 4 subscriptions
[2025-05-15T20:52:44.881Z] [STDOUT] Success: 4, Errors: 0
[2025-05-15T20:52:44.881Z] [STDOUT] Added 0 new transactions
[2025-05-15T20:52:44.881Z] [STDOUT] Script execution completed
[2025-05-15T20:52:44.881Z] Synchronization completed successfully
[2025-05-15T20:52:44.881Z] Next sync scheduled in 5 seconds
[2025-05-15T20:52:44.990Z] Starting invoice synchronization...
[2025-05-15T20:52:44.990Z] Running sync script: /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:52:44.990Z] Executing command: cd /Users/raja/Development/ProsumeAI/server && npx tsx /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:52:49.991Z] Starting invoice synchronization...
[2025-05-15T20:52:49.991Z] Running sync script: /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:52:49.992Z] Executing command: cd /Users/raja/Development/ProsumeAI/server && npx tsx /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:52:50.449Z] [STDOUT] Using database connection: postgres://***:***@localhost:5432/prosumeai
[2025-05-15T20:52:50.449Z] [STDOUT] Starting subscription invoice synchronization...
[2025-05-15T20:52:50.450Z] [STDOUT] Database schema validated successfully
[2025-05-15T20:52:50.450Z] [STDOUT] Found 4 active Razorpay subscriptions to sync
[2025-05-15T20:52:50.450Z] [STDOUT] Processing subscription 20 with Razorpay ID: sub_QUxcCis3igdqUA
[2025-05-15T20:52:50.450Z] [STDOUT] Subscription 20 has 1 existing transactions
[2025-05-15T20:52:50.450Z] [STDOUT] Razorpay initialization in progress, waiting...
[2025-05-15T20:52:50.450Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:52:50.450Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:52:50.450Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:52:50.450Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:52:50.450Z] [STDOUT] Fetching invoices for subscription ID: sub_QUxcCis3igdqUA
[2025-05-15T20:52:50.450Z] [STDOUT] Found 0 invoices for subscription: sub_QUxcCis3igdqUA
[2025-05-15T20:52:50.450Z] [STDOUT] Found 0 invoices for subscription sub_QUxcCis3igdqUA
[2025-05-15T20:52:50.450Z] [STDOUT] Processing subscription 24 with Razorpay ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:52:50.450Z] [STDOUT] Subscription 24 has 1 existing transactions
[2025-05-15T20:52:50.450Z] [STDOUT] Fetching invoices for subscription ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:52:50.450Z] [STDOUT] Found 1 invoices for subscription: sub_QV05DCrgh3A2rL
[2025-05-15T20:52:50.450Z] [STDOUT] Transaction for payment pay_QV05q44fHQzL1q already exists in database (1 records), skipping
[2025-05-15T20:52:50.450Z] [STDOUT] Found 1 invoices for subscription sub_QV05DCrgh3A2rL
[2025-05-15T20:52:50.450Z] [STDOUT] Processing subscription 25 with Razorpay ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:52:50.450Z] [STDOUT] Subscription 25 has 2 existing transactions
[2025-05-15T20:52:50.450Z] [STDOUT] Fetching invoices for subscription ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:52:50.450Z] [STDOUT] Found 1 invoices for subscription: sub_QV1W0JNq2cOk7s
[2025-05-15T20:52:50.450Z] [STDOUT] Transaction for payment pay_QV1WoyCgCY23iO already exists in database (2 records), skipping
[2025-05-15T20:52:50.450Z] [STDOUT] Found 1 invoices for subscription sub_QV1W0JNq2cOk7s
[2025-05-15T20:52:50.450Z] [STDOUT] Processing subscription 26 with Razorpay ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:52:50.450Z] [STDOUT] Subscription 26 has 2 existing transactions
[2025-05-15T20:52:50.450Z] [STDOUT] Fetching invoices for subscription ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:52:50.450Z] [STDOUT] Found 2 invoices for subscription: sub_QVIG6dAuP0UXXn
[2025-05-15T20:52:50.450Z] [STDOUT] Transaction for payment pay_QVILKDuy9v6ovq already exists in database (1 records), skipping
[2025-05-15T20:52:50.450Z] [STDOUT] Transaction for payment pay_QVIGtXTXkm93W8 already exists in database (1 records), skipping
[2025-05-15T20:52:50.450Z] [STDOUT] Found 2 invoices for subscription sub_QVIG6dAuP0UXXn
[2025-05-15T20:52:50.450Z] [STDOUT] Subscription invoice synchronization complete!
[2025-05-15T20:52:50.450Z] [STDOUT] Processed 4 subscriptions
[2025-05-15T20:52:50.450Z] [STDOUT] Success: 4, Errors: 0
[2025-05-15T20:52:50.450Z] [STDOUT] Added 0 new transactions
[2025-05-15T20:52:50.450Z] [STDOUT] Script execution completed
[2025-05-15T20:52:50.450Z] Synchronization completed successfully
[2025-05-15T20:52:50.450Z] Next sync scheduled in 5 seconds
[2025-05-15T20:52:54.992Z] Starting invoice synchronization...
[2025-05-15T20:52:54.992Z] Running sync script: /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:52:54.992Z] Executing command: cd /Users/raja/Development/ProsumeAI/server && npx tsx /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:52:54.999Z] [STDOUT] Using database connection: postgres://***:***@localhost:5432/prosumeai
[2025-05-15T20:52:54.999Z] [STDOUT] Starting subscription invoice synchronization...
[2025-05-15T20:52:54.999Z] [STDOUT] Database schema validated successfully
[2025-05-15T20:52:54.999Z] [STDOUT] Found 4 active Razorpay subscriptions to sync
[2025-05-15T20:52:54.999Z] [STDOUT] Processing subscription 20 with Razorpay ID: sub_QUxcCis3igdqUA
[2025-05-15T20:52:54.999Z] [STDOUT] Subscription 20 has 1 existing transactions
[2025-05-15T20:52:54.999Z] [STDOUT] Razorpay initialization in progress, waiting...
[2025-05-15T20:52:54.999Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:52:54.999Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:52:54.999Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:52:54.999Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:52:54.999Z] [STDOUT] Fetching invoices for subscription ID: sub_QUxcCis3igdqUA
[2025-05-15T20:52:54.999Z] [STDOUT] Found 0 invoices for subscription: sub_QUxcCis3igdqUA
[2025-05-15T20:52:54.999Z] [STDOUT] Found 0 invoices for subscription sub_QUxcCis3igdqUA
[2025-05-15T20:52:54.999Z] [STDOUT] Processing subscription 24 with Razorpay ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:52:54.999Z] [STDOUT] Subscription 24 has 1 existing transactions
[2025-05-15T20:52:54.999Z] [STDOUT] Fetching invoices for subscription ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:52:54.999Z] [STDOUT] Found 1 invoices for subscription: sub_QV05DCrgh3A2rL
[2025-05-15T20:52:54.999Z] [STDOUT] Transaction for payment pay_QV05q44fHQzL1q already exists in database (1 records), skipping
[2025-05-15T20:52:54.999Z] [STDOUT] Found 1 invoices for subscription sub_QV05DCrgh3A2rL
[2025-05-15T20:52:54.999Z] [STDOUT] Processing subscription 25 with Razorpay ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:52:54.999Z] [STDOUT] Subscription 25 has 2 existing transactions
[2025-05-15T20:52:54.999Z] [STDOUT] Fetching invoices for subscription ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:52:54.999Z] [STDOUT] Found 1 invoices for subscription: sub_QV1W0JNq2cOk7s
[2025-05-15T20:52:54.999Z] [STDOUT] Transaction for payment pay_QV1WoyCgCY23iO already exists in database (2 records), skipping
[2025-05-15T20:52:54.999Z] [STDOUT] Found 1 invoices for subscription sub_QV1W0JNq2cOk7s
[2025-05-15T20:52:54.999Z] [STDOUT] Processing subscription 26 with Razorpay ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:52:54.999Z] [STDOUT] Subscription 26 has 2 existing transactions
[2025-05-15T20:52:54.999Z] [STDOUT] Fetching invoices for subscription ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:52:54.999Z] [STDOUT] Found 2 invoices for subscription: sub_QVIG6dAuP0UXXn
[2025-05-15T20:52:54.999Z] [STDOUT] Transaction for payment pay_QVILKDuy9v6ovq already exists in database (1 records), skipping
[2025-05-15T20:52:54.999Z] [STDOUT] Transaction for payment pay_QVIGtXTXkm93W8 already exists in database (1 records), skipping
[2025-05-15T20:52:54.999Z] [STDOUT] Found 2 invoices for subscription sub_QVIG6dAuP0UXXn
[2025-05-15T20:52:54.999Z] [STDOUT] Subscription invoice synchronization complete!
[2025-05-15T20:52:54.999Z] [STDOUT] Processed 4 subscriptions
[2025-05-15T20:52:54.999Z] [STDOUT] Success: 4, Errors: 0
[2025-05-15T20:52:54.999Z] [STDOUT] Added 0 new transactions
[2025-05-15T20:52:54.999Z] [STDOUT] Script execution completed
[2025-05-15T20:52:54.999Z] Synchronization completed successfully
[2025-05-15T20:52:54.999Z] Next sync scheduled in 5 seconds
[2025-05-15T20:52:57.162Z] Received SIGINT, shutting down...
