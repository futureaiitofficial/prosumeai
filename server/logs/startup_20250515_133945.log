[2025-05-15T20:39:45.833Z] === Razorpay Invoice Auto-Sync Started ===
[2025-05-15T20:39:45.834Z] Process ID: 45103
[2025-05-15T20:39:45.834Z] Current directory: /Users/raja/Development/ProsumeAI/server
[2025-05-15T20:39:45.834Z] Log file: /Users/raja/Development/ProsumeAI/server/logs/auto_sync_2025-05-15_20_39.log
[2025-05-15T20:39:45.834Z] Sync interval: 5 seconds
[2025-05-15T20:39:45.834Z] Starting invoice synchronization...
[2025-05-15T20:39:45.834Z] Running sync script: /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:39:45.834Z] Executing command: cd /Users/raja/Development/ProsumeAI/server && npx tsx /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:39:50.783Z] [STDOUT] Using database connection: postgres://***:***@localhost:5432/prosumeai
[2025-05-15T20:39:50.787Z] [STDOUT] Starting subscription invoice synchronization...
[2025-05-15T20:39:50.787Z] [STDOUT] Found 4 active Razorpay subscriptions to sync
[2025-05-15T20:39:50.787Z] [STDOUT] Processing subscription 20 with Razorpay ID: sub_QUxcCis3igdqUA
[2025-05-15T20:39:50.787Z] [STDOUT] Database schema validated successfully
[2025-05-15T20:39:50.787Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:39:50.787Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:39:50.787Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:39:50.787Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:39:50.787Z] [STDOUT] Subscription 20 has 1 existing transactions
[2025-05-15T20:39:50.787Z] [STDOUT] Fetching invoices for subscription ID: sub_QUxcCis3igdqUA
[2025-05-15T20:39:50.787Z] [STDOUT] Found 0 invoices for subscription: sub_QUxcCis3igdqUA
[2025-05-15T20:39:50.788Z] [STDOUT] Found 0 invoices for subscription sub_QUxcCis3igdqUA
[2025-05-15T20:39:50.788Z] [STDOUT] Processing subscription 24 with Razorpay ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:39:50.788Z] [STDOUT] Subscription 24 has 1 existing transactions
[2025-05-15T20:39:50.788Z] [STDOUT] Fetching invoices for subscription ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:39:50.788Z] [STDOUT] Found 1 invoices for subscription: sub_QV05DCrgh3A2rL
[2025-05-15T20:39:50.788Z] [STDOUT] Transaction for payment pay_QV05q44fHQzL1q already exists in database (1 records), skipping
[2025-05-15T20:39:50.788Z] [STDOUT] Found 1 invoices for subscription sub_QV05DCrgh3A2rL
[2025-05-15T20:39:50.788Z] [STDOUT] Processing subscription 25 with Razorpay ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:39:50.788Z] [STDOUT] Subscription 25 has 2 existing transactions
[2025-05-15T20:39:50.788Z] [STDOUT] Fetching invoices for subscription ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:39:50.788Z] [STDOUT] Found 1 invoices for subscription: sub_QV1W0JNq2cOk7s
[2025-05-15T20:39:50.788Z] [STDOUT] Transaction for payment pay_QV1WoyCgCY23iO already exists in database (2 records), skipping
[2025-05-15T20:39:50.788Z] [STDOUT] Found 1 invoices for subscription sub_QV1W0JNq2cOk7s
[2025-05-15T20:39:50.788Z] [STDOUT] Processing subscription 26 with Razorpay ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:39:50.788Z] [STDOUT] Subscription 26 has 2 existing transactions
[2025-05-15T20:39:50.788Z] [STDOUT] Fetching invoices for subscription ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:39:50.788Z] [STDOUT] Found 2 invoices for subscription: sub_QVIG6dAuP0UXXn
[2025-05-15T20:39:50.788Z] [STDOUT] Transaction for payment pay_QVILKDuy9v6ovq already exists in database (1 records), skipping
[2025-05-15T20:39:50.788Z] [STDOUT] Transaction for payment pay_QVIGtXTXkm93W8 already exists in database (1 records), skipping
[2025-05-15T20:39:50.788Z] [STDOUT] Found 2 invoices for subscription sub_QVIG6dAuP0UXXn
[2025-05-15T20:39:50.788Z] [STDOUT] Subscription invoice synchronization complete!
[2025-05-15T20:39:50.788Z] [STDOUT] Processed 4 subscriptions
[2025-05-15T20:39:50.788Z] [STDOUT] Success: 4, Errors: 0
[2025-05-15T20:39:50.788Z] [STDOUT] Added 0 new transactions
[2025-05-15T20:39:50.788Z] [STDOUT] Script execution completed
[2025-05-15T20:39:50.788Z] Synchronization completed successfully
[2025-05-15T20:39:50.788Z] Next sync scheduled in 5 seconds
[2025-05-15T20:39:50.837Z] Starting invoice synchronization...
[2025-05-15T20:39:50.837Z] Running sync script: /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:39:50.837Z] Executing command: cd /Users/raja/Development/ProsumeAI/server && npx tsx /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:39:55.838Z] Starting invoice synchronization...
[2025-05-15T20:39:55.838Z] Running sync script: /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:39:55.838Z] Executing command: cd /Users/raja/Development/ProsumeAI/server && npx tsx /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:39:57.071Z] [STDOUT] Using database connection: postgres://***:***@localhost:5432/prosumeai
[2025-05-15T20:39:57.071Z] [STDOUT] Starting subscription invoice synchronization...
[2025-05-15T20:39:57.071Z] [STDOUT] Database schema validated successfully
[2025-05-15T20:39:57.071Z] [STDOUT] Found 4 active Razorpay subscriptions to sync
[2025-05-15T20:39:57.071Z] [STDOUT] Processing subscription 20 with Razorpay ID: sub_QUxcCis3igdqUA
[2025-05-15T20:39:57.071Z] [STDOUT] Subscription 20 has 1 existing transactions
[2025-05-15T20:39:57.071Z] [STDOUT] Razorpay initialization in progress, waiting...
[2025-05-15T20:39:57.071Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:39:57.071Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:39:57.071Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:39:57.071Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:39:57.071Z] [STDOUT] Fetching invoices for subscription ID: sub_QUxcCis3igdqUA
[2025-05-15T20:39:57.071Z] [STDOUT] Found 0 invoices for subscription: sub_QUxcCis3igdqUA
[2025-05-15T20:39:57.071Z] [STDOUT] Found 0 invoices for subscription sub_QUxcCis3igdqUA
[2025-05-15T20:39:57.071Z] [STDOUT] Processing subscription 24 with Razorpay ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:39:57.071Z] [STDOUT] Subscription 24 has 1 existing transactions
[2025-05-15T20:39:57.071Z] [STDOUT] Fetching invoices for subscription ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:39:57.071Z] [STDOUT] Found 1 invoices for subscription: sub_QV05DCrgh3A2rL
[2025-05-15T20:39:57.071Z] [STDOUT] Transaction for payment pay_QV05q44fHQzL1q already exists in database (1 records), skipping
[2025-05-15T20:39:57.071Z] [STDOUT] Found 1 invoices for subscription sub_QV05DCrgh3A2rL
[2025-05-15T20:39:57.071Z] [STDOUT] Processing subscription 25 with Razorpay ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:39:57.071Z] [STDOUT] Subscription 25 has 2 existing transactions
[2025-05-15T20:39:57.071Z] [STDOUT] Fetching invoices for subscription ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:39:57.071Z] [STDOUT] Found 1 invoices for subscription: sub_QV1W0JNq2cOk7s
[2025-05-15T20:39:57.071Z] [STDOUT] Transaction for payment pay_QV1WoyCgCY23iO already exists in database (2 records), skipping
[2025-05-15T20:39:57.071Z] [STDOUT] Found 1 invoices for subscription sub_QV1W0JNq2cOk7s
[2025-05-15T20:39:57.071Z] [STDOUT] Processing subscription 26 with Razorpay ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:39:57.071Z] [STDOUT] Subscription 26 has 2 existing transactions
[2025-05-15T20:39:57.071Z] [STDOUT] Fetching invoices for subscription ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:39:57.071Z] [STDOUT] Found 2 invoices for subscription: sub_QVIG6dAuP0UXXn
[2025-05-15T20:39:57.071Z] [STDOUT] Transaction for payment pay_QVILKDuy9v6ovq already exists in database (1 records), skipping
[2025-05-15T20:39:57.071Z] [STDOUT] Transaction for payment pay_QVIGtXTXkm93W8 already exists in database (1 records), skipping
[2025-05-15T20:39:57.071Z] [STDOUT] Found 2 invoices for subscription sub_QVIG6dAuP0UXXn
[2025-05-15T20:39:57.071Z] [STDOUT] Subscription invoice synchronization complete!
[2025-05-15T20:39:57.071Z] [STDOUT] Processed 4 subscriptions
[2025-05-15T20:39:57.071Z] [STDOUT] Success: 4, Errors: 0
[2025-05-15T20:39:57.071Z] [STDOUT] Added 0 new transactions
[2025-05-15T20:39:57.071Z] [STDOUT] Script execution completed
[2025-05-15T20:39:57.071Z] Synchronization completed successfully
[2025-05-15T20:39:57.071Z] Next sync scheduled in 5 seconds
[2025-05-15T20:40:00.113Z] [STDOUT] Using database connection: postgres://***:***@localhost:5432/prosumeai
[2025-05-15T20:40:00.113Z] [STDOUT] Starting subscription invoice synchronization...
[2025-05-15T20:40:00.113Z] [STDOUT] Found 4 active Razorpay subscriptions to sync
[2025-05-15T20:40:00.113Z] [STDOUT] Processing subscription 20 with Razorpay ID: sub_QUxcCis3igdqUA
[2025-05-15T20:40:00.113Z] [STDOUT] Database schema validated successfully
[2025-05-15T20:40:00.113Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:40:00.113Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:40:00.113Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:40:00.113Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:40:00.113Z] [STDOUT] Subscription 20 has 1 existing transactions
[2025-05-15T20:40:00.113Z] [STDOUT] Fetching invoices for subscription ID: sub_QUxcCis3igdqUA
[2025-05-15T20:40:00.113Z] [STDOUT] Found 0 invoices for subscription: sub_QUxcCis3igdqUA
[2025-05-15T20:40:00.113Z] [STDOUT] Found 0 invoices for subscription sub_QUxcCis3igdqUA
[2025-05-15T20:40:00.113Z] [STDOUT] Processing subscription 24 with Razorpay ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:40:00.113Z] [STDOUT] Subscription 24 has 1 existing transactions
[2025-05-15T20:40:00.113Z] [STDOUT] Fetching invoices for subscription ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:40:00.113Z] [STDOUT] Found 1 invoices for subscription: sub_QV05DCrgh3A2rL
[2025-05-15T20:40:00.113Z] [STDOUT] Transaction for payment pay_QV05q44fHQzL1q already exists in database (1 records), skipping
[2025-05-15T20:40:00.113Z] [STDOUT] Found 1 invoices for subscription sub_QV05DCrgh3A2rL
[2025-05-15T20:40:00.113Z] [STDOUT] Processing subscription 25 with Razorpay ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:40:00.113Z] [STDOUT] Subscription 25 has 2 existing transactions
[2025-05-15T20:40:00.113Z] [STDOUT] Fetching invoices for subscription ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:40:00.113Z] [STDOUT] Found 1 invoices for subscription: sub_QV1W0JNq2cOk7s
[2025-05-15T20:40:00.113Z] [STDOUT] Transaction for payment pay_QV1WoyCgCY23iO already exists in database (2 records), skipping
[2025-05-15T20:40:00.113Z] [STDOUT] Found 1 invoices for subscription sub_QV1W0JNq2cOk7s
[2025-05-15T20:40:00.113Z] [STDOUT] Processing subscription 26 with Razorpay ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:40:00.113Z] [STDOUT] Subscription 26 has 2 existing transactions
[2025-05-15T20:40:00.113Z] [STDOUT] Fetching invoices for subscription ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:40:00.113Z] [STDOUT] Found 2 invoices for subscription: sub_QVIG6dAuP0UXXn
[2025-05-15T20:40:00.113Z] [STDOUT] Transaction for payment pay_QVILKDuy9v6ovq already exists in database (1 records), skipping
[2025-05-15T20:40:00.113Z] [STDOUT] Transaction for payment pay_QVIGtXTXkm93W8 already exists in database (1 records), skipping
[2025-05-15T20:40:00.113Z] [STDOUT] Found 2 invoices for subscription sub_QVIG6dAuP0UXXn
[2025-05-15T20:40:00.113Z] [STDOUT] Subscription invoice synchronization complete!
[2025-05-15T20:40:00.113Z] [STDOUT] Processed 4 subscriptions
[2025-05-15T20:40:00.113Z] [STDOUT] Success: 4, Errors: 0
[2025-05-15T20:40:00.113Z] [STDOUT] Added 0 new transactions
[2025-05-15T20:40:00.113Z] [STDOUT] Script execution completed
[2025-05-15T20:40:00.113Z] Synchronization completed successfully
[2025-05-15T20:40:00.113Z] Next sync scheduled in 5 seconds
[2025-05-15T20:40:00.840Z] Starting invoice synchronization...
[2025-05-15T20:40:00.840Z] Running sync script: /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:40:00.840Z] Executing command: cd /Users/raja/Development/ProsumeAI/server && npx tsx /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:40:05.839Z] Starting invoice synchronization...
[2025-05-15T20:40:05.839Z] Running sync script: /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:40:05.839Z] Executing command: cd /Users/raja/Development/ProsumeAI/server && npx tsx /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:40:05.852Z] [STDOUT] Using database connection: postgres://***:***@localhost:5432/prosumeai
[2025-05-15T20:40:05.852Z] [STDOUT] Starting subscription invoice synchronization...
[2025-05-15T20:40:05.852Z] [STDOUT] Database schema validated successfully
[2025-05-15T20:40:05.852Z] [STDOUT] Found 4 active Razorpay subscriptions to sync
[2025-05-15T20:40:05.852Z] [STDOUT] Processing subscription 20 with Razorpay ID: sub_QUxcCis3igdqUA
[2025-05-15T20:40:05.852Z] [STDOUT] Subscription 20 has 1 existing transactions
[2025-05-15T20:40:05.852Z] [STDOUT] Razorpay initialization in progress, waiting...
[2025-05-15T20:40:05.852Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:40:05.852Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:40:05.852Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:40:05.852Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:40:05.852Z] [STDOUT] Fetching invoices for subscription ID: sub_QUxcCis3igdqUA
[2025-05-15T20:40:05.852Z] [STDOUT] Found 0 invoices for subscription: sub_QUxcCis3igdqUA
[2025-05-15T20:40:05.852Z] [STDOUT] Found 0 invoices for subscription sub_QUxcCis3igdqUA
[2025-05-15T20:40:05.852Z] [STDOUT] Processing subscription 24 with Razorpay ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:40:05.852Z] [STDOUT] Subscription 24 has 1 existing transactions
[2025-05-15T20:40:05.852Z] [STDOUT] Fetching invoices for subscription ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:40:05.852Z] [STDOUT] Found 1 invoices for subscription: sub_QV05DCrgh3A2rL
[2025-05-15T20:40:05.852Z] [STDOUT] Transaction for payment pay_QV05q44fHQzL1q already exists in database (1 records), skipping
[2025-05-15T20:40:05.852Z] [STDOUT] Found 1 invoices for subscription sub_QV05DCrgh3A2rL
[2025-05-15T20:40:05.852Z] [STDOUT] Processing subscription 25 with Razorpay ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:40:05.852Z] [STDOUT] Subscription 25 has 2 existing transactions
[2025-05-15T20:40:05.852Z] [STDOUT] Fetching invoices for subscription ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:40:05.852Z] [STDOUT] Found 1 invoices for subscription: sub_QV1W0JNq2cOk7s
[2025-05-15T20:40:05.852Z] [STDOUT] Transaction for payment pay_QV1WoyCgCY23iO already exists in database (2 records), skipping
[2025-05-15T20:40:05.852Z] [STDOUT] Found 1 invoices for subscription sub_QV1W0JNq2cOk7s
[2025-05-15T20:40:05.852Z] [STDOUT] Processing subscription 26 with Razorpay ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:40:05.852Z] [STDOUT] Subscription 26 has 2 existing transactions
[2025-05-15T20:40:05.852Z] [STDOUT] Fetching invoices for subscription ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:40:05.852Z] [STDOUT] Found 2 invoices for subscription: sub_QVIG6dAuP0UXXn
[2025-05-15T20:40:05.852Z] [STDOUT] Transaction for payment pay_QVILKDuy9v6ovq already exists in database (1 records), skipping
[2025-05-15T20:40:05.852Z] [STDOUT] Transaction for payment pay_QVIGtXTXkm93W8 already exists in database (1 records), skipping
[2025-05-15T20:40:05.852Z] [STDOUT] Found 2 invoices for subscription sub_QVIG6dAuP0UXXn
[2025-05-15T20:40:05.852Z] [STDOUT] Subscription invoice synchronization complete!
[2025-05-15T20:40:05.852Z] [STDOUT] Processed 4 subscriptions
[2025-05-15T20:40:05.852Z] [STDOUT] Success: 4, Errors: 0
[2025-05-15T20:40:05.852Z] [STDOUT] Added 0 new transactions
[2025-05-15T20:40:05.852Z] [STDOUT] Script execution completed
[2025-05-15T20:40:05.852Z] Synchronization completed successfully
[2025-05-15T20:40:05.852Z] Next sync scheduled in 5 seconds
[2025-05-15T20:40:10.812Z] [STDOUT] Using database connection: postgres://***:***@localhost:5432/prosumeai
[2025-05-15T20:40:10.812Z] [STDOUT] Starting subscription invoice synchronization...
[2025-05-15T20:40:10.812Z] [STDOUT] Database schema validated successfully
[2025-05-15T20:40:10.812Z] [STDOUT] Found 4 active Razorpay subscriptions to sync
[2025-05-15T20:40:10.812Z] [STDOUT] Processing subscription 20 with Razorpay ID: sub_QUxcCis3igdqUA
[2025-05-15T20:40:10.812Z] [STDOUT] Subscription 20 has 1 existing transactions
[2025-05-15T20:40:10.812Z] [STDOUT] Razorpay initialization in progress, waiting...
[2025-05-15T20:40:10.812Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:40:10.812Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:40:10.812Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:40:10.812Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:40:10.812Z] [STDOUT] Fetching invoices for subscription ID: sub_QUxcCis3igdqUA
[2025-05-15T20:40:10.812Z] [STDOUT] Found 0 invoices for subscription: sub_QUxcCis3igdqUA
[2025-05-15T20:40:10.812Z] [STDOUT] Found 0 invoices for subscription sub_QUxcCis3igdqUA
[2025-05-15T20:40:10.812Z] [STDOUT] Processing subscription 24 with Razorpay ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:40:10.812Z] [STDOUT] Subscription 24 has 1 existing transactions
[2025-05-15T20:40:10.812Z] [STDOUT] Fetching invoices for subscription ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:40:10.812Z] [STDOUT] Found 1 invoices for subscription: sub_QV05DCrgh3A2rL
[2025-05-15T20:40:10.812Z] [STDOUT] Transaction for payment pay_QV05q44fHQzL1q already exists in database (1 records), skipping
[2025-05-15T20:40:10.812Z] [STDOUT] Found 1 invoices for subscription sub_QV05DCrgh3A2rL
[2025-05-15T20:40:10.812Z] [STDOUT] Processing subscription 25 with Razorpay ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:40:10.813Z] [STDOUT] Subscription 25 has 2 existing transactions
[2025-05-15T20:40:10.813Z] [STDOUT] Fetching invoices for subscription ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:40:10.813Z] [STDOUT] Found 1 invoices for subscription: sub_QV1W0JNq2cOk7s
[2025-05-15T20:40:10.813Z] [STDOUT] Transaction for payment pay_QV1WoyCgCY23iO already exists in database (2 records), skipping
[2025-05-15T20:40:10.813Z] [STDOUT] Found 1 invoices for subscription sub_QV1W0JNq2cOk7s
[2025-05-15T20:40:10.813Z] [STDOUT] Processing subscription 26 with Razorpay ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:40:10.813Z] [STDOUT] Subscription 26 has 2 existing transactions
[2025-05-15T20:40:10.813Z] [STDOUT] Fetching invoices for subscription ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:40:10.813Z] [STDOUT] Found 2 invoices for subscription: sub_QVIG6dAuP0UXXn
[2025-05-15T20:40:10.813Z] [STDOUT] Transaction for payment pay_QVILKDuy9v6ovq already exists in database (1 records), skipping
[2025-05-15T20:40:10.813Z] [STDOUT] Transaction for payment pay_QVIGtXTXkm93W8 already exists in database (1 records), skipping
[2025-05-15T20:40:10.813Z] [STDOUT] Found 2 invoices for subscription sub_QVIG6dAuP0UXXn
[2025-05-15T20:40:10.813Z] [STDOUT] Subscription invoice synchronization complete!
[2025-05-15T20:40:10.813Z] [STDOUT] Processed 4 subscriptions
[2025-05-15T20:40:10.813Z] [STDOUT] Success: 4, Errors: 0
[2025-05-15T20:40:10.813Z] [STDOUT] Added 0 new transactions
[2025-05-15T20:40:10.813Z] [STDOUT] Script execution completed
[2025-05-15T20:40:10.813Z] Synchronization completed successfully
[2025-05-15T20:40:10.813Z] Next sync scheduled in 5 seconds
[2025-05-15T20:40:10.840Z] Starting invoice synchronization...
[2025-05-15T20:40:10.840Z] Running sync script: /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:40:10.840Z] Executing command: cd /Users/raja/Development/ProsumeAI/server && npx tsx /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:40:15.379Z] [STDOUT] Using database connection: postgres://***:***@localhost:5432/prosumeai
[2025-05-15T20:40:15.379Z] [STDOUT] Starting subscription invoice synchronization...
[2025-05-15T20:40:15.379Z] [STDOUT] Database schema validated successfully
[2025-05-15T20:40:15.379Z] [STDOUT] Found 4 active Razorpay subscriptions to sync
[2025-05-15T20:40:15.379Z] [STDOUT] Processing subscription 20 with Razorpay ID: sub_QUxcCis3igdqUA
[2025-05-15T20:40:15.379Z] [STDOUT] Subscription 20 has 1 existing transactions
[2025-05-15T20:40:15.379Z] [STDOUT] Razorpay initialization in progress, waiting...
[2025-05-15T20:40:15.379Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:40:15.379Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:40:15.379Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:40:15.379Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:40:15.379Z] [STDOUT] Fetching invoices for subscription ID: sub_QUxcCis3igdqUA
[2025-05-15T20:40:15.379Z] [STDOUT] Found 0 invoices for subscription: sub_QUxcCis3igdqUA
[2025-05-15T20:40:15.379Z] [STDOUT] Found 0 invoices for subscription sub_QUxcCis3igdqUA
[2025-05-15T20:40:15.379Z] [STDOUT] Processing subscription 24 with Razorpay ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:40:15.379Z] [STDOUT] Subscription 24 has 1 existing transactions
[2025-05-15T20:40:15.379Z] [STDOUT] Fetching invoices for subscription ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:40:15.379Z] [STDOUT] Found 1 invoices for subscription: sub_QV05DCrgh3A2rL
[2025-05-15T20:40:15.379Z] [STDOUT] Transaction for payment pay_QV05q44fHQzL1q already exists in database (1 records), skipping
[2025-05-15T20:40:15.379Z] [STDOUT] Found 1 invoices for subscription sub_QV05DCrgh3A2rL
[2025-05-15T20:40:15.379Z] [STDOUT] Processing subscription 25 with Razorpay ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:40:15.379Z] [STDOUT] Subscription 25 has 2 existing transactions
[2025-05-15T20:40:15.379Z] [STDOUT] Fetching invoices for subscription ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:40:15.379Z] [STDOUT] Found 1 invoices for subscription: sub_QV1W0JNq2cOk7s
[2025-05-15T20:40:15.379Z] [STDOUT] Transaction for payment pay_QV1WoyCgCY23iO already exists in database (2 records), skipping
[2025-05-15T20:40:15.379Z] [STDOUT] Found 1 invoices for subscription sub_QV1W0JNq2cOk7s
[2025-05-15T20:40:15.379Z] [STDOUT] Processing subscription 26 with Razorpay ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:40:15.379Z] [STDOUT] Subscription 26 has 2 existing transactions
[2025-05-15T20:40:15.379Z] [STDOUT] Fetching invoices for subscription ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:40:15.379Z] [STDOUT] Found 2 invoices for subscription: sub_QVIG6dAuP0UXXn
[2025-05-15T20:40:15.379Z] [STDOUT] Transaction for payment pay_QVILKDuy9v6ovq already exists in database (1 records), skipping
[2025-05-15T20:40:15.379Z] [STDOUT] Transaction for payment pay_QVIGtXTXkm93W8 already exists in database (1 records), skipping
[2025-05-15T20:40:15.379Z] [STDOUT] Found 2 invoices for subscription sub_QVIG6dAuP0UXXn
[2025-05-15T20:40:15.379Z] [STDOUT] Subscription invoice synchronization complete!
[2025-05-15T20:40:15.379Z] [STDOUT] Processed 4 subscriptions
[2025-05-15T20:40:15.379Z] [STDOUT] Success: 4, Errors: 0
[2025-05-15T20:40:15.379Z] [STDOUT] Added 0 new transactions
[2025-05-15T20:40:15.379Z] [STDOUT] Script execution completed
[2025-05-15T20:40:15.379Z] Synchronization completed successfully
[2025-05-15T20:40:15.379Z] Next sync scheduled in 5 seconds
[2025-05-15T20:40:15.842Z] Starting invoice synchronization...
[2025-05-15T20:40:15.842Z] Running sync script: /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:40:15.842Z] Executing command: cd /Users/raja/Development/ProsumeAI/server && npx tsx /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:40:20.810Z] [STDOUT] Using database connection: postgres://***:***@localhost:5432/prosumeai
[2025-05-15T20:40:20.810Z] [STDOUT] Starting subscription invoice synchronization...
[2025-05-15T20:40:20.810Z] [STDOUT] Found 4 active Razorpay subscriptions to sync
[2025-05-15T20:40:20.810Z] [STDOUT] Processing subscription 20 with Razorpay ID: sub_QUxcCis3igdqUA
[2025-05-15T20:40:20.810Z] [STDOUT] Database schema validated successfully
[2025-05-15T20:40:20.810Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:40:20.810Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:40:20.810Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:40:20.810Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:40:20.810Z] [STDOUT] Subscription 20 has 1 existing transactions
[2025-05-15T20:40:20.810Z] [STDOUT] Fetching invoices for subscription ID: sub_QUxcCis3igdqUA
[2025-05-15T20:40:20.810Z] [STDOUT] Found 0 invoices for subscription: sub_QUxcCis3igdqUA
[2025-05-15T20:40:20.810Z] [STDOUT] Found 0 invoices for subscription sub_QUxcCis3igdqUA
[2025-05-15T20:40:20.810Z] [STDOUT] Processing subscription 24 with Razorpay ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:40:20.810Z] [STDOUT] Subscription 24 has 1 existing transactions
[2025-05-15T20:40:20.810Z] [STDOUT] Fetching invoices for subscription ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:40:20.810Z] [STDOUT] Found 1 invoices for subscription: sub_QV05DCrgh3A2rL
[2025-05-15T20:40:20.810Z] [STDOUT] Transaction for payment pay_QV05q44fHQzL1q already exists in database (1 records), skipping
[2025-05-15T20:40:20.810Z] [STDOUT] Found 1 invoices for subscription sub_QV05DCrgh3A2rL
[2025-05-15T20:40:20.810Z] [STDOUT] Processing subscription 25 with Razorpay ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:40:20.810Z] [STDOUT] Subscription 25 has 2 existing transactions
[2025-05-15T20:40:20.810Z] [STDOUT] Fetching invoices for subscription ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:40:20.810Z] [STDOUT] Found 1 invoices for subscription: sub_QV1W0JNq2cOk7s
[2025-05-15T20:40:20.810Z] [STDOUT] Transaction for payment pay_QV1WoyCgCY23iO already exists in database (2 records), skipping
[2025-05-15T20:40:20.810Z] [STDOUT] Found 1 invoices for subscription sub_QV1W0JNq2cOk7s
[2025-05-15T20:40:20.810Z] [STDOUT] Processing subscription 26 with Razorpay ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:40:20.810Z] [STDOUT] Subscription 26 has 2 existing transactions
[2025-05-15T20:40:20.810Z] [STDOUT] Fetching invoices for subscription ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:40:20.810Z] [STDOUT] Found 2 invoices for subscription: sub_QVIG6dAuP0UXXn
[2025-05-15T20:40:20.810Z] [STDOUT] Transaction for payment pay_QVILKDuy9v6ovq already exists in database (1 records), skipping
[2025-05-15T20:40:20.810Z] [STDOUT] Transaction for payment pay_QVIGtXTXkm93W8 already exists in database (1 records), skipping
[2025-05-15T20:40:20.810Z] [STDOUT] Found 2 invoices for subscription sub_QVIG6dAuP0UXXn
[2025-05-15T20:40:20.810Z] [STDOUT] Subscription invoice synchronization complete!
[2025-05-15T20:40:20.810Z] [STDOUT] Processed 4 subscriptions
[2025-05-15T20:40:20.810Z] [STDOUT] Success: 4, Errors: 0
[2025-05-15T20:40:20.810Z] [STDOUT] Added 0 new transactions
[2025-05-15T20:40:20.810Z] [STDOUT] Script execution completed
[2025-05-15T20:40:20.810Z] Synchronization completed successfully
[2025-05-15T20:40:20.810Z] Next sync scheduled in 5 seconds
[2025-05-15T20:40:20.842Z] Starting invoice synchronization...
[2025-05-15T20:40:20.843Z] Running sync script: /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:40:20.843Z] Executing command: cd /Users/raja/Development/ProsumeAI/server && npx tsx /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:40:25.345Z] [STDOUT] Using database connection: postgres://***:***@localhost:5432/prosumeai
[2025-05-15T20:40:25.345Z] [STDOUT] Starting subscription invoice synchronization...
[2025-05-15T20:40:25.346Z] [STDOUT] Database schema validated successfully
[2025-05-15T20:40:25.346Z] [STDOUT] Found 4 active Razorpay subscriptions to sync
[2025-05-15T20:40:25.346Z] [STDOUT] Processing subscription 20 with Razorpay ID: sub_QUxcCis3igdqUA
[2025-05-15T20:40:25.346Z] [STDOUT] Subscription 20 has 1 existing transactions
[2025-05-15T20:40:25.346Z] [STDOUT] Razorpay initialization in progress, waiting...
[2025-05-15T20:40:25.346Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:40:25.346Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:40:25.346Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:40:25.346Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:40:25.346Z] [STDOUT] Fetching invoices for subscription ID: sub_QUxcCis3igdqUA
[2025-05-15T20:40:25.346Z] [STDOUT] Found 0 invoices for subscription: sub_QUxcCis3igdqUA
[2025-05-15T20:40:25.346Z] [STDOUT] Found 0 invoices for subscription sub_QUxcCis3igdqUA
[2025-05-15T20:40:25.346Z] [STDOUT] Processing subscription 24 with Razorpay ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:40:25.346Z] [STDOUT] Subscription 24 has 1 existing transactions
[2025-05-15T20:40:25.346Z] [STDOUT] Fetching invoices for subscription ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:40:25.346Z] [STDOUT] Found 1 invoices for subscription: sub_QV05DCrgh3A2rL
[2025-05-15T20:40:25.346Z] [STDOUT] Transaction for payment pay_QV05q44fHQzL1q already exists in database (1 records), skipping
[2025-05-15T20:40:25.346Z] [STDOUT] Found 1 invoices for subscription sub_QV05DCrgh3A2rL
[2025-05-15T20:40:25.346Z] [STDOUT] Processing subscription 25 with Razorpay ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:40:25.346Z] [STDOUT] Subscription 25 has 2 existing transactions
[2025-05-15T20:40:25.346Z] [STDOUT] Fetching invoices for subscription ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:40:25.346Z] [STDOUT] Found 1 invoices for subscription: sub_QV1W0JNq2cOk7s
[2025-05-15T20:40:25.346Z] [STDOUT] Transaction for payment pay_QV1WoyCgCY23iO already exists in database (2 records), skipping
[2025-05-15T20:40:25.346Z] [STDOUT] Found 1 invoices for subscription sub_QV1W0JNq2cOk7s
[2025-05-15T20:40:25.346Z] [STDOUT] Processing subscription 26 with Razorpay ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:40:25.346Z] [STDOUT] Subscription 26 has 2 existing transactions
[2025-05-15T20:40:25.346Z] [STDOUT] Fetching invoices for subscription ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:40:25.346Z] [STDOUT] Found 2 invoices for subscription: sub_QVIG6dAuP0UXXn
[2025-05-15T20:40:25.346Z] [STDOUT] Transaction for payment pay_QVILKDuy9v6ovq already exists in database (1 records), skipping
[2025-05-15T20:40:25.346Z] [STDOUT] Transaction for payment pay_QVIGtXTXkm93W8 already exists in database (1 records), skipping
[2025-05-15T20:40:25.346Z] [STDOUT] Found 2 invoices for subscription sub_QVIG6dAuP0UXXn
[2025-05-15T20:40:25.346Z] [STDOUT] Subscription invoice synchronization complete!
[2025-05-15T20:40:25.346Z] [STDOUT] Processed 4 subscriptions
[2025-05-15T20:40:25.346Z] [STDOUT] Success: 4, Errors: 0
[2025-05-15T20:40:25.346Z] [STDOUT] Added 0 new transactions
[2025-05-15T20:40:25.346Z] [STDOUT] Script execution completed
[2025-05-15T20:40:25.346Z] Synchronization completed successfully
[2025-05-15T20:40:25.346Z] Next sync scheduled in 5 seconds
[2025-05-15T20:40:25.843Z] Starting invoice synchronization...
[2025-05-15T20:40:25.843Z] Running sync script: /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:40:25.843Z] Executing command: cd /Users/raja/Development/ProsumeAI/server && npx tsx /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:40:30.844Z] Starting invoice synchronization...
[2025-05-15T20:40:30.845Z] Running sync script: /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:40:30.845Z] Executing command: cd /Users/raja/Development/ProsumeAI/server && npx tsx /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:40:31.216Z] [STDOUT] Using database connection: postgres://***:***@localhost:5432/prosumeai
[2025-05-15T20:40:31.216Z] [STDOUT] Starting subscription invoice synchronization...
[2025-05-15T20:40:31.216Z] [STDOUT] Database schema validated successfully
[2025-05-15T20:40:31.216Z] [STDOUT] Found 4 active Razorpay subscriptions to sync
[2025-05-15T20:40:31.216Z] [STDOUT] Processing subscription 20 with Razorpay ID: sub_QUxcCis3igdqUA
[2025-05-15T20:40:31.216Z] [STDOUT] Subscription 20 has 1 existing transactions
[2025-05-15T20:40:31.216Z] [STDOUT] Razorpay initialization in progress, waiting...
[2025-05-15T20:40:31.216Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:40:31.216Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:40:31.216Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:40:31.216Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:40:31.216Z] [STDOUT] Fetching invoices for subscription ID: sub_QUxcCis3igdqUA
[2025-05-15T20:40:31.216Z] [STDOUT] Found 0 invoices for subscription: sub_QUxcCis3igdqUA
[2025-05-15T20:40:31.216Z] [STDOUT] Found 0 invoices for subscription sub_QUxcCis3igdqUA
[2025-05-15T20:40:31.216Z] [STDOUT] Processing subscription 24 with Razorpay ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:40:31.216Z] [STDOUT] Subscription 24 has 1 existing transactions
[2025-05-15T20:40:31.216Z] [STDOUT] Fetching invoices for subscription ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:40:31.216Z] [STDOUT] Found 1 invoices for subscription: sub_QV05DCrgh3A2rL
[2025-05-15T20:40:31.216Z] [STDOUT] Transaction for payment pay_QV05q44fHQzL1q already exists in database (1 records), skipping
[2025-05-15T20:40:31.216Z] [STDOUT] Found 1 invoices for subscription sub_QV05DCrgh3A2rL
[2025-05-15T20:40:31.216Z] [STDOUT] Processing subscription 25 with Razorpay ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:40:31.216Z] [STDOUT] Subscription 25 has 2 existing transactions
[2025-05-15T20:40:31.216Z] [STDOUT] Fetching invoices for subscription ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:40:31.216Z] [STDOUT] Found 1 invoices for subscription: sub_QV1W0JNq2cOk7s
[2025-05-15T20:40:31.216Z] [STDOUT] Transaction for payment pay_QV1WoyCgCY23iO already exists in database (2 records), skipping
[2025-05-15T20:40:31.216Z] [STDOUT] Found 1 invoices for subscription sub_QV1W0JNq2cOk7s
[2025-05-15T20:40:31.216Z] [STDOUT] Processing subscription 26 with Razorpay ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:40:31.216Z] [STDOUT] Subscription 26 has 2 existing transactions
[2025-05-15T20:40:31.216Z] [STDOUT] Fetching invoices for subscription ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:40:31.216Z] [STDOUT] Found 2 invoices for subscription: sub_QVIG6dAuP0UXXn
[2025-05-15T20:40:31.216Z] [STDOUT] Transaction for payment pay_QVILKDuy9v6ovq already exists in database (1 records), skipping
[2025-05-15T20:40:31.216Z] [STDOUT] Transaction for payment pay_QVIGtXTXkm93W8 already exists in database (1 records), skipping
[2025-05-15T20:40:31.216Z] [STDOUT] Found 2 invoices for subscription sub_QVIG6dAuP0UXXn
[2025-05-15T20:40:31.216Z] [STDOUT] Subscription invoice synchronization complete!
[2025-05-15T20:40:31.216Z] [STDOUT] Processed 4 subscriptions
[2025-05-15T20:40:31.216Z] [STDOUT] Success: 4, Errors: 0
[2025-05-15T20:40:31.216Z] [STDOUT] Added 0 new transactions
[2025-05-15T20:40:31.216Z] [STDOUT] Script execution completed
[2025-05-15T20:40:31.216Z] Synchronization completed successfully
[2025-05-15T20:40:31.216Z] Next sync scheduled in 5 seconds
[2025-05-15T20:40:35.546Z] [STDOUT] Using database connection: postgres://***:***@localhost:5432/prosumeai
[2025-05-15T20:40:35.546Z] [STDOUT] Starting subscription invoice synchronization...
[2025-05-15T20:40:35.546Z] [STDOUT] Database schema validated successfully
[2025-05-15T20:40:35.546Z] [STDOUT] Found 4 active Razorpay subscriptions to sync
[2025-05-15T20:40:35.546Z] [STDOUT] Processing subscription 20 with Razorpay ID: sub_QUxcCis3igdqUA
[2025-05-15T20:40:35.546Z] [STDOUT] Subscription 20 has 1 existing transactions
[2025-05-15T20:40:35.546Z] [STDOUT] Razorpay initialization in progress, waiting...
[2025-05-15T20:40:35.546Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:40:35.546Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:40:35.546Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:40:35.546Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:40:35.546Z] [STDOUT] Fetching invoices for subscription ID: sub_QUxcCis3igdqUA
[2025-05-15T20:40:35.546Z] [STDOUT] Found 0 invoices for subscription: sub_QUxcCis3igdqUA
[2025-05-15T20:40:35.546Z] [STDOUT] Found 0 invoices for subscription sub_QUxcCis3igdqUA
[2025-05-15T20:40:35.546Z] [STDOUT] Processing subscription 24 with Razorpay ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:40:35.546Z] [STDOUT] Subscription 24 has 1 existing transactions
[2025-05-15T20:40:35.546Z] [STDOUT] Fetching invoices for subscription ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:40:35.546Z] [STDOUT] Found 1 invoices for subscription: sub_QV05DCrgh3A2rL
[2025-05-15T20:40:35.546Z] [STDOUT] Transaction for payment pay_QV05q44fHQzL1q already exists in database (1 records), skipping
[2025-05-15T20:40:35.546Z] [STDOUT] Found 1 invoices for subscription sub_QV05DCrgh3A2rL
[2025-05-15T20:40:35.546Z] [STDOUT] Processing subscription 25 with Razorpay ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:40:35.546Z] [STDOUT] Subscription 25 has 2 existing transactions
[2025-05-15T20:40:35.546Z] [STDOUT] Fetching invoices for subscription ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:40:35.546Z] [STDOUT] Found 1 invoices for subscription: sub_QV1W0JNq2cOk7s
[2025-05-15T20:40:35.546Z] [STDOUT] Transaction for payment pay_QV1WoyCgCY23iO already exists in database (2 records), skipping
[2025-05-15T20:40:35.546Z] [STDOUT] Found 1 invoices for subscription sub_QV1W0JNq2cOk7s
[2025-05-15T20:40:35.546Z] [STDOUT] Processing subscription 26 with Razorpay ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:40:35.546Z] [STDOUT] Subscription 26 has 2 existing transactions
[2025-05-15T20:40:35.546Z] [STDOUT] Fetching invoices for subscription ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:40:35.546Z] [STDOUT] Found 2 invoices for subscription: sub_QVIG6dAuP0UXXn
[2025-05-15T20:40:35.546Z] [STDOUT] Transaction for payment pay_QVILKDuy9v6ovq already exists in database (1 records), skipping
[2025-05-15T20:40:35.546Z] [STDOUT] Transaction for payment pay_QVIGtXTXkm93W8 already exists in database (1 records), skipping
[2025-05-15T20:40:35.546Z] [STDOUT] Found 2 invoices for subscription sub_QVIG6dAuP0UXXn
[2025-05-15T20:40:35.546Z] [STDOUT] Subscription invoice synchronization complete!
[2025-05-15T20:40:35.546Z] [STDOUT] Processed 4 subscriptions
[2025-05-15T20:40:35.546Z] [STDOUT] Success: 4, Errors: 0
[2025-05-15T20:40:35.546Z] [STDOUT] Added 0 new transactions
[2025-05-15T20:40:35.546Z] [STDOUT] Script execution completed
[2025-05-15T20:40:35.546Z] Synchronization completed successfully
[2025-05-15T20:40:35.546Z] Next sync scheduled in 5 seconds
[2025-05-15T20:40:35.845Z] Starting invoice synchronization...
[2025-05-15T20:40:35.846Z] Running sync script: /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:40:35.846Z] Executing command: cd /Users/raja/Development/ProsumeAI/server && npx tsx /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:40:40.817Z] [STDOUT] Using database connection: postgres://***:***@localhost:5432/prosumeai
[2025-05-15T20:40:40.817Z] [STDOUT] Starting subscription invoice synchronization...
[2025-05-15T20:40:40.818Z] [STDOUT] Database schema validated successfully
[2025-05-15T20:40:40.818Z] [STDOUT] Found 4 active Razorpay subscriptions to sync
[2025-05-15T20:40:40.818Z] [STDOUT] Processing subscription 20 with Razorpay ID: sub_QUxcCis3igdqUA
[2025-05-15T20:40:40.818Z] [STDOUT] Subscription 20 has 1 existing transactions
[2025-05-15T20:40:40.818Z] [STDOUT] Razorpay initialization in progress, waiting...
[2025-05-15T20:40:40.818Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:40:40.818Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:40:40.818Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:40:40.818Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:40:40.818Z] [STDOUT] Fetching invoices for subscription ID: sub_QUxcCis3igdqUA
[2025-05-15T20:40:40.818Z] [STDOUT] Found 0 invoices for subscription: sub_QUxcCis3igdqUA
[2025-05-15T20:40:40.818Z] [STDOUT] Found 0 invoices for subscription sub_QUxcCis3igdqUA
[2025-05-15T20:40:40.818Z] [STDOUT] Processing subscription 24 with Razorpay ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:40:40.818Z] [STDOUT] Subscription 24 has 1 existing transactions
[2025-05-15T20:40:40.818Z] [STDOUT] Fetching invoices for subscription ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:40:40.818Z] [STDOUT] Found 1 invoices for subscription: sub_QV05DCrgh3A2rL
[2025-05-15T20:40:40.818Z] [STDOUT] Transaction for payment pay_QV05q44fHQzL1q already exists in database (1 records), skipping
[2025-05-15T20:40:40.818Z] [STDOUT] Found 1 invoices for subscription sub_QV05DCrgh3A2rL
[2025-05-15T20:40:40.818Z] [STDOUT] Processing subscription 25 with Razorpay ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:40:40.818Z] [STDOUT] Subscription 25 has 2 existing transactions
[2025-05-15T20:40:40.818Z] [STDOUT] Fetching invoices for subscription ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:40:40.818Z] [STDOUT] Found 1 invoices for subscription: sub_QV1W0JNq2cOk7s
[2025-05-15T20:40:40.818Z] [STDOUT] Transaction for payment pay_QV1WoyCgCY23iO already exists in database (2 records), skipping
[2025-05-15T20:40:40.818Z] [STDOUT] Found 1 invoices for subscription sub_QV1W0JNq2cOk7s
[2025-05-15T20:40:40.818Z] [STDOUT] Processing subscription 26 with Razorpay ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:40:40.818Z] [STDOUT] Subscription 26 has 2 existing transactions
[2025-05-15T20:40:40.818Z] [STDOUT] Fetching invoices for subscription ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:40:40.818Z] [STDOUT] Found 2 invoices for subscription: sub_QVIG6dAuP0UXXn
[2025-05-15T20:40:40.818Z] [STDOUT] Transaction for payment pay_QVILKDuy9v6ovq already exists in database (1 records), skipping
[2025-05-15T20:40:40.818Z] [STDOUT] Transaction for payment pay_QVIGtXTXkm93W8 already exists in database (1 records), skipping
[2025-05-15T20:40:40.818Z] [STDOUT] Found 2 invoices for subscription sub_QVIG6dAuP0UXXn
[2025-05-15T20:40:40.818Z] [STDOUT] Subscription invoice synchronization complete!
[2025-05-15T20:40:40.818Z] [STDOUT] Processed 4 subscriptions
[2025-05-15T20:40:40.818Z] [STDOUT] Success: 4, Errors: 0
[2025-05-15T20:40:40.818Z] [STDOUT] Added 0 new transactions
[2025-05-15T20:40:40.818Z] [STDOUT] Script execution completed
[2025-05-15T20:40:40.818Z] Synchronization completed successfully
[2025-05-15T20:40:40.818Z] Next sync scheduled in 5 seconds
[2025-05-15T20:40:40.846Z] Starting invoice synchronization...
[2025-05-15T20:40:40.846Z] Running sync script: /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:40:40.846Z] Executing command: cd /Users/raja/Development/ProsumeAI/server && npx tsx /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:40:45.213Z] [STDOUT] Using database connection: postgres://***:***@localhost:5432/prosumeai
[2025-05-15T20:40:45.213Z] [STDOUT] Starting subscription invoice synchronization...
[2025-05-15T20:40:45.213Z] [STDOUT] Database schema validated successfully
[2025-05-15T20:40:45.214Z] [STDOUT] Found 4 active Razorpay subscriptions to sync
[2025-05-15T20:40:45.214Z] [STDOUT] Processing subscription 20 with Razorpay ID: sub_QUxcCis3igdqUA
[2025-05-15T20:40:45.214Z] [STDOUT] Subscription 20 has 1 existing transactions
[2025-05-15T20:40:45.214Z] [STDOUT] Razorpay initialization in progress, waiting...
[2025-05-15T20:40:45.214Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:40:45.214Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:40:45.214Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:40:45.214Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:40:45.214Z] [STDOUT] Fetching invoices for subscription ID: sub_QUxcCis3igdqUA
[2025-05-15T20:40:45.214Z] [STDOUT] Found 0 invoices for subscription: sub_QUxcCis3igdqUA
[2025-05-15T20:40:45.214Z] [STDOUT] Found 0 invoices for subscription sub_QUxcCis3igdqUA
[2025-05-15T20:40:45.214Z] [STDOUT] Processing subscription 24 with Razorpay ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:40:45.214Z] [STDOUT] Subscription 24 has 1 existing transactions
[2025-05-15T20:40:45.214Z] [STDOUT] Fetching invoices for subscription ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:40:45.214Z] [STDOUT] Found 1 invoices for subscription: sub_QV05DCrgh3A2rL
[2025-05-15T20:40:45.214Z] [STDOUT] Transaction for payment pay_QV05q44fHQzL1q already exists in database (1 records), skipping
[2025-05-15T20:40:45.214Z] [STDOUT] Found 1 invoices for subscription sub_QV05DCrgh3A2rL
[2025-05-15T20:40:45.214Z] [STDOUT] Processing subscription 25 with Razorpay ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:40:45.214Z] [STDOUT] Subscription 25 has 2 existing transactions
[2025-05-15T20:40:45.214Z] [STDOUT] Fetching invoices for subscription ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:40:45.214Z] [STDOUT] Found 1 invoices for subscription: sub_QV1W0JNq2cOk7s
[2025-05-15T20:40:45.214Z] [STDOUT] Transaction for payment pay_QV1WoyCgCY23iO already exists in database (2 records), skipping
[2025-05-15T20:40:45.214Z] [STDOUT] Found 1 invoices for subscription sub_QV1W0JNq2cOk7s
[2025-05-15T20:40:45.214Z] [STDOUT] Processing subscription 26 with Razorpay ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:40:45.214Z] [STDOUT] Subscription 26 has 2 existing transactions
[2025-05-15T20:40:45.214Z] [STDOUT] Fetching invoices for subscription ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:40:45.214Z] [STDOUT] Found 2 invoices for subscription: sub_QVIG6dAuP0UXXn
[2025-05-15T20:40:45.214Z] [STDOUT] Transaction for payment pay_QVILKDuy9v6ovq already exists in database (1 records), skipping
[2025-05-15T20:40:45.214Z] [STDOUT] Transaction for payment pay_QVIGtXTXkm93W8 already exists in database (1 records), skipping
[2025-05-15T20:40:45.214Z] [STDOUT] Found 2 invoices for subscription sub_QVIG6dAuP0UXXn
[2025-05-15T20:40:45.214Z] [STDOUT] Subscription invoice synchronization complete!
[2025-05-15T20:40:45.214Z] [STDOUT] Processed 4 subscriptions
[2025-05-15T20:40:45.214Z] [STDOUT] Success: 4, Errors: 0
[2025-05-15T20:40:45.214Z] [STDOUT] Added 0 new transactions
[2025-05-15T20:40:45.214Z] [STDOUT] Script execution completed
[2025-05-15T20:40:45.214Z] Synchronization completed successfully
[2025-05-15T20:40:45.214Z] Next sync scheduled in 5 seconds
[2025-05-15T20:40:45.846Z] Starting invoice synchronization...
[2025-05-15T20:40:45.847Z] Running sync script: /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:40:45.847Z] Executing command: cd /Users/raja/Development/ProsumeAI/server && npx tsx /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:40:50.848Z] Starting invoice synchronization...
[2025-05-15T20:40:50.848Z] Running sync script: /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:40:50.848Z] Executing command: cd /Users/raja/Development/ProsumeAI/server && npx tsx /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:40:50.945Z] [STDOUT] Using database connection: postgres://***:***@localhost:5432/prosumeai
[2025-05-15T20:40:50.945Z] [STDOUT] Starting subscription invoice synchronization...
[2025-05-15T20:40:50.945Z] [STDOUT] Database schema validated successfully
[2025-05-15T20:40:50.945Z] [STDOUT] Found 4 active Razorpay subscriptions to sync
[2025-05-15T20:40:50.945Z] [STDOUT] Processing subscription 20 with Razorpay ID: sub_QUxcCis3igdqUA
[2025-05-15T20:40:50.945Z] [STDOUT] Subscription 20 has 1 existing transactions
[2025-05-15T20:40:50.945Z] [STDOUT] Razorpay initialization in progress, waiting...
[2025-05-15T20:40:50.945Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:40:50.945Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:40:50.945Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:40:50.945Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:40:50.945Z] [STDOUT] Fetching invoices for subscription ID: sub_QUxcCis3igdqUA
[2025-05-15T20:40:50.945Z] [STDOUT] Found 0 invoices for subscription: sub_QUxcCis3igdqUA
[2025-05-15T20:40:50.945Z] [STDOUT] Found 0 invoices for subscription sub_QUxcCis3igdqUA
[2025-05-15T20:40:50.945Z] [STDOUT] Processing subscription 24 with Razorpay ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:40:50.945Z] [STDOUT] Subscription 24 has 1 existing transactions
[2025-05-15T20:40:50.945Z] [STDOUT] Fetching invoices for subscription ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:40:50.945Z] [STDOUT] Found 1 invoices for subscription: sub_QV05DCrgh3A2rL
[2025-05-15T20:40:50.945Z] [STDOUT] Transaction for payment pay_QV05q44fHQzL1q already exists in database (1 records), skipping
[2025-05-15T20:40:50.945Z] [STDOUT] Found 1 invoices for subscription sub_QV05DCrgh3A2rL
[2025-05-15T20:40:50.945Z] [STDOUT] Processing subscription 25 with Razorpay ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:40:50.945Z] [STDOUT] Subscription 25 has 2 existing transactions
[2025-05-15T20:40:50.945Z] [STDOUT] Fetching invoices for subscription ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:40:50.945Z] [STDOUT] Found 1 invoices for subscription: sub_QV1W0JNq2cOk7s
[2025-05-15T20:40:50.945Z] [STDOUT] Transaction for payment pay_QV1WoyCgCY23iO already exists in database (2 records), skipping
[2025-05-15T20:40:50.945Z] [STDOUT] Found 1 invoices for subscription sub_QV1W0JNq2cOk7s
[2025-05-15T20:40:50.945Z] [STDOUT] Processing subscription 26 with Razorpay ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:40:50.945Z] [STDOUT] Subscription 26 has 2 existing transactions
[2025-05-15T20:40:50.945Z] [STDOUT] Fetching invoices for subscription ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:40:50.945Z] [STDOUT] Found 2 invoices for subscription: sub_QVIG6dAuP0UXXn
[2025-05-15T20:40:50.945Z] [STDOUT] Transaction for payment pay_QVILKDuy9v6ovq already exists in database (1 records), skipping
[2025-05-15T20:40:50.945Z] [STDOUT] Transaction for payment pay_QVIGtXTXkm93W8 already exists in database (1 records), skipping
[2025-05-15T20:40:50.946Z] [STDOUT] Found 2 invoices for subscription sub_QVIG6dAuP0UXXn
[2025-05-15T20:40:50.946Z] [STDOUT] Subscription invoice synchronization complete!
[2025-05-15T20:40:50.946Z] [STDOUT] Processed 4 subscriptions
[2025-05-15T20:40:50.946Z] [STDOUT] Success: 4, Errors: 0
[2025-05-15T20:40:50.946Z] [STDOUT] Added 0 new transactions
[2025-05-15T20:40:50.946Z] [STDOUT] Script execution completed
[2025-05-15T20:40:50.946Z] Synchronization completed successfully
[2025-05-15T20:40:50.946Z] Next sync scheduled in 5 seconds
[2025-05-15T20:40:55.640Z] [STDOUT] Using database connection: postgres://***:***@localhost:5432/prosumeai
[2025-05-15T20:40:55.640Z] [STDOUT] Starting subscription invoice synchronization...
[2025-05-15T20:40:55.640Z] [STDOUT] Database schema validated successfully
[2025-05-15T20:40:55.640Z] [STDOUT] Found 4 active Razorpay subscriptions to sync
[2025-05-15T20:40:55.640Z] [STDOUT] Processing subscription 20 with Razorpay ID: sub_QUxcCis3igdqUA
[2025-05-15T20:40:55.640Z] [STDOUT] Subscription 20 has 1 existing transactions
[2025-05-15T20:40:55.640Z] [STDOUT] Razorpay initialization in progress, waiting...
[2025-05-15T20:40:55.640Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:40:55.640Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:40:55.640Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:40:55.640Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:40:55.640Z] [STDOUT] Fetching invoices for subscription ID: sub_QUxcCis3igdqUA
[2025-05-15T20:40:55.640Z] [STDOUT] Found 0 invoices for subscription: sub_QUxcCis3igdqUA
[2025-05-15T20:40:55.640Z] [STDOUT] Found 0 invoices for subscription sub_QUxcCis3igdqUA
[2025-05-15T20:40:55.640Z] [STDOUT] Processing subscription 24 with Razorpay ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:40:55.640Z] [STDOUT] Subscription 24 has 1 existing transactions
[2025-05-15T20:40:55.640Z] [STDOUT] Fetching invoices for subscription ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:40:55.640Z] [STDOUT] Found 1 invoices for subscription: sub_QV05DCrgh3A2rL
[2025-05-15T20:40:55.640Z] [STDOUT] Transaction for payment pay_QV05q44fHQzL1q already exists in database (1 records), skipping
[2025-05-15T20:40:55.640Z] [STDOUT] Found 1 invoices for subscription sub_QV05DCrgh3A2rL
[2025-05-15T20:40:55.640Z] [STDOUT] Processing subscription 25 with Razorpay ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:40:55.640Z] [STDOUT] Subscription 25 has 2 existing transactions
[2025-05-15T20:40:55.640Z] [STDOUT] Fetching invoices for subscription ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:40:55.640Z] [STDOUT] Found 1 invoices for subscription: sub_QV1W0JNq2cOk7s
[2025-05-15T20:40:55.640Z] [STDOUT] Transaction for payment pay_QV1WoyCgCY23iO already exists in database (2 records), skipping
[2025-05-15T20:40:55.640Z] [STDOUT] Found 1 invoices for subscription sub_QV1W0JNq2cOk7s
[2025-05-15T20:40:55.640Z] [STDOUT] Processing subscription 26 with Razorpay ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:40:55.640Z] [STDOUT] Subscription 26 has 2 existing transactions
[2025-05-15T20:40:55.640Z] [STDOUT] Fetching invoices for subscription ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:40:55.640Z] [STDOUT] Found 2 invoices for subscription: sub_QVIG6dAuP0UXXn
[2025-05-15T20:40:55.640Z] [STDOUT] Transaction for payment pay_QVILKDuy9v6ovq already exists in database (1 records), skipping
[2025-05-15T20:40:55.640Z] [STDOUT] Transaction for payment pay_QVIGtXTXkm93W8 already exists in database (1 records), skipping
[2025-05-15T20:40:55.640Z] [STDOUT] Found 2 invoices for subscription sub_QVIG6dAuP0UXXn
[2025-05-15T20:40:55.640Z] [STDOUT] Subscription invoice synchronization complete!
[2025-05-15T20:40:55.640Z] [STDOUT] Processed 4 subscriptions
[2025-05-15T20:40:55.640Z] [STDOUT] Success: 4, Errors: 0
[2025-05-15T20:40:55.640Z] [STDOUT] Added 0 new transactions
[2025-05-15T20:40:55.640Z] [STDOUT] Script execution completed
[2025-05-15T20:40:55.640Z] Synchronization completed successfully
[2025-05-15T20:40:55.640Z] Next sync scheduled in 5 seconds
[2025-05-15T20:40:55.848Z] Starting invoice synchronization...
[2025-05-15T20:40:55.848Z] Running sync script: /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:40:55.848Z] Executing command: cd /Users/raja/Development/ProsumeAI/server && npx tsx /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:41:00.253Z] [STDOUT] Using database connection: postgres://***:***@localhost:5432/prosumeai
[2025-05-15T20:41:00.253Z] [STDOUT] Starting subscription invoice synchronization...
[2025-05-15T20:41:00.253Z] [STDOUT] Database schema validated successfully
[2025-05-15T20:41:00.253Z] [STDOUT] Found 4 active Razorpay subscriptions to sync
[2025-05-15T20:41:00.253Z] [STDOUT] Processing subscription 20 with Razorpay ID: sub_QUxcCis3igdqUA
[2025-05-15T20:41:00.253Z] [STDOUT] Subscription 20 has 1 existing transactions
[2025-05-15T20:41:00.253Z] [STDOUT] Razorpay initialization in progress, waiting...
[2025-05-15T20:41:00.253Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:41:00.253Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:41:00.253Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:41:00.253Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:41:00.253Z] [STDOUT] Fetching invoices for subscription ID: sub_QUxcCis3igdqUA
[2025-05-15T20:41:00.253Z] [STDOUT] Found 0 invoices for subscription: sub_QUxcCis3igdqUA
[2025-05-15T20:41:00.253Z] [STDOUT] Found 0 invoices for subscription sub_QUxcCis3igdqUA
[2025-05-15T20:41:00.253Z] [STDOUT] Processing subscription 24 with Razorpay ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:41:00.253Z] [STDOUT] Subscription 24 has 1 existing transactions
[2025-05-15T20:41:00.253Z] [STDOUT] Fetching invoices for subscription ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:41:00.253Z] [STDOUT] Found 1 invoices for subscription: sub_QV05DCrgh3A2rL
[2025-05-15T20:41:00.254Z] [STDOUT] Transaction for payment pay_QV05q44fHQzL1q already exists in database (1 records), skipping
[2025-05-15T20:41:00.254Z] [STDOUT] Found 1 invoices for subscription sub_QV05DCrgh3A2rL
[2025-05-15T20:41:00.254Z] [STDOUT] Processing subscription 25 with Razorpay ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:41:00.254Z] [STDOUT] Subscription 25 has 2 existing transactions
[2025-05-15T20:41:00.254Z] [STDOUT] Fetching invoices for subscription ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:41:00.254Z] [STDOUT] Found 1 invoices for subscription: sub_QV1W0JNq2cOk7s
[2025-05-15T20:41:00.254Z] [STDOUT] Transaction for payment pay_QV1WoyCgCY23iO already exists in database (2 records), skipping
[2025-05-15T20:41:00.254Z] [STDOUT] Found 1 invoices for subscription sub_QV1W0JNq2cOk7s
[2025-05-15T20:41:00.254Z] [STDOUT] Processing subscription 26 with Razorpay ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:41:00.254Z] [STDOUT] Subscription 26 has 2 existing transactions
[2025-05-15T20:41:00.254Z] [STDOUT] Fetching invoices for subscription ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:41:00.254Z] [STDOUT] Found 2 invoices for subscription: sub_QVIG6dAuP0UXXn
[2025-05-15T20:41:00.254Z] [STDOUT] Transaction for payment pay_QVILKDuy9v6ovq already exists in database (1 records), skipping
[2025-05-15T20:41:00.254Z] [STDOUT] Transaction for payment pay_QVIGtXTXkm93W8 already exists in database (1 records), skipping
[2025-05-15T20:41:00.254Z] [STDOUT] Found 2 invoices for subscription sub_QVIG6dAuP0UXXn
[2025-05-15T20:41:00.254Z] [STDOUT] Subscription invoice synchronization complete!
[2025-05-15T20:41:00.254Z] [STDOUT] Processed 4 subscriptions
[2025-05-15T20:41:00.254Z] [STDOUT] Success: 4, Errors: 0
[2025-05-15T20:41:00.254Z] [STDOUT] Added 0 new transactions
[2025-05-15T20:41:00.254Z] [STDOUT] Script execution completed
[2025-05-15T20:41:00.254Z] Synchronization completed successfully
[2025-05-15T20:41:00.254Z] Next sync scheduled in 5 seconds
[2025-05-15T20:41:00.849Z] Starting invoice synchronization...
[2025-05-15T20:41:00.849Z] Running sync script: /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:41:00.849Z] Executing command: cd /Users/raja/Development/ProsumeAI/server && npx tsx /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:41:05.850Z] Starting invoice synchronization...
[2025-05-15T20:41:05.851Z] Running sync script: /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:41:05.851Z] Executing command: cd /Users/raja/Development/ProsumeAI/server && npx tsx /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:41:05.884Z] [STDOUT] Using database connection: postgres://***:***@localhost:5432/prosumeai
[2025-05-15T20:41:05.884Z] [STDOUT] Starting subscription invoice synchronization...
[2025-05-15T20:41:05.884Z] [STDOUT] Database schema validated successfully
[2025-05-15T20:41:05.884Z] [STDOUT] Found 4 active Razorpay subscriptions to sync
[2025-05-15T20:41:05.884Z] [STDOUT] Processing subscription 20 with Razorpay ID: sub_QUxcCis3igdqUA
[2025-05-15T20:41:05.884Z] [STDOUT] Subscription 20 has 1 existing transactions
[2025-05-15T20:41:05.884Z] [STDOUT] Razorpay initialization in progress, waiting...
[2025-05-15T20:41:05.885Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:41:05.885Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:41:05.885Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:41:05.885Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:41:05.885Z] [STDOUT] Fetching invoices for subscription ID: sub_QUxcCis3igdqUA
[2025-05-15T20:41:05.885Z] [STDOUT] Found 0 invoices for subscription: sub_QUxcCis3igdqUA
[2025-05-15T20:41:05.885Z] [STDOUT] Found 0 invoices for subscription sub_QUxcCis3igdqUA
[2025-05-15T20:41:05.885Z] [STDOUT] Processing subscription 24 with Razorpay ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:41:05.885Z] [STDOUT] Subscription 24 has 1 existing transactions
[2025-05-15T20:41:05.885Z] [STDOUT] Fetching invoices for subscription ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:41:05.885Z] [STDOUT] Found 1 invoices for subscription: sub_QV05DCrgh3A2rL
[2025-05-15T20:41:05.885Z] [STDOUT] Transaction for payment pay_QV05q44fHQzL1q already exists in database (1 records), skipping
[2025-05-15T20:41:05.885Z] [STDOUT] Found 1 invoices for subscription sub_QV05DCrgh3A2rL
[2025-05-15T20:41:05.885Z] [STDOUT] Processing subscription 25 with Razorpay ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:41:05.885Z] [STDOUT] Subscription 25 has 2 existing transactions
[2025-05-15T20:41:05.885Z] [STDOUT] Fetching invoices for subscription ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:41:05.885Z] [STDOUT] Found 1 invoices for subscription: sub_QV1W0JNq2cOk7s
[2025-05-15T20:41:05.885Z] [STDOUT] Transaction for payment pay_QV1WoyCgCY23iO already exists in database (2 records), skipping
[2025-05-15T20:41:05.885Z] [STDOUT] Found 1 invoices for subscription sub_QV1W0JNq2cOk7s
[2025-05-15T20:41:05.885Z] [STDOUT] Processing subscription 26 with Razorpay ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:41:05.885Z] [STDOUT] Subscription 26 has 2 existing transactions
[2025-05-15T20:41:05.885Z] [STDOUT] Fetching invoices for subscription ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:41:05.885Z] [STDOUT] Found 2 invoices for subscription: sub_QVIG6dAuP0UXXn
[2025-05-15T20:41:05.885Z] [STDOUT] Transaction for payment pay_QVILKDuy9v6ovq already exists in database (1 records), skipping
[2025-05-15T20:41:05.885Z] [STDOUT] Transaction for payment pay_QVIGtXTXkm93W8 already exists in database (1 records), skipping
[2025-05-15T20:41:05.885Z] [STDOUT] Found 2 invoices for subscription sub_QVIG6dAuP0UXXn
[2025-05-15T20:41:05.885Z] [STDOUT] Subscription invoice synchronization complete!
[2025-05-15T20:41:05.885Z] [STDOUT] Processed 4 subscriptions
[2025-05-15T20:41:05.885Z] [STDOUT] Success: 4, Errors: 0
[2025-05-15T20:41:05.885Z] [STDOUT] Added 0 new transactions
[2025-05-15T20:41:05.885Z] [STDOUT] Script execution completed
[2025-05-15T20:41:05.885Z] Synchronization completed successfully
[2025-05-15T20:41:05.885Z] Next sync scheduled in 5 seconds
[2025-05-15T20:41:10.851Z] Starting invoice synchronization...
[2025-05-15T20:41:10.851Z] Running sync script: /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:41:10.851Z] Executing command: cd /Users/raja/Development/ProsumeAI/server && npx tsx /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:41:10.935Z] [STDOUT] Using database connection: postgres://***:***@localhost:5432/prosumeai
[2025-05-15T20:41:10.935Z] [STDOUT] Starting subscription invoice synchronization...
[2025-05-15T20:41:10.935Z] [STDOUT] Found 4 active Razorpay subscriptions to sync
[2025-05-15T20:41:10.935Z] [STDOUT] Processing subscription 20 with Razorpay ID: sub_QUxcCis3igdqUA
[2025-05-15T20:41:10.935Z] [STDOUT] Database schema validated successfully
[2025-05-15T20:41:10.935Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:41:10.935Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:41:10.935Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:41:10.935Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:41:10.935Z] [STDOUT] Subscription 20 has 1 existing transactions
[2025-05-15T20:41:10.935Z] [STDOUT] Fetching invoices for subscription ID: sub_QUxcCis3igdqUA
[2025-05-15T20:41:10.935Z] [STDOUT] Found 0 invoices for subscription: sub_QUxcCis3igdqUA
[2025-05-15T20:41:10.935Z] [STDOUT] Found 0 invoices for subscription sub_QUxcCis3igdqUA
[2025-05-15T20:41:10.935Z] [STDOUT] Processing subscription 24 with Razorpay ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:41:10.935Z] [STDOUT] Subscription 24 has 1 existing transactions
[2025-05-15T20:41:10.935Z] [STDOUT] Fetching invoices for subscription ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:41:10.935Z] [STDOUT] Found 1 invoices for subscription: sub_QV05DCrgh3A2rL
[2025-05-15T20:41:10.935Z] [STDOUT] Transaction for payment pay_QV05q44fHQzL1q already exists in database (1 records), skipping
[2025-05-15T20:41:10.935Z] [STDOUT] Found 1 invoices for subscription sub_QV05DCrgh3A2rL
[2025-05-15T20:41:10.935Z] [STDOUT] Processing subscription 25 with Razorpay ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:41:10.935Z] [STDOUT] Subscription 25 has 2 existing transactions
[2025-05-15T20:41:10.935Z] [STDOUT] Fetching invoices for subscription ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:41:10.935Z] [STDOUT] Found 1 invoices for subscription: sub_QV1W0JNq2cOk7s
[2025-05-15T20:41:10.935Z] [STDOUT] Transaction for payment pay_QV1WoyCgCY23iO already exists in database (2 records), skipping
[2025-05-15T20:41:10.935Z] [STDOUT] Found 1 invoices for subscription sub_QV1W0JNq2cOk7s
[2025-05-15T20:41:10.935Z] [STDOUT] Processing subscription 26 with Razorpay ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:41:10.935Z] [STDOUT] Subscription 26 has 2 existing transactions
[2025-05-15T20:41:10.935Z] [STDOUT] Fetching invoices for subscription ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:41:10.935Z] [STDOUT] Found 2 invoices for subscription: sub_QVIG6dAuP0UXXn
[2025-05-15T20:41:10.935Z] [STDOUT] Transaction for payment pay_QVILKDuy9v6ovq already exists in database (1 records), skipping
[2025-05-15T20:41:10.935Z] [STDOUT] Transaction for payment pay_QVIGtXTXkm93W8 already exists in database (1 records), skipping
[2025-05-15T20:41:10.935Z] [STDOUT] Found 2 invoices for subscription sub_QVIG6dAuP0UXXn
[2025-05-15T20:41:10.935Z] [STDOUT] Subscription invoice synchronization complete!
[2025-05-15T20:41:10.935Z] [STDOUT] Processed 4 subscriptions
[2025-05-15T20:41:10.935Z] [STDOUT] Success: 4, Errors: 0
[2025-05-15T20:41:10.935Z] [STDOUT] Added 0 new transactions
[2025-05-15T20:41:10.935Z] [STDOUT] Script execution completed
[2025-05-15T20:41:10.935Z] Synchronization completed successfully
[2025-05-15T20:41:10.935Z] Next sync scheduled in 5 seconds
[2025-05-15T20:41:15.851Z] Starting invoice synchronization...
[2025-05-15T20:41:15.851Z] Running sync script: /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:41:15.852Z] Executing command: cd /Users/raja/Development/ProsumeAI/server && npx tsx /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:41:16.329Z] [STDOUT] Using database connection: postgres://***:***@localhost:5432/prosumeai
[2025-05-15T20:41:16.329Z] [STDOUT] Starting subscription invoice synchronization...
[2025-05-15T20:41:16.329Z] [STDOUT] Database schema validated successfully
[2025-05-15T20:41:16.329Z] [STDOUT] Found 4 active Razorpay subscriptions to sync
[2025-05-15T20:41:16.329Z] [STDOUT] Processing subscription 20 with Razorpay ID: sub_QUxcCis3igdqUA
[2025-05-15T20:41:16.329Z] [STDOUT] Subscription 20 has 1 existing transactions
[2025-05-15T20:41:16.329Z] [STDOUT] Razorpay initialization in progress, waiting...
[2025-05-15T20:41:16.329Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:41:16.329Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:41:16.329Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:41:16.329Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:41:16.329Z] [STDOUT] Fetching invoices for subscription ID: sub_QUxcCis3igdqUA
[2025-05-15T20:41:16.329Z] [STDOUT] Found 0 invoices for subscription: sub_QUxcCis3igdqUA
[2025-05-15T20:41:16.329Z] [STDOUT] Found 0 invoices for subscription sub_QUxcCis3igdqUA
[2025-05-15T20:41:16.329Z] [STDOUT] Processing subscription 24 with Razorpay ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:41:16.329Z] [STDOUT] Subscription 24 has 1 existing transactions
[2025-05-15T20:41:16.329Z] [STDOUT] Fetching invoices for subscription ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:41:16.329Z] [STDOUT] Found 1 invoices for subscription: sub_QV05DCrgh3A2rL
[2025-05-15T20:41:16.329Z] [STDOUT] Transaction for payment pay_QV05q44fHQzL1q already exists in database (1 records), skipping
[2025-05-15T20:41:16.329Z] [STDOUT] Found 1 invoices for subscription sub_QV05DCrgh3A2rL
[2025-05-15T20:41:16.329Z] [STDOUT] Processing subscription 25 with Razorpay ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:41:16.329Z] [STDOUT] Subscription 25 has 2 existing transactions
[2025-05-15T20:41:16.329Z] [STDOUT] Fetching invoices for subscription ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:41:16.329Z] [STDOUT] Found 1 invoices for subscription: sub_QV1W0JNq2cOk7s
[2025-05-15T20:41:16.329Z] [STDOUT] Transaction for payment pay_QV1WoyCgCY23iO already exists in database (2 records), skipping
[2025-05-15T20:41:16.329Z] [STDOUT] Found 1 invoices for subscription sub_QV1W0JNq2cOk7s
[2025-05-15T20:41:16.329Z] [STDOUT] Processing subscription 26 with Razorpay ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:41:16.329Z] [STDOUT] Subscription 26 has 2 existing transactions
[2025-05-15T20:41:16.329Z] [STDOUT] Fetching invoices for subscription ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:41:16.329Z] [STDOUT] Found 2 invoices for subscription: sub_QVIG6dAuP0UXXn
[2025-05-15T20:41:16.329Z] [STDOUT] Transaction for payment pay_QVILKDuy9v6ovq already exists in database (1 records), skipping
[2025-05-15T20:41:16.329Z] [STDOUT] Transaction for payment pay_QVIGtXTXkm93W8 already exists in database (1 records), skipping
[2025-05-15T20:41:16.329Z] [STDOUT] Found 2 invoices for subscription sub_QVIG6dAuP0UXXn
[2025-05-15T20:41:16.329Z] [STDOUT] Subscription invoice synchronization complete!
[2025-05-15T20:41:16.329Z] [STDOUT] Processed 4 subscriptions
[2025-05-15T20:41:16.329Z] [STDOUT] Success: 4, Errors: 0
[2025-05-15T20:41:16.329Z] [STDOUT] Added 0 new transactions
[2025-05-15T20:41:16.329Z] [STDOUT] Script execution completed
[2025-05-15T20:41:16.329Z] Synchronization completed successfully
[2025-05-15T20:41:16.329Z] Next sync scheduled in 5 seconds
[2025-05-15T20:41:20.241Z] [STDOUT] Using database connection: postgres://***:***@localhost:5432/prosumeai
[2025-05-15T20:41:20.241Z] [STDOUT] Starting subscription invoice synchronization...
[2025-05-15T20:41:20.241Z] [STDOUT] Database schema validated successfully
[2025-05-15T20:41:20.241Z] [STDOUT] Found 4 active Razorpay subscriptions to sync
[2025-05-15T20:41:20.241Z] [STDOUT] Processing subscription 20 with Razorpay ID: sub_QUxcCis3igdqUA
[2025-05-15T20:41:20.241Z] [STDOUT] Subscription 20 has 1 existing transactions
[2025-05-15T20:41:20.241Z] [STDOUT] Razorpay initialization in progress, waiting...
[2025-05-15T20:41:20.241Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:41:20.241Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:41:20.241Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:41:20.241Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:41:20.241Z] [STDOUT] Fetching invoices for subscription ID: sub_QUxcCis3igdqUA
[2025-05-15T20:41:20.241Z] [STDOUT] Found 0 invoices for subscription: sub_QUxcCis3igdqUA
[2025-05-15T20:41:20.241Z] [STDOUT] Found 0 invoices for subscription sub_QUxcCis3igdqUA
[2025-05-15T20:41:20.241Z] [STDOUT] Processing subscription 24 with Razorpay ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:41:20.241Z] [STDOUT] Subscription 24 has 1 existing transactions
[2025-05-15T20:41:20.241Z] [STDOUT] Fetching invoices for subscription ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:41:20.241Z] [STDOUT] Found 1 invoices for subscription: sub_QV05DCrgh3A2rL
[2025-05-15T20:41:20.241Z] [STDOUT] Transaction for payment pay_QV05q44fHQzL1q already exists in database (1 records), skipping
[2025-05-15T20:41:20.241Z] [STDOUT] Found 1 invoices for subscription sub_QV05DCrgh3A2rL
[2025-05-15T20:41:20.241Z] [STDOUT] Processing subscription 25 with Razorpay ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:41:20.241Z] [STDOUT] Subscription 25 has 2 existing transactions
[2025-05-15T20:41:20.241Z] [STDOUT] Fetching invoices for subscription ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:41:20.241Z] [STDOUT] Found 1 invoices for subscription: sub_QV1W0JNq2cOk7s
[2025-05-15T20:41:20.241Z] [STDOUT] Transaction for payment pay_QV1WoyCgCY23iO already exists in database (2 records), skipping
[2025-05-15T20:41:20.241Z] [STDOUT] Found 1 invoices for subscription sub_QV1W0JNq2cOk7s
[2025-05-15T20:41:20.241Z] [STDOUT] Processing subscription 26 with Razorpay ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:41:20.241Z] [STDOUT] Subscription 26 has 2 existing transactions
[2025-05-15T20:41:20.241Z] [STDOUT] Fetching invoices for subscription ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:41:20.241Z] [STDOUT] Found 2 invoices for subscription: sub_QVIG6dAuP0UXXn
[2025-05-15T20:41:20.241Z] [STDOUT] Transaction for payment pay_QVILKDuy9v6ovq already exists in database (1 records), skipping
[2025-05-15T20:41:20.241Z] [STDOUT] Transaction for payment pay_QVIGtXTXkm93W8 already exists in database (1 records), skipping
[2025-05-15T20:41:20.241Z] [STDOUT] Found 2 invoices for subscription sub_QVIG6dAuP0UXXn
[2025-05-15T20:41:20.241Z] [STDOUT] Subscription invoice synchronization complete!
[2025-05-15T20:41:20.241Z] [STDOUT] Processed 4 subscriptions
[2025-05-15T20:41:20.241Z] [STDOUT] Success: 4, Errors: 0
[2025-05-15T20:41:20.241Z] [STDOUT] Added 0 new transactions
[2025-05-15T20:41:20.241Z] [STDOUT] Script execution completed
[2025-05-15T20:41:20.241Z] Synchronization completed successfully
[2025-05-15T20:41:20.241Z] Next sync scheduled in 5 seconds
[2025-05-15T20:41:20.852Z] Starting invoice synchronization...
[2025-05-15T20:41:20.853Z] Running sync script: /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:41:20.853Z] Executing command: cd /Users/raja/Development/ProsumeAI/server && npx tsx /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:41:25.389Z] [STDOUT] Using database connection: postgres://***:***@localhost:5432/prosumeai
[2025-05-15T20:41:25.390Z] [STDOUT] Starting subscription invoice synchronization...
[2025-05-15T20:41:25.390Z] [STDOUT] Database schema validated successfully
[2025-05-15T20:41:25.390Z] [STDOUT] Found 4 active Razorpay subscriptions to sync
[2025-05-15T20:41:25.390Z] [STDOUT] Processing subscription 20 with Razorpay ID: sub_QUxcCis3igdqUA
[2025-05-15T20:41:25.390Z] [STDOUT] Subscription 20 has 1 existing transactions
[2025-05-15T20:41:25.390Z] [STDOUT] Razorpay initialization in progress, waiting...
[2025-05-15T20:41:25.390Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:41:25.390Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:41:25.390Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:41:25.390Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:41:25.390Z] [STDOUT] Fetching invoices for subscription ID: sub_QUxcCis3igdqUA
[2025-05-15T20:41:25.390Z] [STDOUT] Found 0 invoices for subscription: sub_QUxcCis3igdqUA
[2025-05-15T20:41:25.390Z] [STDOUT] Found 0 invoices for subscription sub_QUxcCis3igdqUA
[2025-05-15T20:41:25.390Z] [STDOUT] Processing subscription 24 with Razorpay ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:41:25.390Z] [STDOUT] Subscription 24 has 1 existing transactions
[2025-05-15T20:41:25.390Z] [STDOUT] Fetching invoices for subscription ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:41:25.390Z] [STDOUT] Found 1 invoices for subscription: sub_QV05DCrgh3A2rL
[2025-05-15T20:41:25.390Z] [STDOUT] Transaction for payment pay_QV05q44fHQzL1q already exists in database (1 records), skipping
[2025-05-15T20:41:25.390Z] [STDOUT] Found 1 invoices for subscription sub_QV05DCrgh3A2rL
[2025-05-15T20:41:25.390Z] [STDOUT] Processing subscription 25 with Razorpay ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:41:25.390Z] [STDOUT] Subscription 25 has 2 existing transactions
[2025-05-15T20:41:25.390Z] [STDOUT] Fetching invoices for subscription ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:41:25.390Z] [STDOUT] Found 1 invoices for subscription: sub_QV1W0JNq2cOk7s
[2025-05-15T20:41:25.390Z] [STDOUT] Transaction for payment pay_QV1WoyCgCY23iO already exists in database (2 records), skipping
[2025-05-15T20:41:25.390Z] [STDOUT] Found 1 invoices for subscription sub_QV1W0JNq2cOk7s
[2025-05-15T20:41:25.390Z] [STDOUT] Processing subscription 26 with Razorpay ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:41:25.390Z] [STDOUT] Subscription 26 has 2 existing transactions
[2025-05-15T20:41:25.390Z] [STDOUT] Fetching invoices for subscription ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:41:25.390Z] [STDOUT] Found 2 invoices for subscription: sub_QVIG6dAuP0UXXn
[2025-05-15T20:41:25.390Z] [STDOUT] Transaction for payment pay_QVILKDuy9v6ovq already exists in database (1 records), skipping
[2025-05-15T20:41:25.390Z] [STDOUT] Transaction for payment pay_QVIGtXTXkm93W8 already exists in database (1 records), skipping
[2025-05-15T20:41:25.390Z] [STDOUT] Found 2 invoices for subscription sub_QVIG6dAuP0UXXn
[2025-05-15T20:41:25.390Z] [STDOUT] Subscription invoice synchronization complete!
[2025-05-15T20:41:25.390Z] [STDOUT] Processed 4 subscriptions
[2025-05-15T20:41:25.390Z] [STDOUT] Success: 4, Errors: 0
[2025-05-15T20:41:25.390Z] [STDOUT] Added 0 new transactions
[2025-05-15T20:41:25.390Z] [STDOUT] Script execution completed
[2025-05-15T20:41:25.390Z] Synchronization completed successfully
[2025-05-15T20:41:25.390Z] Next sync scheduled in 5 seconds
[2025-05-15T20:41:25.853Z] Starting invoice synchronization...
[2025-05-15T20:41:25.853Z] Running sync script: /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:41:25.853Z] Executing command: cd /Users/raja/Development/ProsumeAI/server && npx tsx /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:41:30.226Z] [STDOUT] Using database connection: postgres://***:***@localhost:5432/prosumeai
[2025-05-15T20:41:30.226Z] [STDOUT] Starting subscription invoice synchronization...
[2025-05-15T20:41:30.226Z] [STDOUT] Database schema validated successfully
[2025-05-15T20:41:30.226Z] [STDOUT] Found 4 active Razorpay subscriptions to sync
[2025-05-15T20:41:30.226Z] [STDOUT] Processing subscription 20 with Razorpay ID: sub_QUxcCis3igdqUA
[2025-05-15T20:41:30.226Z] [STDOUT] Subscription 20 has 1 existing transactions
[2025-05-15T20:41:30.226Z] [STDOUT] Razorpay initialization in progress, waiting...
[2025-05-15T20:41:30.226Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:41:30.226Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:41:30.226Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:41:30.226Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:41:30.226Z] [STDOUT] Fetching invoices for subscription ID: sub_QUxcCis3igdqUA
[2025-05-15T20:41:30.226Z] [STDOUT] Found 0 invoices for subscription: sub_QUxcCis3igdqUA
[2025-05-15T20:41:30.226Z] [STDOUT] Found 0 invoices for subscription sub_QUxcCis3igdqUA
[2025-05-15T20:41:30.226Z] [STDOUT] Processing subscription 24 with Razorpay ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:41:30.226Z] [STDOUT] Subscription 24 has 1 existing transactions
[2025-05-15T20:41:30.226Z] [STDOUT] Fetching invoices for subscription ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:41:30.226Z] [STDOUT] Found 1 invoices for subscription: sub_QV05DCrgh3A2rL
[2025-05-15T20:41:30.226Z] [STDOUT] Transaction for payment pay_QV05q44fHQzL1q already exists in database (1 records), skipping
[2025-05-15T20:41:30.226Z] [STDOUT] Found 1 invoices for subscription sub_QV05DCrgh3A2rL
[2025-05-15T20:41:30.226Z] [STDOUT] Processing subscription 25 with Razorpay ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:41:30.226Z] [STDOUT] Subscription 25 has 2 existing transactions
[2025-05-15T20:41:30.226Z] [STDOUT] Fetching invoices for subscription ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:41:30.226Z] [STDOUT] Found 1 invoices for subscription: sub_QV1W0JNq2cOk7s
[2025-05-15T20:41:30.226Z] [STDOUT] Transaction for payment pay_QV1WoyCgCY23iO already exists in database (2 records), skipping
[2025-05-15T20:41:30.226Z] [STDOUT] Found 1 invoices for subscription sub_QV1W0JNq2cOk7s
[2025-05-15T20:41:30.226Z] [STDOUT] Processing subscription 26 with Razorpay ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:41:30.226Z] [STDOUT] Subscription 26 has 2 existing transactions
[2025-05-15T20:41:30.226Z] [STDOUT] Fetching invoices for subscription ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:41:30.226Z] [STDOUT] Found 2 invoices for subscription: sub_QVIG6dAuP0UXXn
[2025-05-15T20:41:30.226Z] [STDOUT] Transaction for payment pay_QVILKDuy9v6ovq already exists in database (1 records), skipping
[2025-05-15T20:41:30.226Z] [STDOUT] Transaction for payment pay_QVIGtXTXkm93W8 already exists in database (1 records), skipping
[2025-05-15T20:41:30.226Z] [STDOUT] Found 2 invoices for subscription sub_QVIG6dAuP0UXXn
[2025-05-15T20:41:30.226Z] [STDOUT] Subscription invoice synchronization complete!
[2025-05-15T20:41:30.226Z] [STDOUT] Processed 4 subscriptions
[2025-05-15T20:41:30.226Z] [STDOUT] Success: 4, Errors: 0
[2025-05-15T20:41:30.226Z] [STDOUT] Added 0 new transactions
[2025-05-15T20:41:30.226Z] [STDOUT] Script execution completed
[2025-05-15T20:41:30.226Z] Synchronization completed successfully
[2025-05-15T20:41:30.226Z] Next sync scheduled in 5 seconds
[2025-05-15T20:41:30.854Z] Starting invoice synchronization...
[2025-05-15T20:41:30.854Z] Running sync script: /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:41:30.854Z] Executing command: cd /Users/raja/Development/ProsumeAI/server && npx tsx /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:41:35.853Z] Starting invoice synchronization...
[2025-05-15T20:41:35.854Z] Running sync script: /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:41:35.854Z] Executing command: cd /Users/raja/Development/ProsumeAI/server && npx tsx /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:41:38.635Z] [STDOUT] Using database connection: postgres://***:***@localhost:5432/prosumeai
[2025-05-15T20:41:38.635Z] [STDOUT] Starting subscription invoice synchronization...
[2025-05-15T20:41:38.635Z] [STDOUT] Database schema validated successfully
[2025-05-15T20:41:38.635Z] [STDOUT] Found 4 active Razorpay subscriptions to sync
[2025-05-15T20:41:38.635Z] [STDOUT] Processing subscription 20 with Razorpay ID: sub_QUxcCis3igdqUA
[2025-05-15T20:41:38.635Z] [STDOUT] Subscription 20 has 1 existing transactions
[2025-05-15T20:41:38.635Z] [STDOUT] Razorpay initialization in progress, waiting...
[2025-05-15T20:41:38.635Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:41:38.635Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:41:38.635Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:41:38.635Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:41:38.635Z] [STDOUT] Fetching invoices for subscription ID: sub_QUxcCis3igdqUA
[2025-05-15T20:41:38.635Z] [STDOUT] Found 0 invoices for subscription: sub_QUxcCis3igdqUA
[2025-05-15T20:41:38.635Z] [STDOUT] Found 0 invoices for subscription sub_QUxcCis3igdqUA
[2025-05-15T20:41:38.635Z] [STDOUT] Processing subscription 24 with Razorpay ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:41:38.635Z] [STDOUT] Subscription 24 has 1 existing transactions
[2025-05-15T20:41:38.635Z] [STDOUT] Fetching invoices for subscription ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:41:38.635Z] [STDOUT] Found 1 invoices for subscription: sub_QV05DCrgh3A2rL
[2025-05-15T20:41:38.635Z] [STDOUT] Transaction for payment pay_QV05q44fHQzL1q already exists in database (1 records), skipping
[2025-05-15T20:41:38.635Z] [STDOUT] Found 1 invoices for subscription sub_QV05DCrgh3A2rL
[2025-05-15T20:41:38.635Z] [STDOUT] Processing subscription 25 with Razorpay ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:41:38.635Z] [STDOUT] Subscription 25 has 2 existing transactions
[2025-05-15T20:41:38.635Z] [STDOUT] Fetching invoices for subscription ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:41:38.635Z] [STDOUT] Found 1 invoices for subscription: sub_QV1W0JNq2cOk7s
[2025-05-15T20:41:38.635Z] [STDOUT] Transaction for payment pay_QV1WoyCgCY23iO already exists in database (2 records), skipping
[2025-05-15T20:41:38.635Z] [STDOUT] Found 1 invoices for subscription sub_QV1W0JNq2cOk7s
[2025-05-15T20:41:38.636Z] [STDOUT] Processing subscription 26 with Razorpay ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:41:38.636Z] [STDOUT] Subscription 26 has 2 existing transactions
[2025-05-15T20:41:38.636Z] [STDOUT] Fetching invoices for subscription ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:41:38.636Z] [STDOUT] Found 2 invoices for subscription: sub_QVIG6dAuP0UXXn
[2025-05-15T20:41:38.636Z] [STDOUT] Transaction for payment pay_QVILKDuy9v6ovq already exists in database (1 records), skipping
[2025-05-15T20:41:38.636Z] [STDOUT] Transaction for payment pay_QVIGtXTXkm93W8 already exists in database (1 records), skipping
[2025-05-15T20:41:38.636Z] [STDOUT] Found 2 invoices for subscription sub_QVIG6dAuP0UXXn
[2025-05-15T20:41:38.636Z] [STDOUT] Subscription invoice synchronization complete!
[2025-05-15T20:41:38.636Z] [STDOUT] Processed 4 subscriptions
[2025-05-15T20:41:38.636Z] [STDOUT] Success: 4, Errors: 0
[2025-05-15T20:41:38.636Z] [STDOUT] Added 0 new transactions
[2025-05-15T20:41:38.636Z] [STDOUT] Script execution completed
[2025-05-15T20:41:38.636Z] Synchronization completed successfully
[2025-05-15T20:41:38.636Z] Next sync scheduled in 5 seconds
[2025-05-15T20:41:40.853Z] Starting invoice synchronization...
[2025-05-15T20:41:40.853Z] Running sync script: /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:41:40.853Z] Executing command: cd /Users/raja/Development/ProsumeAI/server && npx tsx /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:41:40.908Z] [STDOUT] Using database connection: postgres://***:***@localhost:5432/prosumeai
[2025-05-15T20:41:40.908Z] [STDOUT] Starting subscription invoice synchronization...
[2025-05-15T20:41:40.908Z] [STDOUT] Database schema validated successfully
[2025-05-15T20:41:40.908Z] [STDOUT] Found 4 active Razorpay subscriptions to sync
[2025-05-15T20:41:40.908Z] [STDOUT] Processing subscription 20 with Razorpay ID: sub_QUxcCis3igdqUA
[2025-05-15T20:41:40.908Z] [STDOUT] Subscription 20 has 1 existing transactions
[2025-05-15T20:41:40.908Z] [STDOUT] Razorpay initialization in progress, waiting...
[2025-05-15T20:41:40.908Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:41:40.908Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:41:40.908Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:41:40.908Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:41:40.908Z] [STDOUT] Fetching invoices for subscription ID: sub_QUxcCis3igdqUA
[2025-05-15T20:41:40.908Z] [STDOUT] Found 0 invoices for subscription: sub_QUxcCis3igdqUA
[2025-05-15T20:41:40.908Z] [STDOUT] Found 0 invoices for subscription sub_QUxcCis3igdqUA
[2025-05-15T20:41:40.908Z] [STDOUT] Processing subscription 24 with Razorpay ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:41:40.908Z] [STDOUT] Subscription 24 has 1 existing transactions
[2025-05-15T20:41:40.908Z] [STDOUT] Fetching invoices for subscription ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:41:40.908Z] [STDOUT] Found 1 invoices for subscription: sub_QV05DCrgh3A2rL
[2025-05-15T20:41:40.908Z] [STDOUT] Transaction for payment pay_QV05q44fHQzL1q already exists in database (1 records), skipping
[2025-05-15T20:41:40.908Z] [STDOUT] Found 1 invoices for subscription sub_QV05DCrgh3A2rL
[2025-05-15T20:41:40.908Z] [STDOUT] Processing subscription 25 with Razorpay ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:41:40.908Z] [STDOUT] Subscription 25 has 2 existing transactions
[2025-05-15T20:41:40.908Z] [STDOUT] Fetching invoices for subscription ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:41:40.908Z] [STDOUT] Found 1 invoices for subscription: sub_QV1W0JNq2cOk7s
[2025-05-15T20:41:40.908Z] [STDOUT] Transaction for payment pay_QV1WoyCgCY23iO already exists in database (2 records), skipping
[2025-05-15T20:41:40.908Z] [STDOUT] Found 1 invoices for subscription sub_QV1W0JNq2cOk7s
[2025-05-15T20:41:40.908Z] [STDOUT] Processing subscription 26 with Razorpay ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:41:40.908Z] [STDOUT] Subscription 26 has 2 existing transactions
[2025-05-15T20:41:40.908Z] [STDOUT] Fetching invoices for subscription ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:41:40.908Z] [STDOUT] Found 2 invoices for subscription: sub_QVIG6dAuP0UXXn
[2025-05-15T20:41:40.908Z] [STDOUT] Transaction for payment pay_QVILKDuy9v6ovq already exists in database (1 records), skipping
[2025-05-15T20:41:40.908Z] [STDOUT] Transaction for payment pay_QVIGtXTXkm93W8 already exists in database (1 records), skipping
[2025-05-15T20:41:40.908Z] [STDOUT] Found 2 invoices for subscription sub_QVIG6dAuP0UXXn
[2025-05-15T20:41:40.908Z] [STDOUT] Subscription invoice synchronization complete!
[2025-05-15T20:41:40.908Z] [STDOUT] Processed 4 subscriptions
[2025-05-15T20:41:40.908Z] [STDOUT] Success: 4, Errors: 0
[2025-05-15T20:41:40.908Z] [STDOUT] Added 0 new transactions
[2025-05-15T20:41:40.908Z] [STDOUT] Script execution completed
[2025-05-15T20:41:40.908Z] Synchronization completed successfully
[2025-05-15T20:41:40.908Z] Next sync scheduled in 5 seconds
[2025-05-15T20:41:45.245Z] [STDOUT] Using database connection: postgres://***:***@localhost:5432/prosumeai
[2025-05-15T20:41:45.245Z] [STDOUT] Starting subscription invoice synchronization...
[2025-05-15T20:41:45.245Z] [STDOUT] Database schema validated successfully
[2025-05-15T20:41:45.245Z] [STDOUT] Found 4 active Razorpay subscriptions to sync
[2025-05-15T20:41:45.245Z] [STDOUT] Processing subscription 20 with Razorpay ID: sub_QUxcCis3igdqUA
[2025-05-15T20:41:45.245Z] [STDOUT] Subscription 20 has 1 existing transactions
[2025-05-15T20:41:45.245Z] [STDOUT] Razorpay initialization in progress, waiting...
[2025-05-15T20:41:45.245Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:41:45.245Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:41:45.245Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:41:45.245Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:41:45.245Z] [STDOUT] Fetching invoices for subscription ID: sub_QUxcCis3igdqUA
[2025-05-15T20:41:45.245Z] [STDOUT] Found 0 invoices for subscription: sub_QUxcCis3igdqUA
[2025-05-15T20:41:45.245Z] [STDOUT] Found 0 invoices for subscription sub_QUxcCis3igdqUA
[2025-05-15T20:41:45.245Z] [STDOUT] Processing subscription 24 with Razorpay ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:41:45.245Z] [STDOUT] Subscription 24 has 1 existing transactions
[2025-05-15T20:41:45.245Z] [STDOUT] Fetching invoices for subscription ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:41:45.245Z] [STDOUT] Found 1 invoices for subscription: sub_QV05DCrgh3A2rL
[2025-05-15T20:41:45.245Z] [STDOUT] Transaction for payment pay_QV05q44fHQzL1q already exists in database (1 records), skipping
[2025-05-15T20:41:45.245Z] [STDOUT] Found 1 invoices for subscription sub_QV05DCrgh3A2rL
[2025-05-15T20:41:45.245Z] [STDOUT] Processing subscription 25 with Razorpay ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:41:45.245Z] [STDOUT] Subscription 25 has 2 existing transactions
[2025-05-15T20:41:45.245Z] [STDOUT] Fetching invoices for subscription ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:41:45.245Z] [STDOUT] Found 1 invoices for subscription: sub_QV1W0JNq2cOk7s
[2025-05-15T20:41:45.245Z] [STDOUT] Transaction for payment pay_QV1WoyCgCY23iO already exists in database (2 records), skipping
[2025-05-15T20:41:45.245Z] [STDOUT] Found 1 invoices for subscription sub_QV1W0JNq2cOk7s
[2025-05-15T20:41:45.245Z] [STDOUT] Processing subscription 26 with Razorpay ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:41:45.245Z] [STDOUT] Subscription 26 has 2 existing transactions
[2025-05-15T20:41:45.245Z] [STDOUT] Fetching invoices for subscription ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:41:45.245Z] [STDOUT] Found 2 invoices for subscription: sub_QVIG6dAuP0UXXn
[2025-05-15T20:41:45.245Z] [STDOUT] Transaction for payment pay_QVILKDuy9v6ovq already exists in database (1 records), skipping
[2025-05-15T20:41:45.245Z] [STDOUT] Transaction for payment pay_QVIGtXTXkm93W8 already exists in database (1 records), skipping
[2025-05-15T20:41:45.245Z] [STDOUT] Found 2 invoices for subscription sub_QVIG6dAuP0UXXn
[2025-05-15T20:41:45.245Z] [STDOUT] Subscription invoice synchronization complete!
[2025-05-15T20:41:45.245Z] [STDOUT] Processed 4 subscriptions
[2025-05-15T20:41:45.245Z] [STDOUT] Success: 4, Errors: 0
[2025-05-15T20:41:45.245Z] [STDOUT] Added 0 new transactions
[2025-05-15T20:41:45.245Z] [STDOUT] Script execution completed
[2025-05-15T20:41:45.245Z] Synchronization completed successfully
[2025-05-15T20:41:45.245Z] Next sync scheduled in 5 seconds
[2025-05-15T20:41:45.854Z] Starting invoice synchronization...
[2025-05-15T20:41:45.854Z] Running sync script: /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:41:45.854Z] Executing command: cd /Users/raja/Development/ProsumeAI/server && npx tsx /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:41:50.855Z] Starting invoice synchronization...
[2025-05-15T20:41:50.855Z] Running sync script: /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:41:50.855Z] Executing command: cd /Users/raja/Development/ProsumeAI/server && npx tsx /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:41:50.945Z] [STDOUT] Using database connection: postgres://***:***@localhost:5432/prosumeai
[2025-05-15T20:41:50.945Z] [STDOUT] Starting subscription invoice synchronization...
[2025-05-15T20:41:50.945Z] [STDOUT] Database schema validated successfully
[2025-05-15T20:41:50.945Z] [STDOUT] Found 4 active Razorpay subscriptions to sync
[2025-05-15T20:41:50.945Z] [STDOUT] Processing subscription 20 with Razorpay ID: sub_QUxcCis3igdqUA
[2025-05-15T20:41:50.945Z] [STDOUT] Subscription 20 has 1 existing transactions
[2025-05-15T20:41:50.945Z] [STDOUT] Razorpay initialization in progress, waiting...
[2025-05-15T20:41:50.945Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:41:50.945Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:41:50.945Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:41:50.945Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:41:50.945Z] [STDOUT] Fetching invoices for subscription ID: sub_QUxcCis3igdqUA
[2025-05-15T20:41:50.945Z] [STDOUT] Found 0 invoices for subscription: sub_QUxcCis3igdqUA
[2025-05-15T20:41:50.945Z] [STDOUT] Found 0 invoices for subscription sub_QUxcCis3igdqUA
[2025-05-15T20:41:50.945Z] [STDOUT] Processing subscription 24 with Razorpay ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:41:50.945Z] [STDOUT] Subscription 24 has 1 existing transactions
[2025-05-15T20:41:50.945Z] [STDOUT] Fetching invoices for subscription ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:41:50.945Z] [STDOUT] Found 1 invoices for subscription: sub_QV05DCrgh3A2rL
[2025-05-15T20:41:50.945Z] [STDOUT] Transaction for payment pay_QV05q44fHQzL1q already exists in database (1 records), skipping
[2025-05-15T20:41:50.945Z] [STDOUT] Found 1 invoices for subscription sub_QV05DCrgh3A2rL
[2025-05-15T20:41:50.945Z] [STDOUT] Processing subscription 25 with Razorpay ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:41:50.945Z] [STDOUT] Subscription 25 has 2 existing transactions
[2025-05-15T20:41:50.945Z] [STDOUT] Fetching invoices for subscription ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:41:50.945Z] [STDOUT] Found 1 invoices for subscription: sub_QV1W0JNq2cOk7s
[2025-05-15T20:41:50.945Z] [STDOUT] Transaction for payment pay_QV1WoyCgCY23iO already exists in database (2 records), skipping
[2025-05-15T20:41:50.945Z] [STDOUT] Found 1 invoices for subscription sub_QV1W0JNq2cOk7s
[2025-05-15T20:41:50.945Z] [STDOUT] Processing subscription 26 with Razorpay ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:41:50.945Z] [STDOUT] Subscription 26 has 2 existing transactions
[2025-05-15T20:41:50.945Z] [STDOUT] Fetching invoices for subscription ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:41:50.945Z] [STDOUT] Found 2 invoices for subscription: sub_QVIG6dAuP0UXXn
[2025-05-15T20:41:50.945Z] [STDOUT] Transaction for payment pay_QVILKDuy9v6ovq already exists in database (1 records), skipping
[2025-05-15T20:41:50.945Z] [STDOUT] Transaction for payment pay_QVIGtXTXkm93W8 already exists in database (1 records), skipping
[2025-05-15T20:41:50.945Z] [STDOUT] Found 2 invoices for subscription sub_QVIG6dAuP0UXXn
[2025-05-15T20:41:50.945Z] [STDOUT] Subscription invoice synchronization complete!
[2025-05-15T20:41:50.945Z] [STDOUT] Processed 4 subscriptions
[2025-05-15T20:41:50.945Z] [STDOUT] Success: 4, Errors: 0
[2025-05-15T20:41:50.945Z] [STDOUT] Added 0 new transactions
[2025-05-15T20:41:50.945Z] [STDOUT] Script execution completed
[2025-05-15T20:41:50.945Z] Synchronization completed successfully
[2025-05-15T20:41:50.945Z] Next sync scheduled in 5 seconds
[2025-05-15T20:41:55.854Z] Starting invoice synchronization...
[2025-05-15T20:41:55.854Z] Running sync script: /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:41:55.855Z] Executing command: cd /Users/raja/Development/ProsumeAI/server && npx tsx /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:41:56.095Z] [STDOUT] Using database connection: postgres://***:***@localhost:5432/prosumeai
[2025-05-15T20:41:56.095Z] [STDOUT] Starting subscription invoice synchronization...
[2025-05-15T20:41:56.095Z] [STDOUT] Database schema validated successfully
[2025-05-15T20:41:56.095Z] [STDOUT] Found 4 active Razorpay subscriptions to sync
[2025-05-15T20:41:56.095Z] [STDOUT] Processing subscription 20 with Razorpay ID: sub_QUxcCis3igdqUA
[2025-05-15T20:41:56.095Z] [STDOUT] Subscription 20 has 1 existing transactions
[2025-05-15T20:41:56.095Z] [STDOUT] Razorpay initialization in progress, waiting...
[2025-05-15T20:41:56.095Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:41:56.095Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:41:56.096Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:41:56.096Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:41:56.096Z] [STDOUT] Fetching invoices for subscription ID: sub_QUxcCis3igdqUA
[2025-05-15T20:41:56.096Z] [STDOUT] Found 0 invoices for subscription: sub_QUxcCis3igdqUA
[2025-05-15T20:41:56.096Z] [STDOUT] Found 0 invoices for subscription sub_QUxcCis3igdqUA
[2025-05-15T20:41:56.096Z] [STDOUT] Processing subscription 24 with Razorpay ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:41:56.096Z] [STDOUT] Subscription 24 has 1 existing transactions
[2025-05-15T20:41:56.096Z] [STDOUT] Fetching invoices for subscription ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:41:56.096Z] [STDOUT] Found 1 invoices for subscription: sub_QV05DCrgh3A2rL
[2025-05-15T20:41:56.096Z] [STDOUT] Transaction for payment pay_QV05q44fHQzL1q already exists in database (1 records), skipping
[2025-05-15T20:41:56.096Z] [STDOUT] Found 1 invoices for subscription sub_QV05DCrgh3A2rL
[2025-05-15T20:41:56.096Z] [STDOUT] Processing subscription 25 with Razorpay ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:41:56.096Z] [STDOUT] Subscription 25 has 2 existing transactions
[2025-05-15T20:41:56.096Z] [STDOUT] Fetching invoices for subscription ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:41:56.096Z] [STDOUT] Found 1 invoices for subscription: sub_QV1W0JNq2cOk7s
[2025-05-15T20:41:56.096Z] [STDOUT] Transaction for payment pay_QV1WoyCgCY23iO already exists in database (2 records), skipping
[2025-05-15T20:41:56.096Z] [STDOUT] Found 1 invoices for subscription sub_QV1W0JNq2cOk7s
[2025-05-15T20:41:56.096Z] [STDOUT] Processing subscription 26 with Razorpay ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:41:56.096Z] [STDOUT] Subscription 26 has 2 existing transactions
[2025-05-15T20:41:56.096Z] [STDOUT] Fetching invoices for subscription ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:41:56.096Z] [STDOUT] Found 2 invoices for subscription: sub_QVIG6dAuP0UXXn
[2025-05-15T20:41:56.096Z] [STDOUT] Transaction for payment pay_QVILKDuy9v6ovq already exists in database (1 records), skipping
[2025-05-15T20:41:56.096Z] [STDOUT] Transaction for payment pay_QVIGtXTXkm93W8 already exists in database (1 records), skipping
[2025-05-15T20:41:56.096Z] [STDOUT] Found 2 invoices for subscription sub_QVIG6dAuP0UXXn
[2025-05-15T20:41:56.096Z] [STDOUT] Subscription invoice synchronization complete!
[2025-05-15T20:41:56.096Z] [STDOUT] Processed 4 subscriptions
[2025-05-15T20:41:56.096Z] [STDOUT] Success: 4, Errors: 0
[2025-05-15T20:41:56.096Z] [STDOUT] Added 0 new transactions
[2025-05-15T20:41:56.096Z] [STDOUT] Script execution completed
[2025-05-15T20:41:56.096Z] Synchronization completed successfully
[2025-05-15T20:41:56.096Z] Next sync scheduled in 5 seconds
[2025-05-15T20:42:00.619Z] [STDOUT] Using database connection: postgres://***:***@localhost:5432/prosumeai
[2025-05-15T20:42:00.619Z] [STDOUT] Starting subscription invoice synchronization...
[2025-05-15T20:42:00.619Z] [STDOUT] Database schema validated successfully
[2025-05-15T20:42:00.619Z] [STDOUT] Found 4 active Razorpay subscriptions to sync
[2025-05-15T20:42:00.619Z] [STDOUT] Processing subscription 20 with Razorpay ID: sub_QUxcCis3igdqUA
[2025-05-15T20:42:00.619Z] [STDOUT] Subscription 20 has 1 existing transactions
[2025-05-15T20:42:00.619Z] [STDOUT] Razorpay initialization in progress, waiting...
[2025-05-15T20:42:00.619Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:42:00.619Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:42:00.619Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:42:00.619Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:42:00.619Z] [STDOUT] Fetching invoices for subscription ID: sub_QUxcCis3igdqUA
[2025-05-15T20:42:00.619Z] [STDOUT] Found 0 invoices for subscription: sub_QUxcCis3igdqUA
[2025-05-15T20:42:00.619Z] [STDOUT] Found 0 invoices for subscription sub_QUxcCis3igdqUA
[2025-05-15T20:42:00.619Z] [STDOUT] Processing subscription 24 with Razorpay ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:42:00.619Z] [STDOUT] Subscription 24 has 1 existing transactions
[2025-05-15T20:42:00.619Z] [STDOUT] Fetching invoices for subscription ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:42:00.619Z] [STDOUT] Found 1 invoices for subscription: sub_QV05DCrgh3A2rL
[2025-05-15T20:42:00.619Z] [STDOUT] Transaction for payment pay_QV05q44fHQzL1q already exists in database (1 records), skipping
[2025-05-15T20:42:00.619Z] [STDOUT] Found 1 invoices for subscription sub_QV05DCrgh3A2rL
[2025-05-15T20:42:00.619Z] [STDOUT] Processing subscription 25 with Razorpay ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:42:00.619Z] [STDOUT] Subscription 25 has 2 existing transactions
[2025-05-15T20:42:00.619Z] [STDOUT] Fetching invoices for subscription ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:42:00.619Z] [STDOUT] Found 1 invoices for subscription: sub_QV1W0JNq2cOk7s
[2025-05-15T20:42:00.619Z] [STDOUT] Transaction for payment pay_QV1WoyCgCY23iO already exists in database (2 records), skipping
[2025-05-15T20:42:00.619Z] [STDOUT] Found 1 invoices for subscription sub_QV1W0JNq2cOk7s
[2025-05-15T20:42:00.619Z] [STDOUT] Processing subscription 26 with Razorpay ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:42:00.619Z] [STDOUT] Subscription 26 has 2 existing transactions
[2025-05-15T20:42:00.619Z] [STDOUT] Fetching invoices for subscription ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:42:00.619Z] [STDOUT] Found 2 invoices for subscription: sub_QVIG6dAuP0UXXn
[2025-05-15T20:42:00.619Z] [STDOUT] Transaction for payment pay_QVILKDuy9v6ovq already exists in database (1 records), skipping
[2025-05-15T20:42:00.619Z] [STDOUT] Transaction for payment pay_QVIGtXTXkm93W8 already exists in database (1 records), skipping
[2025-05-15T20:42:00.619Z] [STDOUT] Found 2 invoices for subscription sub_QVIG6dAuP0UXXn
[2025-05-15T20:42:00.619Z] [STDOUT] Subscription invoice synchronization complete!
[2025-05-15T20:42:00.619Z] [STDOUT] Processed 4 subscriptions
[2025-05-15T20:42:00.619Z] [STDOUT] Success: 4, Errors: 0
[2025-05-15T20:42:00.619Z] [STDOUT] Added 0 new transactions
[2025-05-15T20:42:00.619Z] [STDOUT] Script execution completed
[2025-05-15T20:42:00.619Z] Synchronization completed successfully
[2025-05-15T20:42:00.619Z] Next sync scheduled in 5 seconds
[2025-05-15T20:42:00.854Z] Starting invoice synchronization...
[2025-05-15T20:42:00.855Z] Running sync script: /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:42:00.855Z] Executing command: cd /Users/raja/Development/ProsumeAI/server && npx tsx /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:42:05.232Z] [STDOUT] Using database connection: postgres://***:***@localhost:5432/prosumeai
[2025-05-15T20:42:05.232Z] [STDOUT] Starting subscription invoice synchronization...
[2025-05-15T20:42:05.232Z] [STDOUT] Database schema validated successfully
[2025-05-15T20:42:05.232Z] [STDOUT] Found 4 active Razorpay subscriptions to sync
[2025-05-15T20:42:05.232Z] [STDOUT] Processing subscription 20 with Razorpay ID: sub_QUxcCis3igdqUA
[2025-05-15T20:42:05.232Z] [STDOUT] Subscription 20 has 1 existing transactions
[2025-05-15T20:42:05.232Z] [STDOUT] Razorpay initialization in progress, waiting...
[2025-05-15T20:42:05.232Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:42:05.232Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:42:05.232Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:42:05.232Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:42:05.232Z] [STDOUT] Fetching invoices for subscription ID: sub_QUxcCis3igdqUA
[2025-05-15T20:42:05.232Z] [STDOUT] Found 0 invoices for subscription: sub_QUxcCis3igdqUA
[2025-05-15T20:42:05.232Z] [STDOUT] Found 0 invoices for subscription sub_QUxcCis3igdqUA
[2025-05-15T20:42:05.232Z] [STDOUT] Processing subscription 24 with Razorpay ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:42:05.232Z] [STDOUT] Subscription 24 has 1 existing transactions
[2025-05-15T20:42:05.232Z] [STDOUT] Fetching invoices for subscription ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:42:05.232Z] [STDOUT] Found 1 invoices for subscription: sub_QV05DCrgh3A2rL
[2025-05-15T20:42:05.232Z] [STDOUT] Transaction for payment pay_QV05q44fHQzL1q already exists in database (1 records), skipping
[2025-05-15T20:42:05.232Z] [STDOUT] Found 1 invoices for subscription sub_QV05DCrgh3A2rL
[2025-05-15T20:42:05.232Z] [STDOUT] Processing subscription 25 with Razorpay ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:42:05.232Z] [STDOUT] Subscription 25 has 2 existing transactions
[2025-05-15T20:42:05.233Z] [STDOUT] Fetching invoices for subscription ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:42:05.233Z] [STDOUT] Found 1 invoices for subscription: sub_QV1W0JNq2cOk7s
[2025-05-15T20:42:05.233Z] [STDOUT] Transaction for payment pay_QV1WoyCgCY23iO already exists in database (2 records), skipping
[2025-05-15T20:42:05.233Z] [STDOUT] Found 1 invoices for subscription sub_QV1W0JNq2cOk7s
[2025-05-15T20:42:05.233Z] [STDOUT] Processing subscription 26 with Razorpay ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:42:05.233Z] [STDOUT] Subscription 26 has 2 existing transactions
[2025-05-15T20:42:05.233Z] [STDOUT] Fetching invoices for subscription ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:42:05.233Z] [STDOUT] Found 2 invoices for subscription: sub_QVIG6dAuP0UXXn
[2025-05-15T20:42:05.233Z] [STDOUT] Transaction for payment pay_QVILKDuy9v6ovq already exists in database (1 records), skipping
[2025-05-15T20:42:05.233Z] [STDOUT] Transaction for payment pay_QVIGtXTXkm93W8 already exists in database (1 records), skipping
[2025-05-15T20:42:05.233Z] [STDOUT] Found 2 invoices for subscription sub_QVIG6dAuP0UXXn
[2025-05-15T20:42:05.233Z] [STDOUT] Subscription invoice synchronization complete!
[2025-05-15T20:42:05.233Z] [STDOUT] Processed 4 subscriptions
[2025-05-15T20:42:05.233Z] [STDOUT] Success: 4, Errors: 0
[2025-05-15T20:42:05.233Z] [STDOUT] Added 0 new transactions
[2025-05-15T20:42:05.233Z] [STDOUT] Script execution completed
[2025-05-15T20:42:05.233Z] Synchronization completed successfully
[2025-05-15T20:42:05.233Z] Next sync scheduled in 5 seconds
[2025-05-15T20:42:05.856Z] Starting invoice synchronization...
[2025-05-15T20:42:05.856Z] Running sync script: /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:42:05.856Z] Executing command: cd /Users/raja/Development/ProsumeAI/server && npx tsx /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:42:10.238Z] [STDOUT] Using database connection: postgres://***:***@localhost:5432/prosumeai
[2025-05-15T20:42:10.239Z] [STDOUT] Starting subscription invoice synchronization...
[2025-05-15T20:42:10.239Z] [STDOUT] Database schema validated successfully
[2025-05-15T20:42:10.239Z] [STDOUT] Found 4 active Razorpay subscriptions to sync
[2025-05-15T20:42:10.239Z] [STDOUT] Processing subscription 20 with Razorpay ID: sub_QUxcCis3igdqUA
[2025-05-15T20:42:10.239Z] [STDOUT] Subscription 20 has 1 existing transactions
[2025-05-15T20:42:10.239Z] [STDOUT] Razorpay initialization in progress, waiting...
[2025-05-15T20:42:10.239Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:42:10.239Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:42:10.239Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:42:10.239Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:42:10.239Z] [STDOUT] Fetching invoices for subscription ID: sub_QUxcCis3igdqUA
[2025-05-15T20:42:10.239Z] [STDOUT] Found 0 invoices for subscription: sub_QUxcCis3igdqUA
[2025-05-15T20:42:10.239Z] [STDOUT] Found 0 invoices for subscription sub_QUxcCis3igdqUA
[2025-05-15T20:42:10.239Z] [STDOUT] Processing subscription 24 with Razorpay ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:42:10.239Z] [STDOUT] Subscription 24 has 1 existing transactions
[2025-05-15T20:42:10.239Z] [STDOUT] Fetching invoices for subscription ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:42:10.239Z] [STDOUT] Found 1 invoices for subscription: sub_QV05DCrgh3A2rL
[2025-05-15T20:42:10.239Z] [STDOUT] Transaction for payment pay_QV05q44fHQzL1q already exists in database (1 records), skipping
[2025-05-15T20:42:10.239Z] [STDOUT] Found 1 invoices for subscription sub_QV05DCrgh3A2rL
[2025-05-15T20:42:10.239Z] [STDOUT] Processing subscription 25 with Razorpay ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:42:10.239Z] [STDOUT] Subscription 25 has 2 existing transactions
[2025-05-15T20:42:10.239Z] [STDOUT] Fetching invoices for subscription ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:42:10.239Z] [STDOUT] Found 1 invoices for subscription: sub_QV1W0JNq2cOk7s
[2025-05-15T20:42:10.239Z] [STDOUT] Transaction for payment pay_QV1WoyCgCY23iO already exists in database (2 records), skipping
[2025-05-15T20:42:10.239Z] [STDOUT] Found 1 invoices for subscription sub_QV1W0JNq2cOk7s
[2025-05-15T20:42:10.239Z] [STDOUT] Processing subscription 26 with Razorpay ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:42:10.239Z] [STDOUT] Subscription 26 has 2 existing transactions
[2025-05-15T20:42:10.239Z] [STDOUT] Fetching invoices for subscription ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:42:10.239Z] [STDOUT] Found 2 invoices for subscription: sub_QVIG6dAuP0UXXn
[2025-05-15T20:42:10.239Z] [STDOUT] Transaction for payment pay_QVILKDuy9v6ovq already exists in database (1 records), skipping
[2025-05-15T20:42:10.239Z] [STDOUT] Transaction for payment pay_QVIGtXTXkm93W8 already exists in database (1 records), skipping
[2025-05-15T20:42:10.239Z] [STDOUT] Found 2 invoices for subscription sub_QVIG6dAuP0UXXn
[2025-05-15T20:42:10.239Z] [STDOUT] Subscription invoice synchronization complete!
[2025-05-15T20:42:10.239Z] [STDOUT] Processed 4 subscriptions
[2025-05-15T20:42:10.239Z] [STDOUT] Success: 4, Errors: 0
[2025-05-15T20:42:10.239Z] [STDOUT] Added 0 new transactions
[2025-05-15T20:42:10.239Z] [STDOUT] Script execution completed
[2025-05-15T20:42:10.239Z] Synchronization completed successfully
[2025-05-15T20:42:10.239Z] Next sync scheduled in 5 seconds
[2025-05-15T20:42:10.855Z] Starting invoice synchronization...
[2025-05-15T20:42:10.855Z] Running sync script: /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:42:10.855Z] Executing command: cd /Users/raja/Development/ProsumeAI/server && npx tsx /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:42:15.856Z] Starting invoice synchronization...
[2025-05-15T20:42:15.856Z] Running sync script: /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:42:15.856Z] Executing command: cd /Users/raja/Development/ProsumeAI/server && npx tsx /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:42:16.052Z] [STDOUT] Using database connection: postgres://***:***@localhost:5432/prosumeai
[2025-05-15T20:42:16.052Z] [STDOUT] Starting subscription invoice synchronization...
[2025-05-15T20:42:16.052Z] [STDOUT] Found 4 active Razorpay subscriptions to sync
[2025-05-15T20:42:16.052Z] [STDOUT] Processing subscription 20 with Razorpay ID: sub_QUxcCis3igdqUA
[2025-05-15T20:42:16.052Z] [STDOUT] Database schema validated successfully
[2025-05-15T20:42:16.052Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:42:16.052Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:42:16.052Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:42:16.052Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:42:16.052Z] [STDOUT] Subscription 20 has 1 existing transactions
[2025-05-15T20:42:16.052Z] [STDOUT] Fetching invoices for subscription ID: sub_QUxcCis3igdqUA
[2025-05-15T20:42:16.052Z] [STDOUT] Found 0 invoices for subscription: sub_QUxcCis3igdqUA
[2025-05-15T20:42:16.052Z] [STDOUT] Found 0 invoices for subscription sub_QUxcCis3igdqUA
[2025-05-15T20:42:16.052Z] [STDOUT] Processing subscription 24 with Razorpay ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:42:16.052Z] [STDOUT] Subscription 24 has 1 existing transactions
[2025-05-15T20:42:16.052Z] [STDOUT] Fetching invoices for subscription ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:42:16.052Z] [STDOUT] Found 1 invoices for subscription: sub_QV05DCrgh3A2rL
[2025-05-15T20:42:16.052Z] [STDOUT] Transaction for payment pay_QV05q44fHQzL1q already exists in database (1 records), skipping
[2025-05-15T20:42:16.052Z] [STDOUT] Found 1 invoices for subscription sub_QV05DCrgh3A2rL
[2025-05-15T20:42:16.052Z] [STDOUT] Processing subscription 25 with Razorpay ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:42:16.052Z] [STDOUT] Subscription 25 has 2 existing transactions
[2025-05-15T20:42:16.052Z] [STDOUT] Fetching invoices for subscription ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:42:16.052Z] [STDOUT] Found 1 invoices for subscription: sub_QV1W0JNq2cOk7s
[2025-05-15T20:42:16.052Z] [STDOUT] Transaction for payment pay_QV1WoyCgCY23iO already exists in database (2 records), skipping
[2025-05-15T20:42:16.052Z] [STDOUT] Found 1 invoices for subscription sub_QV1W0JNq2cOk7s
[2025-05-15T20:42:16.052Z] [STDOUT] Processing subscription 26 with Razorpay ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:42:16.052Z] [STDOUT] Subscription 26 has 2 existing transactions
[2025-05-15T20:42:16.052Z] [STDOUT] Fetching invoices for subscription ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:42:16.052Z] [STDOUT] Found 2 invoices for subscription: sub_QVIG6dAuP0UXXn
[2025-05-15T20:42:16.052Z] [STDOUT] Transaction for payment pay_QVILKDuy9v6ovq already exists in database (1 records), skipping
[2025-05-15T20:42:16.052Z] [STDOUT] Transaction for payment pay_QVIGtXTXkm93W8 already exists in database (1 records), skipping
[2025-05-15T20:42:16.052Z] [STDOUT] Found 2 invoices for subscription sub_QVIG6dAuP0UXXn
[2025-05-15T20:42:16.052Z] [STDOUT] Subscription invoice synchronization complete!
[2025-05-15T20:42:16.052Z] [STDOUT] Processed 4 subscriptions
[2025-05-15T20:42:16.052Z] [STDOUT] Success: 4, Errors: 0
[2025-05-15T20:42:16.052Z] [STDOUT] Added 0 new transactions
[2025-05-15T20:42:16.052Z] [STDOUT] Script execution completed
[2025-05-15T20:42:16.052Z] Synchronization completed successfully
[2025-05-15T20:42:16.052Z] Next sync scheduled in 5 seconds
[2025-05-15T20:42:20.267Z] [STDOUT] Using database connection: postgres://***:***@localhost:5432/prosumeai
[2025-05-15T20:42:20.267Z] [STDOUT] Starting subscription invoice synchronization...
[2025-05-15T20:42:20.267Z] [STDOUT] Database schema validated successfully
[2025-05-15T20:42:20.267Z] [STDOUT] Found 4 active Razorpay subscriptions to sync
[2025-05-15T20:42:20.268Z] [STDOUT] Processing subscription 20 with Razorpay ID: sub_QUxcCis3igdqUA
[2025-05-15T20:42:20.268Z] [STDOUT] Subscription 20 has 1 existing transactions
[2025-05-15T20:42:20.268Z] [STDOUT] Razorpay initialization in progress, waiting...
[2025-05-15T20:42:20.268Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:42:20.268Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:42:20.268Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:42:20.268Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:42:20.268Z] [STDOUT] Fetching invoices for subscription ID: sub_QUxcCis3igdqUA
[2025-05-15T20:42:20.268Z] [STDOUT] Found 0 invoices for subscription: sub_QUxcCis3igdqUA
[2025-05-15T20:42:20.268Z] [STDOUT] Found 0 invoices for subscription sub_QUxcCis3igdqUA
[2025-05-15T20:42:20.268Z] [STDOUT] Processing subscription 24 with Razorpay ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:42:20.268Z] [STDOUT] Subscription 24 has 1 existing transactions
[2025-05-15T20:42:20.268Z] [STDOUT] Fetching invoices for subscription ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:42:20.268Z] [STDOUT] Found 1 invoices for subscription: sub_QV05DCrgh3A2rL
[2025-05-15T20:42:20.268Z] [STDOUT] Transaction for payment pay_QV05q44fHQzL1q already exists in database (1 records), skipping
[2025-05-15T20:42:20.268Z] [STDOUT] Found 1 invoices for subscription sub_QV05DCrgh3A2rL
[2025-05-15T20:42:20.268Z] [STDOUT] Processing subscription 25 with Razorpay ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:42:20.268Z] [STDOUT] Subscription 25 has 2 existing transactions
[2025-05-15T20:42:20.268Z] [STDOUT] Fetching invoices for subscription ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:42:20.268Z] [STDOUT] Found 1 invoices for subscription: sub_QV1W0JNq2cOk7s
[2025-05-15T20:42:20.268Z] [STDOUT] Transaction for payment pay_QV1WoyCgCY23iO already exists in database (2 records), skipping
[2025-05-15T20:42:20.268Z] [STDOUT] Found 1 invoices for subscription sub_QV1W0JNq2cOk7s
[2025-05-15T20:42:20.268Z] [STDOUT] Processing subscription 26 with Razorpay ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:42:20.268Z] [STDOUT] Subscription 26 has 2 existing transactions
[2025-05-15T20:42:20.268Z] [STDOUT] Fetching invoices for subscription ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:42:20.268Z] [STDOUT] Found 2 invoices for subscription: sub_QVIG6dAuP0UXXn
[2025-05-15T20:42:20.268Z] [STDOUT] Transaction for payment pay_QVILKDuy9v6ovq already exists in database (1 records), skipping
[2025-05-15T20:42:20.268Z] [STDOUT] Transaction for payment pay_QVIGtXTXkm93W8 already exists in database (1 records), skipping
[2025-05-15T20:42:20.268Z] [STDOUT] Found 2 invoices for subscription sub_QVIG6dAuP0UXXn
[2025-05-15T20:42:20.268Z] [STDOUT] Subscription invoice synchronization complete!
[2025-05-15T20:42:20.268Z] [STDOUT] Processed 4 subscriptions
[2025-05-15T20:42:20.268Z] [STDOUT] Success: 4, Errors: 0
[2025-05-15T20:42:20.268Z] [STDOUT] Added 0 new transactions
[2025-05-15T20:42:20.268Z] [STDOUT] Script execution completed
[2025-05-15T20:42:20.268Z] Synchronization completed successfully
[2025-05-15T20:42:20.268Z] Next sync scheduled in 5 seconds
[2025-05-15T20:42:20.857Z] Starting invoice synchronization...
[2025-05-15T20:42:20.857Z] Running sync script: /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:42:20.857Z] Executing command: cd /Users/raja/Development/ProsumeAI/server && npx tsx /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:42:25.324Z] [STDOUT] Using database connection: postgres://***:***@localhost:5432/prosumeai
[2025-05-15T20:42:25.324Z] [STDOUT] Starting subscription invoice synchronization...
[2025-05-15T20:42:25.324Z] [STDOUT] Database schema validated successfully
[2025-05-15T20:42:25.324Z] [STDOUT] Found 4 active Razorpay subscriptions to sync
[2025-05-15T20:42:25.324Z] [STDOUT] Processing subscription 20 with Razorpay ID: sub_QUxcCis3igdqUA
[2025-05-15T20:42:25.324Z] [STDOUT] Subscription 20 has 1 existing transactions
[2025-05-15T20:42:25.324Z] [STDOUT] Razorpay initialization in progress, waiting...
[2025-05-15T20:42:25.324Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:42:25.324Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:42:25.324Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:42:25.324Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:42:25.324Z] [STDOUT] Fetching invoices for subscription ID: sub_QUxcCis3igdqUA
[2025-05-15T20:42:25.324Z] [STDOUT] Found 0 invoices for subscription: sub_QUxcCis3igdqUA
[2025-05-15T20:42:25.324Z] [STDOUT] Found 0 invoices for subscription sub_QUxcCis3igdqUA
[2025-05-15T20:42:25.325Z] [STDOUT] Processing subscription 24 with Razorpay ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:42:25.325Z] [STDOUT] Subscription 24 has 1 existing transactions
[2025-05-15T20:42:25.325Z] [STDOUT] Fetching invoices for subscription ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:42:25.325Z] [STDOUT] Found 1 invoices for subscription: sub_QV05DCrgh3A2rL
[2025-05-15T20:42:25.325Z] [STDOUT] Transaction for payment pay_QV05q44fHQzL1q already exists in database (1 records), skipping
[2025-05-15T20:42:25.325Z] [STDOUT] Found 1 invoices for subscription sub_QV05DCrgh3A2rL
[2025-05-15T20:42:25.325Z] [STDOUT] Processing subscription 25 with Razorpay ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:42:25.325Z] [STDOUT] Subscription 25 has 2 existing transactions
[2025-05-15T20:42:25.325Z] [STDOUT] Fetching invoices for subscription ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:42:25.325Z] [STDOUT] Found 1 invoices for subscription: sub_QV1W0JNq2cOk7s
[2025-05-15T20:42:25.325Z] [STDOUT] Transaction for payment pay_QV1WoyCgCY23iO already exists in database (2 records), skipping
[2025-05-15T20:42:25.325Z] [STDOUT] Found 1 invoices for subscription sub_QV1W0JNq2cOk7s
[2025-05-15T20:42:25.325Z] [STDOUT] Processing subscription 26 with Razorpay ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:42:25.325Z] [STDOUT] Subscription 26 has 2 existing transactions
[2025-05-15T20:42:25.325Z] [STDOUT] Fetching invoices for subscription ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:42:25.325Z] [STDOUT] Found 2 invoices for subscription: sub_QVIG6dAuP0UXXn
[2025-05-15T20:42:25.325Z] [STDOUT] Transaction for payment pay_QVILKDuy9v6ovq already exists in database (1 records), skipping
[2025-05-15T20:42:25.325Z] [STDOUT] Transaction for payment pay_QVIGtXTXkm93W8 already exists in database (1 records), skipping
[2025-05-15T20:42:25.325Z] [STDOUT] Found 2 invoices for subscription sub_QVIG6dAuP0UXXn
[2025-05-15T20:42:25.325Z] [STDOUT] Subscription invoice synchronization complete!
[2025-05-15T20:42:25.325Z] [STDOUT] Processed 4 subscriptions
[2025-05-15T20:42:25.325Z] [STDOUT] Success: 4, Errors: 0
[2025-05-15T20:42:25.325Z] [STDOUT] Added 0 new transactions
[2025-05-15T20:42:25.325Z] [STDOUT] Script execution completed
[2025-05-15T20:42:25.325Z] Synchronization completed successfully
[2025-05-15T20:42:25.325Z] Next sync scheduled in 5 seconds
[2025-05-15T20:42:25.858Z] Starting invoice synchronization...
[2025-05-15T20:42:25.858Z] Running sync script: /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:42:25.858Z] Executing command: cd /Users/raja/Development/ProsumeAI/server && npx tsx /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:42:30.859Z] Starting invoice synchronization...
[2025-05-15T20:42:30.859Z] Running sync script: /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:42:30.859Z] Executing command: cd /Users/raja/Development/ProsumeAI/server && npx tsx /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:42:31.063Z] [STDOUT] Using database connection: postgres://***:***@localhost:5432/prosumeai
[2025-05-15T20:42:31.063Z] [STDOUT] Starting subscription invoice synchronization...
[2025-05-15T20:42:31.063Z] [STDOUT] Database schema validated successfully
[2025-05-15T20:42:31.063Z] [STDOUT] Found 4 active Razorpay subscriptions to sync
[2025-05-15T20:42:31.063Z] [STDOUT] Processing subscription 20 with Razorpay ID: sub_QUxcCis3igdqUA
[2025-05-15T20:42:31.063Z] [STDOUT] Subscription 20 has 1 existing transactions
[2025-05-15T20:42:31.063Z] [STDOUT] Razorpay initialization in progress, waiting...
[2025-05-15T20:42:31.063Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:42:31.063Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:42:31.063Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:42:31.063Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:42:31.063Z] [STDOUT] Fetching invoices for subscription ID: sub_QUxcCis3igdqUA
[2025-05-15T20:42:31.063Z] [STDOUT] Found 0 invoices for subscription: sub_QUxcCis3igdqUA
[2025-05-15T20:42:31.063Z] [STDOUT] Found 0 invoices for subscription sub_QUxcCis3igdqUA
[2025-05-15T20:42:31.063Z] [STDOUT] Processing subscription 24 with Razorpay ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:42:31.063Z] [STDOUT] Subscription 24 has 1 existing transactions
[2025-05-15T20:42:31.063Z] [STDOUT] Fetching invoices for subscription ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:42:31.063Z] [STDOUT] Found 1 invoices for subscription: sub_QV05DCrgh3A2rL
[2025-05-15T20:42:31.063Z] [STDOUT] Transaction for payment pay_QV05q44fHQzL1q already exists in database (1 records), skipping
[2025-05-15T20:42:31.063Z] [STDOUT] Found 1 invoices for subscription sub_QV05DCrgh3A2rL
[2025-05-15T20:42:31.063Z] [STDOUT] Processing subscription 25 with Razorpay ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:42:31.063Z] [STDOUT] Subscription 25 has 2 existing transactions
[2025-05-15T20:42:31.063Z] [STDOUT] Fetching invoices for subscription ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:42:31.063Z] [STDOUT] Found 1 invoices for subscription: sub_QV1W0JNq2cOk7s
[2025-05-15T20:42:31.063Z] [STDOUT] Transaction for payment pay_QV1WoyCgCY23iO already exists in database (2 records), skipping
[2025-05-15T20:42:31.063Z] [STDOUT] Found 1 invoices for subscription sub_QV1W0JNq2cOk7s
[2025-05-15T20:42:31.063Z] [STDOUT] Processing subscription 26 with Razorpay ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:42:31.063Z] [STDOUT] Subscription 26 has 2 existing transactions
[2025-05-15T20:42:31.063Z] [STDOUT] Fetching invoices for subscription ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:42:31.063Z] [STDOUT] Found 2 invoices for subscription: sub_QVIG6dAuP0UXXn
[2025-05-15T20:42:31.063Z] [STDOUT] Transaction for payment pay_QVILKDuy9v6ovq already exists in database (1 records), skipping
[2025-05-15T20:42:31.063Z] [STDOUT] Transaction for payment pay_QVIGtXTXkm93W8 already exists in database (1 records), skipping
[2025-05-15T20:42:31.063Z] [STDOUT] Found 2 invoices for subscription sub_QVIG6dAuP0UXXn
[2025-05-15T20:42:31.063Z] [STDOUT] Subscription invoice synchronization complete!
[2025-05-15T20:42:31.063Z] [STDOUT] Processed 4 subscriptions
[2025-05-15T20:42:31.063Z] [STDOUT] Success: 4, Errors: 0
[2025-05-15T20:42:31.063Z] [STDOUT] Added 0 new transactions
[2025-05-15T20:42:31.063Z] [STDOUT] Script execution completed
[2025-05-15T20:42:31.063Z] Synchronization completed successfully
[2025-05-15T20:42:31.063Z] Next sync scheduled in 5 seconds
[2025-05-15T20:42:35.628Z] [STDOUT] Using database connection: postgres://***:***@localhost:5432/prosumeai
[2025-05-15T20:42:35.629Z] [STDOUT] Starting subscription invoice synchronization...
[2025-05-15T20:42:35.629Z] [STDOUT] Database schema validated successfully
[2025-05-15T20:42:35.629Z] [STDOUT] Found 4 active Razorpay subscriptions to sync
[2025-05-15T20:42:35.629Z] [STDOUT] Processing subscription 20 with Razorpay ID: sub_QUxcCis3igdqUA
[2025-05-15T20:42:35.629Z] [STDOUT] Subscription 20 has 1 existing transactions
[2025-05-15T20:42:35.629Z] [STDOUT] Razorpay initialization in progress, waiting...
[2025-05-15T20:42:35.629Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:42:35.629Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:42:35.629Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:42:35.629Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:42:35.629Z] [STDOUT] Fetching invoices for subscription ID: sub_QUxcCis3igdqUA
[2025-05-15T20:42:35.629Z] [STDOUT] Found 0 invoices for subscription: sub_QUxcCis3igdqUA
[2025-05-15T20:42:35.629Z] [STDOUT] Found 0 invoices for subscription sub_QUxcCis3igdqUA
[2025-05-15T20:42:35.629Z] [STDOUT] Processing subscription 24 with Razorpay ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:42:35.629Z] [STDOUT] Subscription 24 has 1 existing transactions
[2025-05-15T20:42:35.629Z] [STDOUT] Fetching invoices for subscription ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:42:35.629Z] [STDOUT] Found 1 invoices for subscription: sub_QV05DCrgh3A2rL
[2025-05-15T20:42:35.629Z] [STDOUT] Transaction for payment pay_QV05q44fHQzL1q already exists in database (1 records), skipping
[2025-05-15T20:42:35.629Z] [STDOUT] Found 1 invoices for subscription sub_QV05DCrgh3A2rL
[2025-05-15T20:42:35.629Z] [STDOUT] Processing subscription 25 with Razorpay ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:42:35.629Z] [STDOUT] Subscription 25 has 2 existing transactions
[2025-05-15T20:42:35.629Z] [STDOUT] Fetching invoices for subscription ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:42:35.629Z] [STDOUT] Found 1 invoices for subscription: sub_QV1W0JNq2cOk7s
[2025-05-15T20:42:35.629Z] [STDOUT] Transaction for payment pay_QV1WoyCgCY23iO already exists in database (2 records), skipping
[2025-05-15T20:42:35.629Z] [STDOUT] Found 1 invoices for subscription sub_QV1W0JNq2cOk7s
[2025-05-15T20:42:35.629Z] [STDOUT] Processing subscription 26 with Razorpay ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:42:35.629Z] [STDOUT] Subscription 26 has 2 existing transactions
[2025-05-15T20:42:35.629Z] [STDOUT] Fetching invoices for subscription ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:42:35.629Z] [STDOUT] Found 2 invoices for subscription: sub_QVIG6dAuP0UXXn
[2025-05-15T20:42:35.629Z] [STDOUT] Transaction for payment pay_QVILKDuy9v6ovq already exists in database (1 records), skipping
[2025-05-15T20:42:35.629Z] [STDOUT] Transaction for payment pay_QVIGtXTXkm93W8 already exists in database (1 records), skipping
[2025-05-15T20:42:35.629Z] [STDOUT] Found 2 invoices for subscription sub_QVIG6dAuP0UXXn
[2025-05-15T20:42:35.629Z] [STDOUT] Subscription invoice synchronization complete!
[2025-05-15T20:42:35.629Z] [STDOUT] Processed 4 subscriptions
[2025-05-15T20:42:35.629Z] [STDOUT] Success: 4, Errors: 0
[2025-05-15T20:42:35.629Z] [STDOUT] Added 0 new transactions
[2025-05-15T20:42:35.629Z] [STDOUT] Script execution completed
[2025-05-15T20:42:35.629Z] Synchronization completed successfully
[2025-05-15T20:42:35.629Z] Next sync scheduled in 5 seconds
[2025-05-15T20:42:35.860Z] Starting invoice synchronization...
[2025-05-15T20:42:35.861Z] Running sync script: /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:42:35.861Z] Executing command: cd /Users/raja/Development/ProsumeAI/server && npx tsx /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:42:40.192Z] [STDOUT] Using database connection: postgres://***:***@localhost:5432/prosumeai
[2025-05-15T20:42:40.192Z] [STDOUT] Starting subscription invoice synchronization...
[2025-05-15T20:42:40.192Z] [STDOUT] Found 4 active Razorpay subscriptions to sync
[2025-05-15T20:42:40.192Z] [STDOUT] Processing subscription 20 with Razorpay ID: sub_QUxcCis3igdqUA
[2025-05-15T20:42:40.192Z] [STDOUT] Database schema validated successfully
[2025-05-15T20:42:40.192Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:42:40.192Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:42:40.192Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:42:40.192Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:42:40.192Z] [STDOUT] Subscription 20 has 1 existing transactions
[2025-05-15T20:42:40.192Z] [STDOUT] Fetching invoices for subscription ID: sub_QUxcCis3igdqUA
[2025-05-15T20:42:40.192Z] [STDOUT] Found 0 invoices for subscription: sub_QUxcCis3igdqUA
[2025-05-15T20:42:40.192Z] [STDOUT] Found 0 invoices for subscription sub_QUxcCis3igdqUA
[2025-05-15T20:42:40.192Z] [STDOUT] Processing subscription 24 with Razorpay ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:42:40.192Z] [STDOUT] Subscription 24 has 1 existing transactions
[2025-05-15T20:42:40.192Z] [STDOUT] Fetching invoices for subscription ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:42:40.192Z] [STDOUT] Found 1 invoices for subscription: sub_QV05DCrgh3A2rL
[2025-05-15T20:42:40.192Z] [STDOUT] Transaction for payment pay_QV05q44fHQzL1q already exists in database (1 records), skipping
[2025-05-15T20:42:40.192Z] [STDOUT] Found 1 invoices for subscription sub_QV05DCrgh3A2rL
[2025-05-15T20:42:40.192Z] [STDOUT] Processing subscription 25 with Razorpay ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:42:40.192Z] [STDOUT] Subscription 25 has 2 existing transactions
[2025-05-15T20:42:40.192Z] [STDOUT] Fetching invoices for subscription ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:42:40.192Z] [STDOUT] Found 1 invoices for subscription: sub_QV1W0JNq2cOk7s
[2025-05-15T20:42:40.192Z] [STDOUT] Transaction for payment pay_QV1WoyCgCY23iO already exists in database (2 records), skipping
[2025-05-15T20:42:40.192Z] [STDOUT] Found 1 invoices for subscription sub_QV1W0JNq2cOk7s
[2025-05-15T20:42:40.192Z] [STDOUT] Processing subscription 26 with Razorpay ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:42:40.192Z] [STDOUT] Subscription 26 has 2 existing transactions
[2025-05-15T20:42:40.192Z] [STDOUT] Fetching invoices for subscription ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:42:40.192Z] [STDOUT] Found 2 invoices for subscription: sub_QVIG6dAuP0UXXn
[2025-05-15T20:42:40.192Z] [STDOUT] Transaction for payment pay_QVILKDuy9v6ovq already exists in database (1 records), skipping
[2025-05-15T20:42:40.192Z] [STDOUT] Transaction for payment pay_QVIGtXTXkm93W8 already exists in database (1 records), skipping
[2025-05-15T20:42:40.192Z] [STDOUT] Found 2 invoices for subscription sub_QVIG6dAuP0UXXn
[2025-05-15T20:42:40.192Z] [STDOUT] Subscription invoice synchronization complete!
[2025-05-15T20:42:40.192Z] [STDOUT] Processed 4 subscriptions
[2025-05-15T20:42:40.192Z] [STDOUT] Success: 4, Errors: 0
[2025-05-15T20:42:40.192Z] [STDOUT] Added 0 new transactions
[2025-05-15T20:42:40.192Z] [STDOUT] Script execution completed
[2025-05-15T20:42:40.192Z] Synchronization completed successfully
[2025-05-15T20:42:40.192Z] Next sync scheduled in 5 seconds
[2025-05-15T20:42:40.860Z] Starting invoice synchronization...
[2025-05-15T20:42:40.861Z] Running sync script: /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:42:40.861Z] Executing command: cd /Users/raja/Development/ProsumeAI/server && npx tsx /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:42:45.124Z] [STDOUT] Using database connection: postgres://***:***@localhost:5432/prosumeai
[2025-05-15T20:42:45.124Z] [STDOUT] Starting subscription invoice synchronization...
[2025-05-15T20:42:45.124Z] [STDOUT] Found 4 active Razorpay subscriptions to sync
[2025-05-15T20:42:45.124Z] [STDOUT] Processing subscription 20 with Razorpay ID: sub_QUxcCis3igdqUA
[2025-05-15T20:42:45.124Z] [STDOUT] Database schema validated successfully
[2025-05-15T20:42:45.124Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:42:45.124Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:42:45.124Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:42:45.124Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:42:45.124Z] [STDOUT] Subscription 20 has 1 existing transactions
[2025-05-15T20:42:45.124Z] [STDOUT] Fetching invoices for subscription ID: sub_QUxcCis3igdqUA
[2025-05-15T20:42:45.124Z] [STDOUT] Found 0 invoices for subscription: sub_QUxcCis3igdqUA
[2025-05-15T20:42:45.124Z] [STDOUT] Found 0 invoices for subscription sub_QUxcCis3igdqUA
[2025-05-15T20:42:45.124Z] [STDOUT] Processing subscription 24 with Razorpay ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:42:45.124Z] [STDOUT] Subscription 24 has 1 existing transactions
[2025-05-15T20:42:45.124Z] [STDOUT] Fetching invoices for subscription ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:42:45.124Z] [STDOUT] Found 1 invoices for subscription: sub_QV05DCrgh3A2rL
[2025-05-15T20:42:45.124Z] [STDOUT] Transaction for payment pay_QV05q44fHQzL1q already exists in database (1 records), skipping
[2025-05-15T20:42:45.124Z] [STDOUT] Found 1 invoices for subscription sub_QV05DCrgh3A2rL
[2025-05-15T20:42:45.124Z] [STDOUT] Processing subscription 25 with Razorpay ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:42:45.124Z] [STDOUT] Subscription 25 has 2 existing transactions
[2025-05-15T20:42:45.124Z] [STDOUT] Fetching invoices for subscription ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:42:45.124Z] [STDOUT] Found 1 invoices for subscription: sub_QV1W0JNq2cOk7s
[2025-05-15T20:42:45.124Z] [STDOUT] Transaction for payment pay_QV1WoyCgCY23iO already exists in database (2 records), skipping
[2025-05-15T20:42:45.124Z] [STDOUT] Found 1 invoices for subscription sub_QV1W0JNq2cOk7s
[2025-05-15T20:42:45.124Z] [STDOUT] Processing subscription 26 with Razorpay ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:42:45.124Z] [STDOUT] Subscription 26 has 2 existing transactions
[2025-05-15T20:42:45.124Z] [STDOUT] Fetching invoices for subscription ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:42:45.124Z] [STDOUT] Found 2 invoices for subscription: sub_QVIG6dAuP0UXXn
[2025-05-15T20:42:45.124Z] [STDOUT] Transaction for payment pay_QVILKDuy9v6ovq already exists in database (1 records), skipping
[2025-05-15T20:42:45.124Z] [STDOUT] Transaction for payment pay_QVIGtXTXkm93W8 already exists in database (1 records), skipping
[2025-05-15T20:42:45.124Z] [STDOUT] Found 2 invoices for subscription sub_QVIG6dAuP0UXXn
[2025-05-15T20:42:45.124Z] [STDOUT] Subscription invoice synchronization complete!
[2025-05-15T20:42:45.124Z] [STDOUT] Processed 4 subscriptions
[2025-05-15T20:42:45.124Z] [STDOUT] Success: 4, Errors: 0
[2025-05-15T20:42:45.124Z] [STDOUT] Added 0 new transactions
[2025-05-15T20:42:45.124Z] [STDOUT] Script execution completed
[2025-05-15T20:42:45.124Z] Synchronization completed successfully
[2025-05-15T20:42:45.124Z] Next sync scheduled in 5 seconds
[2025-05-15T20:42:45.862Z] Starting invoice synchronization...
[2025-05-15T20:42:45.862Z] Running sync script: /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:42:45.862Z] Executing command: cd /Users/raja/Development/ProsumeAI/server && npx tsx /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:42:50.863Z] Starting invoice synchronization...
[2025-05-15T20:42:50.863Z] Running sync script: /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:42:50.863Z] Executing command: cd /Users/raja/Development/ProsumeAI/server && npx tsx /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:42:50.890Z] [STDOUT] Using database connection: postgres://***:***@localhost:5432/prosumeai
[2025-05-15T20:42:50.890Z] [STDOUT] Starting subscription invoice synchronization...
[2025-05-15T20:42:50.890Z] [STDOUT] Database schema validated successfully
[2025-05-15T20:42:50.890Z] [STDOUT] Found 4 active Razorpay subscriptions to sync
[2025-05-15T20:42:50.890Z] [STDOUT] Processing subscription 20 with Razorpay ID: sub_QUxcCis3igdqUA
[2025-05-15T20:42:50.890Z] [STDOUT] Subscription 20 has 1 existing transactions
[2025-05-15T20:42:50.890Z] [STDOUT] Razorpay initialization in progress, waiting...
[2025-05-15T20:42:50.890Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:42:50.890Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:42:50.890Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:42:50.890Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:42:50.890Z] [STDOUT] Fetching invoices for subscription ID: sub_QUxcCis3igdqUA
[2025-05-15T20:42:50.890Z] [STDOUT] Found 0 invoices for subscription: sub_QUxcCis3igdqUA
[2025-05-15T20:42:50.890Z] [STDOUT] Found 0 invoices for subscription sub_QUxcCis3igdqUA
[2025-05-15T20:42:50.890Z] [STDOUT] Processing subscription 24 with Razorpay ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:42:50.890Z] [STDOUT] Subscription 24 has 1 existing transactions
[2025-05-15T20:42:50.890Z] [STDOUT] Fetching invoices for subscription ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:42:50.890Z] [STDOUT] Found 1 invoices for subscription: sub_QV05DCrgh3A2rL
[2025-05-15T20:42:50.890Z] [STDOUT] Transaction for payment pay_QV05q44fHQzL1q already exists in database (1 records), skipping
[2025-05-15T20:42:50.890Z] [STDOUT] Found 1 invoices for subscription sub_QV05DCrgh3A2rL
[2025-05-15T20:42:50.890Z] [STDOUT] Processing subscription 25 with Razorpay ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:42:50.890Z] [STDOUT] Subscription 25 has 2 existing transactions
[2025-05-15T20:42:50.890Z] [STDOUT] Fetching invoices for subscription ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:42:50.890Z] [STDOUT] Found 1 invoices for subscription: sub_QV1W0JNq2cOk7s
[2025-05-15T20:42:50.890Z] [STDOUT] Transaction for payment pay_QV1WoyCgCY23iO already exists in database (2 records), skipping
[2025-05-15T20:42:50.890Z] [STDOUT] Found 1 invoices for subscription sub_QV1W0JNq2cOk7s
[2025-05-15T20:42:50.890Z] [STDOUT] Processing subscription 26 with Razorpay ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:42:50.890Z] [STDOUT] Subscription 26 has 2 existing transactions
[2025-05-15T20:42:50.890Z] [STDOUT] Fetching invoices for subscription ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:42:50.890Z] [STDOUT] Found 2 invoices for subscription: sub_QVIG6dAuP0UXXn
[2025-05-15T20:42:50.890Z] [STDOUT] Transaction for payment pay_QVILKDuy9v6ovq already exists in database (1 records), skipping
[2025-05-15T20:42:50.890Z] [STDOUT] Transaction for payment pay_QVIGtXTXkm93W8 already exists in database (1 records), skipping
[2025-05-15T20:42:50.890Z] [STDOUT] Found 2 invoices for subscription sub_QVIG6dAuP0UXXn
[2025-05-15T20:42:50.890Z] [STDOUT] Subscription invoice synchronization complete!
[2025-05-15T20:42:50.890Z] [STDOUT] Processed 4 subscriptions
[2025-05-15T20:42:50.890Z] [STDOUT] Success: 4, Errors: 0
[2025-05-15T20:42:50.890Z] [STDOUT] Added 0 new transactions
[2025-05-15T20:42:50.890Z] [STDOUT] Script execution completed
[2025-05-15T20:42:50.890Z] Synchronization completed successfully
[2025-05-15T20:42:50.890Z] Next sync scheduled in 5 seconds
[2025-05-15T20:42:55.714Z] [STDOUT] Using database connection: postgres://***:***@localhost:5432/prosumeai
[2025-05-15T20:42:55.714Z] [STDOUT] Starting subscription invoice synchronization...
[2025-05-15T20:42:55.714Z] [STDOUT] Database schema validated successfully
[2025-05-15T20:42:55.714Z] [STDOUT] Found 4 active Razorpay subscriptions to sync
[2025-05-15T20:42:55.714Z] [STDOUT] Processing subscription 20 with Razorpay ID: sub_QUxcCis3igdqUA
[2025-05-15T20:42:55.714Z] [STDOUT] Subscription 20 has 1 existing transactions
[2025-05-15T20:42:55.714Z] [STDOUT] Razorpay initialization in progress, waiting...
[2025-05-15T20:42:55.714Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:42:55.714Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:42:55.714Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:42:55.714Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:42:55.714Z] [STDOUT] Fetching invoices for subscription ID: sub_QUxcCis3igdqUA
[2025-05-15T20:42:55.714Z] [STDOUT] Found 0 invoices for subscription: sub_QUxcCis3igdqUA
[2025-05-15T20:42:55.714Z] [STDOUT] Found 0 invoices for subscription sub_QUxcCis3igdqUA
[2025-05-15T20:42:55.714Z] [STDOUT] Processing subscription 24 with Razorpay ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:42:55.714Z] [STDOUT] Subscription 24 has 1 existing transactions
[2025-05-15T20:42:55.714Z] [STDOUT] Fetching invoices for subscription ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:42:55.714Z] [STDOUT] Found 1 invoices for subscription: sub_QV05DCrgh3A2rL
[2025-05-15T20:42:55.714Z] [STDOUT] Transaction for payment pay_QV05q44fHQzL1q already exists in database (1 records), skipping
[2025-05-15T20:42:55.714Z] [STDOUT] Found 1 invoices for subscription sub_QV05DCrgh3A2rL
[2025-05-15T20:42:55.714Z] [STDOUT] Processing subscription 25 with Razorpay ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:42:55.714Z] [STDOUT] Subscription 25 has 2 existing transactions
[2025-05-15T20:42:55.714Z] [STDOUT] Fetching invoices for subscription ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:42:55.714Z] [STDOUT] Found 1 invoices for subscription: sub_QV1W0JNq2cOk7s
[2025-05-15T20:42:55.714Z] [STDOUT] Transaction for payment pay_QV1WoyCgCY23iO already exists in database (2 records), skipping
[2025-05-15T20:42:55.714Z] [STDOUT] Found 1 invoices for subscription sub_QV1W0JNq2cOk7s
[2025-05-15T20:42:55.714Z] [STDOUT] Processing subscription 26 with Razorpay ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:42:55.714Z] [STDOUT] Subscription 26 has 2 existing transactions
[2025-05-15T20:42:55.714Z] [STDOUT] Fetching invoices for subscription ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:42:55.714Z] [STDOUT] Found 2 invoices for subscription: sub_QVIG6dAuP0UXXn
[2025-05-15T20:42:55.714Z] [STDOUT] Transaction for payment pay_QVILKDuy9v6ovq already exists in database (1 records), skipping
[2025-05-15T20:42:55.714Z] [STDOUT] Transaction for payment pay_QVIGtXTXkm93W8 already exists in database (1 records), skipping
[2025-05-15T20:42:55.714Z] [STDOUT] Found 2 invoices for subscription sub_QVIG6dAuP0UXXn
[2025-05-15T20:42:55.715Z] [STDOUT] Subscription invoice synchronization complete!
[2025-05-15T20:42:55.715Z] [STDOUT] Processed 4 subscriptions
[2025-05-15T20:42:55.715Z] [STDOUT] Success: 4, Errors: 0
[2025-05-15T20:42:55.715Z] [STDOUT] Added 0 new transactions
[2025-05-15T20:42:55.715Z] [STDOUT] Script execution completed
[2025-05-15T20:42:55.715Z] Synchronization completed successfully
[2025-05-15T20:42:55.715Z] Next sync scheduled in 5 seconds
[2025-05-15T20:42:55.864Z] Starting invoice synchronization...
[2025-05-15T20:42:55.864Z] Running sync script: /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:42:55.864Z] Executing command: cd /Users/raja/Development/ProsumeAI/server && npx tsx /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:43:00.207Z] [STDOUT] Using database connection: postgres://***:***@localhost:5432/prosumeai
[2025-05-15T20:43:00.207Z] [STDOUT] Starting subscription invoice synchronization...
[2025-05-15T20:43:00.207Z] [STDOUT] Database schema validated successfully
[2025-05-15T20:43:00.207Z] [STDOUT] Found 4 active Razorpay subscriptions to sync
[2025-05-15T20:43:00.207Z] [STDOUT] Processing subscription 20 with Razorpay ID: sub_QUxcCis3igdqUA
[2025-05-15T20:43:00.207Z] [STDOUT] Subscription 20 has 1 existing transactions
[2025-05-15T20:43:00.207Z] [STDOUT] Razorpay initialization in progress, waiting...
[2025-05-15T20:43:00.207Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:43:00.207Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:43:00.207Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:43:00.207Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:43:00.207Z] [STDOUT] Fetching invoices for subscription ID: sub_QUxcCis3igdqUA
[2025-05-15T20:43:00.207Z] [STDOUT] Found 0 invoices for subscription: sub_QUxcCis3igdqUA
[2025-05-15T20:43:00.207Z] [STDOUT] Found 0 invoices for subscription sub_QUxcCis3igdqUA
[2025-05-15T20:43:00.207Z] [STDOUT] Processing subscription 24 with Razorpay ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:43:00.207Z] [STDOUT] Subscription 24 has 1 existing transactions
[2025-05-15T20:43:00.207Z] [STDOUT] Fetching invoices for subscription ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:43:00.207Z] [STDOUT] Found 1 invoices for subscription: sub_QV05DCrgh3A2rL
[2025-05-15T20:43:00.207Z] [STDOUT] Transaction for payment pay_QV05q44fHQzL1q already exists in database (1 records), skipping
[2025-05-15T20:43:00.207Z] [STDOUT] Found 1 invoices for subscription sub_QV05DCrgh3A2rL
[2025-05-15T20:43:00.207Z] [STDOUT] Processing subscription 25 with Razorpay ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:43:00.207Z] [STDOUT] Subscription 25 has 2 existing transactions
[2025-05-15T20:43:00.207Z] [STDOUT] Fetching invoices for subscription ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:43:00.207Z] [STDOUT] Found 1 invoices for subscription: sub_QV1W0JNq2cOk7s
[2025-05-15T20:43:00.207Z] [STDOUT] Transaction for payment pay_QV1WoyCgCY23iO already exists in database (2 records), skipping
[2025-05-15T20:43:00.207Z] [STDOUT] Found 1 invoices for subscription sub_QV1W0JNq2cOk7s
[2025-05-15T20:43:00.207Z] [STDOUT] Processing subscription 26 with Razorpay ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:43:00.207Z] [STDOUT] Subscription 26 has 2 existing transactions
[2025-05-15T20:43:00.207Z] [STDOUT] Fetching invoices for subscription ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:43:00.207Z] [STDOUT] Found 2 invoices for subscription: sub_QVIG6dAuP0UXXn
[2025-05-15T20:43:00.207Z] [STDOUT] Transaction for payment pay_QVILKDuy9v6ovq already exists in database (1 records), skipping
[2025-05-15T20:43:00.207Z] [STDOUT] Transaction for payment pay_QVIGtXTXkm93W8 already exists in database (1 records), skipping
[2025-05-15T20:43:00.207Z] [STDOUT] Found 2 invoices for subscription sub_QVIG6dAuP0UXXn
[2025-05-15T20:43:00.207Z] [STDOUT] Subscription invoice synchronization complete!
[2025-05-15T20:43:00.207Z] [STDOUT] Processed 4 subscriptions
[2025-05-15T20:43:00.207Z] [STDOUT] Success: 4, Errors: 0
[2025-05-15T20:43:00.207Z] [STDOUT] Added 0 new transactions
[2025-05-15T20:43:00.207Z] [STDOUT] Script execution completed
[2025-05-15T20:43:00.207Z] Synchronization completed successfully
[2025-05-15T20:43:00.207Z] Next sync scheduled in 5 seconds
[2025-05-15T20:43:00.865Z] Starting invoice synchronization...
[2025-05-15T20:43:00.866Z] Running sync script: /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:43:00.866Z] Executing command: cd /Users/raja/Development/ProsumeAI/server && npx tsx /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:43:05.156Z] [STDOUT] Using database connection: postgres://***:***@localhost:5432/prosumeai
[2025-05-15T20:43:05.156Z] [STDOUT] Starting subscription invoice synchronization...
[2025-05-15T20:43:05.156Z] [STDOUT] Database schema validated successfully
[2025-05-15T20:43:05.156Z] [STDOUT] Found 4 active Razorpay subscriptions to sync
[2025-05-15T20:43:05.156Z] [STDOUT] Processing subscription 20 with Razorpay ID: sub_QUxcCis3igdqUA
[2025-05-15T20:43:05.156Z] [STDOUT] Subscription 20 has 1 existing transactions
[2025-05-15T20:43:05.156Z] [STDOUT] Razorpay initialization in progress, waiting...
[2025-05-15T20:43:05.156Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:43:05.156Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:43:05.156Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:43:05.156Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:43:05.156Z] [STDOUT] Fetching invoices for subscription ID: sub_QUxcCis3igdqUA
[2025-05-15T20:43:05.156Z] [STDOUT] Found 0 invoices for subscription: sub_QUxcCis3igdqUA
[2025-05-15T20:43:05.156Z] [STDOUT] Found 0 invoices for subscription sub_QUxcCis3igdqUA
[2025-05-15T20:43:05.156Z] [STDOUT] Processing subscription 24 with Razorpay ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:43:05.156Z] [STDOUT] Subscription 24 has 1 existing transactions
[2025-05-15T20:43:05.156Z] [STDOUT] Fetching invoices for subscription ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:43:05.156Z] [STDOUT] Found 1 invoices for subscription: sub_QV05DCrgh3A2rL
[2025-05-15T20:43:05.156Z] [STDOUT] Transaction for payment pay_QV05q44fHQzL1q already exists in database (1 records), skipping
[2025-05-15T20:43:05.156Z] [STDOUT] Found 1 invoices for subscription sub_QV05DCrgh3A2rL
[2025-05-15T20:43:05.156Z] [STDOUT] Processing subscription 25 with Razorpay ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:43:05.156Z] [STDOUT] Subscription 25 has 2 existing transactions
[2025-05-15T20:43:05.156Z] [STDOUT] Fetching invoices for subscription ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:43:05.156Z] [STDOUT] Found 1 invoices for subscription: sub_QV1W0JNq2cOk7s
[2025-05-15T20:43:05.157Z] [STDOUT] Transaction for payment pay_QV1WoyCgCY23iO already exists in database (2 records), skipping
[2025-05-15T20:43:05.157Z] [STDOUT] Found 1 invoices for subscription sub_QV1W0JNq2cOk7s
[2025-05-15T20:43:05.157Z] [STDOUT] Processing subscription 26 with Razorpay ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:43:05.157Z] [STDOUT] Subscription 26 has 2 existing transactions
[2025-05-15T20:43:05.157Z] [STDOUT] Fetching invoices for subscription ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:43:05.157Z] [STDOUT] Found 2 invoices for subscription: sub_QVIG6dAuP0UXXn
[2025-05-15T20:43:05.157Z] [STDOUT] Transaction for payment pay_QVILKDuy9v6ovq already exists in database (1 records), skipping
[2025-05-15T20:43:05.157Z] [STDOUT] Transaction for payment pay_QVIGtXTXkm93W8 already exists in database (1 records), skipping
[2025-05-15T20:43:05.157Z] [STDOUT] Found 2 invoices for subscription sub_QVIG6dAuP0UXXn
[2025-05-15T20:43:05.157Z] [STDOUT] Subscription invoice synchronization complete!
[2025-05-15T20:43:05.157Z] [STDOUT] Processed 4 subscriptions
[2025-05-15T20:43:05.157Z] [STDOUT] Success: 4, Errors: 0
[2025-05-15T20:43:05.157Z] [STDOUT] Added 0 new transactions
[2025-05-15T20:43:05.157Z] [STDOUT] Script execution completed
[2025-05-15T20:43:05.157Z] Synchronization completed successfully
[2025-05-15T20:43:05.157Z] Next sync scheduled in 5 seconds
[2025-05-15T20:43:05.867Z] Starting invoice synchronization...
[2025-05-15T20:43:05.867Z] Running sync script: /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:43:05.867Z] Executing command: cd /Users/raja/Development/ProsumeAI/server && npx tsx /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:43:10.052Z] [STDOUT] Using database connection: postgres://***:***@localhost:5432/prosumeai
[2025-05-15T20:43:10.052Z] [STDOUT] Starting subscription invoice synchronization...
[2025-05-15T20:43:10.052Z] [STDOUT] Found 4 active Razorpay subscriptions to sync
[2025-05-15T20:43:10.052Z] [STDOUT] Processing subscription 20 with Razorpay ID: sub_QUxcCis3igdqUA
[2025-05-15T20:43:10.052Z] [STDOUT] Database schema validated successfully
[2025-05-15T20:43:10.052Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:43:10.052Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:43:10.052Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:43:10.052Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:43:10.052Z] [STDOUT] Subscription 20 has 1 existing transactions
[2025-05-15T20:43:10.052Z] [STDOUT] Fetching invoices for subscription ID: sub_QUxcCis3igdqUA
[2025-05-15T20:43:10.052Z] [STDOUT] Found 0 invoices for subscription: sub_QUxcCis3igdqUA
[2025-05-15T20:43:10.052Z] [STDOUT] Found 0 invoices for subscription sub_QUxcCis3igdqUA
[2025-05-15T20:43:10.052Z] [STDOUT] Processing subscription 24 with Razorpay ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:43:10.052Z] [STDOUT] Subscription 24 has 1 existing transactions
[2025-05-15T20:43:10.052Z] [STDOUT] Fetching invoices for subscription ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:43:10.052Z] [STDOUT] Found 1 invoices for subscription: sub_QV05DCrgh3A2rL
[2025-05-15T20:43:10.052Z] [STDOUT] Transaction for payment pay_QV05q44fHQzL1q already exists in database (1 records), skipping
[2025-05-15T20:43:10.052Z] [STDOUT] Found 1 invoices for subscription sub_QV05DCrgh3A2rL
[2025-05-15T20:43:10.052Z] [STDOUT] Processing subscription 25 with Razorpay ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:43:10.052Z] [STDOUT] Subscription 25 has 2 existing transactions
[2025-05-15T20:43:10.052Z] [STDOUT] Fetching invoices for subscription ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:43:10.052Z] [STDOUT] Found 1 invoices for subscription: sub_QV1W0JNq2cOk7s
[2025-05-15T20:43:10.052Z] [STDOUT] Transaction for payment pay_QV1WoyCgCY23iO already exists in database (2 records), skipping
[2025-05-15T20:43:10.052Z] [STDOUT] Found 1 invoices for subscription sub_QV1W0JNq2cOk7s
[2025-05-15T20:43:10.052Z] [STDOUT] Processing subscription 26 with Razorpay ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:43:10.052Z] [STDOUT] Subscription 26 has 2 existing transactions
[2025-05-15T20:43:10.052Z] [STDOUT] Fetching invoices for subscription ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:43:10.052Z] [STDOUT] Found 2 invoices for subscription: sub_QVIG6dAuP0UXXn
[2025-05-15T20:43:10.052Z] [STDOUT] Transaction for payment pay_QVILKDuy9v6ovq already exists in database (1 records), skipping
[2025-05-15T20:43:10.052Z] [STDOUT] Transaction for payment pay_QVIGtXTXkm93W8 already exists in database (1 records), skipping
[2025-05-15T20:43:10.052Z] [STDOUT] Found 2 invoices for subscription sub_QVIG6dAuP0UXXn
[2025-05-15T20:43:10.052Z] [STDOUT] Subscription invoice synchronization complete!
[2025-05-15T20:43:10.052Z] [STDOUT] Processed 4 subscriptions
[2025-05-15T20:43:10.052Z] [STDOUT] Success: 4, Errors: 0
[2025-05-15T20:43:10.052Z] [STDOUT] Added 0 new transactions
[2025-05-15T20:43:10.052Z] [STDOUT] Script execution completed
[2025-05-15T20:43:10.052Z] Synchronization completed successfully
[2025-05-15T20:43:10.052Z] Next sync scheduled in 5 seconds
[2025-05-15T20:43:10.868Z] Starting invoice synchronization...
[2025-05-15T20:43:10.868Z] Running sync script: /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:43:10.868Z] Executing command: cd /Users/raja/Development/ProsumeAI/server && npx tsx /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:43:15.464Z] [STDOUT] Using database connection: postgres://***:***@localhost:5432/prosumeai
[2025-05-15T20:43:15.464Z] [STDOUT] Starting subscription invoice synchronization...
[2025-05-15T20:43:15.464Z] [STDOUT] Database schema validated successfully
[2025-05-15T20:43:15.464Z] [STDOUT] Found 4 active Razorpay subscriptions to sync
[2025-05-15T20:43:15.464Z] [STDOUT] Processing subscription 20 with Razorpay ID: sub_QUxcCis3igdqUA
[2025-05-15T20:43:15.464Z] [STDOUT] Subscription 20 has 1 existing transactions
[2025-05-15T20:43:15.464Z] [STDOUT] Razorpay initialization in progress, waiting...
[2025-05-15T20:43:15.464Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:43:15.464Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:43:15.464Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:43:15.464Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:43:15.464Z] [STDOUT] Fetching invoices for subscription ID: sub_QUxcCis3igdqUA
[2025-05-15T20:43:15.464Z] [STDOUT] Found 0 invoices for subscription: sub_QUxcCis3igdqUA
[2025-05-15T20:43:15.464Z] [STDOUT] Found 0 invoices for subscription sub_QUxcCis3igdqUA
[2025-05-15T20:43:15.464Z] [STDOUT] Processing subscription 24 with Razorpay ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:43:15.464Z] [STDOUT] Subscription 24 has 1 existing transactions
[2025-05-15T20:43:15.464Z] [STDOUT] Fetching invoices for subscription ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:43:15.464Z] [STDOUT] Found 1 invoices for subscription: sub_QV05DCrgh3A2rL
[2025-05-15T20:43:15.464Z] [STDOUT] Transaction for payment pay_QV05q44fHQzL1q already exists in database (1 records), skipping
[2025-05-15T20:43:15.464Z] [STDOUT] Found 1 invoices for subscription sub_QV05DCrgh3A2rL
[2025-05-15T20:43:15.464Z] [STDOUT] Processing subscription 25 with Razorpay ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:43:15.464Z] [STDOUT] Subscription 25 has 2 existing transactions
[2025-05-15T20:43:15.464Z] [STDOUT] Fetching invoices for subscription ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:43:15.464Z] [STDOUT] Found 1 invoices for subscription: sub_QV1W0JNq2cOk7s
[2025-05-15T20:43:15.464Z] [STDOUT] Transaction for payment pay_QV1WoyCgCY23iO already exists in database (2 records), skipping
[2025-05-15T20:43:15.464Z] [STDOUT] Found 1 invoices for subscription sub_QV1W0JNq2cOk7s
[2025-05-15T20:43:15.464Z] [STDOUT] Processing subscription 26 with Razorpay ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:43:15.464Z] [STDOUT] Subscription 26 has 2 existing transactions
[2025-05-15T20:43:15.464Z] [STDOUT] Fetching invoices for subscription ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:43:15.464Z] [STDOUT] Found 2 invoices for subscription: sub_QVIG6dAuP0UXXn
[2025-05-15T20:43:15.464Z] [STDOUT] Transaction for payment pay_QVILKDuy9v6ovq already exists in database (1 records), skipping
[2025-05-15T20:43:15.464Z] [STDOUT] Transaction for payment pay_QVIGtXTXkm93W8 already exists in database (1 records), skipping
[2025-05-15T20:43:15.464Z] [STDOUT] Found 2 invoices for subscription sub_QVIG6dAuP0UXXn
[2025-05-15T20:43:15.464Z] [STDOUT] Subscription invoice synchronization complete!
[2025-05-15T20:43:15.464Z] [STDOUT] Processed 4 subscriptions
[2025-05-15T20:43:15.464Z] [STDOUT] Success: 4, Errors: 0
[2025-05-15T20:43:15.464Z] [STDOUT] Added 0 new transactions
[2025-05-15T20:43:15.464Z] [STDOUT] Script execution completed
[2025-05-15T20:43:15.464Z] Synchronization completed successfully
[2025-05-15T20:43:15.464Z] Next sync scheduled in 5 seconds
[2025-05-15T20:43:15.869Z] Starting invoice synchronization...
[2025-05-15T20:43:15.870Z] Running sync script: /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:43:15.870Z] Executing command: cd /Users/raja/Development/ProsumeAI/server && npx tsx /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:43:20.818Z] [STDOUT] Using database connection: postgres://***:***@localhost:5432/prosumeai
[2025-05-15T20:43:20.818Z] [STDOUT] Starting subscription invoice synchronization...
[2025-05-15T20:43:20.818Z] [STDOUT] Database schema validated successfully
[2025-05-15T20:43:20.818Z] [STDOUT] Found 4 active Razorpay subscriptions to sync
[2025-05-15T20:43:20.818Z] [STDOUT] Processing subscription 20 with Razorpay ID: sub_QUxcCis3igdqUA
[2025-05-15T20:43:20.818Z] [STDOUT] Subscription 20 has 1 existing transactions
[2025-05-15T20:43:20.818Z] [STDOUT] Razorpay initialization in progress, waiting...
[2025-05-15T20:43:20.818Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:43:20.819Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:43:20.819Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:43:20.819Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:43:20.819Z] [STDOUT] Fetching invoices for subscription ID: sub_QUxcCis3igdqUA
[2025-05-15T20:43:20.819Z] [STDOUT] Found 0 invoices for subscription: sub_QUxcCis3igdqUA
[2025-05-15T20:43:20.819Z] [STDOUT] Found 0 invoices for subscription sub_QUxcCis3igdqUA
[2025-05-15T20:43:20.819Z] [STDOUT] Processing subscription 24 with Razorpay ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:43:20.819Z] [STDOUT] Subscription 24 has 1 existing transactions
[2025-05-15T20:43:20.819Z] [STDOUT] Fetching invoices for subscription ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:43:20.819Z] [STDOUT] Found 1 invoices for subscription: sub_QV05DCrgh3A2rL
[2025-05-15T20:43:20.819Z] [STDOUT] Transaction for payment pay_QV05q44fHQzL1q already exists in database (1 records), skipping
[2025-05-15T20:43:20.819Z] [STDOUT] Found 1 invoices for subscription sub_QV05DCrgh3A2rL
[2025-05-15T20:43:20.819Z] [STDOUT] Processing subscription 25 with Razorpay ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:43:20.819Z] [STDOUT] Subscription 25 has 2 existing transactions
[2025-05-15T20:43:20.819Z] [STDOUT] Fetching invoices for subscription ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:43:20.819Z] [STDOUT] Found 1 invoices for subscription: sub_QV1W0JNq2cOk7s
[2025-05-15T20:43:20.819Z] [STDOUT] Transaction for payment pay_QV1WoyCgCY23iO already exists in database (2 records), skipping
[2025-05-15T20:43:20.819Z] [STDOUT] Found 1 invoices for subscription sub_QV1W0JNq2cOk7s
[2025-05-15T20:43:20.819Z] [STDOUT] Processing subscription 26 with Razorpay ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:43:20.819Z] [STDOUT] Subscription 26 has 2 existing transactions
[2025-05-15T20:43:20.819Z] [STDOUT] Fetching invoices for subscription ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:43:20.819Z] [STDOUT] Found 2 invoices for subscription: sub_QVIG6dAuP0UXXn
[2025-05-15T20:43:20.819Z] [STDOUT] Transaction for payment pay_QVILKDuy9v6ovq already exists in database (1 records), skipping
[2025-05-15T20:43:20.819Z] [STDOUT] Transaction for payment pay_QVIGtXTXkm93W8 already exists in database (1 records), skipping
[2025-05-15T20:43:20.819Z] [STDOUT] Found 2 invoices for subscription sub_QVIG6dAuP0UXXn
[2025-05-15T20:43:20.819Z] [STDOUT] Subscription invoice synchronization complete!
[2025-05-15T20:43:20.819Z] [STDOUT] Processed 4 subscriptions
[2025-05-15T20:43:20.819Z] [STDOUT] Success: 4, Errors: 0
[2025-05-15T20:43:20.819Z] [STDOUT] Added 0 new transactions
[2025-05-15T20:43:20.819Z] [STDOUT] Script execution completed
[2025-05-15T20:43:20.819Z] Synchronization completed successfully
[2025-05-15T20:43:20.819Z] Next sync scheduled in 5 seconds
[2025-05-15T20:43:20.871Z] Starting invoice synchronization...
[2025-05-15T20:43:20.871Z] Running sync script: /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:43:20.871Z] Executing command: cd /Users/raja/Development/ProsumeAI/server && npx tsx /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:43:25.872Z] Starting invoice synchronization...
[2025-05-15T20:43:25.873Z] Running sync script: /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:43:25.873Z] Executing command: cd /Users/raja/Development/ProsumeAI/server && npx tsx /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:43:27.516Z] [STDOUT] Using database connection: postgres://***:***@localhost:5432/prosumeai
[2025-05-15T20:43:27.516Z] [STDOUT] Starting subscription invoice synchronization...
[2025-05-15T20:43:27.516Z] [STDOUT] Database schema validated successfully
[2025-05-15T20:43:27.516Z] [STDOUT] Found 4 active Razorpay subscriptions to sync
[2025-05-15T20:43:27.516Z] [STDOUT] Processing subscription 20 with Razorpay ID: sub_QUxcCis3igdqUA
[2025-05-15T20:43:27.516Z] [STDOUT] Subscription 20 has 1 existing transactions
[2025-05-15T20:43:27.516Z] [STDOUT] Razorpay initialization in progress, waiting...
[2025-05-15T20:43:27.516Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:43:27.516Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:43:27.516Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:43:27.516Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:43:27.516Z] [STDOUT] Fetching invoices for subscription ID: sub_QUxcCis3igdqUA
[2025-05-15T20:43:27.516Z] [STDOUT] Found 0 invoices for subscription: sub_QUxcCis3igdqUA
[2025-05-15T20:43:27.516Z] [STDOUT] Found 0 invoices for subscription sub_QUxcCis3igdqUA
[2025-05-15T20:43:27.516Z] [STDOUT] Processing subscription 24 with Razorpay ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:43:27.516Z] [STDOUT] Subscription 24 has 1 existing transactions
[2025-05-15T20:43:27.516Z] [STDOUT] Fetching invoices for subscription ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:43:27.516Z] [STDOUT] Found 1 invoices for subscription: sub_QV05DCrgh3A2rL
[2025-05-15T20:43:27.516Z] [STDOUT] Transaction for payment pay_QV05q44fHQzL1q already exists in database (1 records), skipping
[2025-05-15T20:43:27.516Z] [STDOUT] Found 1 invoices for subscription sub_QV05DCrgh3A2rL
[2025-05-15T20:43:27.516Z] [STDOUT] Processing subscription 25 with Razorpay ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:43:27.516Z] [STDOUT] Subscription 25 has 2 existing transactions
[2025-05-15T20:43:27.516Z] [STDOUT] Fetching invoices for subscription ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:43:27.516Z] [STDOUT] Found 1 invoices for subscription: sub_QV1W0JNq2cOk7s
[2025-05-15T20:43:27.516Z] [STDOUT] Transaction for payment pay_QV1WoyCgCY23iO already exists in database (2 records), skipping
[2025-05-15T20:43:27.516Z] [STDOUT] Found 1 invoices for subscription sub_QV1W0JNq2cOk7s
[2025-05-15T20:43:27.516Z] [STDOUT] Processing subscription 26 with Razorpay ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:43:27.516Z] [STDOUT] Subscription 26 has 2 existing transactions
[2025-05-15T20:43:27.516Z] [STDOUT] Fetching invoices for subscription ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:43:27.516Z] [STDOUT] Found 2 invoices for subscription: sub_QVIG6dAuP0UXXn
[2025-05-15T20:43:27.516Z] [STDOUT] Transaction for payment pay_QVILKDuy9v6ovq already exists in database (1 records), skipping
[2025-05-15T20:43:27.516Z] [STDOUT] Transaction for payment pay_QVIGtXTXkm93W8 already exists in database (1 records), skipping
[2025-05-15T20:43:27.516Z] [STDOUT] Found 2 invoices for subscription sub_QVIG6dAuP0UXXn
[2025-05-15T20:43:27.516Z] [STDOUT] Subscription invoice synchronization complete!
[2025-05-15T20:43:27.516Z] [STDOUT] Processed 4 subscriptions
[2025-05-15T20:43:27.516Z] [STDOUT] Success: 4, Errors: 0
[2025-05-15T20:43:27.516Z] [STDOUT] Added 0 new transactions
[2025-05-15T20:43:27.516Z] [STDOUT] Script execution completed
[2025-05-15T20:43:27.516Z] Synchronization completed successfully
[2025-05-15T20:43:27.516Z] Next sync scheduled in 5 seconds
[2025-05-15T20:43:30.232Z] [STDOUT] Using database connection: postgres://***:***@localhost:5432/prosumeai
[2025-05-15T20:43:30.232Z] [STDOUT] Starting subscription invoice synchronization...
[2025-05-15T20:43:30.232Z] [STDOUT] Database schema validated successfully
[2025-05-15T20:43:30.232Z] [STDOUT] Found 4 active Razorpay subscriptions to sync
[2025-05-15T20:43:30.232Z] [STDOUT] Processing subscription 20 with Razorpay ID: sub_QUxcCis3igdqUA
[2025-05-15T20:43:30.232Z] [STDOUT] Subscription 20 has 1 existing transactions
[2025-05-15T20:43:30.232Z] [STDOUT] Razorpay initialization in progress, waiting...
[2025-05-15T20:43:30.232Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:43:30.232Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:43:30.232Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:43:30.232Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:43:30.232Z] [STDOUT] Fetching invoices for subscription ID: sub_QUxcCis3igdqUA
[2025-05-15T20:43:30.232Z] [STDOUT] Found 0 invoices for subscription: sub_QUxcCis3igdqUA
[2025-05-15T20:43:30.232Z] [STDOUT] Found 0 invoices for subscription sub_QUxcCis3igdqUA
[2025-05-15T20:43:30.232Z] [STDOUT] Processing subscription 24 with Razorpay ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:43:30.232Z] [STDOUT] Subscription 24 has 1 existing transactions
[2025-05-15T20:43:30.232Z] [STDOUT] Fetching invoices for subscription ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:43:30.232Z] [STDOUT] Found 1 invoices for subscription: sub_QV05DCrgh3A2rL
[2025-05-15T20:43:30.232Z] [STDOUT] Transaction for payment pay_QV05q44fHQzL1q already exists in database (1 records), skipping
[2025-05-15T20:43:30.232Z] [STDOUT] Found 1 invoices for subscription sub_QV05DCrgh3A2rL
[2025-05-15T20:43:30.232Z] [STDOUT] Processing subscription 25 with Razorpay ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:43:30.232Z] [STDOUT] Subscription 25 has 2 existing transactions
[2025-05-15T20:43:30.232Z] [STDOUT] Fetching invoices for subscription ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:43:30.232Z] [STDOUT] Found 1 invoices for subscription: sub_QV1W0JNq2cOk7s
[2025-05-15T20:43:30.232Z] [STDOUT] Transaction for payment pay_QV1WoyCgCY23iO already exists in database (2 records), skipping
[2025-05-15T20:43:30.232Z] [STDOUT] Found 1 invoices for subscription sub_QV1W0JNq2cOk7s
[2025-05-15T20:43:30.232Z] [STDOUT] Processing subscription 26 with Razorpay ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:43:30.232Z] [STDOUT] Subscription 26 has 2 existing transactions
[2025-05-15T20:43:30.232Z] [STDOUT] Fetching invoices for subscription ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:43:30.232Z] [STDOUT] Found 2 invoices for subscription: sub_QVIG6dAuP0UXXn
[2025-05-15T20:43:30.232Z] [STDOUT] Transaction for payment pay_QVILKDuy9v6ovq already exists in database (1 records), skipping
[2025-05-15T20:43:30.232Z] [STDOUT] Transaction for payment pay_QVIGtXTXkm93W8 already exists in database (1 records), skipping
[2025-05-15T20:43:30.232Z] [STDOUT] Found 2 invoices for subscription sub_QVIG6dAuP0UXXn
[2025-05-15T20:43:30.232Z] [STDOUT] Subscription invoice synchronization complete!
[2025-05-15T20:43:30.232Z] [STDOUT] Processed 4 subscriptions
[2025-05-15T20:43:30.232Z] [STDOUT] Success: 4, Errors: 0
[2025-05-15T20:43:30.232Z] [STDOUT] Added 0 new transactions
[2025-05-15T20:43:30.233Z] [STDOUT] Script execution completed
[2025-05-15T20:43:30.233Z] Synchronization completed successfully
[2025-05-15T20:43:30.233Z] Next sync scheduled in 5 seconds
[2025-05-15T20:43:30.873Z] Starting invoice synchronization...
[2025-05-15T20:43:30.874Z] Running sync script: /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:43:30.874Z] Executing command: cd /Users/raja/Development/ProsumeAI/server && npx tsx /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:43:35.874Z] Starting invoice synchronization...
[2025-05-15T20:43:35.875Z] Running sync script: /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:43:35.875Z] Executing command: cd /Users/raja/Development/ProsumeAI/server && npx tsx /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:43:35.929Z] [STDOUT] Using database connection: postgres://***:***@localhost:5432/prosumeai
[2025-05-15T20:43:35.929Z] [STDOUT] Starting subscription invoice synchronization...
[2025-05-15T20:43:35.929Z] [STDOUT] Database schema validated successfully
[2025-05-15T20:43:35.929Z] [STDOUT] Found 4 active Razorpay subscriptions to sync
[2025-05-15T20:43:35.929Z] [STDOUT] Processing subscription 20 with Razorpay ID: sub_QUxcCis3igdqUA
[2025-05-15T20:43:35.929Z] [STDOUT] Subscription 20 has 1 existing transactions
[2025-05-15T20:43:35.929Z] [STDOUT] Razorpay initialization in progress, waiting...
[2025-05-15T20:43:35.929Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:43:35.929Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:43:35.929Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:43:35.929Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:43:35.929Z] [STDOUT] Fetching invoices for subscription ID: sub_QUxcCis3igdqUA
[2025-05-15T20:43:35.929Z] [STDOUT] Found 0 invoices for subscription: sub_QUxcCis3igdqUA
[2025-05-15T20:43:35.929Z] [STDOUT] Found 0 invoices for subscription sub_QUxcCis3igdqUA
[2025-05-15T20:43:35.929Z] [STDOUT] Processing subscription 24 with Razorpay ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:43:35.929Z] [STDOUT] Subscription 24 has 1 existing transactions
[2025-05-15T20:43:35.929Z] [STDOUT] Fetching invoices for subscription ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:43:35.929Z] [STDOUT] Found 1 invoices for subscription: sub_QV05DCrgh3A2rL
[2025-05-15T20:43:35.929Z] [STDOUT] Transaction for payment pay_QV05q44fHQzL1q already exists in database (1 records), skipping
[2025-05-15T20:43:35.929Z] [STDOUT] Found 1 invoices for subscription sub_QV05DCrgh3A2rL
[2025-05-15T20:43:35.929Z] [STDOUT] Processing subscription 25 with Razorpay ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:43:35.929Z] [STDOUT] Subscription 25 has 2 existing transactions
[2025-05-15T20:43:35.929Z] [STDOUT] Fetching invoices for subscription ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:43:35.929Z] [STDOUT] Found 1 invoices for subscription: sub_QV1W0JNq2cOk7s
[2025-05-15T20:43:35.929Z] [STDOUT] Transaction for payment pay_QV1WoyCgCY23iO already exists in database (2 records), skipping
[2025-05-15T20:43:35.929Z] [STDOUT] Found 1 invoices for subscription sub_QV1W0JNq2cOk7s
[2025-05-15T20:43:35.929Z] [STDOUT] Processing subscription 26 with Razorpay ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:43:35.929Z] [STDOUT] Subscription 26 has 2 existing transactions
[2025-05-15T20:43:35.929Z] [STDOUT] Fetching invoices for subscription ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:43:35.929Z] [STDOUT] Found 2 invoices for subscription: sub_QVIG6dAuP0UXXn
[2025-05-15T20:43:35.929Z] [STDOUT] Transaction for payment pay_QVILKDuy9v6ovq already exists in database (1 records), skipping
[2025-05-15T20:43:35.929Z] [STDOUT] Transaction for payment pay_QVIGtXTXkm93W8 already exists in database (1 records), skipping
[2025-05-15T20:43:35.929Z] [STDOUT] Found 2 invoices for subscription sub_QVIG6dAuP0UXXn
[2025-05-15T20:43:35.929Z] [STDOUT] Subscription invoice synchronization complete!
[2025-05-15T20:43:35.929Z] [STDOUT] Processed 4 subscriptions
[2025-05-15T20:43:35.929Z] [STDOUT] Success: 4, Errors: 0
[2025-05-15T20:43:35.929Z] [STDOUT] Added 0 new transactions
[2025-05-15T20:43:35.929Z] [STDOUT] Script execution completed
[2025-05-15T20:43:35.929Z] Synchronization completed successfully
[2025-05-15T20:43:35.929Z] Next sync scheduled in 5 seconds
[2025-05-15T20:43:40.875Z] Starting invoice synchronization...
[2025-05-15T20:43:40.875Z] Running sync script: /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:43:40.875Z] Executing command: cd /Users/raja/Development/ProsumeAI/server && npx tsx /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:43:40.925Z] [STDOUT] Using database connection: postgres://***:***@localhost:5432/prosumeai
[2025-05-15T20:43:40.925Z] [STDOUT] Starting subscription invoice synchronization...
[2025-05-15T20:43:40.925Z] [STDOUT] Database schema validated successfully
[2025-05-15T20:43:40.925Z] [STDOUT] Found 4 active Razorpay subscriptions to sync
[2025-05-15T20:43:40.925Z] [STDOUT] Processing subscription 20 with Razorpay ID: sub_QUxcCis3igdqUA
[2025-05-15T20:43:40.925Z] [STDOUT] Subscription 20 has 1 existing transactions
[2025-05-15T20:43:40.925Z] [STDOUT] Razorpay initialization in progress, waiting...
[2025-05-15T20:43:40.925Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:43:40.925Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:43:40.925Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:43:40.925Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:43:40.925Z] [STDOUT] Fetching invoices for subscription ID: sub_QUxcCis3igdqUA
[2025-05-15T20:43:40.925Z] [STDOUT] Found 0 invoices for subscription: sub_QUxcCis3igdqUA
[2025-05-15T20:43:40.925Z] [STDOUT] Found 0 invoices for subscription sub_QUxcCis3igdqUA
[2025-05-15T20:43:40.925Z] [STDOUT] Processing subscription 24 with Razorpay ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:43:40.925Z] [STDOUT] Subscription 24 has 1 existing transactions
[2025-05-15T20:43:40.925Z] [STDOUT] Fetching invoices for subscription ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:43:40.925Z] [STDOUT] Found 1 invoices for subscription: sub_QV05DCrgh3A2rL
[2025-05-15T20:43:40.925Z] [STDOUT] Transaction for payment pay_QV05q44fHQzL1q already exists in database (1 records), skipping
[2025-05-15T20:43:40.925Z] [STDOUT] Found 1 invoices for subscription sub_QV05DCrgh3A2rL
[2025-05-15T20:43:40.925Z] [STDOUT] Processing subscription 25 with Razorpay ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:43:40.925Z] [STDOUT] Subscription 25 has 2 existing transactions
[2025-05-15T20:43:40.925Z] [STDOUT] Fetching invoices for subscription ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:43:40.925Z] [STDOUT] Found 1 invoices for subscription: sub_QV1W0JNq2cOk7s
[2025-05-15T20:43:40.925Z] [STDOUT] Transaction for payment pay_QV1WoyCgCY23iO already exists in database (2 records), skipping
[2025-05-15T20:43:40.925Z] [STDOUT] Found 1 invoices for subscription sub_QV1W0JNq2cOk7s
[2025-05-15T20:43:40.925Z] [STDOUT] Processing subscription 26 with Razorpay ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:43:40.925Z] [STDOUT] Subscription 26 has 2 existing transactions
[2025-05-15T20:43:40.925Z] [STDOUT] Fetching invoices for subscription ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:43:40.925Z] [STDOUT] Found 2 invoices for subscription: sub_QVIG6dAuP0UXXn
[2025-05-15T20:43:40.925Z] [STDOUT] Transaction for payment pay_QVILKDuy9v6ovq already exists in database (1 records), skipping
[2025-05-15T20:43:40.925Z] [STDOUT] Transaction for payment pay_QVIGtXTXkm93W8 already exists in database (1 records), skipping
[2025-05-15T20:43:40.925Z] [STDOUT] Found 2 invoices for subscription sub_QVIG6dAuP0UXXn
[2025-05-15T20:43:40.925Z] [STDOUT] Subscription invoice synchronization complete!
[2025-05-15T20:43:40.925Z] [STDOUT] Processed 4 subscriptions
[2025-05-15T20:43:40.925Z] [STDOUT] Success: 4, Errors: 0
[2025-05-15T20:43:40.925Z] [STDOUT] Added 0 new transactions
[2025-05-15T20:43:40.925Z] [STDOUT] Script execution completed
[2025-05-15T20:43:40.925Z] Synchronization completed successfully
[2025-05-15T20:43:40.925Z] Next sync scheduled in 5 seconds
[2025-05-15T20:43:45.232Z] [STDOUT] Using database connection: postgres://***:***@localhost:5432/prosumeai
[2025-05-15T20:43:45.233Z] [STDOUT] Starting subscription invoice synchronization...
[2025-05-15T20:43:45.233Z] [STDOUT] Database schema validated successfully
[2025-05-15T20:43:45.233Z] [STDOUT] Found 4 active Razorpay subscriptions to sync
[2025-05-15T20:43:45.233Z] [STDOUT] Processing subscription 20 with Razorpay ID: sub_QUxcCis3igdqUA
[2025-05-15T20:43:45.233Z] [STDOUT] Subscription 20 has 1 existing transactions
[2025-05-15T20:43:45.233Z] [STDOUT] Razorpay initialization in progress, waiting...
[2025-05-15T20:43:45.233Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:43:45.233Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:43:45.233Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:43:45.233Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:43:45.233Z] [STDOUT] Fetching invoices for subscription ID: sub_QUxcCis3igdqUA
[2025-05-15T20:43:45.233Z] [STDOUT] Found 0 invoices for subscription: sub_QUxcCis3igdqUA
[2025-05-15T20:43:45.233Z] [STDOUT] Found 0 invoices for subscription sub_QUxcCis3igdqUA
[2025-05-15T20:43:45.233Z] [STDOUT] Processing subscription 24 with Razorpay ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:43:45.233Z] [STDOUT] Subscription 24 has 1 existing transactions
[2025-05-15T20:43:45.233Z] [STDOUT] Fetching invoices for subscription ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:43:45.233Z] [STDOUT] Found 1 invoices for subscription: sub_QV05DCrgh3A2rL
[2025-05-15T20:43:45.233Z] [STDOUT] Transaction for payment pay_QV05q44fHQzL1q already exists in database (1 records), skipping
[2025-05-15T20:43:45.233Z] [STDOUT] Found 1 invoices for subscription sub_QV05DCrgh3A2rL
[2025-05-15T20:43:45.233Z] [STDOUT] Processing subscription 25 with Razorpay ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:43:45.233Z] [STDOUT] Subscription 25 has 2 existing transactions
[2025-05-15T20:43:45.233Z] [STDOUT] Fetching invoices for subscription ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:43:45.233Z] [STDOUT] Found 1 invoices for subscription: sub_QV1W0JNq2cOk7s
[2025-05-15T20:43:45.233Z] [STDOUT] Transaction for payment pay_QV1WoyCgCY23iO already exists in database (2 records), skipping
[2025-05-15T20:43:45.233Z] [STDOUT] Found 1 invoices for subscription sub_QV1W0JNq2cOk7s
[2025-05-15T20:43:45.233Z] [STDOUT] Processing subscription 26 with Razorpay ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:43:45.233Z] [STDOUT] Subscription 26 has 2 existing transactions
[2025-05-15T20:43:45.233Z] [STDOUT] Fetching invoices for subscription ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:43:45.233Z] [STDOUT] Found 2 invoices for subscription: sub_QVIG6dAuP0UXXn
[2025-05-15T20:43:45.233Z] [STDOUT] Transaction for payment pay_QVILKDuy9v6ovq already exists in database (1 records), skipping
[2025-05-15T20:43:45.233Z] [STDOUT] Transaction for payment pay_QVIGtXTXkm93W8 already exists in database (1 records), skipping
[2025-05-15T20:43:45.233Z] [STDOUT] Found 2 invoices for subscription sub_QVIG6dAuP0UXXn
[2025-05-15T20:43:45.233Z] [STDOUT] Subscription invoice synchronization complete!
[2025-05-15T20:43:45.233Z] [STDOUT] Processed 4 subscriptions
[2025-05-15T20:43:45.233Z] [STDOUT] Success: 4, Errors: 0
[2025-05-15T20:43:45.233Z] [STDOUT] Added 0 new transactions
[2025-05-15T20:43:45.233Z] [STDOUT] Script execution completed
[2025-05-15T20:43:45.233Z] Synchronization completed successfully
[2025-05-15T20:43:45.233Z] Next sync scheduled in 5 seconds
[2025-05-15T20:43:45.876Z] Starting invoice synchronization...
[2025-05-15T20:43:45.876Z] Running sync script: /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:43:45.876Z] Executing command: cd /Users/raja/Development/ProsumeAI/server && npx tsx /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:43:50.877Z] Starting invoice synchronization...
[2025-05-15T20:43:50.877Z] Running sync script: /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:43:50.877Z] Executing command: cd /Users/raja/Development/ProsumeAI/server && npx tsx /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:43:55.503Z] [STDOUT] Using database connection: postgres://***:***@localhost:5432/prosumeai
[2025-05-15T20:43:55.503Z] [STDOUT] Starting subscription invoice synchronization...
[2025-05-15T20:43:55.503Z] [STDOUT] Database schema validated successfully
[2025-05-15T20:43:55.503Z] [STDOUT] Found 4 active Razorpay subscriptions to sync
[2025-05-15T20:43:55.503Z] [STDOUT] Processing subscription 20 with Razorpay ID: sub_QUxcCis3igdqUA
[2025-05-15T20:43:55.503Z] [STDOUT] Subscription 20 has 1 existing transactions
[2025-05-15T20:43:55.503Z] [STDOUT] Razorpay initialization in progress, waiting...
[2025-05-15T20:43:55.503Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:43:55.503Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:43:55.503Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:43:55.503Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:43:55.503Z] [STDOUT] Fetching invoices for subscription ID: sub_QUxcCis3igdqUA
[2025-05-15T20:43:55.503Z] [STDOUT] Found 0 invoices for subscription: sub_QUxcCis3igdqUA
[2025-05-15T20:43:55.503Z] [STDOUT] Found 0 invoices for subscription sub_QUxcCis3igdqUA
[2025-05-15T20:43:55.503Z] [STDOUT] Processing subscription 24 with Razorpay ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:43:55.503Z] [STDOUT] Subscription 24 has 1 existing transactions
[2025-05-15T20:43:55.503Z] [STDOUT] Fetching invoices for subscription ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:43:55.503Z] [STDOUT] Found 1 invoices for subscription: sub_QV05DCrgh3A2rL
[2025-05-15T20:43:55.503Z] [STDOUT] Transaction for payment pay_QV05q44fHQzL1q already exists in database (1 records), skipping
[2025-05-15T20:43:55.503Z] [STDOUT] Found 1 invoices for subscription sub_QV05DCrgh3A2rL
[2025-05-15T20:43:55.503Z] [STDOUT] Processing subscription 25 with Razorpay ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:43:55.503Z] [STDOUT] Subscription 25 has 2 existing transactions
[2025-05-15T20:43:55.503Z] [STDOUT] Fetching invoices for subscription ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:43:55.503Z] [STDOUT] Found 1 invoices for subscription: sub_QV1W0JNq2cOk7s
[2025-05-15T20:43:55.503Z] [STDOUT] Transaction for payment pay_QV1WoyCgCY23iO already exists in database (2 records), skipping
[2025-05-15T20:43:55.503Z] [STDOUT] Found 1 invoices for subscription sub_QV1W0JNq2cOk7s
[2025-05-15T20:43:55.503Z] [STDOUT] Processing subscription 26 with Razorpay ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:43:55.503Z] [STDOUT] Subscription 26 has 2 existing transactions
[2025-05-15T20:43:55.503Z] [STDOUT] Fetching invoices for subscription ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:43:55.503Z] [STDOUT] Found 2 invoices for subscription: sub_QVIG6dAuP0UXXn
[2025-05-15T20:43:55.503Z] [STDOUT] Transaction for payment pay_QVILKDuy9v6ovq already exists in database (1 records), skipping
[2025-05-15T20:43:55.503Z] [STDOUT] Transaction for payment pay_QVIGtXTXkm93W8 already exists in database (1 records), skipping
[2025-05-15T20:43:55.503Z] [STDOUT] Found 2 invoices for subscription sub_QVIG6dAuP0UXXn
[2025-05-15T20:43:55.503Z] [STDOUT] Subscription invoice synchronization complete!
[2025-05-15T20:43:55.503Z] [STDOUT] Processed 4 subscriptions
[2025-05-15T20:43:55.503Z] [STDOUT] Success: 4, Errors: 0
[2025-05-15T20:43:55.503Z] [STDOUT] Added 0 new transactions
[2025-05-15T20:43:55.503Z] [STDOUT] Script execution completed
[2025-05-15T20:43:55.503Z] Synchronization completed successfully
[2025-05-15T20:43:55.503Z] Next sync scheduled in 5 seconds
[2025-05-15T20:43:55.878Z] Starting invoice synchronization...
[2025-05-15T20:43:55.878Z] Running sync script: /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:43:55.878Z] Executing command: cd /Users/raja/Development/ProsumeAI/server && npx tsx /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:43:56.989Z] [STDOUT] Using database connection: postgres://***:***@localhost:5432/prosumeai
[2025-05-15T20:43:56.989Z] [STDOUT] Starting subscription invoice synchronization...
[2025-05-15T20:43:56.989Z] [STDOUT] Database schema validated successfully
[2025-05-15T20:43:56.989Z] [STDOUT] Found 4 active Razorpay subscriptions to sync
[2025-05-15T20:43:56.989Z] [STDOUT] Processing subscription 20 with Razorpay ID: sub_QUxcCis3igdqUA
[2025-05-15T20:43:56.989Z] [STDOUT] Subscription 20 has 1 existing transactions
[2025-05-15T20:43:56.989Z] [STDOUT] Razorpay initialization in progress, waiting...
[2025-05-15T20:43:56.989Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:43:56.989Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:43:56.989Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:43:56.989Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:43:56.989Z] [STDOUT] Fetching invoices for subscription ID: sub_QUxcCis3igdqUA
[2025-05-15T20:43:56.989Z] [STDOUT] Found 0 invoices for subscription: sub_QUxcCis3igdqUA
[2025-05-15T20:43:56.989Z] [STDOUT] Found 0 invoices for subscription sub_QUxcCis3igdqUA
[2025-05-15T20:43:56.989Z] [STDOUT] Processing subscription 24 with Razorpay ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:43:56.989Z] [STDOUT] Subscription 24 has 1 existing transactions
[2025-05-15T20:43:56.989Z] [STDOUT] Fetching invoices for subscription ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:43:56.989Z] [STDOUT] Found 1 invoices for subscription: sub_QV05DCrgh3A2rL
[2025-05-15T20:43:56.989Z] [STDOUT] Transaction for payment pay_QV05q44fHQzL1q already exists in database (1 records), skipping
[2025-05-15T20:43:56.989Z] [STDOUT] Found 1 invoices for subscription sub_QV05DCrgh3A2rL
[2025-05-15T20:43:56.989Z] [STDOUT] Processing subscription 25 with Razorpay ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:43:56.989Z] [STDOUT] Subscription 25 has 2 existing transactions
[2025-05-15T20:43:56.989Z] [STDOUT] Fetching invoices for subscription ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:43:56.989Z] [STDOUT] Found 1 invoices for subscription: sub_QV1W0JNq2cOk7s
[2025-05-15T20:43:56.989Z] [STDOUT] Transaction for payment pay_QV1WoyCgCY23iO already exists in database (2 records), skipping
[2025-05-15T20:43:56.989Z] [STDOUT] Found 1 invoices for subscription sub_QV1W0JNq2cOk7s
[2025-05-15T20:43:56.989Z] [STDOUT] Processing subscription 26 with Razorpay ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:43:56.989Z] [STDOUT] Subscription 26 has 2 existing transactions
[2025-05-15T20:43:56.989Z] [STDOUT] Fetching invoices for subscription ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:43:56.989Z] [STDOUT] Found 2 invoices for subscription: sub_QVIG6dAuP0UXXn
[2025-05-15T20:43:56.989Z] [STDOUT] Transaction for payment pay_QVILKDuy9v6ovq already exists in database (1 records), skipping
[2025-05-15T20:43:56.989Z] [STDOUT] Transaction for payment pay_QVIGtXTXkm93W8 already exists in database (1 records), skipping
[2025-05-15T20:43:56.989Z] [STDOUT] Found 2 invoices for subscription sub_QVIG6dAuP0UXXn
[2025-05-15T20:43:56.989Z] [STDOUT] Subscription invoice synchronization complete!
[2025-05-15T20:43:56.989Z] [STDOUT] Processed 4 subscriptions
[2025-05-15T20:43:56.989Z] [STDOUT] Success: 4, Errors: 0
[2025-05-15T20:43:56.989Z] [STDOUT] Added 0 new transactions
[2025-05-15T20:43:56.989Z] [STDOUT] Script execution completed
[2025-05-15T20:43:56.989Z] Synchronization completed successfully
[2025-05-15T20:43:56.989Z] Next sync scheduled in 5 seconds
[2025-05-15T20:44:00.794Z] [STDOUT] Using database connection: postgres://***:***@localhost:5432/prosumeai
[2025-05-15T20:44:00.794Z] [STDOUT] Starting subscription invoice synchronization...
[2025-05-15T20:44:00.794Z] [STDOUT] Database schema validated successfully
[2025-05-15T20:44:00.794Z] [STDOUT] Found 4 active Razorpay subscriptions to sync
[2025-05-15T20:44:00.794Z] [STDOUT] Processing subscription 20 with Razorpay ID: sub_QUxcCis3igdqUA
[2025-05-15T20:44:00.794Z] [STDOUT] Subscription 20 has 1 existing transactions
[2025-05-15T20:44:00.794Z] [STDOUT] Razorpay initialization in progress, waiting...
[2025-05-15T20:44:00.794Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:44:00.794Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:44:00.794Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:44:00.794Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:44:00.794Z] [STDOUT] Fetching invoices for subscription ID: sub_QUxcCis3igdqUA
[2025-05-15T20:44:00.794Z] [STDOUT] Found 0 invoices for subscription: sub_QUxcCis3igdqUA
[2025-05-15T20:44:00.794Z] [STDOUT] Found 0 invoices for subscription sub_QUxcCis3igdqUA
[2025-05-15T20:44:00.794Z] [STDOUT] Processing subscription 24 with Razorpay ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:44:00.794Z] [STDOUT] Subscription 24 has 1 existing transactions
[2025-05-15T20:44:00.794Z] [STDOUT] Fetching invoices for subscription ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:44:00.794Z] [STDOUT] Found 1 invoices for subscription: sub_QV05DCrgh3A2rL
[2025-05-15T20:44:00.794Z] [STDOUT] Transaction for payment pay_QV05q44fHQzL1q already exists in database (1 records), skipping
[2025-05-15T20:44:00.794Z] [STDOUT] Found 1 invoices for subscription sub_QV05DCrgh3A2rL
[2025-05-15T20:44:00.794Z] [STDOUT] Processing subscription 25 with Razorpay ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:44:00.794Z] [STDOUT] Subscription 25 has 2 existing transactions
[2025-05-15T20:44:00.794Z] [STDOUT] Fetching invoices for subscription ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:44:00.794Z] [STDOUT] Found 1 invoices for subscription: sub_QV1W0JNq2cOk7s
[2025-05-15T20:44:00.794Z] [STDOUT] Transaction for payment pay_QV1WoyCgCY23iO already exists in database (2 records), skipping
[2025-05-15T20:44:00.794Z] [STDOUT] Found 1 invoices for subscription sub_QV1W0JNq2cOk7s
[2025-05-15T20:44:00.794Z] [STDOUT] Processing subscription 26 with Razorpay ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:44:00.794Z] [STDOUT] Subscription 26 has 2 existing transactions
[2025-05-15T20:44:00.794Z] [STDOUT] Fetching invoices for subscription ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:44:00.794Z] [STDOUT] Found 2 invoices for subscription: sub_QVIG6dAuP0UXXn
[2025-05-15T20:44:00.794Z] [STDOUT] Transaction for payment pay_QVILKDuy9v6ovq already exists in database (1 records), skipping
[2025-05-15T20:44:00.794Z] [STDOUT] Transaction for payment pay_QVIGtXTXkm93W8 already exists in database (1 records), skipping
[2025-05-15T20:44:00.794Z] [STDOUT] Found 2 invoices for subscription sub_QVIG6dAuP0UXXn
[2025-05-15T20:44:00.794Z] [STDOUT] Subscription invoice synchronization complete!
[2025-05-15T20:44:00.794Z] [STDOUT] Processed 4 subscriptions
[2025-05-15T20:44:00.794Z] [STDOUT] Success: 4, Errors: 0
[2025-05-15T20:44:00.794Z] [STDOUT] Added 0 new transactions
[2025-05-15T20:44:00.794Z] [STDOUT] Script execution completed
[2025-05-15T20:44:00.794Z] Synchronization completed successfully
[2025-05-15T20:44:00.794Z] Next sync scheduled in 5 seconds
[2025-05-15T20:44:00.879Z] Starting invoice synchronization...
[2025-05-15T20:44:00.879Z] Running sync script: /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:44:00.879Z] Executing command: cd /Users/raja/Development/ProsumeAI/server && npx tsx /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:44:05.087Z] [STDOUT] Using database connection: postgres://***:***@localhost:5432/prosumeai
[2025-05-15T20:44:05.087Z] [STDOUT] Starting subscription invoice synchronization...
[2025-05-15T20:44:05.087Z] [STDOUT] Found 4 active Razorpay subscriptions to sync
[2025-05-15T20:44:05.087Z] [STDOUT] Processing subscription 20 with Razorpay ID: sub_QUxcCis3igdqUA
[2025-05-15T20:44:05.087Z] [STDOUT] Database schema validated successfully
[2025-05-15T20:44:05.087Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:44:05.087Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:44:05.087Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:44:05.087Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:44:05.087Z] [STDOUT] Subscription 20 has 1 existing transactions
[2025-05-15T20:44:05.087Z] [STDOUT] Fetching invoices for subscription ID: sub_QUxcCis3igdqUA
[2025-05-15T20:44:05.087Z] [STDOUT] Found 0 invoices for subscription: sub_QUxcCis3igdqUA
[2025-05-15T20:44:05.087Z] [STDOUT] Found 0 invoices for subscription sub_QUxcCis3igdqUA
[2025-05-15T20:44:05.087Z] [STDOUT] Processing subscription 24 with Razorpay ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:44:05.087Z] [STDOUT] Subscription 24 has 1 existing transactions
[2025-05-15T20:44:05.087Z] [STDOUT] Fetching invoices for subscription ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:44:05.087Z] [STDOUT] Found 1 invoices for subscription: sub_QV05DCrgh3A2rL
[2025-05-15T20:44:05.087Z] [STDOUT] Transaction for payment pay_QV05q44fHQzL1q already exists in database (1 records), skipping
[2025-05-15T20:44:05.087Z] [STDOUT] Found 1 invoices for subscription sub_QV05DCrgh3A2rL
[2025-05-15T20:44:05.087Z] [STDOUT] Processing subscription 25 with Razorpay ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:44:05.087Z] [STDOUT] Subscription 25 has 2 existing transactions
[2025-05-15T20:44:05.087Z] [STDOUT] Fetching invoices for subscription ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:44:05.087Z] [STDOUT] Found 1 invoices for subscription: sub_QV1W0JNq2cOk7s
[2025-05-15T20:44:05.087Z] [STDOUT] Transaction for payment pay_QV1WoyCgCY23iO already exists in database (2 records), skipping
[2025-05-15T20:44:05.087Z] [STDOUT] Found 1 invoices for subscription sub_QV1W0JNq2cOk7s
[2025-05-15T20:44:05.087Z] [STDOUT] Processing subscription 26 with Razorpay ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:44:05.087Z] [STDOUT] Subscription 26 has 2 existing transactions
[2025-05-15T20:44:05.087Z] [STDOUT] Fetching invoices for subscription ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:44:05.087Z] [STDOUT] Found 2 invoices for subscription: sub_QVIG6dAuP0UXXn
[2025-05-15T20:44:05.087Z] [STDOUT] Transaction for payment pay_QVILKDuy9v6ovq already exists in database (1 records), skipping
[2025-05-15T20:44:05.087Z] [STDOUT] Transaction for payment pay_QVIGtXTXkm93W8 already exists in database (1 records), skipping
[2025-05-15T20:44:05.087Z] [STDOUT] Found 2 invoices for subscription sub_QVIG6dAuP0UXXn
[2025-05-15T20:44:05.087Z] [STDOUT] Subscription invoice synchronization complete!
[2025-05-15T20:44:05.087Z] [STDOUT] Processed 4 subscriptions
[2025-05-15T20:44:05.087Z] [STDOUT] Success: 4, Errors: 0
[2025-05-15T20:44:05.087Z] [STDOUT] Added 0 new transactions
[2025-05-15T20:44:05.087Z] [STDOUT] Script execution completed
[2025-05-15T20:44:05.087Z] Synchronization completed successfully
[2025-05-15T20:44:05.087Z] Next sync scheduled in 5 seconds
[2025-05-15T20:44:05.879Z] Starting invoice synchronization...
[2025-05-15T20:44:05.880Z] Running sync script: /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:44:05.880Z] Executing command: cd /Users/raja/Development/ProsumeAI/server && npx tsx /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:44:10.880Z] Starting invoice synchronization...
[2025-05-15T20:44:10.880Z] Running sync script: /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:44:10.881Z] Executing command: cd /Users/raja/Development/ProsumeAI/server && npx tsx /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:44:12.074Z] [STDOUT] Using database connection: postgres://***:***@localhost:5432/prosumeai
[2025-05-15T20:44:12.074Z] [STDOUT] Starting subscription invoice synchronization...
[2025-05-15T20:44:12.074Z] [STDOUT] Database schema validated successfully
[2025-05-15T20:44:12.074Z] [STDOUT] Found 4 active Razorpay subscriptions to sync
[2025-05-15T20:44:12.074Z] [STDOUT] Processing subscription 20 with Razorpay ID: sub_QUxcCis3igdqUA
[2025-05-15T20:44:12.074Z] [STDOUT] Subscription 20 has 1 existing transactions
[2025-05-15T20:44:12.074Z] [STDOUT] Razorpay initialization in progress, waiting...
[2025-05-15T20:44:12.074Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:44:12.074Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:44:12.074Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:44:12.074Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:44:12.074Z] [STDOUT] Fetching invoices for subscription ID: sub_QUxcCis3igdqUA
[2025-05-15T20:44:12.074Z] [STDOUT] Found 0 invoices for subscription: sub_QUxcCis3igdqUA
[2025-05-15T20:44:12.074Z] [STDOUT] Found 0 invoices for subscription sub_QUxcCis3igdqUA
[2025-05-15T20:44:12.074Z] [STDOUT] Processing subscription 24 with Razorpay ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:44:12.074Z] [STDOUT] Subscription 24 has 1 existing transactions
[2025-05-15T20:44:12.074Z] [STDOUT] Fetching invoices for subscription ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:44:12.074Z] [STDOUT] Found 1 invoices for subscription: sub_QV05DCrgh3A2rL
[2025-05-15T20:44:12.074Z] [STDOUT] Transaction for payment pay_QV05q44fHQzL1q already exists in database (1 records), skipping
[2025-05-15T20:44:12.074Z] [STDOUT] Found 1 invoices for subscription sub_QV05DCrgh3A2rL
[2025-05-15T20:44:12.074Z] [STDOUT] Processing subscription 25 with Razorpay ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:44:12.074Z] [STDOUT] Subscription 25 has 2 existing transactions
[2025-05-15T20:44:12.074Z] [STDOUT] Fetching invoices for subscription ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:44:12.074Z] [STDOUT] Found 1 invoices for subscription: sub_QV1W0JNq2cOk7s
[2025-05-15T20:44:12.074Z] [STDOUT] Transaction for payment pay_QV1WoyCgCY23iO already exists in database (2 records), skipping
[2025-05-15T20:44:12.075Z] [STDOUT] Found 1 invoices for subscription sub_QV1W0JNq2cOk7s
[2025-05-15T20:44:12.075Z] [STDOUT] Processing subscription 26 with Razorpay ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:44:12.075Z] [STDOUT] Subscription 26 has 2 existing transactions
[2025-05-15T20:44:12.075Z] [STDOUT] Fetching invoices for subscription ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:44:12.075Z] [STDOUT] Found 2 invoices for subscription: sub_QVIG6dAuP0UXXn
[2025-05-15T20:44:12.075Z] [STDOUT] Transaction for payment pay_QVILKDuy9v6ovq already exists in database (1 records), skipping
[2025-05-15T20:44:12.075Z] [STDOUT] Transaction for payment pay_QVIGtXTXkm93W8 already exists in database (1 records), skipping
[2025-05-15T20:44:12.075Z] [STDOUT] Found 2 invoices for subscription sub_QVIG6dAuP0UXXn
[2025-05-15T20:44:12.075Z] [STDOUT] Subscription invoice synchronization complete!
[2025-05-15T20:44:12.075Z] [STDOUT] Processed 4 subscriptions
[2025-05-15T20:44:12.075Z] [STDOUT] Success: 4, Errors: 0
[2025-05-15T20:44:12.075Z] [STDOUT] Added 0 new transactions
[2025-05-15T20:44:12.075Z] [STDOUT] Script execution completed
[2025-05-15T20:44:12.075Z] Synchronization completed successfully
[2025-05-15T20:44:12.075Z] Next sync scheduled in 5 seconds
[2025-05-15T20:44:15.573Z] [STDOUT] Using database connection: postgres://***:***@localhost:5432/prosumeai
[2025-05-15T20:44:15.573Z] [STDOUT] Starting subscription invoice synchronization...
[2025-05-15T20:44:15.573Z] [STDOUT] Database schema validated successfully
[2025-05-15T20:44:15.573Z] [STDOUT] Found 4 active Razorpay subscriptions to sync
[2025-05-15T20:44:15.573Z] [STDOUT] Processing subscription 20 with Razorpay ID: sub_QUxcCis3igdqUA
[2025-05-15T20:44:15.573Z] [STDOUT] Subscription 20 has 1 existing transactions
[2025-05-15T20:44:15.573Z] [STDOUT] Razorpay initialization in progress, waiting...
[2025-05-15T20:44:15.573Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:44:15.573Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:44:15.573Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:44:15.573Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:44:15.573Z] [STDOUT] Fetching invoices for subscription ID: sub_QUxcCis3igdqUA
[2025-05-15T20:44:15.573Z] [STDOUT] Found 0 invoices for subscription: sub_QUxcCis3igdqUA
[2025-05-15T20:44:15.573Z] [STDOUT] Found 0 invoices for subscription sub_QUxcCis3igdqUA
[2025-05-15T20:44:15.573Z] [STDOUT] Processing subscription 24 with Razorpay ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:44:15.573Z] [STDOUT] Subscription 24 has 1 existing transactions
[2025-05-15T20:44:15.573Z] [STDOUT] Fetching invoices for subscription ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:44:15.573Z] [STDOUT] Found 1 invoices for subscription: sub_QV05DCrgh3A2rL
[2025-05-15T20:44:15.573Z] [STDOUT] Transaction for payment pay_QV05q44fHQzL1q already exists in database (1 records), skipping
[2025-05-15T20:44:15.573Z] [STDOUT] Found 1 invoices for subscription sub_QV05DCrgh3A2rL
[2025-05-15T20:44:15.573Z] [STDOUT] Processing subscription 25 with Razorpay ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:44:15.573Z] [STDOUT] Subscription 25 has 2 existing transactions
[2025-05-15T20:44:15.573Z] [STDOUT] Fetching invoices for subscription ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:44:15.573Z] [STDOUT] Found 1 invoices for subscription: sub_QV1W0JNq2cOk7s
[2025-05-15T20:44:15.573Z] [STDOUT] Transaction for payment pay_QV1WoyCgCY23iO already exists in database (2 records), skipping
[2025-05-15T20:44:15.573Z] [STDOUT] Found 1 invoices for subscription sub_QV1W0JNq2cOk7s
[2025-05-15T20:44:15.573Z] [STDOUT] Processing subscription 26 with Razorpay ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:44:15.573Z] [STDOUT] Subscription 26 has 2 existing transactions
[2025-05-15T20:44:15.573Z] [STDOUT] Fetching invoices for subscription ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:44:15.573Z] [STDOUT] Found 2 invoices for subscription: sub_QVIG6dAuP0UXXn
[2025-05-15T20:44:15.573Z] [STDOUT] Transaction for payment pay_QVILKDuy9v6ovq already exists in database (1 records), skipping
[2025-05-15T20:44:15.573Z] [STDOUT] Transaction for payment pay_QVIGtXTXkm93W8 already exists in database (1 records), skipping
[2025-05-15T20:44:15.573Z] [STDOUT] Found 2 invoices for subscription sub_QVIG6dAuP0UXXn
[2025-05-15T20:44:15.573Z] [STDOUT] Subscription invoice synchronization complete!
[2025-05-15T20:44:15.573Z] [STDOUT] Processed 4 subscriptions
[2025-05-15T20:44:15.573Z] [STDOUT] Success: 4, Errors: 0
[2025-05-15T20:44:15.573Z] [STDOUT] Added 0 new transactions
[2025-05-15T20:44:15.573Z] [STDOUT] Script execution completed
[2025-05-15T20:44:15.573Z] Synchronization completed successfully
[2025-05-15T20:44:15.573Z] Next sync scheduled in 5 seconds
[2025-05-15T20:44:15.881Z] Starting invoice synchronization...
[2025-05-15T20:44:15.881Z] Running sync script: /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:44:15.881Z] Executing command: cd /Users/raja/Development/ProsumeAI/server && npx tsx /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:44:20.882Z] Starting invoice synchronization...
[2025-05-15T20:44:20.883Z] Running sync script: /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:44:20.883Z] Executing command: cd /Users/raja/Development/ProsumeAI/server && npx tsx /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:44:22.655Z] [STDOUT] Using database connection: postgres://***:***@localhost:5432/prosumeai
[2025-05-15T20:44:22.655Z] [STDOUT] Starting subscription invoice synchronization...
[2025-05-15T20:44:22.655Z] [STDOUT] Database schema validated successfully
[2025-05-15T20:44:22.655Z] [STDOUT] Found 4 active Razorpay subscriptions to sync
[2025-05-15T20:44:22.655Z] [STDOUT] Processing subscription 20 with Razorpay ID: sub_QUxcCis3igdqUA
[2025-05-15T20:44:22.655Z] [STDOUT] Subscription 20 has 1 existing transactions
[2025-05-15T20:44:22.655Z] [STDOUT] Razorpay initialization in progress, waiting...
[2025-05-15T20:44:22.655Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:44:22.655Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:44:22.655Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:44:22.655Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:44:22.655Z] [STDOUT] Fetching invoices for subscription ID: sub_QUxcCis3igdqUA
[2025-05-15T20:44:22.655Z] [STDOUT] Found 0 invoices for subscription: sub_QUxcCis3igdqUA
[2025-05-15T20:44:22.655Z] [STDOUT] Found 0 invoices for subscription sub_QUxcCis3igdqUA
[2025-05-15T20:44:22.655Z] [STDOUT] Processing subscription 24 with Razorpay ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:44:22.655Z] [STDOUT] Subscription 24 has 1 existing transactions
[2025-05-15T20:44:22.655Z] [STDOUT] Fetching invoices for subscription ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:44:22.655Z] [STDOUT] Found 1 invoices for subscription: sub_QV05DCrgh3A2rL
[2025-05-15T20:44:22.655Z] [STDOUT] Transaction for payment pay_QV05q44fHQzL1q already exists in database (1 records), skipping
[2025-05-15T20:44:22.655Z] [STDOUT] Found 1 invoices for subscription sub_QV05DCrgh3A2rL
[2025-05-15T20:44:22.655Z] [STDOUT] Processing subscription 25 with Razorpay ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:44:22.655Z] [STDOUT] Subscription 25 has 2 existing transactions
[2025-05-15T20:44:22.655Z] [STDOUT] Fetching invoices for subscription ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:44:22.655Z] [STDOUT] Found 1 invoices for subscription: sub_QV1W0JNq2cOk7s
[2025-05-15T20:44:22.655Z] [STDOUT] Transaction for payment pay_QV1WoyCgCY23iO already exists in database (2 records), skipping
[2025-05-15T20:44:22.655Z] [STDOUT] Found 1 invoices for subscription sub_QV1W0JNq2cOk7s
[2025-05-15T20:44:22.655Z] [STDOUT] Processing subscription 26 with Razorpay ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:44:22.655Z] [STDOUT] Subscription 26 has 2 existing transactions
[2025-05-15T20:44:22.655Z] [STDOUT] Fetching invoices for subscription ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:44:22.655Z] [STDOUT] Found 2 invoices for subscription: sub_QVIG6dAuP0UXXn
[2025-05-15T20:44:22.655Z] [STDOUT] Transaction for payment pay_QVILKDuy9v6ovq already exists in database (1 records), skipping
[2025-05-15T20:44:22.655Z] [STDOUT] Transaction for payment pay_QVIGtXTXkm93W8 already exists in database (1 records), skipping
[2025-05-15T20:44:22.655Z] [STDOUT] Found 2 invoices for subscription sub_QVIG6dAuP0UXXn
[2025-05-15T20:44:22.655Z] [STDOUT] Subscription invoice synchronization complete!
[2025-05-15T20:44:22.655Z] [STDOUT] Processed 4 subscriptions
[2025-05-15T20:44:22.655Z] [STDOUT] Success: 4, Errors: 0
[2025-05-15T20:44:22.655Z] [STDOUT] Added 0 new transactions
[2025-05-15T20:44:22.655Z] [STDOUT] Script execution completed
[2025-05-15T20:44:22.655Z] Synchronization completed successfully
[2025-05-15T20:44:22.655Z] Next sync scheduled in 5 seconds
[2025-05-15T20:44:25.842Z] [STDOUT] Using database connection: postgres://***:***@localhost:5432/prosumeai
[2025-05-15T20:44:25.842Z] [STDOUT] Starting subscription invoice synchronization...
[2025-05-15T20:44:25.842Z] [STDOUT] Found 4 active Razorpay subscriptions to sync
[2025-05-15T20:44:25.842Z] [STDOUT] Processing subscription 20 with Razorpay ID: sub_QUxcCis3igdqUA
[2025-05-15T20:44:25.842Z] [STDOUT] Database schema validated successfully
[2025-05-15T20:44:25.842Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:44:25.842Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:44:25.842Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:44:25.842Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:44:25.842Z] [STDOUT] Subscription 20 has 1 existing transactions
[2025-05-15T20:44:25.842Z] [STDOUT] Fetching invoices for subscription ID: sub_QUxcCis3igdqUA
[2025-05-15T20:44:25.842Z] [STDOUT] Found 0 invoices for subscription: sub_QUxcCis3igdqUA
[2025-05-15T20:44:25.842Z] [STDOUT] Found 0 invoices for subscription sub_QUxcCis3igdqUA
[2025-05-15T20:44:25.842Z] [STDOUT] Processing subscription 24 with Razorpay ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:44:25.842Z] [STDOUT] Subscription 24 has 1 existing transactions
[2025-05-15T20:44:25.842Z] [STDOUT] Fetching invoices for subscription ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:44:25.842Z] [STDOUT] Found 1 invoices for subscription: sub_QV05DCrgh3A2rL
[2025-05-15T20:44:25.842Z] [STDOUT] Transaction for payment pay_QV05q44fHQzL1q already exists in database (1 records), skipping
[2025-05-15T20:44:25.842Z] [STDOUT] Found 1 invoices for subscription sub_QV05DCrgh3A2rL
[2025-05-15T20:44:25.842Z] [STDOUT] Processing subscription 25 with Razorpay ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:44:25.842Z] [STDOUT] Subscription 25 has 2 existing transactions
[2025-05-15T20:44:25.842Z] [STDOUT] Fetching invoices for subscription ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:44:25.842Z] [STDOUT] Found 1 invoices for subscription: sub_QV1W0JNq2cOk7s
[2025-05-15T20:44:25.842Z] [STDOUT] Transaction for payment pay_QV1WoyCgCY23iO already exists in database (2 records), skipping
[2025-05-15T20:44:25.842Z] [STDOUT] Found 1 invoices for subscription sub_QV1W0JNq2cOk7s
[2025-05-15T20:44:25.842Z] [STDOUT] Processing subscription 26 with Razorpay ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:44:25.842Z] [STDOUT] Subscription 26 has 2 existing transactions
[2025-05-15T20:44:25.842Z] [STDOUT] Fetching invoices for subscription ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:44:25.842Z] [STDOUT] Found 2 invoices for subscription: sub_QVIG6dAuP0UXXn
[2025-05-15T20:44:25.842Z] [STDOUT] Transaction for payment pay_QVILKDuy9v6ovq already exists in database (1 records), skipping
[2025-05-15T20:44:25.842Z] [STDOUT] Transaction for payment pay_QVIGtXTXkm93W8 already exists in database (1 records), skipping
[2025-05-15T20:44:25.842Z] [STDOUT] Found 2 invoices for subscription sub_QVIG6dAuP0UXXn
[2025-05-15T20:44:25.842Z] [STDOUT] Subscription invoice synchronization complete!
[2025-05-15T20:44:25.842Z] [STDOUT] Processed 4 subscriptions
[2025-05-15T20:44:25.842Z] [STDOUT] Success: 4, Errors: 0
[2025-05-15T20:44:25.842Z] [STDOUT] Added 0 new transactions
[2025-05-15T20:44:25.842Z] [STDOUT] Script execution completed
[2025-05-15T20:44:25.842Z] Synchronization completed successfully
[2025-05-15T20:44:25.842Z] Next sync scheduled in 5 seconds
[2025-05-15T20:44:25.883Z] Starting invoice synchronization...
[2025-05-15T20:44:25.883Z] Running sync script: /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:44:25.883Z] Executing command: cd /Users/raja/Development/ProsumeAI/server && npx tsx /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:44:30.884Z] Starting invoice synchronization...
[2025-05-15T20:44:30.884Z] Running sync script: /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:44:30.884Z] Executing command: cd /Users/raja/Development/ProsumeAI/server && npx tsx /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:44:30.993Z] [STDOUT] Using database connection: postgres://***:***@localhost:5432/prosumeai
[2025-05-15T20:44:30.993Z] [STDOUT] Starting subscription invoice synchronization...
[2025-05-15T20:44:30.993Z] [STDOUT] Database schema validated successfully
[2025-05-15T20:44:30.993Z] [STDOUT] Found 4 active Razorpay subscriptions to sync
[2025-05-15T20:44:30.993Z] [STDOUT] Processing subscription 20 with Razorpay ID: sub_QUxcCis3igdqUA
[2025-05-15T20:44:30.993Z] [STDOUT] Subscription 20 has 1 existing transactions
[2025-05-15T20:44:30.993Z] [STDOUT] Razorpay initialization in progress, waiting...
[2025-05-15T20:44:30.993Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:44:30.993Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:44:30.993Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:44:30.993Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:44:30.993Z] [STDOUT] Fetching invoices for subscription ID: sub_QUxcCis3igdqUA
[2025-05-15T20:44:30.993Z] [STDOUT] Found 0 invoices for subscription: sub_QUxcCis3igdqUA
[2025-05-15T20:44:30.993Z] [STDOUT] Found 0 invoices for subscription sub_QUxcCis3igdqUA
[2025-05-15T20:44:30.993Z] [STDOUT] Processing subscription 24 with Razorpay ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:44:30.993Z] [STDOUT] Subscription 24 has 1 existing transactions
[2025-05-15T20:44:30.993Z] [STDOUT] Fetching invoices for subscription ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:44:30.993Z] [STDOUT] Found 1 invoices for subscription: sub_QV05DCrgh3A2rL
[2025-05-15T20:44:30.993Z] [STDOUT] Transaction for payment pay_QV05q44fHQzL1q already exists in database (1 records), skipping
[2025-05-15T20:44:30.993Z] [STDOUT] Found 1 invoices for subscription sub_QV05DCrgh3A2rL
[2025-05-15T20:44:30.993Z] [STDOUT] Processing subscription 25 with Razorpay ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:44:30.993Z] [STDOUT] Subscription 25 has 2 existing transactions
[2025-05-15T20:44:30.993Z] [STDOUT] Fetching invoices for subscription ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:44:30.993Z] [STDOUT] Found 1 invoices for subscription: sub_QV1W0JNq2cOk7s
[2025-05-15T20:44:30.993Z] [STDOUT] Transaction for payment pay_QV1WoyCgCY23iO already exists in database (2 records), skipping
[2025-05-15T20:44:30.993Z] [STDOUT] Found 1 invoices for subscription sub_QV1W0JNq2cOk7s
[2025-05-15T20:44:30.993Z] [STDOUT] Processing subscription 26 with Razorpay ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:44:30.993Z] [STDOUT] Subscription 26 has 2 existing transactions
[2025-05-15T20:44:30.993Z] [STDOUT] Fetching invoices for subscription ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:44:30.993Z] [STDOUT] Found 2 invoices for subscription: sub_QVIG6dAuP0UXXn
[2025-05-15T20:44:30.993Z] [STDOUT] Transaction for payment pay_QVILKDuy9v6ovq already exists in database (1 records), skipping
[2025-05-15T20:44:30.993Z] [STDOUT] Transaction for payment pay_QVIGtXTXkm93W8 already exists in database (1 records), skipping
[2025-05-15T20:44:30.993Z] [STDOUT] Found 2 invoices for subscription sub_QVIG6dAuP0UXXn
[2025-05-15T20:44:30.993Z] [STDOUT] Subscription invoice synchronization complete!
[2025-05-15T20:44:30.993Z] [STDOUT] Processed 4 subscriptions
[2025-05-15T20:44:30.993Z] [STDOUT] Success: 4, Errors: 0
[2025-05-15T20:44:30.993Z] [STDOUT] Added 0 new transactions
[2025-05-15T20:44:30.993Z] [STDOUT] Script execution completed
[2025-05-15T20:44:30.993Z] Synchronization completed successfully
[2025-05-15T20:44:30.993Z] Next sync scheduled in 5 seconds
[2025-05-15T20:44:35.885Z] Starting invoice synchronization...
[2025-05-15T20:44:35.885Z] Running sync script: /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:44:35.885Z] Executing command: cd /Users/raja/Development/ProsumeAI/server && npx tsx /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:44:36.286Z] [STDOUT] Using database connection: postgres://***:***@localhost:5432/prosumeai
[2025-05-15T20:44:36.286Z] [STDOUT] Starting subscription invoice synchronization...
[2025-05-15T20:44:36.286Z] [STDOUT] Database schema validated successfully
[2025-05-15T20:44:36.286Z] [STDOUT] Found 4 active Razorpay subscriptions to sync
[2025-05-15T20:44:36.286Z] [STDOUT] Processing subscription 20 with Razorpay ID: sub_QUxcCis3igdqUA
[2025-05-15T20:44:36.286Z] [STDOUT] Subscription 20 has 1 existing transactions
[2025-05-15T20:44:36.286Z] [STDOUT] Razorpay initialization in progress, waiting...
[2025-05-15T20:44:36.286Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:44:36.286Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:44:36.286Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:44:36.286Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:44:36.286Z] [STDOUT] Fetching invoices for subscription ID: sub_QUxcCis3igdqUA
[2025-05-15T20:44:36.286Z] [STDOUT] Found 0 invoices for subscription: sub_QUxcCis3igdqUA
[2025-05-15T20:44:36.286Z] [STDOUT] Found 0 invoices for subscription sub_QUxcCis3igdqUA
[2025-05-15T20:44:36.286Z] [STDOUT] Processing subscription 24 with Razorpay ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:44:36.286Z] [STDOUT] Subscription 24 has 1 existing transactions
[2025-05-15T20:44:36.286Z] [STDOUT] Fetching invoices for subscription ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:44:36.286Z] [STDOUT] Found 1 invoices for subscription: sub_QV05DCrgh3A2rL
[2025-05-15T20:44:36.286Z] [STDOUT] Transaction for payment pay_QV05q44fHQzL1q already exists in database (1 records), skipping
[2025-05-15T20:44:36.286Z] [STDOUT] Found 1 invoices for subscription sub_QV05DCrgh3A2rL
[2025-05-15T20:44:36.286Z] [STDOUT] Processing subscription 25 with Razorpay ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:44:36.286Z] [STDOUT] Subscription 25 has 2 existing transactions
[2025-05-15T20:44:36.286Z] [STDOUT] Fetching invoices for subscription ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:44:36.286Z] [STDOUT] Found 1 invoices for subscription: sub_QV1W0JNq2cOk7s
[2025-05-15T20:44:36.286Z] [STDOUT] Transaction for payment pay_QV1WoyCgCY23iO already exists in database (2 records), skipping
[2025-05-15T20:44:36.286Z] [STDOUT] Found 1 invoices for subscription sub_QV1W0JNq2cOk7s
[2025-05-15T20:44:36.286Z] [STDOUT] Processing subscription 26 with Razorpay ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:44:36.286Z] [STDOUT] Subscription 26 has 2 existing transactions
[2025-05-15T20:44:36.286Z] [STDOUT] Fetching invoices for subscription ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:44:36.286Z] [STDOUT] Found 2 invoices for subscription: sub_QVIG6dAuP0UXXn
[2025-05-15T20:44:36.286Z] [STDOUT] Transaction for payment pay_QVILKDuy9v6ovq already exists in database (1 records), skipping
[2025-05-15T20:44:36.286Z] [STDOUT] Transaction for payment pay_QVIGtXTXkm93W8 already exists in database (1 records), skipping
[2025-05-15T20:44:36.286Z] [STDOUT] Found 2 invoices for subscription sub_QVIG6dAuP0UXXn
[2025-05-15T20:44:36.286Z] [STDOUT] Subscription invoice synchronization complete!
[2025-05-15T20:44:36.286Z] [STDOUT] Processed 4 subscriptions
[2025-05-15T20:44:36.286Z] [STDOUT] Success: 4, Errors: 0
[2025-05-15T20:44:36.286Z] [STDOUT] Added 0 new transactions
[2025-05-15T20:44:36.286Z] [STDOUT] Script execution completed
[2025-05-15T20:44:36.286Z] Synchronization completed successfully
[2025-05-15T20:44:36.286Z] Next sync scheduled in 5 seconds
[2025-05-15T20:44:40.852Z] [STDOUT] Using database connection: postgres://***:***@localhost:5432/prosumeai
[2025-05-15T20:44:40.852Z] [STDOUT] Starting subscription invoice synchronization...
[2025-05-15T20:44:40.852Z] [STDOUT] Database schema validated successfully
[2025-05-15T20:44:40.852Z] [STDOUT] Found 4 active Razorpay subscriptions to sync
[2025-05-15T20:44:40.852Z] [STDOUT] Processing subscription 20 with Razorpay ID: sub_QUxcCis3igdqUA
[2025-05-15T20:44:40.852Z] [STDOUT] Subscription 20 has 1 existing transactions
[2025-05-15T20:44:40.852Z] [STDOUT] Razorpay initialization in progress, waiting...
[2025-05-15T20:44:40.852Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:44:40.852Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:44:40.852Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:44:40.852Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:44:40.852Z] [STDOUT] Fetching invoices for subscription ID: sub_QUxcCis3igdqUA
[2025-05-15T20:44:40.852Z] [STDOUT] Found 0 invoices for subscription: sub_QUxcCis3igdqUA
[2025-05-15T20:44:40.852Z] [STDOUT] Found 0 invoices for subscription sub_QUxcCis3igdqUA
[2025-05-15T20:44:40.852Z] [STDOUT] Processing subscription 24 with Razorpay ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:44:40.852Z] [STDOUT] Subscription 24 has 1 existing transactions
[2025-05-15T20:44:40.852Z] [STDOUT] Fetching invoices for subscription ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:44:40.852Z] [STDOUT] Found 1 invoices for subscription: sub_QV05DCrgh3A2rL
[2025-05-15T20:44:40.852Z] [STDOUT] Transaction for payment pay_QV05q44fHQzL1q already exists in database (1 records), skipping
[2025-05-15T20:44:40.852Z] [STDOUT] Found 1 invoices for subscription sub_QV05DCrgh3A2rL
[2025-05-15T20:44:40.852Z] [STDOUT] Processing subscription 25 with Razorpay ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:44:40.852Z] [STDOUT] Subscription 25 has 2 existing transactions
[2025-05-15T20:44:40.852Z] [STDOUT] Fetching invoices for subscription ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:44:40.852Z] [STDOUT] Found 1 invoices for subscription: sub_QV1W0JNq2cOk7s
[2025-05-15T20:44:40.852Z] [STDOUT] Transaction for payment pay_QV1WoyCgCY23iO already exists in database (2 records), skipping
[2025-05-15T20:44:40.852Z] [STDOUT] Found 1 invoices for subscription sub_QV1W0JNq2cOk7s
[2025-05-15T20:44:40.852Z] [STDOUT] Processing subscription 26 with Razorpay ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:44:40.852Z] [STDOUT] Subscription 26 has 2 existing transactions
[2025-05-15T20:44:40.852Z] [STDOUT] Fetching invoices for subscription ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:44:40.852Z] [STDOUT] Found 2 invoices for subscription: sub_QVIG6dAuP0UXXn
[2025-05-15T20:44:40.852Z] [STDOUT] Transaction for payment pay_QVILKDuy9v6ovq already exists in database (1 records), skipping
[2025-05-15T20:44:40.852Z] [STDOUT] Transaction for payment pay_QVIGtXTXkm93W8 already exists in database (1 records), skipping
[2025-05-15T20:44:40.852Z] [STDOUT] Found 2 invoices for subscription sub_QVIG6dAuP0UXXn
[2025-05-15T20:44:40.852Z] [STDOUT] Subscription invoice synchronization complete!
[2025-05-15T20:44:40.852Z] [STDOUT] Processed 4 subscriptions
[2025-05-15T20:44:40.852Z] [STDOUT] Success: 4, Errors: 0
[2025-05-15T20:44:40.852Z] [STDOUT] Added 0 new transactions
[2025-05-15T20:44:40.852Z] [STDOUT] Script execution completed
[2025-05-15T20:44:40.852Z] Synchronization completed successfully
[2025-05-15T20:44:40.852Z] Next sync scheduled in 5 seconds
[2025-05-15T20:44:40.886Z] Starting invoice synchronization...
[2025-05-15T20:44:40.886Z] Running sync script: /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:44:40.886Z] Executing command: cd /Users/raja/Development/ProsumeAI/server && npx tsx /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:44:45.853Z] [STDOUT] Using database connection: postgres://***:***@localhost:5432/prosumeai
[2025-05-15T20:44:45.853Z] [STDOUT] Starting subscription invoice synchronization...
[2025-05-15T20:44:45.853Z] [STDOUT] Database schema validated successfully
[2025-05-15T20:44:45.853Z] [STDOUT] Found 4 active Razorpay subscriptions to sync
[2025-05-15T20:44:45.853Z] [STDOUT] Processing subscription 20 with Razorpay ID: sub_QUxcCis3igdqUA
[2025-05-15T20:44:45.853Z] [STDOUT] Subscription 20 has 1 existing transactions
[2025-05-15T20:44:45.853Z] [STDOUT] Razorpay initialization in progress, waiting...
[2025-05-15T20:44:45.853Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:44:45.853Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:44:45.853Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:44:45.853Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:44:45.853Z] [STDOUT] Fetching invoices for subscription ID: sub_QUxcCis3igdqUA
[2025-05-15T20:44:45.853Z] [STDOUT] Found 0 invoices for subscription: sub_QUxcCis3igdqUA
[2025-05-15T20:44:45.853Z] [STDOUT] Found 0 invoices for subscription sub_QUxcCis3igdqUA
[2025-05-15T20:44:45.853Z] [STDOUT] Processing subscription 24 with Razorpay ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:44:45.853Z] [STDOUT] Subscription 24 has 1 existing transactions
[2025-05-15T20:44:45.853Z] [STDOUT] Fetching invoices for subscription ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:44:45.853Z] [STDOUT] Found 1 invoices for subscription: sub_QV05DCrgh3A2rL
[2025-05-15T20:44:45.853Z] [STDOUT] Transaction for payment pay_QV05q44fHQzL1q already exists in database (1 records), skipping
[2025-05-15T20:44:45.853Z] [STDOUT] Found 1 invoices for subscription sub_QV05DCrgh3A2rL
[2025-05-15T20:44:45.853Z] [STDOUT] Processing subscription 25 with Razorpay ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:44:45.853Z] [STDOUT] Subscription 25 has 2 existing transactions
[2025-05-15T20:44:45.853Z] [STDOUT] Fetching invoices for subscription ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:44:45.853Z] [STDOUT] Found 1 invoices for subscription: sub_QV1W0JNq2cOk7s
[2025-05-15T20:44:45.853Z] [STDOUT] Transaction for payment pay_QV1WoyCgCY23iO already exists in database (2 records), skipping
[2025-05-15T20:44:45.853Z] [STDOUT] Found 1 invoices for subscription sub_QV1W0JNq2cOk7s
[2025-05-15T20:44:45.853Z] [STDOUT] Processing subscription 26 with Razorpay ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:44:45.853Z] [STDOUT] Subscription 26 has 2 existing transactions
[2025-05-15T20:44:45.853Z] [STDOUT] Fetching invoices for subscription ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:44:45.853Z] [STDOUT] Found 2 invoices for subscription: sub_QVIG6dAuP0UXXn
[2025-05-15T20:44:45.853Z] [STDOUT] Transaction for payment pay_QVILKDuy9v6ovq already exists in database (1 records), skipping
[2025-05-15T20:44:45.853Z] [STDOUT] Transaction for payment pay_QVIGtXTXkm93W8 already exists in database (1 records), skipping
[2025-05-15T20:44:45.853Z] [STDOUT] Found 2 invoices for subscription sub_QVIG6dAuP0UXXn
[2025-05-15T20:44:45.853Z] [STDOUT] Subscription invoice synchronization complete!
[2025-05-15T20:44:45.853Z] [STDOUT] Processed 4 subscriptions
[2025-05-15T20:44:45.853Z] [STDOUT] Success: 4, Errors: 0
[2025-05-15T20:44:45.853Z] [STDOUT] Added 0 new transactions
[2025-05-15T20:44:45.853Z] [STDOUT] Script execution completed
[2025-05-15T20:44:45.853Z] Synchronization completed successfully
[2025-05-15T20:44:45.853Z] Next sync scheduled in 5 seconds
[2025-05-15T20:44:45.887Z] Starting invoice synchronization...
[2025-05-15T20:44:45.887Z] Running sync script: /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:44:45.887Z] Executing command: cd /Users/raja/Development/ProsumeAI/server && npx tsx /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:44:50.214Z] [STDOUT] Using database connection: postgres://***:***@localhost:5432/prosumeai
[2025-05-15T20:44:50.214Z] [STDOUT] Starting subscription invoice synchronization...
[2025-05-15T20:44:50.214Z] [STDOUT] Database schema validated successfully
[2025-05-15T20:44:50.214Z] [STDOUT] Found 4 active Razorpay subscriptions to sync
[2025-05-15T20:44:50.214Z] [STDOUT] Processing subscription 20 with Razorpay ID: sub_QUxcCis3igdqUA
[2025-05-15T20:44:50.214Z] [STDOUT] Subscription 20 has 1 existing transactions
[2025-05-15T20:44:50.214Z] [STDOUT] Razorpay initialization in progress, waiting...
[2025-05-15T20:44:50.214Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:44:50.214Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:44:50.214Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:44:50.214Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:44:50.214Z] [STDOUT] Fetching invoices for subscription ID: sub_QUxcCis3igdqUA
[2025-05-15T20:44:50.214Z] [STDOUT] Found 0 invoices for subscription: sub_QUxcCis3igdqUA
[2025-05-15T20:44:50.214Z] [STDOUT] Found 0 invoices for subscription sub_QUxcCis3igdqUA
[2025-05-15T20:44:50.214Z] [STDOUT] Processing subscription 24 with Razorpay ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:44:50.214Z] [STDOUT] Subscription 24 has 1 existing transactions
[2025-05-15T20:44:50.214Z] [STDOUT] Fetching invoices for subscription ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:44:50.214Z] [STDOUT] Found 1 invoices for subscription: sub_QV05DCrgh3A2rL
[2025-05-15T20:44:50.214Z] [STDOUT] Transaction for payment pay_QV05q44fHQzL1q already exists in database (1 records), skipping
[2025-05-15T20:44:50.214Z] [STDOUT] Found 1 invoices for subscription sub_QV05DCrgh3A2rL
[2025-05-15T20:44:50.214Z] [STDOUT] Processing subscription 25 with Razorpay ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:44:50.214Z] [STDOUT] Subscription 25 has 2 existing transactions
[2025-05-15T20:44:50.214Z] [STDOUT] Fetching invoices for subscription ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:44:50.215Z] [STDOUT] Found 1 invoices for subscription: sub_QV1W0JNq2cOk7s
[2025-05-15T20:44:50.215Z] [STDOUT] Transaction for payment pay_QV1WoyCgCY23iO already exists in database (2 records), skipping
[2025-05-15T20:44:50.215Z] [STDOUT] Found 1 invoices for subscription sub_QV1W0JNq2cOk7s
[2025-05-15T20:44:50.215Z] [STDOUT] Processing subscription 26 with Razorpay ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:44:50.215Z] [STDOUT] Subscription 26 has 2 existing transactions
[2025-05-15T20:44:50.215Z] [STDOUT] Fetching invoices for subscription ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:44:50.215Z] [STDOUT] Found 2 invoices for subscription: sub_QVIG6dAuP0UXXn
[2025-05-15T20:44:50.215Z] [STDOUT] Transaction for payment pay_QVILKDuy9v6ovq already exists in database (1 records), skipping
[2025-05-15T20:44:50.215Z] [STDOUT] Transaction for payment pay_QVIGtXTXkm93W8 already exists in database (1 records), skipping
[2025-05-15T20:44:50.215Z] [STDOUT] Found 2 invoices for subscription sub_QVIG6dAuP0UXXn
[2025-05-15T20:44:50.215Z] [STDOUT] Subscription invoice synchronization complete!
[2025-05-15T20:44:50.215Z] [STDOUT] Processed 4 subscriptions
[2025-05-15T20:44:50.215Z] [STDOUT] Success: 4, Errors: 0
[2025-05-15T20:44:50.215Z] [STDOUT] Added 0 new transactions
[2025-05-15T20:44:50.215Z] [STDOUT] Script execution completed
[2025-05-15T20:44:50.215Z] Synchronization completed successfully
[2025-05-15T20:44:50.215Z] Next sync scheduled in 5 seconds
[2025-05-15T20:44:50.888Z] Starting invoice synchronization...
[2025-05-15T20:44:50.888Z] Running sync script: /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:44:50.888Z] Executing command: cd /Users/raja/Development/ProsumeAI/server && npx tsx /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:44:55.414Z] [STDOUT] Using database connection: postgres://***:***@localhost:5432/prosumeai
[2025-05-15T20:44:55.414Z] [STDOUT] Starting subscription invoice synchronization...
[2025-05-15T20:44:55.414Z] [STDOUT] Found 4 active Razorpay subscriptions to sync
[2025-05-15T20:44:55.414Z] [STDOUT] Processing subscription 20 with Razorpay ID: sub_QUxcCis3igdqUA
[2025-05-15T20:44:55.414Z] [STDOUT] Database schema validated successfully
[2025-05-15T20:44:55.414Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:44:55.414Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:44:55.414Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:44:55.414Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:44:55.414Z] [STDOUT] Subscription 20 has 1 existing transactions
[2025-05-15T20:44:55.414Z] [STDOUT] Fetching invoices for subscription ID: sub_QUxcCis3igdqUA
[2025-05-15T20:44:55.414Z] [STDOUT] Found 0 invoices for subscription: sub_QUxcCis3igdqUA
[2025-05-15T20:44:55.414Z] [STDOUT] Found 0 invoices for subscription sub_QUxcCis3igdqUA
[2025-05-15T20:44:55.414Z] [STDOUT] Processing subscription 24 with Razorpay ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:44:55.414Z] [STDOUT] Subscription 24 has 1 existing transactions
[2025-05-15T20:44:55.414Z] [STDOUT] Fetching invoices for subscription ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:44:55.414Z] [STDOUT] Found 1 invoices for subscription: sub_QV05DCrgh3A2rL
[2025-05-15T20:44:55.414Z] [STDOUT] Transaction for payment pay_QV05q44fHQzL1q already exists in database (1 records), skipping
[2025-05-15T20:44:55.414Z] [STDOUT] Found 1 invoices for subscription sub_QV05DCrgh3A2rL
[2025-05-15T20:44:55.414Z] [STDOUT] Processing subscription 25 with Razorpay ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:44:55.414Z] [STDOUT] Subscription 25 has 2 existing transactions
[2025-05-15T20:44:55.414Z] [STDOUT] Fetching invoices for subscription ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:44:55.414Z] [STDOUT] Found 1 invoices for subscription: sub_QV1W0JNq2cOk7s
[2025-05-15T20:44:55.414Z] [STDOUT] Transaction for payment pay_QV1WoyCgCY23iO already exists in database (2 records), skipping
[2025-05-15T20:44:55.414Z] [STDOUT] Found 1 invoices for subscription sub_QV1W0JNq2cOk7s
[2025-05-15T20:44:55.414Z] [STDOUT] Processing subscription 26 with Razorpay ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:44:55.414Z] [STDOUT] Subscription 26 has 2 existing transactions
[2025-05-15T20:44:55.414Z] [STDOUT] Fetching invoices for subscription ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:44:55.414Z] [STDOUT] Found 2 invoices for subscription: sub_QVIG6dAuP0UXXn
[2025-05-15T20:44:55.414Z] [STDOUT] Transaction for payment pay_QVILKDuy9v6ovq already exists in database (1 records), skipping
[2025-05-15T20:44:55.414Z] [STDOUT] Transaction for payment pay_QVIGtXTXkm93W8 already exists in database (1 records), skipping
[2025-05-15T20:44:55.414Z] [STDOUT] Found 2 invoices for subscription sub_QVIG6dAuP0UXXn
[2025-05-15T20:44:55.414Z] [STDOUT] Subscription invoice synchronization complete!
[2025-05-15T20:44:55.414Z] [STDOUT] Processed 4 subscriptions
[2025-05-15T20:44:55.414Z] [STDOUT] Success: 4, Errors: 0
[2025-05-15T20:44:55.414Z] [STDOUT] Added 0 new transactions
[2025-05-15T20:44:55.414Z] [STDOUT] Script execution completed
[2025-05-15T20:44:55.414Z] Synchronization completed successfully
[2025-05-15T20:44:55.414Z] Next sync scheduled in 5 seconds
[2025-05-15T20:44:55.889Z] Starting invoice synchronization...
[2025-05-15T20:44:55.889Z] Running sync script: /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:44:55.889Z] Executing command: cd /Users/raja/Development/ProsumeAI/server && npx tsx /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:45:00.890Z] Starting invoice synchronization...
[2025-05-15T20:45:00.890Z] Running sync script: /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:45:00.890Z] Executing command: cd /Users/raja/Development/ProsumeAI/server && npx tsx /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:45:04.928Z] [STDOUT] Using database connection: postgres://***:***@localhost:5432/prosumeai
[2025-05-15T20:45:04.928Z] [STDOUT] Starting subscription invoice synchronization...
[2025-05-15T20:45:04.928Z] [STDOUT] Database schema validated successfully
[2025-05-15T20:45:04.928Z] [STDOUT] Found 4 active Razorpay subscriptions to sync
[2025-05-15T20:45:04.928Z] [STDOUT] Processing subscription 20 with Razorpay ID: sub_QUxcCis3igdqUA
[2025-05-15T20:45:04.929Z] [STDOUT] Subscription 20 has 1 existing transactions
[2025-05-15T20:45:04.929Z] [STDOUT] Razorpay initialization in progress, waiting...
[2025-05-15T20:45:04.929Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:45:04.929Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:45:04.929Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:45:04.929Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:45:04.929Z] [STDOUT] Fetching invoices for subscription ID: sub_QUxcCis3igdqUA
[2025-05-15T20:45:04.929Z] [STDOUT] Found 0 invoices for subscription: sub_QUxcCis3igdqUA
[2025-05-15T20:45:04.929Z] [STDOUT] Found 0 invoices for subscription sub_QUxcCis3igdqUA
[2025-05-15T20:45:04.929Z] [STDOUT] Processing subscription 24 with Razorpay ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:45:04.929Z] [STDOUT] Subscription 24 has 1 existing transactions
[2025-05-15T20:45:04.929Z] [STDOUT] Fetching invoices for subscription ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:45:04.929Z] [STDOUT] Found 1 invoices for subscription: sub_QV05DCrgh3A2rL
[2025-05-15T20:45:04.929Z] [STDOUT] Transaction for payment pay_QV05q44fHQzL1q already exists in database (1 records), skipping
[2025-05-15T20:45:04.929Z] [STDOUT] Found 1 invoices for subscription sub_QV05DCrgh3A2rL
[2025-05-15T20:45:04.929Z] [STDOUT] Processing subscription 25 with Razorpay ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:45:04.929Z] [STDOUT] Subscription 25 has 2 existing transactions
[2025-05-15T20:45:04.929Z] [STDOUT] Fetching invoices for subscription ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:45:04.929Z] [STDOUT] Found 1 invoices for subscription: sub_QV1W0JNq2cOk7s
[2025-05-15T20:45:04.929Z] [STDOUT] Transaction for payment pay_QV1WoyCgCY23iO already exists in database (2 records), skipping
[2025-05-15T20:45:04.929Z] [STDOUT] Found 1 invoices for subscription sub_QV1W0JNq2cOk7s
[2025-05-15T20:45:04.929Z] [STDOUT] Processing subscription 26 with Razorpay ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:45:04.929Z] [STDOUT] Subscription 26 has 2 existing transactions
[2025-05-15T20:45:04.929Z] [STDOUT] Fetching invoices for subscription ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:45:04.929Z] [STDOUT] Found 2 invoices for subscription: sub_QVIG6dAuP0UXXn
[2025-05-15T20:45:04.929Z] [STDOUT] Transaction for payment pay_QVILKDuy9v6ovq already exists in database (1 records), skipping
[2025-05-15T20:45:04.929Z] [STDOUT] Transaction for payment pay_QVIGtXTXkm93W8 already exists in database (1 records), skipping
[2025-05-15T20:45:04.929Z] [STDOUT] Found 2 invoices for subscription sub_QVIG6dAuP0UXXn
[2025-05-15T20:45:04.929Z] [STDOUT] Subscription invoice synchronization complete!
[2025-05-15T20:45:04.929Z] [STDOUT] Processed 4 subscriptions
[2025-05-15T20:45:04.929Z] [STDOUT] Success: 4, Errors: 0
[2025-05-15T20:45:04.929Z] [STDOUT] Added 0 new transactions
[2025-05-15T20:45:04.929Z] [STDOUT] Script execution completed
[2025-05-15T20:45:04.929Z] Synchronization completed successfully
[2025-05-15T20:45:04.929Z] Next sync scheduled in 5 seconds
[2025-05-15T20:45:05.328Z] [STDOUT] Using database connection: postgres://***:***@localhost:5432/prosumeai
[2025-05-15T20:45:05.328Z] [STDOUT] Starting subscription invoice synchronization...
[2025-05-15T20:45:05.328Z] [STDOUT] Database schema validated successfully
[2025-05-15T20:45:05.328Z] [STDOUT] Found 4 active Razorpay subscriptions to sync
[2025-05-15T20:45:05.328Z] [STDOUT] Processing subscription 20 with Razorpay ID: sub_QUxcCis3igdqUA
[2025-05-15T20:45:05.328Z] [STDOUT] Subscription 20 has 1 existing transactions
[2025-05-15T20:45:05.328Z] [STDOUT] Razorpay initialization in progress, waiting...
[2025-05-15T20:45:05.328Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:45:05.328Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:45:05.328Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:45:05.328Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:45:05.328Z] [STDOUT] Fetching invoices for subscription ID: sub_QUxcCis3igdqUA
[2025-05-15T20:45:05.328Z] [STDOUT] Found 0 invoices for subscription: sub_QUxcCis3igdqUA
[2025-05-15T20:45:05.328Z] [STDOUT] Found 0 invoices for subscription sub_QUxcCis3igdqUA
[2025-05-15T20:45:05.328Z] [STDOUT] Processing subscription 24 with Razorpay ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:45:05.328Z] [STDOUT] Subscription 24 has 1 existing transactions
[2025-05-15T20:45:05.328Z] [STDOUT] Fetching invoices for subscription ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:45:05.328Z] [STDOUT] Found 1 invoices for subscription: sub_QV05DCrgh3A2rL
[2025-05-15T20:45:05.328Z] [STDOUT] Transaction for payment pay_QV05q44fHQzL1q already exists in database (1 records), skipping
[2025-05-15T20:45:05.328Z] [STDOUT] Found 1 invoices for subscription sub_QV05DCrgh3A2rL
[2025-05-15T20:45:05.328Z] [STDOUT] Processing subscription 25 with Razorpay ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:45:05.328Z] [STDOUT] Subscription 25 has 2 existing transactions
[2025-05-15T20:45:05.328Z] [STDOUT] Fetching invoices for subscription ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:45:05.328Z] [STDOUT] Found 1 invoices for subscription: sub_QV1W0JNq2cOk7s
[2025-05-15T20:45:05.328Z] [STDOUT] Transaction for payment pay_QV1WoyCgCY23iO already exists in database (2 records), skipping
[2025-05-15T20:45:05.328Z] [STDOUT] Found 1 invoices for subscription sub_QV1W0JNq2cOk7s
[2025-05-15T20:45:05.328Z] [STDOUT] Processing subscription 26 with Razorpay ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:45:05.328Z] [STDOUT] Subscription 26 has 2 existing transactions
[2025-05-15T20:45:05.328Z] [STDOUT] Fetching invoices for subscription ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:45:05.328Z] [STDOUT] Found 2 invoices for subscription: sub_QVIG6dAuP0UXXn
[2025-05-15T20:45:05.328Z] [STDOUT] Transaction for payment pay_QVILKDuy9v6ovq already exists in database (1 records), skipping
[2025-05-15T20:45:05.328Z] [STDOUT] Transaction for payment pay_QVIGtXTXkm93W8 already exists in database (1 records), skipping
[2025-05-15T20:45:05.328Z] [STDOUT] Found 2 invoices for subscription sub_QVIG6dAuP0UXXn
[2025-05-15T20:45:05.328Z] [STDOUT] Subscription invoice synchronization complete!
[2025-05-15T20:45:05.328Z] [STDOUT] Processed 4 subscriptions
[2025-05-15T20:45:05.328Z] [STDOUT] Success: 4, Errors: 0
[2025-05-15T20:45:05.328Z] [STDOUT] Added 0 new transactions
[2025-05-15T20:45:05.328Z] [STDOUT] Script execution completed
[2025-05-15T20:45:05.328Z] Synchronization completed successfully
[2025-05-15T20:45:05.328Z] Next sync scheduled in 5 seconds
[2025-05-15T20:45:05.890Z] Starting invoice synchronization...
[2025-05-15T20:45:05.891Z] Running sync script: /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:45:05.891Z] Executing command: cd /Users/raja/Development/ProsumeAI/server && npx tsx /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:45:10.892Z] Starting invoice synchronization...
[2025-05-15T20:45:10.892Z] Running sync script: /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:45:10.892Z] Executing command: cd /Users/raja/Development/ProsumeAI/server && npx tsx /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:45:11.376Z] [STDOUT] Using database connection: postgres://***:***@localhost:5432/prosumeai
[2025-05-15T20:45:11.376Z] [STDOUT] Starting subscription invoice synchronization...
[2025-05-15T20:45:11.376Z] [STDOUT] Database schema validated successfully
[2025-05-15T20:45:11.376Z] [STDOUT] Found 4 active Razorpay subscriptions to sync
[2025-05-15T20:45:11.376Z] [STDOUT] Processing subscription 20 with Razorpay ID: sub_QUxcCis3igdqUA
[2025-05-15T20:45:11.376Z] [STDOUT] Subscription 20 has 1 existing transactions
[2025-05-15T20:45:11.376Z] [STDOUT] Razorpay initialization in progress, waiting...
[2025-05-15T20:45:11.376Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:45:11.376Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:45:11.376Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:45:11.376Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:45:11.376Z] [STDOUT] Fetching invoices for subscription ID: sub_QUxcCis3igdqUA
[2025-05-15T20:45:11.376Z] [STDOUT] Found 0 invoices for subscription: sub_QUxcCis3igdqUA
[2025-05-15T20:45:11.376Z] [STDOUT] Found 0 invoices for subscription sub_QUxcCis3igdqUA
[2025-05-15T20:45:11.376Z] [STDOUT] Processing subscription 24 with Razorpay ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:45:11.376Z] [STDOUT] Subscription 24 has 1 existing transactions
[2025-05-15T20:45:11.376Z] [STDOUT] Fetching invoices for subscription ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:45:11.376Z] [STDOUT] Found 1 invoices for subscription: sub_QV05DCrgh3A2rL
[2025-05-15T20:45:11.376Z] [STDOUT] Transaction for payment pay_QV05q44fHQzL1q already exists in database (1 records), skipping
[2025-05-15T20:45:11.376Z] [STDOUT] Found 1 invoices for subscription sub_QV05DCrgh3A2rL
[2025-05-15T20:45:11.376Z] [STDOUT] Processing subscription 25 with Razorpay ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:45:11.376Z] [STDOUT] Subscription 25 has 2 existing transactions
[2025-05-15T20:45:11.376Z] [STDOUT] Fetching invoices for subscription ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:45:11.376Z] [STDOUT] Found 1 invoices for subscription: sub_QV1W0JNq2cOk7s
[2025-05-15T20:45:11.376Z] [STDOUT] Transaction for payment pay_QV1WoyCgCY23iO already exists in database (2 records), skipping
[2025-05-15T20:45:11.376Z] [STDOUT] Found 1 invoices for subscription sub_QV1W0JNq2cOk7s
[2025-05-15T20:45:11.376Z] [STDOUT] Processing subscription 26 with Razorpay ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:45:11.376Z] [STDOUT] Subscription 26 has 2 existing transactions
[2025-05-15T20:45:11.376Z] [STDOUT] Fetching invoices for subscription ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:45:11.376Z] [STDOUT] Found 2 invoices for subscription: sub_QVIG6dAuP0UXXn
[2025-05-15T20:45:11.376Z] [STDOUT] Transaction for payment pay_QVILKDuy9v6ovq already exists in database (1 records), skipping
[2025-05-15T20:45:11.376Z] [STDOUT] Transaction for payment pay_QVIGtXTXkm93W8 already exists in database (1 records), skipping
[2025-05-15T20:45:11.376Z] [STDOUT] Found 2 invoices for subscription sub_QVIG6dAuP0UXXn
[2025-05-15T20:45:11.376Z] [STDOUT] Subscription invoice synchronization complete!
[2025-05-15T20:45:11.376Z] [STDOUT] Processed 4 subscriptions
[2025-05-15T20:45:11.376Z] [STDOUT] Success: 4, Errors: 0
[2025-05-15T20:45:11.376Z] [STDOUT] Added 0 new transactions
[2025-05-15T20:45:11.376Z] [STDOUT] Script execution completed
[2025-05-15T20:45:11.376Z] Synchronization completed successfully
[2025-05-15T20:45:11.376Z] Next sync scheduled in 5 seconds
[2025-05-15T20:45:15.893Z] Starting invoice synchronization...
[2025-05-15T20:45:15.893Z] Running sync script: /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:45:15.893Z] Executing command: cd /Users/raja/Development/ProsumeAI/server && npx tsx /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:45:18.698Z] [STDOUT] Using database connection: postgres://***:***@localhost:5432/prosumeai
[2025-05-15T20:45:18.699Z] [STDOUT] Starting subscription invoice synchronization...
[2025-05-15T20:45:18.699Z] [STDOUT] Database schema validated successfully
[2025-05-15T20:45:18.699Z] [STDOUT] Found 4 active Razorpay subscriptions to sync
[2025-05-15T20:45:18.699Z] [STDOUT] Processing subscription 20 with Razorpay ID: sub_QUxcCis3igdqUA
[2025-05-15T20:45:18.699Z] [STDOUT] Subscription 20 has 1 existing transactions
[2025-05-15T20:45:18.699Z] [STDOUT] Razorpay initialization in progress, waiting...
[2025-05-15T20:45:18.699Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:45:18.699Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:45:18.699Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:45:18.699Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:45:18.699Z] [STDOUT] Fetching invoices for subscription ID: sub_QUxcCis3igdqUA
[2025-05-15T20:45:18.699Z] [STDOUT] Found 0 invoices for subscription: sub_QUxcCis3igdqUA
[2025-05-15T20:45:18.699Z] [STDOUT] Found 0 invoices for subscription sub_QUxcCis3igdqUA
[2025-05-15T20:45:18.699Z] [STDOUT] Processing subscription 24 with Razorpay ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:45:18.699Z] [STDOUT] Subscription 24 has 1 existing transactions
[2025-05-15T20:45:18.699Z] [STDOUT] Fetching invoices for subscription ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:45:18.699Z] [STDOUT] Found 1 invoices for subscription: sub_QV05DCrgh3A2rL
[2025-05-15T20:45:18.699Z] [STDOUT] Transaction for payment pay_QV05q44fHQzL1q already exists in database (1 records), skipping
[2025-05-15T20:45:18.699Z] [STDOUT] Found 1 invoices for subscription sub_QV05DCrgh3A2rL
[2025-05-15T20:45:18.699Z] [STDOUT] Processing subscription 25 with Razorpay ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:45:18.699Z] [STDOUT] Subscription 25 has 2 existing transactions
[2025-05-15T20:45:18.699Z] [STDOUT] Fetching invoices for subscription ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:45:18.699Z] [STDOUT] Found 1 invoices for subscription: sub_QV1W0JNq2cOk7s
[2025-05-15T20:45:18.699Z] [STDOUT] Transaction for payment pay_QV1WoyCgCY23iO already exists in database (2 records), skipping
[2025-05-15T20:45:18.699Z] [STDOUT] Found 1 invoices for subscription sub_QV1W0JNq2cOk7s
[2025-05-15T20:45:18.699Z] [STDOUT] Processing subscription 26 with Razorpay ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:45:18.699Z] [STDOUT] Subscription 26 has 2 existing transactions
[2025-05-15T20:45:18.699Z] [STDOUT] Fetching invoices for subscription ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:45:18.699Z] [STDOUT] Found 2 invoices for subscription: sub_QVIG6dAuP0UXXn
[2025-05-15T20:45:18.699Z] [STDOUT] Transaction for payment pay_QVILKDuy9v6ovq already exists in database (1 records), skipping
[2025-05-15T20:45:18.699Z] [STDOUT] Transaction for payment pay_QVIGtXTXkm93W8 already exists in database (1 records), skipping
[2025-05-15T20:45:18.699Z] [STDOUT] Found 2 invoices for subscription sub_QVIG6dAuP0UXXn
[2025-05-15T20:45:18.699Z] [STDOUT] Subscription invoice synchronization complete!
[2025-05-15T20:45:18.699Z] [STDOUT] Processed 4 subscriptions
[2025-05-15T20:45:18.699Z] [STDOUT] Success: 4, Errors: 0
[2025-05-15T20:45:18.699Z] [STDOUT] Added 0 new transactions
[2025-05-15T20:45:18.699Z] [STDOUT] Script execution completed
[2025-05-15T20:45:18.699Z] Synchronization completed successfully
[2025-05-15T20:45:18.699Z] Next sync scheduled in 5 seconds
[2025-05-15T20:45:20.820Z] [STDOUT] Using database connection: postgres://***:***@localhost:5432/prosumeai
[2025-05-15T20:45:20.820Z] [STDOUT] Starting subscription invoice synchronization...
[2025-05-15T20:45:20.820Z] [STDOUT] Database schema validated successfully
[2025-05-15T20:45:20.820Z] [STDOUT] Found 4 active Razorpay subscriptions to sync
[2025-05-15T20:45:20.820Z] [STDOUT] Processing subscription 20 with Razorpay ID: sub_QUxcCis3igdqUA
[2025-05-15T20:45:20.820Z] [STDOUT] Subscription 20 has 1 existing transactions
[2025-05-15T20:45:20.820Z] [STDOUT] Razorpay initialization in progress, waiting...
[2025-05-15T20:45:20.820Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:45:20.820Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:45:20.820Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:45:20.820Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:45:20.820Z] [STDOUT] Fetching invoices for subscription ID: sub_QUxcCis3igdqUA
[2025-05-15T20:45:20.820Z] [STDOUT] Found 0 invoices for subscription: sub_QUxcCis3igdqUA
[2025-05-15T20:45:20.820Z] [STDOUT] Found 0 invoices for subscription sub_QUxcCis3igdqUA
[2025-05-15T20:45:20.820Z] [STDOUT] Processing subscription 24 with Razorpay ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:45:20.820Z] [STDOUT] Subscription 24 has 1 existing transactions
[2025-05-15T20:45:20.820Z] [STDOUT] Fetching invoices for subscription ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:45:20.820Z] [STDOUT] Found 1 invoices for subscription: sub_QV05DCrgh3A2rL
[2025-05-15T20:45:20.820Z] [STDOUT] Transaction for payment pay_QV05q44fHQzL1q already exists in database (1 records), skipping
[2025-05-15T20:45:20.820Z] [STDOUT] Found 1 invoices for subscription sub_QV05DCrgh3A2rL
[2025-05-15T20:45:20.820Z] [STDOUT] Processing subscription 25 with Razorpay ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:45:20.820Z] [STDOUT] Subscription 25 has 2 existing transactions
[2025-05-15T20:45:20.820Z] [STDOUT] Fetching invoices for subscription ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:45:20.820Z] [STDOUT] Found 1 invoices for subscription: sub_QV1W0JNq2cOk7s
[2025-05-15T20:45:20.820Z] [STDOUT] Transaction for payment pay_QV1WoyCgCY23iO already exists in database (2 records), skipping
[2025-05-15T20:45:20.820Z] [STDOUT] Found 1 invoices for subscription sub_QV1W0JNq2cOk7s
[2025-05-15T20:45:20.820Z] [STDOUT] Processing subscription 26 with Razorpay ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:45:20.820Z] [STDOUT] Subscription 26 has 2 existing transactions
[2025-05-15T20:45:20.820Z] [STDOUT] Fetching invoices for subscription ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:45:20.820Z] [STDOUT] Found 2 invoices for subscription: sub_QVIG6dAuP0UXXn
[2025-05-15T20:45:20.820Z] [STDOUT] Transaction for payment pay_QVILKDuy9v6ovq already exists in database (1 records), skipping
[2025-05-15T20:45:20.820Z] [STDOUT] Transaction for payment pay_QVIGtXTXkm93W8 already exists in database (1 records), skipping
[2025-05-15T20:45:20.820Z] [STDOUT] Found 2 invoices for subscription sub_QVIG6dAuP0UXXn
[2025-05-15T20:45:20.820Z] [STDOUT] Subscription invoice synchronization complete!
[2025-05-15T20:45:20.820Z] [STDOUT] Processed 4 subscriptions
[2025-05-15T20:45:20.820Z] [STDOUT] Success: 4, Errors: 0
[2025-05-15T20:45:20.820Z] [STDOUT] Added 0 new transactions
[2025-05-15T20:45:20.820Z] [STDOUT] Script execution completed
[2025-05-15T20:45:20.820Z] Synchronization completed successfully
[2025-05-15T20:45:20.820Z] Next sync scheduled in 5 seconds
[2025-05-15T20:45:20.894Z] Starting invoice synchronization...
[2025-05-15T20:45:20.894Z] Running sync script: /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:45:20.894Z] Executing command: cd /Users/raja/Development/ProsumeAI/server && npx tsx /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:45:25.895Z] Starting invoice synchronization...
[2025-05-15T20:45:25.895Z] Running sync script: /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:45:25.896Z] Executing command: cd /Users/raja/Development/ProsumeAI/server && npx tsx /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:45:25.930Z] [STDOUT] Using database connection: postgres://***:***@localhost:5432/prosumeai
[2025-05-15T20:45:25.930Z] [STDOUT] Starting subscription invoice synchronization...
[2025-05-15T20:45:25.930Z] [STDOUT] Database schema validated successfully
[2025-05-15T20:45:25.930Z] [STDOUT] Found 4 active Razorpay subscriptions to sync
[2025-05-15T20:45:25.930Z] [STDOUT] Processing subscription 20 with Razorpay ID: sub_QUxcCis3igdqUA
[2025-05-15T20:45:25.930Z] [STDOUT] Subscription 20 has 1 existing transactions
[2025-05-15T20:45:25.930Z] [STDOUT] Razorpay initialization in progress, waiting...
[2025-05-15T20:45:25.930Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:45:25.930Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:45:25.930Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:45:25.930Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:45:25.930Z] [STDOUT] Fetching invoices for subscription ID: sub_QUxcCis3igdqUA
[2025-05-15T20:45:25.930Z] [STDOUT] Found 0 invoices for subscription: sub_QUxcCis3igdqUA
[2025-05-15T20:45:25.930Z] [STDOUT] Found 0 invoices for subscription sub_QUxcCis3igdqUA
[2025-05-15T20:45:25.930Z] [STDOUT] Processing subscription 24 with Razorpay ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:45:25.930Z] [STDOUT] Subscription 24 has 1 existing transactions
[2025-05-15T20:45:25.930Z] [STDOUT] Fetching invoices for subscription ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:45:25.930Z] [STDOUT] Found 1 invoices for subscription: sub_QV05DCrgh3A2rL
[2025-05-15T20:45:25.930Z] [STDOUT] Transaction for payment pay_QV05q44fHQzL1q already exists in database (1 records), skipping
[2025-05-15T20:45:25.930Z] [STDOUT] Found 1 invoices for subscription sub_QV05DCrgh3A2rL
[2025-05-15T20:45:25.930Z] [STDOUT] Processing subscription 25 with Razorpay ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:45:25.930Z] [STDOUT] Subscription 25 has 2 existing transactions
[2025-05-15T20:45:25.930Z] [STDOUT] Fetching invoices for subscription ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:45:25.930Z] [STDOUT] Found 1 invoices for subscription: sub_QV1W0JNq2cOk7s
[2025-05-15T20:45:25.930Z] [STDOUT] Transaction for payment pay_QV1WoyCgCY23iO already exists in database (2 records), skipping
[2025-05-15T20:45:25.930Z] [STDOUT] Found 1 invoices for subscription sub_QV1W0JNq2cOk7s
[2025-05-15T20:45:25.930Z] [STDOUT] Processing subscription 26 with Razorpay ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:45:25.930Z] [STDOUT] Subscription 26 has 2 existing transactions
[2025-05-15T20:45:25.930Z] [STDOUT] Fetching invoices for subscription ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:45:25.930Z] [STDOUT] Found 2 invoices for subscription: sub_QVIG6dAuP0UXXn
[2025-05-15T20:45:25.930Z] [STDOUT] Transaction for payment pay_QVILKDuy9v6ovq already exists in database (1 records), skipping
[2025-05-15T20:45:25.930Z] [STDOUT] Transaction for payment pay_QVIGtXTXkm93W8 already exists in database (1 records), skipping
[2025-05-15T20:45:25.930Z] [STDOUT] Found 2 invoices for subscription sub_QVIG6dAuP0UXXn
[2025-05-15T20:45:25.930Z] [STDOUT] Subscription invoice synchronization complete!
[2025-05-15T20:45:25.930Z] [STDOUT] Processed 4 subscriptions
[2025-05-15T20:45:25.930Z] [STDOUT] Success: 4, Errors: 0
[2025-05-15T20:45:25.930Z] [STDOUT] Added 0 new transactions
[2025-05-15T20:45:25.930Z] [STDOUT] Script execution completed
[2025-05-15T20:45:25.930Z] Synchronization completed successfully
[2025-05-15T20:45:25.930Z] Next sync scheduled in 5 seconds
[2025-05-15T20:45:30.895Z] Starting invoice synchronization...
[2025-05-15T20:45:30.896Z] Running sync script: /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:45:30.896Z] Executing command: cd /Users/raja/Development/ProsumeAI/server && npx tsx /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:45:31.239Z] [STDOUT] Using database connection: postgres://***:***@localhost:5432/prosumeai
[2025-05-15T20:45:31.239Z] [STDOUT] Starting subscription invoice synchronization...
[2025-05-15T20:45:31.239Z] [STDOUT] Database schema validated successfully
[2025-05-15T20:45:31.239Z] [STDOUT] Found 4 active Razorpay subscriptions to sync
[2025-05-15T20:45:31.239Z] [STDOUT] Processing subscription 20 with Razorpay ID: sub_QUxcCis3igdqUA
[2025-05-15T20:45:31.239Z] [STDOUT] Subscription 20 has 1 existing transactions
[2025-05-15T20:45:31.239Z] [STDOUT] Razorpay initialization in progress, waiting...
[2025-05-15T20:45:31.239Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:45:31.239Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:45:31.239Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:45:31.239Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:45:31.239Z] [STDOUT] Fetching invoices for subscription ID: sub_QUxcCis3igdqUA
[2025-05-15T20:45:31.239Z] [STDOUT] Found 0 invoices for subscription: sub_QUxcCis3igdqUA
[2025-05-15T20:45:31.239Z] [STDOUT] Found 0 invoices for subscription sub_QUxcCis3igdqUA
[2025-05-15T20:45:31.239Z] [STDOUT] Processing subscription 24 with Razorpay ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:45:31.239Z] [STDOUT] Subscription 24 has 1 existing transactions
[2025-05-15T20:45:31.239Z] [STDOUT] Fetching invoices for subscription ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:45:31.239Z] [STDOUT] Found 1 invoices for subscription: sub_QV05DCrgh3A2rL
[2025-05-15T20:45:31.239Z] [STDOUT] Transaction for payment pay_QV05q44fHQzL1q already exists in database (1 records), skipping
[2025-05-15T20:45:31.239Z] [STDOUT] Found 1 invoices for subscription sub_QV05DCrgh3A2rL
[2025-05-15T20:45:31.239Z] [STDOUT] Processing subscription 25 with Razorpay ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:45:31.239Z] [STDOUT] Subscription 25 has 2 existing transactions
[2025-05-15T20:45:31.239Z] [STDOUT] Fetching invoices for subscription ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:45:31.239Z] [STDOUT] Found 1 invoices for subscription: sub_QV1W0JNq2cOk7s
[2025-05-15T20:45:31.239Z] [STDOUT] Transaction for payment pay_QV1WoyCgCY23iO already exists in database (2 records), skipping
[2025-05-15T20:45:31.239Z] [STDOUT] Found 1 invoices for subscription sub_QV1W0JNq2cOk7s
[2025-05-15T20:45:31.239Z] [STDOUT] Processing subscription 26 with Razorpay ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:45:31.239Z] [STDOUT] Subscription 26 has 2 existing transactions
[2025-05-15T20:45:31.239Z] [STDOUT] Fetching invoices for subscription ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:45:31.239Z] [STDOUT] Found 2 invoices for subscription: sub_QVIG6dAuP0UXXn
[2025-05-15T20:45:31.239Z] [STDOUT] Transaction for payment pay_QVILKDuy9v6ovq already exists in database (1 records), skipping
[2025-05-15T20:45:31.239Z] [STDOUT] Transaction for payment pay_QVIGtXTXkm93W8 already exists in database (1 records), skipping
[2025-05-15T20:45:31.239Z] [STDOUT] Found 2 invoices for subscription sub_QVIG6dAuP0UXXn
[2025-05-15T20:45:31.239Z] [STDOUT] Subscription invoice synchronization complete!
[2025-05-15T20:45:31.239Z] [STDOUT] Processed 4 subscriptions
[2025-05-15T20:45:31.239Z] [STDOUT] Success: 4, Errors: 0
[2025-05-15T20:45:31.239Z] [STDOUT] Added 0 new transactions
[2025-05-15T20:45:31.239Z] [STDOUT] Script execution completed
[2025-05-15T20:45:31.239Z] Synchronization completed successfully
[2025-05-15T20:45:31.239Z] Next sync scheduled in 5 seconds
[2025-05-15T20:45:35.466Z] [STDOUT] Using database connection: postgres://***:***@localhost:5432/prosumeai
[2025-05-15T20:45:35.467Z] [STDOUT] Starting subscription invoice synchronization...
[2025-05-15T20:45:35.467Z] [STDOUT] Database schema validated successfully
[2025-05-15T20:45:35.467Z] [STDOUT] Found 4 active Razorpay subscriptions to sync
[2025-05-15T20:45:35.467Z] [STDOUT] Processing subscription 20 with Razorpay ID: sub_QUxcCis3igdqUA
[2025-05-15T20:45:35.467Z] [STDOUT] Subscription 20 has 1 existing transactions
[2025-05-15T20:45:35.467Z] [STDOUT] Razorpay initialization in progress, waiting...
[2025-05-15T20:45:35.467Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:45:35.467Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:45:35.467Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:45:35.467Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:45:35.467Z] [STDOUT] Fetching invoices for subscription ID: sub_QUxcCis3igdqUA
[2025-05-15T20:45:35.467Z] [STDOUT] Found 0 invoices for subscription: sub_QUxcCis3igdqUA
[2025-05-15T20:45:35.467Z] [STDOUT] Found 0 invoices for subscription sub_QUxcCis3igdqUA
[2025-05-15T20:45:35.467Z] [STDOUT] Processing subscription 24 with Razorpay ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:45:35.467Z] [STDOUT] Subscription 24 has 1 existing transactions
[2025-05-15T20:45:35.467Z] [STDOUT] Fetching invoices for subscription ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:45:35.467Z] [STDOUT] Found 1 invoices for subscription: sub_QV05DCrgh3A2rL
[2025-05-15T20:45:35.467Z] [STDOUT] Transaction for payment pay_QV05q44fHQzL1q already exists in database (1 records), skipping
[2025-05-15T20:45:35.467Z] [STDOUT] Found 1 invoices for subscription sub_QV05DCrgh3A2rL
[2025-05-15T20:45:35.467Z] [STDOUT] Processing subscription 25 with Razorpay ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:45:35.467Z] [STDOUT] Subscription 25 has 2 existing transactions
[2025-05-15T20:45:35.467Z] [STDOUT] Fetching invoices for subscription ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:45:35.467Z] [STDOUT] Found 1 invoices for subscription: sub_QV1W0JNq2cOk7s
[2025-05-15T20:45:35.467Z] [STDOUT] Transaction for payment pay_QV1WoyCgCY23iO already exists in database (2 records), skipping
[2025-05-15T20:45:35.467Z] [STDOUT] Found 1 invoices for subscription sub_QV1W0JNq2cOk7s
[2025-05-15T20:45:35.467Z] [STDOUT] Processing subscription 26 with Razorpay ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:45:35.467Z] [STDOUT] Subscription 26 has 2 existing transactions
[2025-05-15T20:45:35.467Z] [STDOUT] Fetching invoices for subscription ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:45:35.467Z] [STDOUT] Found 2 invoices for subscription: sub_QVIG6dAuP0UXXn
[2025-05-15T20:45:35.467Z] [STDOUT] Transaction for payment pay_QVILKDuy9v6ovq already exists in database (1 records), skipping
[2025-05-15T20:45:35.467Z] [STDOUT] Transaction for payment pay_QVIGtXTXkm93W8 already exists in database (1 records), skipping
[2025-05-15T20:45:35.467Z] [STDOUT] Found 2 invoices for subscription sub_QVIG6dAuP0UXXn
[2025-05-15T20:45:35.467Z] [STDOUT] Subscription invoice synchronization complete!
[2025-05-15T20:45:35.467Z] [STDOUT] Processed 4 subscriptions
[2025-05-15T20:45:35.467Z] [STDOUT] Success: 4, Errors: 0
[2025-05-15T20:45:35.467Z] [STDOUT] Added 0 new transactions
[2025-05-15T20:45:35.467Z] [STDOUT] Script execution completed
[2025-05-15T20:45:35.467Z] Synchronization completed successfully
[2025-05-15T20:45:35.467Z] Next sync scheduled in 5 seconds
[2025-05-15T20:45:35.897Z] Starting invoice synchronization...
[2025-05-15T20:45:35.897Z] Running sync script: /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:45:35.898Z] Executing command: cd /Users/raja/Development/ProsumeAI/server && npx tsx /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:45:40.455Z] [STDOUT] Using database connection: postgres://***:***@localhost:5432/prosumeai
[2025-05-15T20:45:40.455Z] [STDOUT] Starting subscription invoice synchronization...
[2025-05-15T20:45:40.455Z] [STDOUT] Database schema validated successfully
[2025-05-15T20:45:40.455Z] [STDOUT] Found 4 active Razorpay subscriptions to sync
[2025-05-15T20:45:40.455Z] [STDOUT] Processing subscription 20 with Razorpay ID: sub_QUxcCis3igdqUA
[2025-05-15T20:45:40.455Z] [STDOUT] Subscription 20 has 1 existing transactions
[2025-05-15T20:45:40.455Z] [STDOUT] Razorpay initialization in progress, waiting...
[2025-05-15T20:45:40.455Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:45:40.455Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:45:40.455Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:45:40.455Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:45:40.455Z] [STDOUT] Fetching invoices for subscription ID: sub_QUxcCis3igdqUA
[2025-05-15T20:45:40.455Z] [STDOUT] Found 0 invoices for subscription: sub_QUxcCis3igdqUA
[2025-05-15T20:45:40.455Z] [STDOUT] Found 0 invoices for subscription sub_QUxcCis3igdqUA
[2025-05-15T20:45:40.455Z] [STDOUT] Processing subscription 24 with Razorpay ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:45:40.455Z] [STDOUT] Subscription 24 has 1 existing transactions
[2025-05-15T20:45:40.455Z] [STDOUT] Fetching invoices for subscription ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:45:40.455Z] [STDOUT] Found 1 invoices for subscription: sub_QV05DCrgh3A2rL
[2025-05-15T20:45:40.455Z] [STDOUT] Transaction for payment pay_QV05q44fHQzL1q already exists in database (1 records), skipping
[2025-05-15T20:45:40.455Z] [STDOUT] Found 1 invoices for subscription sub_QV05DCrgh3A2rL
[2025-05-15T20:45:40.455Z] [STDOUT] Processing subscription 25 with Razorpay ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:45:40.455Z] [STDOUT] Subscription 25 has 2 existing transactions
[2025-05-15T20:45:40.455Z] [STDOUT] Fetching invoices for subscription ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:45:40.455Z] [STDOUT] Found 1 invoices for subscription: sub_QV1W0JNq2cOk7s
[2025-05-15T20:45:40.455Z] [STDOUT] Transaction for payment pay_QV1WoyCgCY23iO already exists in database (2 records), skipping
[2025-05-15T20:45:40.455Z] [STDOUT] Found 1 invoices for subscription sub_QV1W0JNq2cOk7s
[2025-05-15T20:45:40.455Z] [STDOUT] Processing subscription 26 with Razorpay ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:45:40.455Z] [STDOUT] Subscription 26 has 2 existing transactions
[2025-05-15T20:45:40.455Z] [STDOUT] Fetching invoices for subscription ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:45:40.455Z] [STDOUT] Found 2 invoices for subscription: sub_QVIG6dAuP0UXXn
[2025-05-15T20:45:40.455Z] [STDOUT] Transaction for payment pay_QVILKDuy9v6ovq already exists in database (1 records), skipping
[2025-05-15T20:45:40.455Z] [STDOUT] Transaction for payment pay_QVIGtXTXkm93W8 already exists in database (1 records), skipping
[2025-05-15T20:45:40.455Z] [STDOUT] Found 2 invoices for subscription sub_QVIG6dAuP0UXXn
[2025-05-15T20:45:40.455Z] [STDOUT] Subscription invoice synchronization complete!
[2025-05-15T20:45:40.455Z] [STDOUT] Processed 4 subscriptions
[2025-05-15T20:45:40.455Z] [STDOUT] Success: 4, Errors: 0
[2025-05-15T20:45:40.455Z] [STDOUT] Added 0 new transactions
[2025-05-15T20:45:40.455Z] [STDOUT] Script execution completed
[2025-05-15T20:45:40.455Z] Synchronization completed successfully
[2025-05-15T20:45:40.455Z] Next sync scheduled in 5 seconds
[2025-05-15T20:45:40.898Z] Starting invoice synchronization...
[2025-05-15T20:45:40.898Z] Running sync script: /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:45:40.898Z] Executing command: cd /Users/raja/Development/ProsumeAI/server && npx tsx /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:45:45.899Z] Starting invoice synchronization...
[2025-05-15T20:45:45.899Z] Running sync script: /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:45:45.899Z] Executing command: cd /Users/raja/Development/ProsumeAI/server && npx tsx /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:45:45.945Z] [STDOUT] Using database connection: postgres://***:***@localhost:5432/prosumeai
[2025-05-15T20:45:45.945Z] [STDOUT] Starting subscription invoice synchronization...
[2025-05-15T20:45:45.945Z] [STDOUT] Database schema validated successfully
[2025-05-15T20:45:45.945Z] [STDOUT] Found 4 active Razorpay subscriptions to sync
[2025-05-15T20:45:45.945Z] [STDOUT] Processing subscription 20 with Razorpay ID: sub_QUxcCis3igdqUA
[2025-05-15T20:45:45.945Z] [STDOUT] Subscription 20 has 1 existing transactions
[2025-05-15T20:45:45.945Z] [STDOUT] Razorpay initialization in progress, waiting...
[2025-05-15T20:45:45.945Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:45:45.945Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:45:45.945Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:45:45.945Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:45:45.945Z] [STDOUT] Fetching invoices for subscription ID: sub_QUxcCis3igdqUA
[2025-05-15T20:45:45.945Z] [STDOUT] Found 0 invoices for subscription: sub_QUxcCis3igdqUA
[2025-05-15T20:45:45.945Z] [STDOUT] Found 0 invoices for subscription sub_QUxcCis3igdqUA
[2025-05-15T20:45:45.945Z] [STDOUT] Processing subscription 24 with Razorpay ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:45:45.945Z] [STDOUT] Subscription 24 has 1 existing transactions
[2025-05-15T20:45:45.945Z] [STDOUT] Fetching invoices for subscription ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:45:45.945Z] [STDOUT] Found 1 invoices for subscription: sub_QV05DCrgh3A2rL
[2025-05-15T20:45:45.945Z] [STDOUT] Transaction for payment pay_QV05q44fHQzL1q already exists in database (1 records), skipping
[2025-05-15T20:45:45.945Z] [STDOUT] Found 1 invoices for subscription sub_QV05DCrgh3A2rL
[2025-05-15T20:45:45.945Z] [STDOUT] Processing subscription 25 with Razorpay ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:45:45.945Z] [STDOUT] Subscription 25 has 2 existing transactions
[2025-05-15T20:45:45.945Z] [STDOUT] Fetching invoices for subscription ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:45:45.945Z] [STDOUT] Found 1 invoices for subscription: sub_QV1W0JNq2cOk7s
[2025-05-15T20:45:45.945Z] [STDOUT] Transaction for payment pay_QV1WoyCgCY23iO already exists in database (2 records), skipping
[2025-05-15T20:45:45.945Z] [STDOUT] Found 1 invoices for subscription sub_QV1W0JNq2cOk7s
[2025-05-15T20:45:45.945Z] [STDOUT] Processing subscription 26 with Razorpay ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:45:45.945Z] [STDOUT] Subscription 26 has 2 existing transactions
[2025-05-15T20:45:45.945Z] [STDOUT] Fetching invoices for subscription ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:45:45.945Z] [STDOUT] Found 2 invoices for subscription: sub_QVIG6dAuP0UXXn
[2025-05-15T20:45:45.945Z] [STDOUT] Transaction for payment pay_QVILKDuy9v6ovq already exists in database (1 records), skipping
[2025-05-15T20:45:45.945Z] [STDOUT] Transaction for payment pay_QVIGtXTXkm93W8 already exists in database (1 records), skipping
[2025-05-15T20:45:45.945Z] [STDOUT] Found 2 invoices for subscription sub_QVIG6dAuP0UXXn
[2025-05-15T20:45:45.945Z] [STDOUT] Subscription invoice synchronization complete!
[2025-05-15T20:45:45.945Z] [STDOUT] Processed 4 subscriptions
[2025-05-15T20:45:45.945Z] [STDOUT] Success: 4, Errors: 0
[2025-05-15T20:45:45.945Z] [STDOUT] Added 0 new transactions
[2025-05-15T20:45:45.945Z] [STDOUT] Script execution completed
[2025-05-15T20:45:45.945Z] Synchronization completed successfully
[2025-05-15T20:45:45.945Z] Next sync scheduled in 5 seconds
[2025-05-15T20:45:50.899Z] Starting invoice synchronization...
[2025-05-15T20:45:50.901Z] Running sync script: /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:45:50.901Z] Executing command: cd /Users/raja/Development/ProsumeAI/server && npx tsx /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:45:50.982Z] [STDOUT] Using database connection: postgres://***:***@localhost:5432/prosumeai
[2025-05-15T20:45:50.982Z] [STDOUT] Starting subscription invoice synchronization...
[2025-05-15T20:45:50.983Z] [STDOUT] Database schema validated successfully
[2025-05-15T20:45:50.983Z] [STDOUT] Found 4 active Razorpay subscriptions to sync
[2025-05-15T20:45:50.983Z] [STDOUT] Processing subscription 20 with Razorpay ID: sub_QUxcCis3igdqUA
[2025-05-15T20:45:50.983Z] [STDOUT] Subscription 20 has 1 existing transactions
[2025-05-15T20:45:50.983Z] [STDOUT] Razorpay initialization in progress, waiting...
[2025-05-15T20:45:50.983Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:45:50.983Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:45:50.983Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:45:50.983Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:45:50.983Z] [STDOUT] Fetching invoices for subscription ID: sub_QUxcCis3igdqUA
[2025-05-15T20:45:50.983Z] [STDOUT] Found 0 invoices for subscription: sub_QUxcCis3igdqUA
[2025-05-15T20:45:50.983Z] [STDOUT] Found 0 invoices for subscription sub_QUxcCis3igdqUA
[2025-05-15T20:45:50.983Z] [STDOUT] Processing subscription 24 with Razorpay ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:45:50.983Z] [STDOUT] Subscription 24 has 1 existing transactions
[2025-05-15T20:45:50.983Z] [STDOUT] Fetching invoices for subscription ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:45:50.983Z] [STDOUT] Found 1 invoices for subscription: sub_QV05DCrgh3A2rL
[2025-05-15T20:45:50.983Z] [STDOUT] Transaction for payment pay_QV05q44fHQzL1q already exists in database (1 records), skipping
[2025-05-15T20:45:50.983Z] [STDOUT] Found 1 invoices for subscription sub_QV05DCrgh3A2rL
[2025-05-15T20:45:50.983Z] [STDOUT] Processing subscription 25 with Razorpay ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:45:50.983Z] [STDOUT] Subscription 25 has 2 existing transactions
[2025-05-15T20:45:50.983Z] [STDOUT] Fetching invoices for subscription ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:45:50.983Z] [STDOUT] Found 1 invoices for subscription: sub_QV1W0JNq2cOk7s
[2025-05-15T20:45:50.983Z] [STDOUT] Transaction for payment pay_QV1WoyCgCY23iO already exists in database (2 records), skipping
[2025-05-15T20:45:50.983Z] [STDOUT] Found 1 invoices for subscription sub_QV1W0JNq2cOk7s
[2025-05-15T20:45:50.983Z] [STDOUT] Processing subscription 26 with Razorpay ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:45:50.983Z] [STDOUT] Subscription 26 has 2 existing transactions
[2025-05-15T20:45:50.983Z] [STDOUT] Fetching invoices for subscription ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:45:50.983Z] [STDOUT] Found 2 invoices for subscription: sub_QVIG6dAuP0UXXn
[2025-05-15T20:45:50.983Z] [STDOUT] Transaction for payment pay_QVILKDuy9v6ovq already exists in database (1 records), skipping
[2025-05-15T20:45:50.983Z] [STDOUT] Transaction for payment pay_QVIGtXTXkm93W8 already exists in database (1 records), skipping
[2025-05-15T20:45:50.983Z] [STDOUT] Found 2 invoices for subscription sub_QVIG6dAuP0UXXn
[2025-05-15T20:45:50.983Z] [STDOUT] Subscription invoice synchronization complete!
[2025-05-15T20:45:50.983Z] [STDOUT] Processed 4 subscriptions
[2025-05-15T20:45:50.983Z] [STDOUT] Success: 4, Errors: 0
[2025-05-15T20:45:50.983Z] [STDOUT] Added 0 new transactions
[2025-05-15T20:45:50.983Z] [STDOUT] Script execution completed
[2025-05-15T20:45:50.983Z] Synchronization completed successfully
[2025-05-15T20:45:50.983Z] Next sync scheduled in 5 seconds
[2025-05-15T20:45:55.498Z] [STDOUT] Using database connection: postgres://***:***@localhost:5432/prosumeai
[2025-05-15T20:45:55.498Z] [STDOUT] Starting subscription invoice synchronization...
[2025-05-15T20:45:55.498Z] [STDOUT] Database schema validated successfully
[2025-05-15T20:45:55.498Z] [STDOUT] Found 4 active Razorpay subscriptions to sync
[2025-05-15T20:45:55.498Z] [STDOUT] Processing subscription 20 with Razorpay ID: sub_QUxcCis3igdqUA
[2025-05-15T20:45:55.498Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:45:55.498Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:45:55.498Z] [STDOUT] Subscription 20 has 1 existing transactions
[2025-05-15T20:45:55.498Z] [STDOUT] Razorpay initialization in progress, waiting...
[2025-05-15T20:45:55.498Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:45:55.498Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:45:55.498Z] [STDOUT] Fetching invoices for subscription ID: sub_QUxcCis3igdqUA
[2025-05-15T20:45:55.498Z] [STDOUT] Found 0 invoices for subscription: sub_QUxcCis3igdqUA
[2025-05-15T20:45:55.498Z] [STDOUT] Found 0 invoices for subscription sub_QUxcCis3igdqUA
[2025-05-15T20:45:55.498Z] [STDOUT] Processing subscription 24 with Razorpay ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:45:55.498Z] [STDOUT] Subscription 24 has 1 existing transactions
[2025-05-15T20:45:55.498Z] [STDOUT] Fetching invoices for subscription ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:45:55.498Z] [STDOUT] Found 1 invoices for subscription: sub_QV05DCrgh3A2rL
[2025-05-15T20:45:55.498Z] [STDOUT] Transaction for payment pay_QV05q44fHQzL1q already exists in database (1 records), skipping
[2025-05-15T20:45:55.498Z] [STDOUT] Found 1 invoices for subscription sub_QV05DCrgh3A2rL
[2025-05-15T20:45:55.498Z] [STDOUT] Processing subscription 25 with Razorpay ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:45:55.498Z] [STDOUT] Subscription 25 has 2 existing transactions
[2025-05-15T20:45:55.498Z] [STDOUT] Fetching invoices for subscription ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:45:55.498Z] [STDOUT] Found 1 invoices for subscription: sub_QV1W0JNq2cOk7s
[2025-05-15T20:45:55.498Z] [STDOUT] Transaction for payment pay_QV1WoyCgCY23iO already exists in database (2 records), skipping
[2025-05-15T20:45:55.498Z] [STDOUT] Found 1 invoices for subscription sub_QV1W0JNq2cOk7s
[2025-05-15T20:45:55.498Z] [STDOUT] Processing subscription 26 with Razorpay ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:45:55.498Z] [STDOUT] Subscription 26 has 2 existing transactions
[2025-05-15T20:45:55.498Z] [STDOUT] Fetching invoices for subscription ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:45:55.498Z] [STDOUT] Found 2 invoices for subscription: sub_QVIG6dAuP0UXXn
[2025-05-15T20:45:55.498Z] [STDOUT] Transaction for payment pay_QVILKDuy9v6ovq already exists in database (1 records), skipping
[2025-05-15T20:45:55.498Z] [STDOUT] Transaction for payment pay_QVIGtXTXkm93W8 already exists in database (1 records), skipping
[2025-05-15T20:45:55.498Z] [STDOUT] Found 2 invoices for subscription sub_QVIG6dAuP0UXXn
[2025-05-15T20:45:55.498Z] [STDOUT] Subscription invoice synchronization complete!
[2025-05-15T20:45:55.498Z] [STDOUT] Processed 4 subscriptions
[2025-05-15T20:45:55.498Z] [STDOUT] Success: 4, Errors: 0
[2025-05-15T20:45:55.498Z] [STDOUT] Added 0 new transactions
[2025-05-15T20:45:55.498Z] [STDOUT] Script execution completed
[2025-05-15T20:45:55.498Z] Synchronization completed successfully
[2025-05-15T20:45:55.498Z] Next sync scheduled in 5 seconds
[2025-05-15T20:45:55.900Z] Starting invoice synchronization...
[2025-05-15T20:45:55.901Z] Running sync script: /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:45:55.901Z] Executing command: cd /Users/raja/Development/ProsumeAI/server && npx tsx /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:46:00.815Z] [STDOUT] Using database connection: postgres://***:***@localhost:5432/prosumeai
[2025-05-15T20:46:00.815Z] [STDOUT] Starting subscription invoice synchronization...
[2025-05-15T20:46:00.815Z] [STDOUT] Found 4 active Razorpay subscriptions to sync
[2025-05-15T20:46:00.815Z] [STDOUT] Processing subscription 20 with Razorpay ID: sub_QUxcCis3igdqUA
[2025-05-15T20:46:00.815Z] [STDOUT] Database schema validated successfully
[2025-05-15T20:46:00.815Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:46:00.815Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:46:00.815Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:46:00.815Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:46:00.815Z] [STDOUT] Subscription 20 has 1 existing transactions
[2025-05-15T20:46:00.815Z] [STDOUT] Fetching invoices for subscription ID: sub_QUxcCis3igdqUA
[2025-05-15T20:46:00.815Z] [STDOUT] Found 0 invoices for subscription: sub_QUxcCis3igdqUA
[2025-05-15T20:46:00.815Z] [STDOUT] Found 0 invoices for subscription sub_QUxcCis3igdqUA
[2025-05-15T20:46:00.815Z] [STDOUT] Processing subscription 24 with Razorpay ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:46:00.815Z] [STDOUT] Subscription 24 has 1 existing transactions
[2025-05-15T20:46:00.815Z] [STDOUT] Fetching invoices for subscription ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:46:00.815Z] [STDOUT] Found 1 invoices for subscription: sub_QV05DCrgh3A2rL
[2025-05-15T20:46:00.815Z] [STDOUT] Transaction for payment pay_QV05q44fHQzL1q already exists in database (1 records), skipping
[2025-05-15T20:46:00.815Z] [STDOUT] Found 1 invoices for subscription sub_QV05DCrgh3A2rL
[2025-05-15T20:46:00.815Z] [STDOUT] Processing subscription 25 with Razorpay ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:46:00.815Z] [STDOUT] Subscription 25 has 2 existing transactions
[2025-05-15T20:46:00.815Z] [STDOUT] Fetching invoices for subscription ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:46:00.815Z] [STDOUT] Found 1 invoices for subscription: sub_QV1W0JNq2cOk7s
[2025-05-15T20:46:00.815Z] [STDOUT] Transaction for payment pay_QV1WoyCgCY23iO already exists in database (2 records), skipping
[2025-05-15T20:46:00.815Z] [STDOUT] Found 1 invoices for subscription sub_QV1W0JNq2cOk7s
[2025-05-15T20:46:00.815Z] [STDOUT] Processing subscription 26 with Razorpay ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:46:00.815Z] [STDOUT] Subscription 26 has 2 existing transactions
[2025-05-15T20:46:00.815Z] [STDOUT] Fetching invoices for subscription ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:46:00.815Z] [STDOUT] Found 2 invoices for subscription: sub_QVIG6dAuP0UXXn
[2025-05-15T20:46:00.815Z] [STDOUT] Transaction for payment pay_QVILKDuy9v6ovq already exists in database (1 records), skipping
[2025-05-15T20:46:00.815Z] [STDOUT] Transaction for payment pay_QVIGtXTXkm93W8 already exists in database (1 records), skipping
[2025-05-15T20:46:00.815Z] [STDOUT] Found 2 invoices for subscription sub_QVIG6dAuP0UXXn
[2025-05-15T20:46:00.815Z] [STDOUT] Subscription invoice synchronization complete!
[2025-05-15T20:46:00.815Z] [STDOUT] Processed 4 subscriptions
[2025-05-15T20:46:00.815Z] [STDOUT] Success: 4, Errors: 0
[2025-05-15T20:46:00.815Z] [STDOUT] Added 0 new transactions
[2025-05-15T20:46:00.815Z] [STDOUT] Script execution completed
[2025-05-15T20:46:00.816Z] Synchronization completed successfully
[2025-05-15T20:46:00.816Z] Next sync scheduled in 5 seconds
[2025-05-15T20:46:00.901Z] Starting invoice synchronization...
[2025-05-15T20:46:00.901Z] Running sync script: /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:46:00.901Z] Executing command: cd /Users/raja/Development/ProsumeAI/server && npx tsx /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:46:05.258Z] [STDOUT] Using database connection: postgres://***:***@localhost:5432/prosumeai
[2025-05-15T20:46:05.258Z] [STDOUT] Starting subscription invoice synchronization...
[2025-05-15T20:46:05.258Z] [STDOUT] Database schema validated successfully
[2025-05-15T20:46:05.258Z] [STDOUT] Found 4 active Razorpay subscriptions to sync
[2025-05-15T20:46:05.258Z] [STDOUT] Processing subscription 20 with Razorpay ID: sub_QUxcCis3igdqUA
[2025-05-15T20:46:05.258Z] [STDOUT] Subscription 20 has 1 existing transactions
[2025-05-15T20:46:05.258Z] [STDOUT] Razorpay initialization in progress, waiting...
[2025-05-15T20:46:05.258Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:46:05.258Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:46:05.258Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:46:05.258Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:46:05.258Z] [STDOUT] Fetching invoices for subscription ID: sub_QUxcCis3igdqUA
[2025-05-15T20:46:05.258Z] [STDOUT] Found 0 invoices for subscription: sub_QUxcCis3igdqUA
[2025-05-15T20:46:05.258Z] [STDOUT] Found 0 invoices for subscription sub_QUxcCis3igdqUA
[2025-05-15T20:46:05.258Z] [STDOUT] Processing subscription 24 with Razorpay ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:46:05.258Z] [STDOUT] Subscription 24 has 1 existing transactions
[2025-05-15T20:46:05.258Z] [STDOUT] Fetching invoices for subscription ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:46:05.258Z] [STDOUT] Found 1 invoices for subscription: sub_QV05DCrgh3A2rL
[2025-05-15T20:46:05.258Z] [STDOUT] Transaction for payment pay_QV05q44fHQzL1q already exists in database (1 records), skipping
[2025-05-15T20:46:05.258Z] [STDOUT] Found 1 invoices for subscription sub_QV05DCrgh3A2rL
[2025-05-15T20:46:05.258Z] [STDOUT] Processing subscription 25 with Razorpay ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:46:05.258Z] [STDOUT] Subscription 25 has 2 existing transactions
[2025-05-15T20:46:05.258Z] [STDOUT] Fetching invoices for subscription ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:46:05.258Z] [STDOUT] Found 1 invoices for subscription: sub_QV1W0JNq2cOk7s
[2025-05-15T20:46:05.258Z] [STDOUT] Transaction for payment pay_QV1WoyCgCY23iO already exists in database (2 records), skipping
[2025-05-15T20:46:05.258Z] [STDOUT] Found 1 invoices for subscription sub_QV1W0JNq2cOk7s
[2025-05-15T20:46:05.258Z] [STDOUT] Processing subscription 26 with Razorpay ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:46:05.258Z] [STDOUT] Subscription 26 has 2 existing transactions
[2025-05-15T20:46:05.258Z] [STDOUT] Fetching invoices for subscription ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:46:05.258Z] [STDOUT] Found 2 invoices for subscription: sub_QVIG6dAuP0UXXn
[2025-05-15T20:46:05.258Z] [STDOUT] Transaction for payment pay_QVILKDuy9v6ovq already exists in database (1 records), skipping
[2025-05-15T20:46:05.258Z] [STDOUT] Transaction for payment pay_QVIGtXTXkm93W8 already exists in database (1 records), skipping
[2025-05-15T20:46:05.258Z] [STDOUT] Found 2 invoices for subscription sub_QVIG6dAuP0UXXn
[2025-05-15T20:46:05.258Z] [STDOUT] Subscription invoice synchronization complete!
[2025-05-15T20:46:05.258Z] [STDOUT] Processed 4 subscriptions
[2025-05-15T20:46:05.258Z] [STDOUT] Success: 4, Errors: 0
[2025-05-15T20:46:05.258Z] [STDOUT] Added 0 new transactions
[2025-05-15T20:46:05.258Z] [STDOUT] Script execution completed
[2025-05-15T20:46:05.258Z] Synchronization completed successfully
[2025-05-15T20:46:05.258Z] Next sync scheduled in 5 seconds
[2025-05-15T20:46:05.902Z] Starting invoice synchronization...
[2025-05-15T20:46:05.903Z] Running sync script: /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:46:05.903Z] Executing command: cd /Users/raja/Development/ProsumeAI/server && npx tsx /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:46:10.752Z] [STDOUT] Using database connection: postgres://***:***@localhost:5432/prosumeai
[2025-05-15T20:46:10.753Z] [STDOUT] Starting subscription invoice synchronization...
[2025-05-15T20:46:10.753Z] [STDOUT] Database schema validated successfully
[2025-05-15T20:46:10.753Z] [STDOUT] Found 4 active Razorpay subscriptions to sync
[2025-05-15T20:46:10.753Z] [STDOUT] Processing subscription 20 with Razorpay ID: sub_QUxcCis3igdqUA
[2025-05-15T20:46:10.753Z] [STDOUT] Subscription 20 has 1 existing transactions
[2025-05-15T20:46:10.753Z] [STDOUT] Razorpay initialization in progress, waiting...
[2025-05-15T20:46:10.753Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:46:10.753Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:46:10.753Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:46:10.753Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:46:10.753Z] [STDOUT] Fetching invoices for subscription ID: sub_QUxcCis3igdqUA
[2025-05-15T20:46:10.753Z] [STDOUT] Found 0 invoices for subscription: sub_QUxcCis3igdqUA
[2025-05-15T20:46:10.753Z] [STDOUT] Found 0 invoices for subscription sub_QUxcCis3igdqUA
[2025-05-15T20:46:10.753Z] [STDOUT] Processing subscription 24 with Razorpay ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:46:10.753Z] [STDOUT] Subscription 24 has 1 existing transactions
[2025-05-15T20:46:10.753Z] [STDOUT] Fetching invoices for subscription ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:46:10.753Z] [STDOUT] Found 1 invoices for subscription: sub_QV05DCrgh3A2rL
[2025-05-15T20:46:10.753Z] [STDOUT] Transaction for payment pay_QV05q44fHQzL1q already exists in database (1 records), skipping
[2025-05-15T20:46:10.753Z] [STDOUT] Found 1 invoices for subscription sub_QV05DCrgh3A2rL
[2025-05-15T20:46:10.753Z] [STDOUT] Processing subscription 25 with Razorpay ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:46:10.753Z] [STDOUT] Subscription 25 has 2 existing transactions
[2025-05-15T20:46:10.753Z] [STDOUT] Fetching invoices for subscription ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:46:10.753Z] [STDOUT] Found 1 invoices for subscription: sub_QV1W0JNq2cOk7s
[2025-05-15T20:46:10.753Z] [STDOUT] Transaction for payment pay_QV1WoyCgCY23iO already exists in database (2 records), skipping
[2025-05-15T20:46:10.753Z] [STDOUT] Found 1 invoices for subscription sub_QV1W0JNq2cOk7s
[2025-05-15T20:46:10.753Z] [STDOUT] Processing subscription 26 with Razorpay ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:46:10.753Z] [STDOUT] Subscription 26 has 2 existing transactions
[2025-05-15T20:46:10.753Z] [STDOUT] Fetching invoices for subscription ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:46:10.753Z] [STDOUT] Found 2 invoices for subscription: sub_QVIG6dAuP0UXXn
[2025-05-15T20:46:10.753Z] [STDOUT] Transaction for payment pay_QVILKDuy9v6ovq already exists in database (1 records), skipping
[2025-05-15T20:46:10.753Z] [STDOUT] Transaction for payment pay_QVIGtXTXkm93W8 already exists in database (1 records), skipping
[2025-05-15T20:46:10.753Z] [STDOUT] Found 2 invoices for subscription sub_QVIG6dAuP0UXXn
[2025-05-15T20:46:10.753Z] [STDOUT] Subscription invoice synchronization complete!
[2025-05-15T20:46:10.753Z] [STDOUT] Processed 4 subscriptions
[2025-05-15T20:46:10.753Z] [STDOUT] Success: 4, Errors: 0
[2025-05-15T20:46:10.753Z] [STDOUT] Added 0 new transactions
[2025-05-15T20:46:10.753Z] [STDOUT] Script execution completed
[2025-05-15T20:46:10.753Z] Synchronization completed successfully
[2025-05-15T20:46:10.753Z] Next sync scheduled in 5 seconds
[2025-05-15T20:46:10.902Z] Starting invoice synchronization...
[2025-05-15T20:46:10.903Z] Running sync script: /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:46:10.903Z] Executing command: cd /Users/raja/Development/ProsumeAI/server && npx tsx /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:46:15.904Z] Starting invoice synchronization...
[2025-05-15T20:46:15.905Z] Running sync script: /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:46:15.905Z] Executing command: cd /Users/raja/Development/ProsumeAI/server && npx tsx /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:46:16.094Z] [STDOUT] Using database connection: postgres://***:***@localhost:5432/prosumeai
[2025-05-15T20:46:16.094Z] [STDOUT] Starting subscription invoice synchronization...
[2025-05-15T20:46:16.094Z] [STDOUT] Database schema validated successfully
[2025-05-15T20:46:16.094Z] [STDOUT] Found 4 active Razorpay subscriptions to sync
[2025-05-15T20:46:16.094Z] [STDOUT] Processing subscription 20 with Razorpay ID: sub_QUxcCis3igdqUA
[2025-05-15T20:46:16.094Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:46:16.094Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:46:16.094Z] [STDOUT] Subscription 20 has 1 existing transactions
[2025-05-15T20:46:16.094Z] [STDOUT] Razorpay initialization in progress, waiting...
[2025-05-15T20:46:16.094Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:46:16.094Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:46:16.094Z] [STDOUT] Fetching invoices for subscription ID: sub_QUxcCis3igdqUA
[2025-05-15T20:46:16.094Z] [STDOUT] Found 0 invoices for subscription: sub_QUxcCis3igdqUA
[2025-05-15T20:46:16.094Z] [STDOUT] Found 0 invoices for subscription sub_QUxcCis3igdqUA
[2025-05-15T20:46:16.094Z] [STDOUT] Processing subscription 24 with Razorpay ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:46:16.094Z] [STDOUT] Subscription 24 has 1 existing transactions
[2025-05-15T20:46:16.094Z] [STDOUT] Fetching invoices for subscription ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:46:16.094Z] [STDOUT] Found 1 invoices for subscription: sub_QV05DCrgh3A2rL
[2025-05-15T20:46:16.095Z] [STDOUT] Transaction for payment pay_QV05q44fHQzL1q already exists in database (1 records), skipping
[2025-05-15T20:46:16.095Z] [STDOUT] Found 1 invoices for subscription sub_QV05DCrgh3A2rL
[2025-05-15T20:46:16.095Z] [STDOUT] Processing subscription 25 with Razorpay ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:46:16.095Z] [STDOUT] Subscription 25 has 2 existing transactions
[2025-05-15T20:46:16.095Z] [STDOUT] Fetching invoices for subscription ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:46:16.095Z] [STDOUT] Found 1 invoices for subscription: sub_QV1W0JNq2cOk7s
[2025-05-15T20:46:16.095Z] [STDOUT] Transaction for payment pay_QV1WoyCgCY23iO already exists in database (2 records), skipping
[2025-05-15T20:46:16.095Z] [STDOUT] Found 1 invoices for subscription sub_QV1W0JNq2cOk7s
[2025-05-15T20:46:16.095Z] [STDOUT] Processing subscription 26 with Razorpay ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:46:16.095Z] [STDOUT] Subscription 26 has 2 existing transactions
[2025-05-15T20:46:16.095Z] [STDOUT] Fetching invoices for subscription ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:46:16.095Z] [STDOUT] Found 2 invoices for subscription: sub_QVIG6dAuP0UXXn
[2025-05-15T20:46:16.095Z] [STDOUT] Transaction for payment pay_QVILKDuy9v6ovq already exists in database (1 records), skipping
[2025-05-15T20:46:16.095Z] [STDOUT] Transaction for payment pay_QVIGtXTXkm93W8 already exists in database (1 records), skipping
[2025-05-15T20:46:16.095Z] [STDOUT] Found 2 invoices for subscription sub_QVIG6dAuP0UXXn
[2025-05-15T20:46:16.095Z] [STDOUT] Subscription invoice synchronization complete!
[2025-05-15T20:46:16.095Z] [STDOUT] Processed 4 subscriptions
[2025-05-15T20:46:16.095Z] [STDOUT] Success: 4, Errors: 0
[2025-05-15T20:46:16.095Z] [STDOUT] Added 0 new transactions
[2025-05-15T20:46:16.095Z] [STDOUT] Script execution completed
[2025-05-15T20:46:16.095Z] Synchronization completed successfully
[2025-05-15T20:46:16.095Z] Next sync scheduled in 5 seconds
[2025-05-15T20:46:20.347Z] [STDOUT] Using database connection: postgres://***:***@localhost:5432/prosumeai
[2025-05-15T20:46:20.347Z] [STDOUT] Starting subscription invoice synchronization...
[2025-05-15T20:46:20.347Z] [STDOUT] Database schema validated successfully
[2025-05-15T20:46:20.347Z] [STDOUT] Found 4 active Razorpay subscriptions to sync
[2025-05-15T20:46:20.347Z] [STDOUT] Processing subscription 20 with Razorpay ID: sub_QUxcCis3igdqUA
[2025-05-15T20:46:20.347Z] [STDOUT] Subscription 20 has 1 existing transactions
[2025-05-15T20:46:20.347Z] [STDOUT] Razorpay initialization in progress, waiting...
[2025-05-15T20:46:20.347Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:46:20.347Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:46:20.347Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:46:20.347Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:46:20.347Z] [STDOUT] Fetching invoices for subscription ID: sub_QUxcCis3igdqUA
[2025-05-15T20:46:20.347Z] [STDOUT] Found 0 invoices for subscription: sub_QUxcCis3igdqUA
[2025-05-15T20:46:20.347Z] [STDOUT] Found 0 invoices for subscription sub_QUxcCis3igdqUA
[2025-05-15T20:46:20.347Z] [STDOUT] Processing subscription 24 with Razorpay ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:46:20.347Z] [STDOUT] Subscription 24 has 1 existing transactions
[2025-05-15T20:46:20.347Z] [STDOUT] Fetching invoices for subscription ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:46:20.347Z] [STDOUT] Found 1 invoices for subscription: sub_QV05DCrgh3A2rL
[2025-05-15T20:46:20.347Z] [STDOUT] Transaction for payment pay_QV05q44fHQzL1q already exists in database (1 records), skipping
[2025-05-15T20:46:20.347Z] [STDOUT] Found 1 invoices for subscription sub_QV05DCrgh3A2rL
[2025-05-15T20:46:20.347Z] [STDOUT] Processing subscription 25 with Razorpay ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:46:20.347Z] [STDOUT] Subscription 25 has 2 existing transactions
[2025-05-15T20:46:20.347Z] [STDOUT] Fetching invoices for subscription ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:46:20.347Z] [STDOUT] Found 1 invoices for subscription: sub_QV1W0JNq2cOk7s
[2025-05-15T20:46:20.347Z] [STDOUT] Transaction for payment pay_QV1WoyCgCY23iO already exists in database (2 records), skipping
[2025-05-15T20:46:20.347Z] [STDOUT] Found 1 invoices for subscription sub_QV1W0JNq2cOk7s
[2025-05-15T20:46:20.347Z] [STDOUT] Processing subscription 26 with Razorpay ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:46:20.347Z] [STDOUT] Subscription 26 has 2 existing transactions
[2025-05-15T20:46:20.347Z] [STDOUT] Fetching invoices for subscription ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:46:20.347Z] [STDOUT] Found 2 invoices for subscription: sub_QVIG6dAuP0UXXn
[2025-05-15T20:46:20.347Z] [STDOUT] Transaction for payment pay_QVILKDuy9v6ovq already exists in database (1 records), skipping
[2025-05-15T20:46:20.347Z] [STDOUT] Transaction for payment pay_QVIGtXTXkm93W8 already exists in database (1 records), skipping
[2025-05-15T20:46:20.347Z] [STDOUT] Found 2 invoices for subscription sub_QVIG6dAuP0UXXn
[2025-05-15T20:46:20.347Z] [STDOUT] Subscription invoice synchronization complete!
[2025-05-15T20:46:20.347Z] [STDOUT] Processed 4 subscriptions
[2025-05-15T20:46:20.347Z] [STDOUT] Success: 4, Errors: 0
[2025-05-15T20:46:20.347Z] [STDOUT] Added 0 new transactions
[2025-05-15T20:46:20.347Z] [STDOUT] Script execution completed
[2025-05-15T20:46:20.347Z] Synchronization completed successfully
[2025-05-15T20:46:20.347Z] Next sync scheduled in 5 seconds
[2025-05-15T20:46:20.905Z] Starting invoice synchronization...
[2025-05-15T20:46:20.905Z] Running sync script: /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:46:20.905Z] Executing command: cd /Users/raja/Development/ProsumeAI/server && npx tsx /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:46:25.373Z] [STDOUT] Using database connection: postgres://***:***@localhost:5432/prosumeai
[2025-05-15T20:46:25.373Z] [STDOUT] Starting subscription invoice synchronization...
[2025-05-15T20:46:25.373Z] [STDOUT] Database schema validated successfully
[2025-05-15T20:46:25.373Z] [STDOUT] Found 4 active Razorpay subscriptions to sync
[2025-05-15T20:46:25.373Z] [STDOUT] Processing subscription 20 with Razorpay ID: sub_QUxcCis3igdqUA
[2025-05-15T20:46:25.373Z] [STDOUT] Subscription 20 has 1 existing transactions
[2025-05-15T20:46:25.373Z] [STDOUT] Razorpay initialization in progress, waiting...
[2025-05-15T20:46:25.373Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:46:25.373Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:46:25.373Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:46:25.373Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:46:25.373Z] [STDOUT] Fetching invoices for subscription ID: sub_QUxcCis3igdqUA
[2025-05-15T20:46:25.373Z] [STDOUT] Found 0 invoices for subscription: sub_QUxcCis3igdqUA
[2025-05-15T20:46:25.373Z] [STDOUT] Found 0 invoices for subscription sub_QUxcCis3igdqUA
[2025-05-15T20:46:25.373Z] [STDOUT] Processing subscription 24 with Razorpay ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:46:25.373Z] [STDOUT] Subscription 24 has 1 existing transactions
[2025-05-15T20:46:25.373Z] [STDOUT] Fetching invoices for subscription ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:46:25.373Z] [STDOUT] Found 1 invoices for subscription: sub_QV05DCrgh3A2rL
[2025-05-15T20:46:25.373Z] [STDOUT] Transaction for payment pay_QV05q44fHQzL1q already exists in database (1 records), skipping
[2025-05-15T20:46:25.373Z] [STDOUT] Found 1 invoices for subscription sub_QV05DCrgh3A2rL
[2025-05-15T20:46:25.373Z] [STDOUT] Processing subscription 25 with Razorpay ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:46:25.373Z] [STDOUT] Subscription 25 has 2 existing transactions
[2025-05-15T20:46:25.373Z] [STDOUT] Fetching invoices for subscription ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:46:25.373Z] [STDOUT] Found 1 invoices for subscription: sub_QV1W0JNq2cOk7s
[2025-05-15T20:46:25.373Z] [STDOUT] Transaction for payment pay_QV1WoyCgCY23iO already exists in database (2 records), skipping
[2025-05-15T20:46:25.373Z] [STDOUT] Found 1 invoices for subscription sub_QV1W0JNq2cOk7s
[2025-05-15T20:46:25.373Z] [STDOUT] Processing subscription 26 with Razorpay ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:46:25.373Z] [STDOUT] Subscription 26 has 2 existing transactions
[2025-05-15T20:46:25.373Z] [STDOUT] Fetching invoices for subscription ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:46:25.373Z] [STDOUT] Found 2 invoices for subscription: sub_QVIG6dAuP0UXXn
[2025-05-15T20:46:25.373Z] [STDOUT] Transaction for payment pay_QVILKDuy9v6ovq already exists in database (1 records), skipping
[2025-05-15T20:46:25.373Z] [STDOUT] Transaction for payment pay_QVIGtXTXkm93W8 already exists in database (1 records), skipping
[2025-05-15T20:46:25.373Z] [STDOUT] Found 2 invoices for subscription sub_QVIG6dAuP0UXXn
[2025-05-15T20:46:25.373Z] [STDOUT] Subscription invoice synchronization complete!
[2025-05-15T20:46:25.373Z] [STDOUT] Processed 4 subscriptions
[2025-05-15T20:46:25.373Z] [STDOUT] Success: 4, Errors: 0
[2025-05-15T20:46:25.373Z] [STDOUT] Added 0 new transactions
[2025-05-15T20:46:25.373Z] [STDOUT] Script execution completed
[2025-05-15T20:46:25.373Z] Synchronization completed successfully
[2025-05-15T20:46:25.373Z] Next sync scheduled in 5 seconds
[2025-05-15T20:46:25.906Z] Starting invoice synchronization...
[2025-05-15T20:46:25.907Z] Running sync script: /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:46:25.907Z] Executing command: cd /Users/raja/Development/ProsumeAI/server && npx tsx /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:46:30.639Z] [STDOUT] Using database connection: postgres://***:***@localhost:5432/prosumeai
[2025-05-15T20:46:30.639Z] [STDOUT] Starting subscription invoice synchronization...
[2025-05-15T20:46:30.639Z] [STDOUT] Database schema validated successfully
[2025-05-15T20:46:30.639Z] [STDOUT] Found 4 active Razorpay subscriptions to sync
[2025-05-15T20:46:30.639Z] [STDOUT] Processing subscription 20 with Razorpay ID: sub_QUxcCis3igdqUA
[2025-05-15T20:46:30.639Z] [STDOUT] Subscription 20 has 1 existing transactions
[2025-05-15T20:46:30.639Z] [STDOUT] Razorpay initialization in progress, waiting...
[2025-05-15T20:46:30.639Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:46:30.639Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:46:30.639Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:46:30.639Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:46:30.639Z] [STDOUT] Fetching invoices for subscription ID: sub_QUxcCis3igdqUA
[2025-05-15T20:46:30.639Z] [STDOUT] Found 0 invoices for subscription: sub_QUxcCis3igdqUA
[2025-05-15T20:46:30.639Z] [STDOUT] Found 0 invoices for subscription sub_QUxcCis3igdqUA
[2025-05-15T20:46:30.639Z] [STDOUT] Processing subscription 24 with Razorpay ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:46:30.639Z] [STDOUT] Subscription 24 has 1 existing transactions
[2025-05-15T20:46:30.639Z] [STDOUT] Fetching invoices for subscription ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:46:30.639Z] [STDOUT] Found 1 invoices for subscription: sub_QV05DCrgh3A2rL
[2025-05-15T20:46:30.639Z] [STDOUT] Transaction for payment pay_QV05q44fHQzL1q already exists in database (1 records), skipping
[2025-05-15T20:46:30.639Z] [STDOUT] Found 1 invoices for subscription sub_QV05DCrgh3A2rL
[2025-05-15T20:46:30.639Z] [STDOUT] Processing subscription 25 with Razorpay ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:46:30.639Z] [STDOUT] Subscription 25 has 2 existing transactions
[2025-05-15T20:46:30.639Z] [STDOUT] Fetching invoices for subscription ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:46:30.639Z] [STDOUT] Found 1 invoices for subscription: sub_QV1W0JNq2cOk7s
[2025-05-15T20:46:30.639Z] [STDOUT] Transaction for payment pay_QV1WoyCgCY23iO already exists in database (2 records), skipping
[2025-05-15T20:46:30.639Z] [STDOUT] Found 1 invoices for subscription sub_QV1W0JNq2cOk7s
[2025-05-15T20:46:30.639Z] [STDOUT] Processing subscription 26 with Razorpay ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:46:30.639Z] [STDOUT] Subscription 26 has 2 existing transactions
[2025-05-15T20:46:30.639Z] [STDOUT] Fetching invoices for subscription ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:46:30.639Z] [STDOUT] Found 2 invoices for subscription: sub_QVIG6dAuP0UXXn
[2025-05-15T20:46:30.639Z] [STDOUT] Transaction for payment pay_QVILKDuy9v6ovq already exists in database (1 records), skipping
[2025-05-15T20:46:30.639Z] [STDOUT] Transaction for payment pay_QVIGtXTXkm93W8 already exists in database (1 records), skipping
[2025-05-15T20:46:30.639Z] [STDOUT] Found 2 invoices for subscription sub_QVIG6dAuP0UXXn
[2025-05-15T20:46:30.639Z] [STDOUT] Subscription invoice synchronization complete!
[2025-05-15T20:46:30.639Z] [STDOUT] Processed 4 subscriptions
[2025-05-15T20:46:30.639Z] [STDOUT] Success: 4, Errors: 0
[2025-05-15T20:46:30.639Z] [STDOUT] Added 0 new transactions
[2025-05-15T20:46:30.639Z] [STDOUT] Script execution completed
[2025-05-15T20:46:30.639Z] Synchronization completed successfully
[2025-05-15T20:46:30.639Z] Next sync scheduled in 5 seconds
[2025-05-15T20:46:30.907Z] Starting invoice synchronization...
[2025-05-15T20:46:30.907Z] Running sync script: /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:46:30.907Z] Executing command: cd /Users/raja/Development/ProsumeAI/server && npx tsx /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:46:35.549Z] [STDOUT] Using database connection: postgres://***:***@localhost:5432/prosumeai
[2025-05-15T20:46:35.549Z] [STDOUT] Starting subscription invoice synchronization...
[2025-05-15T20:46:35.549Z] [STDOUT] Database schema validated successfully
[2025-05-15T20:46:35.549Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:46:35.549Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:46:35.549Z] [STDOUT] Found 4 active Razorpay subscriptions to sync
[2025-05-15T20:46:35.549Z] [STDOUT] Processing subscription 20 with Razorpay ID: sub_QUxcCis3igdqUA
[2025-05-15T20:46:35.549Z] [STDOUT] Subscription 20 has 1 existing transactions
[2025-05-15T20:46:35.549Z] [STDOUT] Razorpay initialization in progress, waiting...
[2025-05-15T20:46:35.549Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:46:35.549Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:46:35.549Z] [STDOUT] Fetching invoices for subscription ID: sub_QUxcCis3igdqUA
[2025-05-15T20:46:35.549Z] [STDOUT] Found 0 invoices for subscription: sub_QUxcCis3igdqUA
[2025-05-15T20:46:35.549Z] [STDOUT] Found 0 invoices for subscription sub_QUxcCis3igdqUA
[2025-05-15T20:46:35.549Z] [STDOUT] Processing subscription 24 with Razorpay ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:46:35.549Z] [STDOUT] Subscription 24 has 1 existing transactions
[2025-05-15T20:46:35.549Z] [STDOUT] Fetching invoices for subscription ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:46:35.549Z] [STDOUT] Found 1 invoices for subscription: sub_QV05DCrgh3A2rL
[2025-05-15T20:46:35.549Z] [STDOUT] Transaction for payment pay_QV05q44fHQzL1q already exists in database (1 records), skipping
[2025-05-15T20:46:35.549Z] [STDOUT] Found 1 invoices for subscription sub_QV05DCrgh3A2rL
[2025-05-15T20:46:35.549Z] [STDOUT] Processing subscription 25 with Razorpay ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:46:35.549Z] [STDOUT] Subscription 25 has 2 existing transactions
[2025-05-15T20:46:35.549Z] [STDOUT] Fetching invoices for subscription ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:46:35.549Z] [STDOUT] Found 1 invoices for subscription: sub_QV1W0JNq2cOk7s
[2025-05-15T20:46:35.549Z] [STDOUT] Transaction for payment pay_QV1WoyCgCY23iO already exists in database (2 records), skipping
[2025-05-15T20:46:35.549Z] [STDOUT] Found 1 invoices for subscription sub_QV1W0JNq2cOk7s
[2025-05-15T20:46:35.549Z] [STDOUT] Processing subscription 26 with Razorpay ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:46:35.549Z] [STDOUT] Subscription 26 has 2 existing transactions
[2025-05-15T20:46:35.549Z] [STDOUT] Fetching invoices for subscription ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:46:35.549Z] [STDOUT] Found 2 invoices for subscription: sub_QVIG6dAuP0UXXn
[2025-05-15T20:46:35.549Z] [STDOUT] Transaction for payment pay_QVILKDuy9v6ovq already exists in database (1 records), skipping
[2025-05-15T20:46:35.549Z] [STDOUT] Transaction for payment pay_QVIGtXTXkm93W8 already exists in database (1 records), skipping
[2025-05-15T20:46:35.549Z] [STDOUT] Found 2 invoices for subscription sub_QVIG6dAuP0UXXn
[2025-05-15T20:46:35.549Z] [STDOUT] Subscription invoice synchronization complete!
[2025-05-15T20:46:35.549Z] [STDOUT] Processed 4 subscriptions
[2025-05-15T20:46:35.549Z] [STDOUT] Success: 4, Errors: 0
[2025-05-15T20:46:35.549Z] [STDOUT] Added 0 new transactions
[2025-05-15T20:46:35.549Z] [STDOUT] Script execution completed
[2025-05-15T20:46:35.549Z] Synchronization completed successfully
[2025-05-15T20:46:35.549Z] Next sync scheduled in 5 seconds
[2025-05-15T20:46:35.911Z] Starting invoice synchronization...
[2025-05-15T20:46:35.911Z] Running sync script: /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:46:35.911Z] Executing command: cd /Users/raja/Development/ProsumeAI/server && npx tsx /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:46:40.841Z] [STDOUT] Using database connection: postgres://***:***@localhost:5432/prosumeai
[2025-05-15T20:46:40.841Z] [STDOUT] Starting subscription invoice synchronization...
[2025-05-15T20:46:40.841Z] [STDOUT] Database schema validated successfully
[2025-05-15T20:46:40.841Z] [STDOUT] Found 4 active Razorpay subscriptions to sync
[2025-05-15T20:46:40.841Z] [STDOUT] Processing subscription 20 with Razorpay ID: sub_QUxcCis3igdqUA
[2025-05-15T20:46:40.841Z] [STDOUT] Subscription 20 has 1 existing transactions
[2025-05-15T20:46:40.841Z] [STDOUT] Razorpay initialization in progress, waiting...
[2025-05-15T20:46:40.841Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:46:40.841Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:46:40.841Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:46:40.841Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:46:40.841Z] [STDOUT] Fetching invoices for subscription ID: sub_QUxcCis3igdqUA
[2025-05-15T20:46:40.841Z] [STDOUT] Found 0 invoices for subscription: sub_QUxcCis3igdqUA
[2025-05-15T20:46:40.841Z] [STDOUT] Found 0 invoices for subscription sub_QUxcCis3igdqUA
[2025-05-15T20:46:40.841Z] [STDOUT] Processing subscription 24 with Razorpay ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:46:40.841Z] [STDOUT] Subscription 24 has 1 existing transactions
[2025-05-15T20:46:40.841Z] [STDOUT] Fetching invoices for subscription ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:46:40.841Z] [STDOUT] Found 1 invoices for subscription: sub_QV05DCrgh3A2rL
[2025-05-15T20:46:40.841Z] [STDOUT] Transaction for payment pay_QV05q44fHQzL1q already exists in database (1 records), skipping
[2025-05-15T20:46:40.841Z] [STDOUT] Found 1 invoices for subscription sub_QV05DCrgh3A2rL
[2025-05-15T20:46:40.841Z] [STDOUT] Processing subscription 25 with Razorpay ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:46:40.841Z] [STDOUT] Subscription 25 has 2 existing transactions
[2025-05-15T20:46:40.841Z] [STDOUT] Fetching invoices for subscription ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:46:40.841Z] [STDOUT] Found 1 invoices for subscription: sub_QV1W0JNq2cOk7s
[2025-05-15T20:46:40.842Z] [STDOUT] Transaction for payment pay_QV1WoyCgCY23iO already exists in database (2 records), skipping
[2025-05-15T20:46:40.842Z] [STDOUT] Found 1 invoices for subscription sub_QV1W0JNq2cOk7s
[2025-05-15T20:46:40.842Z] [STDOUT] Processing subscription 26 with Razorpay ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:46:40.842Z] [STDOUT] Subscription 26 has 2 existing transactions
[2025-05-15T20:46:40.842Z] [STDOUT] Fetching invoices for subscription ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:46:40.842Z] [STDOUT] Found 2 invoices for subscription: sub_QVIG6dAuP0UXXn
[2025-05-15T20:46:40.842Z] [STDOUT] Transaction for payment pay_QVILKDuy9v6ovq already exists in database (1 records), skipping
[2025-05-15T20:46:40.842Z] [STDOUT] Transaction for payment pay_QVIGtXTXkm93W8 already exists in database (1 records), skipping
[2025-05-15T20:46:40.842Z] [STDOUT] Found 2 invoices for subscription sub_QVIG6dAuP0UXXn
[2025-05-15T20:46:40.842Z] [STDOUT] Subscription invoice synchronization complete!
[2025-05-15T20:46:40.842Z] [STDOUT] Processed 4 subscriptions
[2025-05-15T20:46:40.842Z] [STDOUT] Success: 4, Errors: 0
[2025-05-15T20:46:40.842Z] [STDOUT] Added 0 new transactions
[2025-05-15T20:46:40.842Z] [STDOUT] Script execution completed
[2025-05-15T20:46:40.842Z] Synchronization completed successfully
[2025-05-15T20:46:40.842Z] Next sync scheduled in 5 seconds
[2025-05-15T20:46:40.912Z] Starting invoice synchronization...
[2025-05-15T20:46:40.912Z] Running sync script: /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:46:40.912Z] Executing command: cd /Users/raja/Development/ProsumeAI/server && npx tsx /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:46:45.288Z] [STDOUT] Using database connection: postgres://***:***@localhost:5432/prosumeai
[2025-05-15T20:46:45.288Z] [STDOUT] Starting subscription invoice synchronization...
[2025-05-15T20:46:45.288Z] [STDOUT] Database schema validated successfully
[2025-05-15T20:46:45.289Z] [STDOUT] Found 4 active Razorpay subscriptions to sync
[2025-05-15T20:46:45.289Z] [STDOUT] Processing subscription 20 with Razorpay ID: sub_QUxcCis3igdqUA
[2025-05-15T20:46:45.289Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:46:45.289Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:46:45.289Z] [STDOUT] Subscription 20 has 1 existing transactions
[2025-05-15T20:46:45.289Z] [STDOUT] Razorpay initialization in progress, waiting...
[2025-05-15T20:46:45.289Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:46:45.289Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:46:45.289Z] [STDOUT] Fetching invoices for subscription ID: sub_QUxcCis3igdqUA
[2025-05-15T20:46:45.289Z] [STDOUT] Found 0 invoices for subscription: sub_QUxcCis3igdqUA
[2025-05-15T20:46:45.289Z] [STDOUT] Found 0 invoices for subscription sub_QUxcCis3igdqUA
[2025-05-15T20:46:45.289Z] [STDOUT] Processing subscription 24 with Razorpay ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:46:45.289Z] [STDOUT] Subscription 24 has 1 existing transactions
[2025-05-15T20:46:45.289Z] [STDOUT] Fetching invoices for subscription ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:46:45.289Z] [STDOUT] Found 1 invoices for subscription: sub_QV05DCrgh3A2rL
[2025-05-15T20:46:45.289Z] [STDOUT] Transaction for payment pay_QV05q44fHQzL1q already exists in database (1 records), skipping
[2025-05-15T20:46:45.289Z] [STDOUT] Found 1 invoices for subscription sub_QV05DCrgh3A2rL
[2025-05-15T20:46:45.289Z] [STDOUT] Processing subscription 25 with Razorpay ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:46:45.289Z] [STDOUT] Subscription 25 has 2 existing transactions
[2025-05-15T20:46:45.289Z] [STDOUT] Fetching invoices for subscription ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:46:45.289Z] [STDOUT] Found 1 invoices for subscription: sub_QV1W0JNq2cOk7s
[2025-05-15T20:46:45.289Z] [STDOUT] Transaction for payment pay_QV1WoyCgCY23iO already exists in database (2 records), skipping
[2025-05-15T20:46:45.290Z] [STDOUT] Found 1 invoices for subscription sub_QV1W0JNq2cOk7s
[2025-05-15T20:46:45.290Z] [STDOUT] Processing subscription 26 with Razorpay ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:46:45.290Z] [STDOUT] Subscription 26 has 2 existing transactions
[2025-05-15T20:46:45.290Z] [STDOUT] Fetching invoices for subscription ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:46:45.290Z] [STDOUT] Found 2 invoices for subscription: sub_QVIG6dAuP0UXXn
[2025-05-15T20:46:45.290Z] [STDOUT] Transaction for payment pay_QVILKDuy9v6ovq already exists in database (1 records), skipping
[2025-05-15T20:46:45.290Z] [STDOUT] Transaction for payment pay_QVIGtXTXkm93W8 already exists in database (1 records), skipping
[2025-05-15T20:46:45.290Z] [STDOUT] Found 2 invoices for subscription sub_QVIG6dAuP0UXXn
[2025-05-15T20:46:45.290Z] [STDOUT] Subscription invoice synchronization complete!
[2025-05-15T20:46:45.290Z] [STDOUT] Processed 4 subscriptions
[2025-05-15T20:46:45.290Z] [STDOUT] Success: 4, Errors: 0
[2025-05-15T20:46:45.290Z] [STDOUT] Added 0 new transactions
[2025-05-15T20:46:45.290Z] [STDOUT] Script execution completed
[2025-05-15T20:46:45.290Z] Synchronization completed successfully
[2025-05-15T20:46:45.290Z] Next sync scheduled in 5 seconds
[2025-05-15T20:46:45.913Z] Starting invoice synchronization...
[2025-05-15T20:46:45.914Z] Running sync script: /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:46:45.914Z] Executing command: cd /Users/raja/Development/ProsumeAI/server && npx tsx /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:46:50.914Z] Starting invoice synchronization...
[2025-05-15T20:46:50.914Z] Running sync script: /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:46:50.914Z] Executing command: cd /Users/raja/Development/ProsumeAI/server && npx tsx /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:46:51.038Z] [STDOUT] Using database connection: postgres://***:***@localhost:5432/prosumeai
[2025-05-15T20:46:51.038Z] [STDOUT] Starting subscription invoice synchronization...
[2025-05-15T20:46:51.038Z] [STDOUT] Database schema validated successfully
[2025-05-15T20:46:51.038Z] [STDOUT] Found 4 active Razorpay subscriptions to sync
[2025-05-15T20:46:51.038Z] [STDOUT] Processing subscription 20 with Razorpay ID: sub_QUxcCis3igdqUA
[2025-05-15T20:46:51.038Z] [STDOUT] Subscription 20 has 1 existing transactions
[2025-05-15T20:46:51.038Z] [STDOUT] Razorpay initialization in progress, waiting...
[2025-05-15T20:46:51.038Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:46:51.038Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:46:51.038Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:46:51.038Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:46:51.038Z] [STDOUT] Fetching invoices for subscription ID: sub_QUxcCis3igdqUA
[2025-05-15T20:46:51.038Z] [STDOUT] Found 0 invoices for subscription: sub_QUxcCis3igdqUA
[2025-05-15T20:46:51.038Z] [STDOUT] Found 0 invoices for subscription sub_QUxcCis3igdqUA
[2025-05-15T20:46:51.038Z] [STDOUT] Processing subscription 24 with Razorpay ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:46:51.038Z] [STDOUT] Subscription 24 has 1 existing transactions
[2025-05-15T20:46:51.038Z] [STDOUT] Fetching invoices for subscription ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:46:51.038Z] [STDOUT] Found 1 invoices for subscription: sub_QV05DCrgh3A2rL
[2025-05-15T20:46:51.038Z] [STDOUT] Transaction for payment pay_QV05q44fHQzL1q already exists in database (1 records), skipping
[2025-05-15T20:46:51.038Z] [STDOUT] Found 1 invoices for subscription sub_QV05DCrgh3A2rL
[2025-05-15T20:46:51.038Z] [STDOUT] Processing subscription 25 with Razorpay ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:46:51.038Z] [STDOUT] Subscription 25 has 2 existing transactions
[2025-05-15T20:46:51.038Z] [STDOUT] Fetching invoices for subscription ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:46:51.038Z] [STDOUT] Found 1 invoices for subscription: sub_QV1W0JNq2cOk7s
[2025-05-15T20:46:51.038Z] [STDOUT] Transaction for payment pay_QV1WoyCgCY23iO already exists in database (2 records), skipping
[2025-05-15T20:46:51.038Z] [STDOUT] Found 1 invoices for subscription sub_QV1W0JNq2cOk7s
[2025-05-15T20:46:51.038Z] [STDOUT] Processing subscription 26 with Razorpay ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:46:51.038Z] [STDOUT] Subscription 26 has 2 existing transactions
[2025-05-15T20:46:51.038Z] [STDOUT] Fetching invoices for subscription ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:46:51.038Z] [STDOUT] Found 2 invoices for subscription: sub_QVIG6dAuP0UXXn
[2025-05-15T20:46:51.038Z] [STDOUT] Transaction for payment pay_QVILKDuy9v6ovq already exists in database (1 records), skipping
[2025-05-15T20:46:51.038Z] [STDOUT] Transaction for payment pay_QVIGtXTXkm93W8 already exists in database (1 records), skipping
[2025-05-15T20:46:51.038Z] [STDOUT] Found 2 invoices for subscription sub_QVIG6dAuP0UXXn
[2025-05-15T20:46:51.038Z] [STDOUT] Subscription invoice synchronization complete!
[2025-05-15T20:46:51.038Z] [STDOUT] Processed 4 subscriptions
[2025-05-15T20:46:51.038Z] [STDOUT] Success: 4, Errors: 0
[2025-05-15T20:46:51.038Z] [STDOUT] Added 0 new transactions
[2025-05-15T20:46:51.038Z] [STDOUT] Script execution completed
[2025-05-15T20:46:51.038Z] Synchronization completed successfully
[2025-05-15T20:46:51.038Z] Next sync scheduled in 5 seconds
[2025-05-15T20:46:55.915Z] Starting invoice synchronization...
[2025-05-15T20:46:55.915Z] Running sync script: /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:46:55.915Z] Executing command: cd /Users/raja/Development/ProsumeAI/server && npx tsx /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:46:55.938Z] [STDOUT] Using database connection: postgres://***:***@localhost:5432/prosumeai
[2025-05-15T20:46:55.938Z] [STDOUT] Starting subscription invoice synchronization...
[2025-05-15T20:46:55.938Z] [STDOUT] Database schema validated successfully
[2025-05-15T20:46:55.938Z] [STDOUT] Found 4 active Razorpay subscriptions to sync
[2025-05-15T20:46:55.938Z] [STDOUT] Processing subscription 20 with Razorpay ID: sub_QUxcCis3igdqUA
[2025-05-15T20:46:55.938Z] [STDOUT] Subscription 20 has 1 existing transactions
[2025-05-15T20:46:55.938Z] [STDOUT] Razorpay initialization in progress, waiting...
[2025-05-15T20:46:55.938Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:46:55.938Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:46:55.938Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:46:55.938Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:46:55.938Z] [STDOUT] Fetching invoices for subscription ID: sub_QUxcCis3igdqUA
[2025-05-15T20:46:55.938Z] [STDOUT] Found 0 invoices for subscription: sub_QUxcCis3igdqUA
[2025-05-15T20:46:55.938Z] [STDOUT] Found 0 invoices for subscription sub_QUxcCis3igdqUA
[2025-05-15T20:46:55.938Z] [STDOUT] Processing subscription 24 with Razorpay ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:46:55.938Z] [STDOUT] Subscription 24 has 1 existing transactions
[2025-05-15T20:46:55.938Z] [STDOUT] Fetching invoices for subscription ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:46:55.938Z] [STDOUT] Found 1 invoices for subscription: sub_QV05DCrgh3A2rL
[2025-05-15T20:46:55.938Z] [STDOUT] Transaction for payment pay_QV05q44fHQzL1q already exists in database (1 records), skipping
[2025-05-15T20:46:55.938Z] [STDOUT] Found 1 invoices for subscription sub_QV05DCrgh3A2rL
[2025-05-15T20:46:55.938Z] [STDOUT] Processing subscription 25 with Razorpay ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:46:55.938Z] [STDOUT] Subscription 25 has 2 existing transactions
[2025-05-15T20:46:55.938Z] [STDOUT] Fetching invoices for subscription ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:46:55.938Z] [STDOUT] Found 1 invoices for subscription: sub_QV1W0JNq2cOk7s
[2025-05-15T20:46:55.938Z] [STDOUT] Transaction for payment pay_QV1WoyCgCY23iO already exists in database (2 records), skipping
[2025-05-15T20:46:55.938Z] [STDOUT] Found 1 invoices for subscription sub_QV1W0JNq2cOk7s
[2025-05-15T20:46:55.938Z] [STDOUT] Processing subscription 26 with Razorpay ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:46:55.938Z] [STDOUT] Subscription 26 has 2 existing transactions
[2025-05-15T20:46:55.938Z] [STDOUT] Fetching invoices for subscription ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:46:55.938Z] [STDOUT] Found 2 invoices for subscription: sub_QVIG6dAuP0UXXn
[2025-05-15T20:46:55.938Z] [STDOUT] Transaction for payment pay_QVILKDuy9v6ovq already exists in database (1 records), skipping
[2025-05-15T20:46:55.938Z] [STDOUT] Transaction for payment pay_QVIGtXTXkm93W8 already exists in database (1 records), skipping
[2025-05-15T20:46:55.938Z] [STDOUT] Found 2 invoices for subscription sub_QVIG6dAuP0UXXn
[2025-05-15T20:46:55.938Z] [STDOUT] Subscription invoice synchronization complete!
[2025-05-15T20:46:55.938Z] [STDOUT] Processed 4 subscriptions
[2025-05-15T20:46:55.938Z] [STDOUT] Success: 4, Errors: 0
[2025-05-15T20:46:55.938Z] [STDOUT] Added 0 new transactions
[2025-05-15T20:46:55.938Z] [STDOUT] Script execution completed
[2025-05-15T20:46:55.938Z] Synchronization completed successfully
[2025-05-15T20:46:55.938Z] Next sync scheduled in 5 seconds
[2025-05-15T20:47:00.261Z] [STDOUT] Using database connection: postgres://***:***@localhost:5432/prosumeai
[2025-05-15T20:47:00.261Z] [STDOUT] Starting subscription invoice synchronization...
[2025-05-15T20:47:00.261Z] [STDOUT] Database schema validated successfully
[2025-05-15T20:47:00.261Z] [STDOUT] Found 4 active Razorpay subscriptions to sync
[2025-05-15T20:47:00.261Z] [STDOUT] Processing subscription 20 with Razorpay ID: sub_QUxcCis3igdqUA
[2025-05-15T20:47:00.261Z] [STDOUT] Subscription 20 has 1 existing transactions
[2025-05-15T20:47:00.261Z] [STDOUT] Razorpay initialization in progress, waiting...
[2025-05-15T20:47:00.261Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:47:00.261Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:47:00.261Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:47:00.261Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:47:00.261Z] [STDOUT] Fetching invoices for subscription ID: sub_QUxcCis3igdqUA
[2025-05-15T20:47:00.261Z] [STDOUT] Found 0 invoices for subscription: sub_QUxcCis3igdqUA
[2025-05-15T20:47:00.261Z] [STDOUT] Found 0 invoices for subscription sub_QUxcCis3igdqUA
[2025-05-15T20:47:00.261Z] [STDOUT] Processing subscription 24 with Razorpay ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:47:00.261Z] [STDOUT] Subscription 24 has 1 existing transactions
[2025-05-15T20:47:00.261Z] [STDOUT] Fetching invoices for subscription ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:47:00.261Z] [STDOUT] Found 1 invoices for subscription: sub_QV05DCrgh3A2rL
[2025-05-15T20:47:00.261Z] [STDOUT] Transaction for payment pay_QV05q44fHQzL1q already exists in database (1 records), skipping
[2025-05-15T20:47:00.261Z] [STDOUT] Found 1 invoices for subscription sub_QV05DCrgh3A2rL
[2025-05-15T20:47:00.261Z] [STDOUT] Processing subscription 25 with Razorpay ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:47:00.261Z] [STDOUT] Subscription 25 has 2 existing transactions
[2025-05-15T20:47:00.261Z] [STDOUT] Fetching invoices for subscription ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:47:00.261Z] [STDOUT] Found 1 invoices for subscription: sub_QV1W0JNq2cOk7s
[2025-05-15T20:47:00.261Z] [STDOUT] Transaction for payment pay_QV1WoyCgCY23iO already exists in database (2 records), skipping
[2025-05-15T20:47:00.261Z] [STDOUT] Found 1 invoices for subscription sub_QV1W0JNq2cOk7s
[2025-05-15T20:47:00.261Z] [STDOUT] Processing subscription 26 with Razorpay ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:47:00.261Z] [STDOUT] Subscription 26 has 2 existing transactions
[2025-05-15T20:47:00.261Z] [STDOUT] Fetching invoices for subscription ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:47:00.261Z] [STDOUT] Found 2 invoices for subscription: sub_QVIG6dAuP0UXXn
[2025-05-15T20:47:00.261Z] [STDOUT] Transaction for payment pay_QVILKDuy9v6ovq already exists in database (1 records), skipping
[2025-05-15T20:47:00.261Z] [STDOUT] Transaction for payment pay_QVIGtXTXkm93W8 already exists in database (1 records), skipping
[2025-05-15T20:47:00.261Z] [STDOUT] Found 2 invoices for subscription sub_QVIG6dAuP0UXXn
[2025-05-15T20:47:00.261Z] [STDOUT] Subscription invoice synchronization complete!
[2025-05-15T20:47:00.261Z] [STDOUT] Processed 4 subscriptions
[2025-05-15T20:47:00.261Z] [STDOUT] Success: 4, Errors: 0
[2025-05-15T20:47:00.261Z] [STDOUT] Added 0 new transactions
[2025-05-15T20:47:00.261Z] [STDOUT] Script execution completed
[2025-05-15T20:47:00.261Z] Synchronization completed successfully
[2025-05-15T20:47:00.261Z] Next sync scheduled in 5 seconds
[2025-05-15T20:47:00.916Z] Starting invoice synchronization...
[2025-05-15T20:47:00.916Z] Running sync script: /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:47:00.916Z] Executing command: cd /Users/raja/Development/ProsumeAI/server && npx tsx /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:47:05.169Z] [STDOUT] Using database connection: postgres://***:***@localhost:5432/prosumeai
[2025-05-15T20:47:05.169Z] [STDOUT] Starting subscription invoice synchronization...
[2025-05-15T20:47:05.169Z] [STDOUT] Found 4 active Razorpay subscriptions to sync
[2025-05-15T20:47:05.170Z] [STDOUT] Processing subscription 20 with Razorpay ID: sub_QUxcCis3igdqUA
[2025-05-15T20:47:05.170Z] [STDOUT] Database schema validated successfully
[2025-05-15T20:47:05.170Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:47:05.170Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:47:05.170Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:47:05.170Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:47:05.170Z] [STDOUT] Subscription 20 has 1 existing transactions
[2025-05-15T20:47:05.170Z] [STDOUT] Fetching invoices for subscription ID: sub_QUxcCis3igdqUA
[2025-05-15T20:47:05.170Z] [STDOUT] Found 0 invoices for subscription: sub_QUxcCis3igdqUA
[2025-05-15T20:47:05.170Z] [STDOUT] Found 0 invoices for subscription sub_QUxcCis3igdqUA
[2025-05-15T20:47:05.170Z] [STDOUT] Processing subscription 24 with Razorpay ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:47:05.170Z] [STDOUT] Subscription 24 has 1 existing transactions
[2025-05-15T20:47:05.170Z] [STDOUT] Fetching invoices for subscription ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:47:05.170Z] [STDOUT] Found 1 invoices for subscription: sub_QV05DCrgh3A2rL
[2025-05-15T20:47:05.170Z] [STDOUT] Transaction for payment pay_QV05q44fHQzL1q already exists in database (1 records), skipping
[2025-05-15T20:47:05.170Z] [STDOUT] Found 1 invoices for subscription sub_QV05DCrgh3A2rL
[2025-05-15T20:47:05.170Z] [STDOUT] Processing subscription 25 with Razorpay ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:47:05.170Z] [STDOUT] Subscription 25 has 2 existing transactions
[2025-05-15T20:47:05.170Z] [STDOUT] Fetching invoices for subscription ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:47:05.170Z] [STDOUT] Found 1 invoices for subscription: sub_QV1W0JNq2cOk7s
[2025-05-15T20:47:05.170Z] [STDOUT] Transaction for payment pay_QV1WoyCgCY23iO already exists in database (2 records), skipping
[2025-05-15T20:47:05.170Z] [STDOUT] Found 1 invoices for subscription sub_QV1W0JNq2cOk7s
[2025-05-15T20:47:05.170Z] [STDOUT] Processing subscription 26 with Razorpay ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:47:05.170Z] [STDOUT] Subscription 26 has 2 existing transactions
[2025-05-15T20:47:05.170Z] [STDOUT] Fetching invoices for subscription ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:47:05.170Z] [STDOUT] Found 2 invoices for subscription: sub_QVIG6dAuP0UXXn
[2025-05-15T20:47:05.170Z] [STDOUT] Transaction for payment pay_QVILKDuy9v6ovq already exists in database (1 records), skipping
[2025-05-15T20:47:05.170Z] [STDOUT] Transaction for payment pay_QVIGtXTXkm93W8 already exists in database (1 records), skipping
[2025-05-15T20:47:05.170Z] [STDOUT] Found 2 invoices for subscription sub_QVIG6dAuP0UXXn
[2025-05-15T20:47:05.170Z] [STDOUT] Subscription invoice synchronization complete!
[2025-05-15T20:47:05.170Z] [STDOUT] Processed 4 subscriptions
[2025-05-15T20:47:05.170Z] [STDOUT] Success: 4, Errors: 0
[2025-05-15T20:47:05.170Z] [STDOUT] Added 0 new transactions
[2025-05-15T20:47:05.170Z] [STDOUT] Script execution completed
[2025-05-15T20:47:05.170Z] Synchronization completed successfully
[2025-05-15T20:47:05.170Z] Next sync scheduled in 5 seconds
[2025-05-15T20:47:05.917Z] Starting invoice synchronization...
[2025-05-15T20:47:05.917Z] Running sync script: /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:47:05.917Z] Executing command: cd /Users/raja/Development/ProsumeAI/server && npx tsx /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:47:10.636Z] [STDOUT] Using database connection: postgres://***:***@localhost:5432/prosumeai
[2025-05-15T20:47:10.636Z] [STDOUT] Starting subscription invoice synchronization...
[2025-05-15T20:47:10.636Z] [STDOUT] Database schema validated successfully
[2025-05-15T20:47:10.637Z] [STDOUT] Found 4 active Razorpay subscriptions to sync
[2025-05-15T20:47:10.637Z] [STDOUT] Processing subscription 20 with Razorpay ID: sub_QUxcCis3igdqUA
[2025-05-15T20:47:10.637Z] [STDOUT] Subscription 20 has 1 existing transactions
[2025-05-15T20:47:10.637Z] [STDOUT] Razorpay initialization in progress, waiting...
[2025-05-15T20:47:10.637Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:47:10.637Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:47:10.637Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:47:10.637Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:47:10.637Z] [STDOUT] Fetching invoices for subscription ID: sub_QUxcCis3igdqUA
[2025-05-15T20:47:10.637Z] [STDOUT] Found 0 invoices for subscription: sub_QUxcCis3igdqUA
[2025-05-15T20:47:10.637Z] [STDOUT] Found 0 invoices for subscription sub_QUxcCis3igdqUA
[2025-05-15T20:47:10.637Z] [STDOUT] Processing subscription 24 with Razorpay ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:47:10.637Z] [STDOUT] Subscription 24 has 1 existing transactions
[2025-05-15T20:47:10.637Z] [STDOUT] Fetching invoices for subscription ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:47:10.637Z] [STDOUT] Found 1 invoices for subscription: sub_QV05DCrgh3A2rL
[2025-05-15T20:47:10.637Z] [STDOUT] Transaction for payment pay_QV05q44fHQzL1q already exists in database (1 records), skipping
[2025-05-15T20:47:10.637Z] [STDOUT] Found 1 invoices for subscription sub_QV05DCrgh3A2rL
[2025-05-15T20:47:10.637Z] [STDOUT] Processing subscription 25 with Razorpay ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:47:10.637Z] [STDOUT] Subscription 25 has 2 existing transactions
[2025-05-15T20:47:10.637Z] [STDOUT] Fetching invoices for subscription ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:47:10.637Z] [STDOUT] Found 1 invoices for subscription: sub_QV1W0JNq2cOk7s
[2025-05-15T20:47:10.637Z] [STDOUT] Transaction for payment pay_QV1WoyCgCY23iO already exists in database (2 records), skipping
[2025-05-15T20:47:10.637Z] [STDOUT] Found 1 invoices for subscription sub_QV1W0JNq2cOk7s
[2025-05-15T20:47:10.637Z] [STDOUT] Processing subscription 26 with Razorpay ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:47:10.637Z] [STDOUT] Subscription 26 has 2 existing transactions
[2025-05-15T20:47:10.637Z] [STDOUT] Fetching invoices for subscription ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:47:10.637Z] [STDOUT] Found 2 invoices for subscription: sub_QVIG6dAuP0UXXn
[2025-05-15T20:47:10.637Z] [STDOUT] Transaction for payment pay_QVILKDuy9v6ovq already exists in database (1 records), skipping
[2025-05-15T20:47:10.637Z] [STDOUT] Transaction for payment pay_QVIGtXTXkm93W8 already exists in database (1 records), skipping
[2025-05-15T20:47:10.637Z] [STDOUT] Found 2 invoices for subscription sub_QVIG6dAuP0UXXn
[2025-05-15T20:47:10.637Z] [STDOUT] Subscription invoice synchronization complete!
[2025-05-15T20:47:10.637Z] [STDOUT] Processed 4 subscriptions
[2025-05-15T20:47:10.637Z] [STDOUT] Success: 4, Errors: 0
[2025-05-15T20:47:10.637Z] [STDOUT] Added 0 new transactions
[2025-05-15T20:47:10.637Z] [STDOUT] Script execution completed
[2025-05-15T20:47:10.637Z] Synchronization completed successfully
[2025-05-15T20:47:10.637Z] Next sync scheduled in 5 seconds
[2025-05-15T20:47:10.918Z] Starting invoice synchronization...
[2025-05-15T20:47:10.918Z] Running sync script: /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:47:10.918Z] Executing command: cd /Users/raja/Development/ProsumeAI/server && npx tsx /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:47:15.478Z] [STDOUT] Using database connection: postgres://***:***@localhost:5432/prosumeai
[2025-05-15T20:47:15.478Z] [STDOUT] Starting subscription invoice synchronization...
[2025-05-15T20:47:15.478Z] [STDOUT] Database schema validated successfully
[2025-05-15T20:47:15.478Z] [STDOUT] Found 4 active Razorpay subscriptions to sync
[2025-05-15T20:47:15.478Z] [STDOUT] Processing subscription 20 with Razorpay ID: sub_QUxcCis3igdqUA
[2025-05-15T20:47:15.478Z] [STDOUT] Subscription 20 has 1 existing transactions
[2025-05-15T20:47:15.478Z] [STDOUT] Razorpay initialization in progress, waiting...
[2025-05-15T20:47:15.478Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:47:15.478Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:47:15.478Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:47:15.478Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:47:15.478Z] [STDOUT] Fetching invoices for subscription ID: sub_QUxcCis3igdqUA
[2025-05-15T20:47:15.478Z] [STDOUT] Found 0 invoices for subscription: sub_QUxcCis3igdqUA
[2025-05-15T20:47:15.478Z] [STDOUT] Found 0 invoices for subscription sub_QUxcCis3igdqUA
[2025-05-15T20:47:15.478Z] [STDOUT] Processing subscription 24 with Razorpay ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:47:15.478Z] [STDOUT] Subscription 24 has 1 existing transactions
[2025-05-15T20:47:15.478Z] [STDOUT] Fetching invoices for subscription ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:47:15.478Z] [STDOUT] Found 1 invoices for subscription: sub_QV05DCrgh3A2rL
[2025-05-15T20:47:15.478Z] [STDOUT] Transaction for payment pay_QV05q44fHQzL1q already exists in database (1 records), skipping
[2025-05-15T20:47:15.478Z] [STDOUT] Found 1 invoices for subscription sub_QV05DCrgh3A2rL
[2025-05-15T20:47:15.478Z] [STDOUT] Processing subscription 25 with Razorpay ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:47:15.478Z] [STDOUT] Subscription 25 has 2 existing transactions
[2025-05-15T20:47:15.478Z] [STDOUT] Fetching invoices for subscription ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:47:15.478Z] [STDOUT] Found 1 invoices for subscription: sub_QV1W0JNq2cOk7s
[2025-05-15T20:47:15.478Z] [STDOUT] Transaction for payment pay_QV1WoyCgCY23iO already exists in database (2 records), skipping
[2025-05-15T20:47:15.478Z] [STDOUT] Found 1 invoices for subscription sub_QV1W0JNq2cOk7s
[2025-05-15T20:47:15.478Z] [STDOUT] Processing subscription 26 with Razorpay ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:47:15.478Z] [STDOUT] Subscription 26 has 2 existing transactions
[2025-05-15T20:47:15.478Z] [STDOUT] Fetching invoices for subscription ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:47:15.478Z] [STDOUT] Found 2 invoices for subscription: sub_QVIG6dAuP0UXXn
[2025-05-15T20:47:15.478Z] [STDOUT] Transaction for payment pay_QVILKDuy9v6ovq already exists in database (1 records), skipping
[2025-05-15T20:47:15.478Z] [STDOUT] Transaction for payment pay_QVIGtXTXkm93W8 already exists in database (1 records), skipping
[2025-05-15T20:47:15.478Z] [STDOUT] Found 2 invoices for subscription sub_QVIG6dAuP0UXXn
[2025-05-15T20:47:15.478Z] [STDOUT] Subscription invoice synchronization complete!
[2025-05-15T20:47:15.478Z] [STDOUT] Processed 4 subscriptions
[2025-05-15T20:47:15.478Z] [STDOUT] Success: 4, Errors: 0
[2025-05-15T20:47:15.478Z] [STDOUT] Added 0 new transactions
[2025-05-15T20:47:15.478Z] [STDOUT] Script execution completed
[2025-05-15T20:47:15.478Z] Synchronization completed successfully
[2025-05-15T20:47:15.478Z] Next sync scheduled in 5 seconds
[2025-05-15T20:47:15.919Z] Starting invoice synchronization...
[2025-05-15T20:47:15.919Z] Running sync script: /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:47:15.919Z] Executing command: cd /Users/raja/Development/ProsumeAI/server && npx tsx /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:47:20.920Z] Starting invoice synchronization...
[2025-05-15T20:47:20.920Z] Running sync script: /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:47:20.920Z] Executing command: cd /Users/raja/Development/ProsumeAI/server && npx tsx /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:47:21.504Z] [STDOUT] Using database connection: postgres://***:***@localhost:5432/prosumeai
[2025-05-15T20:47:21.504Z] [STDOUT] Starting subscription invoice synchronization...
[2025-05-15T20:47:21.504Z] [STDOUT] Database schema validated successfully
[2025-05-15T20:47:21.504Z] [STDOUT] Found 4 active Razorpay subscriptions to sync
[2025-05-15T20:47:21.504Z] [STDOUT] Processing subscription 20 with Razorpay ID: sub_QUxcCis3igdqUA
[2025-05-15T20:47:21.504Z] [STDOUT] Subscription 20 has 1 existing transactions
[2025-05-15T20:47:21.504Z] [STDOUT] Razorpay initialization in progress, waiting...
[2025-05-15T20:47:21.504Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:47:21.504Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:47:21.504Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:47:21.505Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:47:21.505Z] [STDOUT] Fetching invoices for subscription ID: sub_QUxcCis3igdqUA
[2025-05-15T20:47:21.505Z] [STDOUT] Found 0 invoices for subscription: sub_QUxcCis3igdqUA
[2025-05-15T20:47:21.505Z] [STDOUT] Found 0 invoices for subscription sub_QUxcCis3igdqUA
[2025-05-15T20:47:21.505Z] [STDOUT] Processing subscription 24 with Razorpay ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:47:21.505Z] [STDOUT] Subscription 24 has 1 existing transactions
[2025-05-15T20:47:21.505Z] [STDOUT] Fetching invoices for subscription ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:47:21.505Z] [STDOUT] Found 1 invoices for subscription: sub_QV05DCrgh3A2rL
[2025-05-15T20:47:21.505Z] [STDOUT] Transaction for payment pay_QV05q44fHQzL1q already exists in database (1 records), skipping
[2025-05-15T20:47:21.505Z] [STDOUT] Found 1 invoices for subscription sub_QV05DCrgh3A2rL
[2025-05-15T20:47:21.505Z] [STDOUT] Processing subscription 25 with Razorpay ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:47:21.505Z] [STDOUT] Subscription 25 has 2 existing transactions
[2025-05-15T20:47:21.505Z] [STDOUT] Fetching invoices for subscription ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:47:21.505Z] [STDOUT] Found 1 invoices for subscription: sub_QV1W0JNq2cOk7s
[2025-05-15T20:47:21.505Z] [STDOUT] Transaction for payment pay_QV1WoyCgCY23iO already exists in database (2 records), skipping
[2025-05-15T20:47:21.505Z] [STDOUT] Found 1 invoices for subscription sub_QV1W0JNq2cOk7s
[2025-05-15T20:47:21.505Z] [STDOUT] Processing subscription 26 with Razorpay ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:47:21.505Z] [STDOUT] Subscription 26 has 2 existing transactions
[2025-05-15T20:47:21.505Z] [STDOUT] Fetching invoices for subscription ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:47:21.505Z] [STDOUT] Found 2 invoices for subscription: sub_QVIG6dAuP0UXXn
[2025-05-15T20:47:21.505Z] [STDOUT] Transaction for payment pay_QVILKDuy9v6ovq already exists in database (1 records), skipping
[2025-05-15T20:47:21.505Z] [STDOUT] Transaction for payment pay_QVIGtXTXkm93W8 already exists in database (1 records), skipping
[2025-05-15T20:47:21.505Z] [STDOUT] Found 2 invoices for subscription sub_QVIG6dAuP0UXXn
[2025-05-15T20:47:21.505Z] [STDOUT] Subscription invoice synchronization complete!
[2025-05-15T20:47:21.505Z] [STDOUT] Processed 4 subscriptions
[2025-05-15T20:47:21.505Z] [STDOUT] Success: 4, Errors: 0
[2025-05-15T20:47:21.505Z] [STDOUT] Added 0 new transactions
[2025-05-15T20:47:21.505Z] [STDOUT] Script execution completed
[2025-05-15T20:47:21.505Z] Synchronization completed successfully
[2025-05-15T20:47:21.505Z] Next sync scheduled in 5 seconds
[2025-05-15T20:47:25.921Z] Starting invoice synchronization...
[2025-05-15T20:47:25.922Z] Running sync script: /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:47:25.922Z] Executing command: cd /Users/raja/Development/ProsumeAI/server && npx tsx /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:47:26.139Z] [STDOUT] Using database connection: postgres://***:***@localhost:5432/prosumeai
[2025-05-15T20:47:26.139Z] [STDOUT] Starting subscription invoice synchronization...
[2025-05-15T20:47:26.139Z] [STDOUT] Database schema validated successfully
[2025-05-15T20:47:26.139Z] [STDOUT] Found 4 active Razorpay subscriptions to sync
[2025-05-15T20:47:26.139Z] [STDOUT] Processing subscription 20 with Razorpay ID: sub_QUxcCis3igdqUA
[2025-05-15T20:47:26.139Z] [STDOUT] Subscription 20 has 1 existing transactions
[2025-05-15T20:47:26.139Z] [STDOUT] Razorpay initialization in progress, waiting...
[2025-05-15T20:47:26.139Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:47:26.139Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:47:26.139Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:47:26.139Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:47:26.139Z] [STDOUT] Fetching invoices for subscription ID: sub_QUxcCis3igdqUA
[2025-05-15T20:47:26.139Z] [STDOUT] Found 0 invoices for subscription: sub_QUxcCis3igdqUA
[2025-05-15T20:47:26.139Z] [STDOUT] Found 0 invoices for subscription sub_QUxcCis3igdqUA
[2025-05-15T20:47:26.139Z] [STDOUT] Processing subscription 24 with Razorpay ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:47:26.139Z] [STDOUT] Subscription 24 has 1 existing transactions
[2025-05-15T20:47:26.139Z] [STDOUT] Fetching invoices for subscription ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:47:26.139Z] [STDOUT] Found 1 invoices for subscription: sub_QV05DCrgh3A2rL
[2025-05-15T20:47:26.139Z] [STDOUT] Transaction for payment pay_QV05q44fHQzL1q already exists in database (1 records), skipping
[2025-05-15T20:47:26.139Z] [STDOUT] Found 1 invoices for subscription sub_QV05DCrgh3A2rL
[2025-05-15T20:47:26.139Z] [STDOUT] Processing subscription 25 with Razorpay ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:47:26.139Z] [STDOUT] Subscription 25 has 2 existing transactions
[2025-05-15T20:47:26.139Z] [STDOUT] Fetching invoices for subscription ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:47:26.139Z] [STDOUT] Found 1 invoices for subscription: sub_QV1W0JNq2cOk7s
[2025-05-15T20:47:26.139Z] [STDOUT] Transaction for payment pay_QV1WoyCgCY23iO already exists in database (2 records), skipping
[2025-05-15T20:47:26.139Z] [STDOUT] Found 1 invoices for subscription sub_QV1W0JNq2cOk7s
[2025-05-15T20:47:26.139Z] [STDOUT] Processing subscription 26 with Razorpay ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:47:26.139Z] [STDOUT] Subscription 26 has 2 existing transactions
[2025-05-15T20:47:26.139Z] [STDOUT] Fetching invoices for subscription ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:47:26.139Z] [STDOUT] Found 2 invoices for subscription: sub_QVIG6dAuP0UXXn
[2025-05-15T20:47:26.139Z] [STDOUT] Transaction for payment pay_QVILKDuy9v6ovq already exists in database (1 records), skipping
[2025-05-15T20:47:26.139Z] [STDOUT] Transaction for payment pay_QVIGtXTXkm93W8 already exists in database (1 records), skipping
[2025-05-15T20:47:26.139Z] [STDOUT] Found 2 invoices for subscription sub_QVIG6dAuP0UXXn
[2025-05-15T20:47:26.139Z] [STDOUT] Subscription invoice synchronization complete!
[2025-05-15T20:47:26.139Z] [STDOUT] Processed 4 subscriptions
[2025-05-15T20:47:26.139Z] [STDOUT] Success: 4, Errors: 0
[2025-05-15T20:47:26.139Z] [STDOUT] Added 0 new transactions
[2025-05-15T20:47:26.139Z] [STDOUT] Script execution completed
[2025-05-15T20:47:26.139Z] Synchronization completed successfully
[2025-05-15T20:47:26.139Z] Next sync scheduled in 5 seconds
[2025-05-15T20:47:30.921Z] Starting invoice synchronization...
[2025-05-15T20:47:30.921Z] Running sync script: /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:47:30.922Z] Executing command: cd /Users/raja/Development/ProsumeAI/server && npx tsx /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:47:31.253Z] [STDOUT] Using database connection: postgres://***:***@localhost:5432/prosumeai
[2025-05-15T20:47:31.253Z] [STDOUT] Starting subscription invoice synchronization...
[2025-05-15T20:47:31.253Z] [STDOUT] Found 4 active Razorpay subscriptions to sync
[2025-05-15T20:47:31.253Z] [STDOUT] Processing subscription 20 with Razorpay ID: sub_QUxcCis3igdqUA
[2025-05-15T20:47:31.253Z] [STDOUT] Database schema validated successfully
[2025-05-15T20:47:31.253Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:47:31.253Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:47:31.253Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:47:31.253Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:47:31.253Z] [STDOUT] Subscription 20 has 1 existing transactions
[2025-05-15T20:47:31.253Z] [STDOUT] Fetching invoices for subscription ID: sub_QUxcCis3igdqUA
[2025-05-15T20:47:31.253Z] [STDOUT] Found 0 invoices for subscription: sub_QUxcCis3igdqUA
[2025-05-15T20:47:31.253Z] [STDOUT] Found 0 invoices for subscription sub_QUxcCis3igdqUA
[2025-05-15T20:47:31.253Z] [STDOUT] Processing subscription 24 with Razorpay ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:47:31.253Z] [STDOUT] Subscription 24 has 1 existing transactions
[2025-05-15T20:47:31.253Z] [STDOUT] Fetching invoices for subscription ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:47:31.253Z] [STDOUT] Found 1 invoices for subscription: sub_QV05DCrgh3A2rL
[2025-05-15T20:47:31.253Z] [STDOUT] Transaction for payment pay_QV05q44fHQzL1q already exists in database (1 records), skipping
[2025-05-15T20:47:31.253Z] [STDOUT] Found 1 invoices for subscription sub_QV05DCrgh3A2rL
[2025-05-15T20:47:31.253Z] [STDOUT] Processing subscription 25 with Razorpay ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:47:31.253Z] [STDOUT] Subscription 25 has 2 existing transactions
[2025-05-15T20:47:31.253Z] [STDOUT] Fetching invoices for subscription ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:47:31.253Z] [STDOUT] Found 1 invoices for subscription: sub_QV1W0JNq2cOk7s
[2025-05-15T20:47:31.253Z] [STDOUT] Transaction for payment pay_QV1WoyCgCY23iO already exists in database (2 records), skipping
[2025-05-15T20:47:31.253Z] [STDOUT] Found 1 invoices for subscription sub_QV1W0JNq2cOk7s
[2025-05-15T20:47:31.253Z] [STDOUT] Processing subscription 26 with Razorpay ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:47:31.253Z] [STDOUT] Subscription 26 has 2 existing transactions
[2025-05-15T20:47:31.253Z] [STDOUT] Fetching invoices for subscription ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:47:31.253Z] [STDOUT] Found 2 invoices for subscription: sub_QVIG6dAuP0UXXn
[2025-05-15T20:47:31.253Z] [STDOUT] Transaction for payment pay_QVILKDuy9v6ovq already exists in database (1 records), skipping
[2025-05-15T20:47:31.253Z] [STDOUT] Transaction for payment pay_QVIGtXTXkm93W8 already exists in database (1 records), skipping
[2025-05-15T20:47:31.253Z] [STDOUT] Found 2 invoices for subscription sub_QVIG6dAuP0UXXn
[2025-05-15T20:47:31.253Z] [STDOUT] Subscription invoice synchronization complete!
[2025-05-15T20:47:31.253Z] [STDOUT] Processed 4 subscriptions
[2025-05-15T20:47:31.253Z] [STDOUT] Success: 4, Errors: 0
[2025-05-15T20:47:31.253Z] [STDOUT] Added 0 new transactions
[2025-05-15T20:47:31.253Z] [STDOUT] Script execution completed
[2025-05-15T20:47:31.253Z] Synchronization completed successfully
[2025-05-15T20:47:31.253Z] Next sync scheduled in 5 seconds
[2025-05-15T20:47:35.834Z] [STDOUT] Using database connection: postgres://***:***@localhost:5432/prosumeai
[2025-05-15T20:47:35.834Z] [STDOUT] Starting subscription invoice synchronization...
[2025-05-15T20:47:35.834Z] [STDOUT] Database schema validated successfully
[2025-05-15T20:47:35.834Z] [STDOUT] Found 4 active Razorpay subscriptions to sync
[2025-05-15T20:47:35.834Z] [STDOUT] Processing subscription 20 with Razorpay ID: sub_QUxcCis3igdqUA
[2025-05-15T20:47:35.834Z] [STDOUT] Subscription 20 has 1 existing transactions
[2025-05-15T20:47:35.834Z] [STDOUT] Razorpay initialization in progress, waiting...
[2025-05-15T20:47:35.834Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:47:35.834Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:47:35.834Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:47:35.834Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:47:35.834Z] [STDOUT] Fetching invoices for subscription ID: sub_QUxcCis3igdqUA
[2025-05-15T20:47:35.834Z] [STDOUT] Found 0 invoices for subscription: sub_QUxcCis3igdqUA
[2025-05-15T20:47:35.834Z] [STDOUT] Found 0 invoices for subscription sub_QUxcCis3igdqUA
[2025-05-15T20:47:35.834Z] [STDOUT] Processing subscription 24 with Razorpay ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:47:35.834Z] [STDOUT] Subscription 24 has 1 existing transactions
[2025-05-15T20:47:35.834Z] [STDOUT] Fetching invoices for subscription ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:47:35.834Z] [STDOUT] Found 1 invoices for subscription: sub_QV05DCrgh3A2rL
[2025-05-15T20:47:35.834Z] [STDOUT] Transaction for payment pay_QV05q44fHQzL1q already exists in database (1 records), skipping
[2025-05-15T20:47:35.834Z] [STDOUT] Found 1 invoices for subscription sub_QV05DCrgh3A2rL
[2025-05-15T20:47:35.834Z] [STDOUT] Processing subscription 25 with Razorpay ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:47:35.834Z] [STDOUT] Subscription 25 has 2 existing transactions
[2025-05-15T20:47:35.834Z] [STDOUT] Fetching invoices for subscription ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:47:35.835Z] [STDOUT] Found 1 invoices for subscription: sub_QV1W0JNq2cOk7s
[2025-05-15T20:47:35.835Z] [STDOUT] Transaction for payment pay_QV1WoyCgCY23iO already exists in database (2 records), skipping
[2025-05-15T20:47:35.835Z] [STDOUT] Found 1 invoices for subscription sub_QV1W0JNq2cOk7s
[2025-05-15T20:47:35.835Z] [STDOUT] Processing subscription 26 with Razorpay ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:47:35.835Z] [STDOUT] Subscription 26 has 2 existing transactions
[2025-05-15T20:47:35.835Z] [STDOUT] Fetching invoices for subscription ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:47:35.835Z] [STDOUT] Found 2 invoices for subscription: sub_QVIG6dAuP0UXXn
[2025-05-15T20:47:35.835Z] [STDOUT] Transaction for payment pay_QVILKDuy9v6ovq already exists in database (1 records), skipping
[2025-05-15T20:47:35.835Z] [STDOUT] Transaction for payment pay_QVIGtXTXkm93W8 already exists in database (1 records), skipping
[2025-05-15T20:47:35.835Z] [STDOUT] Found 2 invoices for subscription sub_QVIG6dAuP0UXXn
[2025-05-15T20:47:35.835Z] [STDOUT] Subscription invoice synchronization complete!
[2025-05-15T20:47:35.835Z] [STDOUT] Processed 4 subscriptions
[2025-05-15T20:47:35.835Z] [STDOUT] Success: 4, Errors: 0
[2025-05-15T20:47:35.835Z] [STDOUT] Added 0 new transactions
[2025-05-15T20:47:35.835Z] [STDOUT] Script execution completed
[2025-05-15T20:47:35.835Z] Synchronization completed successfully
[2025-05-15T20:47:35.835Z] Next sync scheduled in 5 seconds
[2025-05-15T20:47:35.922Z] Starting invoice synchronization...
[2025-05-15T20:47:35.922Z] Running sync script: /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:47:35.922Z] Executing command: cd /Users/raja/Development/ProsumeAI/server && npx tsx /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:47:40.922Z] Starting invoice synchronization...
[2025-05-15T20:47:40.923Z] Running sync script: /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:47:40.923Z] Executing command: cd /Users/raja/Development/ProsumeAI/server && npx tsx /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:47:41.012Z] [STDOUT] Using database connection: postgres://***:***@localhost:5432/prosumeai
[2025-05-15T20:47:41.012Z] [STDOUT] Starting subscription invoice synchronization...
[2025-05-15T20:47:41.012Z] [STDOUT] Database schema validated successfully
[2025-05-15T20:47:41.012Z] [STDOUT] Found 4 active Razorpay subscriptions to sync
[2025-05-15T20:47:41.012Z] [STDOUT] Processing subscription 20 with Razorpay ID: sub_QUxcCis3igdqUA
[2025-05-15T20:47:41.012Z] [STDOUT] Subscription 20 has 1 existing transactions
[2025-05-15T20:47:41.012Z] [STDOUT] Razorpay initialization in progress, waiting...
[2025-05-15T20:47:41.012Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:47:41.012Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:47:41.012Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:47:41.012Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:47:41.012Z] [STDOUT] Fetching invoices for subscription ID: sub_QUxcCis3igdqUA
[2025-05-15T20:47:41.012Z] [STDOUT] Found 0 invoices for subscription: sub_QUxcCis3igdqUA
[2025-05-15T20:47:41.012Z] [STDOUT] Found 0 invoices for subscription sub_QUxcCis3igdqUA
[2025-05-15T20:47:41.012Z] [STDOUT] Processing subscription 24 with Razorpay ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:47:41.012Z] [STDOUT] Subscription 24 has 1 existing transactions
[2025-05-15T20:47:41.012Z] [STDOUT] Fetching invoices for subscription ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:47:41.012Z] [STDOUT] Found 1 invoices for subscription: sub_QV05DCrgh3A2rL
[2025-05-15T20:47:41.012Z] [STDOUT] Transaction for payment pay_QV05q44fHQzL1q already exists in database (1 records), skipping
[2025-05-15T20:47:41.012Z] [STDOUT] Found 1 invoices for subscription sub_QV05DCrgh3A2rL
[2025-05-15T20:47:41.012Z] [STDOUT] Processing subscription 25 with Razorpay ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:47:41.012Z] [STDOUT] Subscription 25 has 2 existing transactions
[2025-05-15T20:47:41.012Z] [STDOUT] Fetching invoices for subscription ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:47:41.012Z] [STDOUT] Found 1 invoices for subscription: sub_QV1W0JNq2cOk7s
[2025-05-15T20:47:41.012Z] [STDOUT] Transaction for payment pay_QV1WoyCgCY23iO already exists in database (2 records), skipping
[2025-05-15T20:47:41.012Z] [STDOUT] Found 1 invoices for subscription sub_QV1W0JNq2cOk7s
[2025-05-15T20:47:41.012Z] [STDOUT] Processing subscription 26 with Razorpay ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:47:41.012Z] [STDOUT] Subscription 26 has 2 existing transactions
[2025-05-15T20:47:41.012Z] [STDOUT] Fetching invoices for subscription ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:47:41.012Z] [STDOUT] Found 2 invoices for subscription: sub_QVIG6dAuP0UXXn
[2025-05-15T20:47:41.012Z] [STDOUT] Transaction for payment pay_QVILKDuy9v6ovq already exists in database (1 records), skipping
[2025-05-15T20:47:41.012Z] [STDOUT] Transaction for payment pay_QVIGtXTXkm93W8 already exists in database (1 records), skipping
[2025-05-15T20:47:41.012Z] [STDOUT] Found 2 invoices for subscription sub_QVIG6dAuP0UXXn
[2025-05-15T20:47:41.012Z] [STDOUT] Subscription invoice synchronization complete!
[2025-05-15T20:47:41.012Z] [STDOUT] Processed 4 subscriptions
[2025-05-15T20:47:41.012Z] [STDOUT] Success: 4, Errors: 0
[2025-05-15T20:47:41.012Z] [STDOUT] Added 0 new transactions
[2025-05-15T20:47:41.012Z] [STDOUT] Script execution completed
[2025-05-15T20:47:41.012Z] Synchronization completed successfully
[2025-05-15T20:47:41.012Z] Next sync scheduled in 5 seconds
[2025-05-15T20:47:45.316Z] [STDOUT] Using database connection: postgres://***:***@localhost:5432/prosumeai
[2025-05-15T20:47:45.317Z] [STDOUT] Starting subscription invoice synchronization...
[2025-05-15T20:47:45.317Z] [STDOUT] Database schema validated successfully
[2025-05-15T20:47:45.317Z] [STDOUT] Found 4 active Razorpay subscriptions to sync
[2025-05-15T20:47:45.317Z] [STDOUT] Processing subscription 20 with Razorpay ID: sub_QUxcCis3igdqUA
[2025-05-15T20:47:45.317Z] [STDOUT] Subscription 20 has 1 existing transactions
[2025-05-15T20:47:45.317Z] [STDOUT] Razorpay initialization in progress, waiting...
[2025-05-15T20:47:45.317Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:47:45.317Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:47:45.317Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:47:45.317Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:47:45.317Z] [STDOUT] Fetching invoices for subscription ID: sub_QUxcCis3igdqUA
[2025-05-15T20:47:45.317Z] [STDOUT] Found 0 invoices for subscription: sub_QUxcCis3igdqUA
[2025-05-15T20:47:45.317Z] [STDOUT] Found 0 invoices for subscription sub_QUxcCis3igdqUA
[2025-05-15T20:47:45.317Z] [STDOUT] Processing subscription 24 with Razorpay ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:47:45.317Z] [STDOUT] Subscription 24 has 1 existing transactions
[2025-05-15T20:47:45.317Z] [STDOUT] Fetching invoices for subscription ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:47:45.317Z] [STDOUT] Found 1 invoices for subscription: sub_QV05DCrgh3A2rL
[2025-05-15T20:47:45.317Z] [STDOUT] Transaction for payment pay_QV05q44fHQzL1q already exists in database (1 records), skipping
[2025-05-15T20:47:45.317Z] [STDOUT] Found 1 invoices for subscription sub_QV05DCrgh3A2rL
[2025-05-15T20:47:45.317Z] [STDOUT] Processing subscription 25 with Razorpay ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:47:45.317Z] [STDOUT] Subscription 25 has 2 existing transactions
[2025-05-15T20:47:45.317Z] [STDOUT] Fetching invoices for subscription ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:47:45.317Z] [STDOUT] Found 1 invoices for subscription: sub_QV1W0JNq2cOk7s
[2025-05-15T20:47:45.317Z] [STDOUT] Transaction for payment pay_QV1WoyCgCY23iO already exists in database (2 records), skipping
[2025-05-15T20:47:45.317Z] [STDOUT] Found 1 invoices for subscription sub_QV1W0JNq2cOk7s
[2025-05-15T20:47:45.317Z] [STDOUT] Processing subscription 26 with Razorpay ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:47:45.317Z] [STDOUT] Subscription 26 has 2 existing transactions
[2025-05-15T20:47:45.317Z] [STDOUT] Fetching invoices for subscription ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:47:45.317Z] [STDOUT] Found 2 invoices for subscription: sub_QVIG6dAuP0UXXn
[2025-05-15T20:47:45.317Z] [STDOUT] Transaction for payment pay_QVILKDuy9v6ovq already exists in database (1 records), skipping
[2025-05-15T20:47:45.317Z] [STDOUT] Transaction for payment pay_QVIGtXTXkm93W8 already exists in database (1 records), skipping
[2025-05-15T20:47:45.317Z] [STDOUT] Found 2 invoices for subscription sub_QVIG6dAuP0UXXn
[2025-05-15T20:47:45.317Z] [STDOUT] Subscription invoice synchronization complete!
[2025-05-15T20:47:45.317Z] [STDOUT] Processed 4 subscriptions
[2025-05-15T20:47:45.317Z] [STDOUT] Success: 4, Errors: 0
[2025-05-15T20:47:45.317Z] [STDOUT] Added 0 new transactions
[2025-05-15T20:47:45.317Z] [STDOUT] Script execution completed
[2025-05-15T20:47:45.317Z] Synchronization completed successfully
[2025-05-15T20:47:45.317Z] Next sync scheduled in 5 seconds
[2025-05-15T20:47:45.923Z] Starting invoice synchronization...
[2025-05-15T20:47:45.924Z] Running sync script: /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:47:45.924Z] Executing command: cd /Users/raja/Development/ProsumeAI/server && npx tsx /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:47:50.925Z] Starting invoice synchronization...
[2025-05-15T20:47:50.925Z] Running sync script: /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:47:50.925Z] Executing command: cd /Users/raja/Development/ProsumeAI/server && npx tsx /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:47:51.420Z] [STDOUT] Using database connection: postgres://***:***@localhost:5432/prosumeai
[2025-05-15T20:47:51.420Z] [STDOUT] Starting subscription invoice synchronization...
[2025-05-15T20:47:51.420Z] [STDOUT] Database schema validated successfully
[2025-05-15T20:47:51.420Z] [STDOUT] Found 4 active Razorpay subscriptions to sync
[2025-05-15T20:47:51.420Z] [STDOUT] Processing subscription 20 with Razorpay ID: sub_QUxcCis3igdqUA
[2025-05-15T20:47:51.420Z] [STDOUT] Subscription 20 has 1 existing transactions
[2025-05-15T20:47:51.420Z] [STDOUT] Razorpay initialization in progress, waiting...
[2025-05-15T20:47:51.420Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:47:51.420Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:47:51.420Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:47:51.420Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:47:51.420Z] [STDOUT] Fetching invoices for subscription ID: sub_QUxcCis3igdqUA
[2025-05-15T20:47:51.420Z] [STDOUT] Found 0 invoices for subscription: sub_QUxcCis3igdqUA
[2025-05-15T20:47:51.420Z] [STDOUT] Found 0 invoices for subscription sub_QUxcCis3igdqUA
[2025-05-15T20:47:51.420Z] [STDOUT] Processing subscription 24 with Razorpay ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:47:51.420Z] [STDOUT] Subscription 24 has 1 existing transactions
[2025-05-15T20:47:51.420Z] [STDOUT] Fetching invoices for subscription ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:47:51.420Z] [STDOUT] Found 1 invoices for subscription: sub_QV05DCrgh3A2rL
[2025-05-15T20:47:51.420Z] [STDOUT] Transaction for payment pay_QV05q44fHQzL1q already exists in database (1 records), skipping
[2025-05-15T20:47:51.420Z] [STDOUT] Found 1 invoices for subscription sub_QV05DCrgh3A2rL
[2025-05-15T20:47:51.420Z] [STDOUT] Processing subscription 25 with Razorpay ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:47:51.420Z] [STDOUT] Subscription 25 has 2 existing transactions
[2025-05-15T20:47:51.420Z] [STDOUT] Fetching invoices for subscription ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:47:51.420Z] [STDOUT] Found 1 invoices for subscription: sub_QV1W0JNq2cOk7s
[2025-05-15T20:47:51.420Z] [STDOUT] Transaction for payment pay_QV1WoyCgCY23iO already exists in database (2 records), skipping
[2025-05-15T20:47:51.420Z] [STDOUT] Found 1 invoices for subscription sub_QV1W0JNq2cOk7s
[2025-05-15T20:47:51.420Z] [STDOUT] Processing subscription 26 with Razorpay ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:47:51.420Z] [STDOUT] Subscription 26 has 2 existing transactions
[2025-05-15T20:47:51.420Z] [STDOUT] Fetching invoices for subscription ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:47:51.420Z] [STDOUT] Found 2 invoices for subscription: sub_QVIG6dAuP0UXXn
[2025-05-15T20:47:51.420Z] [STDOUT] Transaction for payment pay_QVILKDuy9v6ovq already exists in database (1 records), skipping
[2025-05-15T20:47:51.420Z] [STDOUT] Transaction for payment pay_QVIGtXTXkm93W8 already exists in database (1 records), skipping
[2025-05-15T20:47:51.420Z] [STDOUT] Found 2 invoices for subscription sub_QVIG6dAuP0UXXn
[2025-05-15T20:47:51.420Z] [STDOUT] Subscription invoice synchronization complete!
[2025-05-15T20:47:51.420Z] [STDOUT] Processed 4 subscriptions
[2025-05-15T20:47:51.420Z] [STDOUT] Success: 4, Errors: 0
[2025-05-15T20:47:51.420Z] [STDOUT] Added 0 new transactions
[2025-05-15T20:47:51.420Z] [STDOUT] Script execution completed
[2025-05-15T20:47:51.420Z] Synchronization completed successfully
[2025-05-15T20:47:51.420Z] Next sync scheduled in 5 seconds
[2025-05-15T20:47:55.332Z] [STDOUT] Using database connection: postgres://***:***@localhost:5432/prosumeai
[2025-05-15T20:47:55.332Z] [STDOUT] Starting subscription invoice synchronization...
[2025-05-15T20:47:55.332Z] [STDOUT] Found 4 active Razorpay subscriptions to sync
[2025-05-15T20:47:55.332Z] [STDOUT] Processing subscription 20 with Razorpay ID: sub_QUxcCis3igdqUA
[2025-05-15T20:47:55.332Z] [STDOUT] Database schema validated successfully
[2025-05-15T20:47:55.332Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:47:55.332Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:47:55.332Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:47:55.332Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:47:55.332Z] [STDOUT] Subscription 20 has 1 existing transactions
[2025-05-15T20:47:55.332Z] [STDOUT] Fetching invoices for subscription ID: sub_QUxcCis3igdqUA
[2025-05-15T20:47:55.332Z] [STDOUT] Found 0 invoices for subscription: sub_QUxcCis3igdqUA
[2025-05-15T20:47:55.332Z] [STDOUT] Found 0 invoices for subscription sub_QUxcCis3igdqUA
[2025-05-15T20:47:55.332Z] [STDOUT] Processing subscription 24 with Razorpay ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:47:55.332Z] [STDOUT] Subscription 24 has 1 existing transactions
[2025-05-15T20:47:55.332Z] [STDOUT] Fetching invoices for subscription ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:47:55.332Z] [STDOUT] Found 1 invoices for subscription: sub_QV05DCrgh3A2rL
[2025-05-15T20:47:55.332Z] [STDOUT] Transaction for payment pay_QV05q44fHQzL1q already exists in database (1 records), skipping
[2025-05-15T20:47:55.332Z] [STDOUT] Found 1 invoices for subscription sub_QV05DCrgh3A2rL
[2025-05-15T20:47:55.332Z] [STDOUT] Processing subscription 25 with Razorpay ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:47:55.332Z] [STDOUT] Subscription 25 has 2 existing transactions
[2025-05-15T20:47:55.332Z] [STDOUT] Fetching invoices for subscription ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:47:55.332Z] [STDOUT] Found 1 invoices for subscription: sub_QV1W0JNq2cOk7s
[2025-05-15T20:47:55.332Z] [STDOUT] Transaction for payment pay_QV1WoyCgCY23iO already exists in database (2 records), skipping
[2025-05-15T20:47:55.332Z] [STDOUT] Found 1 invoices for subscription sub_QV1W0JNq2cOk7s
[2025-05-15T20:47:55.332Z] [STDOUT] Processing subscription 26 with Razorpay ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:47:55.332Z] [STDOUT] Subscription 26 has 2 existing transactions
[2025-05-15T20:47:55.332Z] [STDOUT] Fetching invoices for subscription ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:47:55.332Z] [STDOUT] Found 2 invoices for subscription: sub_QVIG6dAuP0UXXn
[2025-05-15T20:47:55.332Z] [STDOUT] Transaction for payment pay_QVILKDuy9v6ovq already exists in database (1 records), skipping
[2025-05-15T20:47:55.332Z] [STDOUT] Transaction for payment pay_QVIGtXTXkm93W8 already exists in database (1 records), skipping
[2025-05-15T20:47:55.332Z] [STDOUT] Found 2 invoices for subscription sub_QVIG6dAuP0UXXn
[2025-05-15T20:47:55.332Z] [STDOUT] Subscription invoice synchronization complete!
[2025-05-15T20:47:55.332Z] [STDOUT] Processed 4 subscriptions
[2025-05-15T20:47:55.332Z] [STDOUT] Success: 4, Errors: 0
[2025-05-15T20:47:55.332Z] [STDOUT] Added 0 new transactions
[2025-05-15T20:47:55.332Z] [STDOUT] Script execution completed
[2025-05-15T20:47:55.332Z] Synchronization completed successfully
[2025-05-15T20:47:55.332Z] Next sync scheduled in 5 seconds
[2025-05-15T20:47:55.926Z] Starting invoice synchronization...
[2025-05-15T20:47:55.926Z] Running sync script: /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:47:55.926Z] Executing command: cd /Users/raja/Development/ProsumeAI/server && npx tsx /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:48:00.927Z] Starting invoice synchronization...
[2025-05-15T20:48:00.927Z] Running sync script: /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:48:00.927Z] Executing command: cd /Users/raja/Development/ProsumeAI/server && npx tsx /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:48:05.144Z] [STDOUT] Using database connection: postgres://***:***@localhost:5432/prosumeai
[2025-05-15T20:48:05.144Z] [STDOUT] Starting subscription invoice synchronization...
[2025-05-15T20:48:05.144Z] [STDOUT] Database schema validated successfully
[2025-05-15T20:48:05.144Z] [STDOUT] Found 4 active Razorpay subscriptions to sync
[2025-05-15T20:48:05.144Z] [STDOUT] Processing subscription 20 with Razorpay ID: sub_QUxcCis3igdqUA
[2025-05-15T20:48:05.144Z] [STDOUT] Subscription 20 has 1 existing transactions
[2025-05-15T20:48:05.144Z] [STDOUT] Razorpay initialization in progress, waiting...
[2025-05-15T20:48:05.144Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:48:05.144Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:48:05.144Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:48:05.144Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:48:05.144Z] [STDOUT] Fetching invoices for subscription ID: sub_QUxcCis3igdqUA
[2025-05-15T20:48:05.144Z] [STDOUT] Found 0 invoices for subscription: sub_QUxcCis3igdqUA
[2025-05-15T20:48:05.144Z] [STDOUT] Found 0 invoices for subscription sub_QUxcCis3igdqUA
[2025-05-15T20:48:05.144Z] [STDOUT] Processing subscription 24 with Razorpay ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:48:05.144Z] [STDOUT] Subscription 24 has 1 existing transactions
[2025-05-15T20:48:05.144Z] [STDOUT] Fetching invoices for subscription ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:48:05.144Z] [STDOUT] Found 1 invoices for subscription: sub_QV05DCrgh3A2rL
[2025-05-15T20:48:05.144Z] [STDOUT] Transaction for payment pay_QV05q44fHQzL1q already exists in database (1 records), skipping
[2025-05-15T20:48:05.144Z] [STDOUT] Found 1 invoices for subscription sub_QV05DCrgh3A2rL
[2025-05-15T20:48:05.144Z] [STDOUT] Processing subscription 25 with Razorpay ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:48:05.144Z] [STDOUT] Subscription 25 has 2 existing transactions
[2025-05-15T20:48:05.144Z] [STDOUT] Fetching invoices for subscription ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:48:05.144Z] [STDOUT] Found 1 invoices for subscription: sub_QV1W0JNq2cOk7s
[2025-05-15T20:48:05.144Z] [STDOUT] Transaction for payment pay_QV1WoyCgCY23iO already exists in database (2 records), skipping
[2025-05-15T20:48:05.144Z] [STDOUT] Found 1 invoices for subscription sub_QV1W0JNq2cOk7s
[2025-05-15T20:48:05.144Z] [STDOUT] Processing subscription 26 with Razorpay ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:48:05.144Z] [STDOUT] Subscription 26 has 2 existing transactions
[2025-05-15T20:48:05.144Z] [STDOUT] Fetching invoices for subscription ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:48:05.144Z] [STDOUT] Found 2 invoices for subscription: sub_QVIG6dAuP0UXXn
[2025-05-15T20:48:05.144Z] [STDOUT] Transaction for payment pay_QVILKDuy9v6ovq already exists in database (1 records), skipping
[2025-05-15T20:48:05.144Z] [STDOUT] Transaction for payment pay_QVIGtXTXkm93W8 already exists in database (1 records), skipping
[2025-05-15T20:48:05.144Z] [STDOUT] Found 2 invoices for subscription sub_QVIG6dAuP0UXXn
[2025-05-15T20:48:05.144Z] [STDOUT] Subscription invoice synchronization complete!
[2025-05-15T20:48:05.144Z] [STDOUT] Processed 4 subscriptions
[2025-05-15T20:48:05.144Z] [STDOUT] Success: 4, Errors: 0
[2025-05-15T20:48:05.144Z] [STDOUT] Added 0 new transactions
[2025-05-15T20:48:05.144Z] [STDOUT] Script execution completed
[2025-05-15T20:48:05.144Z] Synchronization completed successfully
[2025-05-15T20:48:05.144Z] Next sync scheduled in 5 seconds
[2025-05-15T20:48:05.928Z] Starting invoice synchronization...
[2025-05-15T20:48:05.929Z] Running sync script: /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:48:05.929Z] Executing command: cd /Users/raja/Development/ProsumeAI/server && npx tsx /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:48:07.051Z] [STDOUT] Using database connection: postgres://***:***@localhost:5432/prosumeai
[2025-05-15T20:48:07.051Z] [STDOUT] Starting subscription invoice synchronization...
[2025-05-15T20:48:07.051Z] [STDOUT] Database schema validated successfully
[2025-05-15T20:48:07.052Z] [STDOUT] Found 4 active Razorpay subscriptions to sync
[2025-05-15T20:48:07.052Z] [STDOUT] Processing subscription 20 with Razorpay ID: sub_QUxcCis3igdqUA
[2025-05-15T20:48:07.052Z] [STDOUT] Subscription 20 has 1 existing transactions
[2025-05-15T20:48:07.052Z] [STDOUT] Razorpay initialization in progress, waiting...
[2025-05-15T20:48:07.052Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:48:07.052Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:48:07.052Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:48:07.052Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:48:07.052Z] [STDOUT] Fetching invoices for subscription ID: sub_QUxcCis3igdqUA
[2025-05-15T20:48:07.052Z] [STDOUT] Found 0 invoices for subscription: sub_QUxcCis3igdqUA
[2025-05-15T20:48:07.052Z] [STDOUT] Found 0 invoices for subscription sub_QUxcCis3igdqUA
[2025-05-15T20:48:07.052Z] [STDOUT] Processing subscription 24 with Razorpay ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:48:07.052Z] [STDOUT] Subscription 24 has 1 existing transactions
[2025-05-15T20:48:07.052Z] [STDOUT] Fetching invoices for subscription ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:48:07.052Z] [STDOUT] Found 1 invoices for subscription: sub_QV05DCrgh3A2rL
[2025-05-15T20:48:07.052Z] [STDOUT] Transaction for payment pay_QV05q44fHQzL1q already exists in database (1 records), skipping
[2025-05-15T20:48:07.052Z] [STDOUT] Found 1 invoices for subscription sub_QV05DCrgh3A2rL
[2025-05-15T20:48:07.052Z] [STDOUT] Processing subscription 25 with Razorpay ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:48:07.052Z] [STDOUT] Subscription 25 has 2 existing transactions
[2025-05-15T20:48:07.052Z] [STDOUT] Fetching invoices for subscription ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:48:07.052Z] [STDOUT] Found 1 invoices for subscription: sub_QV1W0JNq2cOk7s
[2025-05-15T20:48:07.052Z] [STDOUT] Transaction for payment pay_QV1WoyCgCY23iO already exists in database (2 records), skipping
[2025-05-15T20:48:07.052Z] [STDOUT] Found 1 invoices for subscription sub_QV1W0JNq2cOk7s
[2025-05-15T20:48:07.052Z] [STDOUT] Processing subscription 26 with Razorpay ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:48:07.052Z] [STDOUT] Subscription 26 has 2 existing transactions
[2025-05-15T20:48:07.052Z] [STDOUT] Fetching invoices for subscription ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:48:07.052Z] [STDOUT] Found 2 invoices for subscription: sub_QVIG6dAuP0UXXn
[2025-05-15T20:48:07.052Z] [STDOUT] Transaction for payment pay_QVILKDuy9v6ovq already exists in database (1 records), skipping
[2025-05-15T20:48:07.052Z] [STDOUT] Transaction for payment pay_QVIGtXTXkm93W8 already exists in database (1 records), skipping
[2025-05-15T20:48:07.052Z] [STDOUT] Found 2 invoices for subscription sub_QVIG6dAuP0UXXn
[2025-05-15T20:48:07.052Z] [STDOUT] Subscription invoice synchronization complete!
[2025-05-15T20:48:07.052Z] [STDOUT] Processed 4 subscriptions
[2025-05-15T20:48:07.052Z] [STDOUT] Success: 4, Errors: 0
[2025-05-15T20:48:07.052Z] [STDOUT] Added 0 new transactions
[2025-05-15T20:48:07.052Z] [STDOUT] Script execution completed
[2025-05-15T20:48:07.052Z] Synchronization completed successfully
[2025-05-15T20:48:07.052Z] Next sync scheduled in 5 seconds
[2025-05-15T20:48:10.571Z] [STDOUT] Using database connection: postgres://***:***@localhost:5432/prosumeai
[2025-05-15T20:48:10.571Z] [STDOUT] Starting subscription invoice synchronization...
[2025-05-15T20:48:10.571Z] [STDOUT] Database schema validated successfully
[2025-05-15T20:48:10.571Z] [STDOUT] Found 4 active Razorpay subscriptions to sync
[2025-05-15T20:48:10.571Z] [STDOUT] Processing subscription 20 with Razorpay ID: sub_QUxcCis3igdqUA
[2025-05-15T20:48:10.571Z] [STDOUT] Subscription 20 has 1 existing transactions
[2025-05-15T20:48:10.571Z] [STDOUT] Razorpay initialization in progress, waiting...
[2025-05-15T20:48:10.571Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:48:10.571Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:48:10.571Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:48:10.571Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:48:10.571Z] [STDOUT] Fetching invoices for subscription ID: sub_QUxcCis3igdqUA
[2025-05-15T20:48:10.571Z] [STDOUT] Found 0 invoices for subscription: sub_QUxcCis3igdqUA
[2025-05-15T20:48:10.571Z] [STDOUT] Found 0 invoices for subscription sub_QUxcCis3igdqUA
[2025-05-15T20:48:10.571Z] [STDOUT] Processing subscription 24 with Razorpay ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:48:10.571Z] [STDOUT] Subscription 24 has 1 existing transactions
[2025-05-15T20:48:10.571Z] [STDOUT] Fetching invoices for subscription ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:48:10.571Z] [STDOUT] Found 1 invoices for subscription: sub_QV05DCrgh3A2rL
[2025-05-15T20:48:10.571Z] [STDOUT] Transaction for payment pay_QV05q44fHQzL1q already exists in database (1 records), skipping
[2025-05-15T20:48:10.571Z] [STDOUT] Found 1 invoices for subscription sub_QV05DCrgh3A2rL
[2025-05-15T20:48:10.571Z] [STDOUT] Processing subscription 25 with Razorpay ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:48:10.571Z] [STDOUT] Subscription 25 has 2 existing transactions
[2025-05-15T20:48:10.571Z] [STDOUT] Fetching invoices for subscription ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:48:10.571Z] [STDOUT] Found 1 invoices for subscription: sub_QV1W0JNq2cOk7s
[2025-05-15T20:48:10.571Z] [STDOUT] Transaction for payment pay_QV1WoyCgCY23iO already exists in database (2 records), skipping
[2025-05-15T20:48:10.571Z] [STDOUT] Found 1 invoices for subscription sub_QV1W0JNq2cOk7s
[2025-05-15T20:48:10.571Z] [STDOUT] Processing subscription 26 with Razorpay ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:48:10.571Z] [STDOUT] Subscription 26 has 2 existing transactions
[2025-05-15T20:48:10.571Z] [STDOUT] Fetching invoices for subscription ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:48:10.572Z] [STDOUT] Found 2 invoices for subscription: sub_QVIG6dAuP0UXXn
[2025-05-15T20:48:10.572Z] [STDOUT] Transaction for payment pay_QVILKDuy9v6ovq already exists in database (1 records), skipping
[2025-05-15T20:48:10.572Z] [STDOUT] Transaction for payment pay_QVIGtXTXkm93W8 already exists in database (1 records), skipping
[2025-05-15T20:48:10.572Z] [STDOUT] Found 2 invoices for subscription sub_QVIG6dAuP0UXXn
[2025-05-15T20:48:10.572Z] [STDOUT] Subscription invoice synchronization complete!
[2025-05-15T20:48:10.572Z] [STDOUT] Processed 4 subscriptions
[2025-05-15T20:48:10.572Z] [STDOUT] Success: 4, Errors: 0
[2025-05-15T20:48:10.572Z] [STDOUT] Added 0 new transactions
[2025-05-15T20:48:10.572Z] [STDOUT] Script execution completed
[2025-05-15T20:48:10.572Z] Synchronization completed successfully
[2025-05-15T20:48:10.572Z] Next sync scheduled in 5 seconds
[2025-05-15T20:48:10.929Z] Starting invoice synchronization...
[2025-05-15T20:48:10.929Z] Running sync script: /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:48:10.929Z] Executing command: cd /Users/raja/Development/ProsumeAI/server && npx tsx /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:48:15.517Z] [STDOUT] Using database connection: postgres://***:***@localhost:5432/prosumeai
[2025-05-15T20:48:15.517Z] [STDOUT] Starting subscription invoice synchronization...
[2025-05-15T20:48:15.517Z] [STDOUT] Database schema validated successfully
[2025-05-15T20:48:15.517Z] [STDOUT] Found 4 active Razorpay subscriptions to sync
[2025-05-15T20:48:15.517Z] [STDOUT] Processing subscription 20 with Razorpay ID: sub_QUxcCis3igdqUA
[2025-05-15T20:48:15.517Z] [STDOUT] Subscription 20 has 1 existing transactions
[2025-05-15T20:48:15.517Z] [STDOUT] Razorpay initialization in progress, waiting...
[2025-05-15T20:48:15.517Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:48:15.517Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:48:15.517Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:48:15.517Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:48:15.517Z] [STDOUT] Fetching invoices for subscription ID: sub_QUxcCis3igdqUA
[2025-05-15T20:48:15.517Z] [STDOUT] Found 0 invoices for subscription: sub_QUxcCis3igdqUA
[2025-05-15T20:48:15.517Z] [STDOUT] Found 0 invoices for subscription sub_QUxcCis3igdqUA
[2025-05-15T20:48:15.517Z] [STDOUT] Processing subscription 24 with Razorpay ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:48:15.517Z] [STDOUT] Subscription 24 has 1 existing transactions
[2025-05-15T20:48:15.517Z] [STDOUT] Fetching invoices for subscription ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:48:15.517Z] [STDOUT] Found 1 invoices for subscription: sub_QV05DCrgh3A2rL
[2025-05-15T20:48:15.517Z] [STDOUT] Transaction for payment pay_QV05q44fHQzL1q already exists in database (1 records), skipping
[2025-05-15T20:48:15.517Z] [STDOUT] Found 1 invoices for subscription sub_QV05DCrgh3A2rL
[2025-05-15T20:48:15.517Z] [STDOUT] Processing subscription 25 with Razorpay ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:48:15.517Z] [STDOUT] Subscription 25 has 2 existing transactions
[2025-05-15T20:48:15.517Z] [STDOUT] Fetching invoices for subscription ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:48:15.517Z] [STDOUT] Found 1 invoices for subscription: sub_QV1W0JNq2cOk7s
[2025-05-15T20:48:15.517Z] [STDOUT] Transaction for payment pay_QV1WoyCgCY23iO already exists in database (2 records), skipping
[2025-05-15T20:48:15.517Z] [STDOUT] Found 1 invoices for subscription sub_QV1W0JNq2cOk7s
[2025-05-15T20:48:15.517Z] [STDOUT] Processing subscription 26 with Razorpay ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:48:15.517Z] [STDOUT] Subscription 26 has 2 existing transactions
[2025-05-15T20:48:15.517Z] [STDOUT] Fetching invoices for subscription ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:48:15.517Z] [STDOUT] Found 2 invoices for subscription: sub_QVIG6dAuP0UXXn
[2025-05-15T20:48:15.517Z] [STDOUT] Transaction for payment pay_QVILKDuy9v6ovq already exists in database (1 records), skipping
[2025-05-15T20:48:15.517Z] [STDOUT] Transaction for payment pay_QVIGtXTXkm93W8 already exists in database (1 records), skipping
[2025-05-15T20:48:15.517Z] [STDOUT] Found 2 invoices for subscription sub_QVIG6dAuP0UXXn
[2025-05-15T20:48:15.517Z] [STDOUT] Subscription invoice synchronization complete!
[2025-05-15T20:48:15.517Z] [STDOUT] Processed 4 subscriptions
[2025-05-15T20:48:15.517Z] [STDOUT] Success: 4, Errors: 0
[2025-05-15T20:48:15.517Z] [STDOUT] Added 0 new transactions
[2025-05-15T20:48:15.517Z] [STDOUT] Script execution completed
[2025-05-15T20:48:15.517Z] Synchronization completed successfully
[2025-05-15T20:48:15.517Z] Next sync scheduled in 5 seconds
[2025-05-15T20:48:15.930Z] Starting invoice synchronization...
[2025-05-15T20:48:15.931Z] Running sync script: /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:48:15.931Z] Executing command: cd /Users/raja/Development/ProsumeAI/server && npx tsx /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:48:20.431Z] [STDOUT] Using database connection: postgres://***:***@localhost:5432/prosumeai
[2025-05-15T20:48:20.431Z] [STDOUT] Starting subscription invoice synchronization...
[2025-05-15T20:48:20.431Z] [STDOUT] Database schema validated successfully
[2025-05-15T20:48:20.431Z] [STDOUT] Found 4 active Razorpay subscriptions to sync
[2025-05-15T20:48:20.431Z] [STDOUT] Processing subscription 20 with Razorpay ID: sub_QUxcCis3igdqUA
[2025-05-15T20:48:20.431Z] [STDOUT] Subscription 20 has 1 existing transactions
[2025-05-15T20:48:20.431Z] [STDOUT] Razorpay initialization in progress, waiting...
[2025-05-15T20:48:20.431Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:48:20.431Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:48:20.431Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:48:20.431Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:48:20.431Z] [STDOUT] Fetching invoices for subscription ID: sub_QUxcCis3igdqUA
[2025-05-15T20:48:20.431Z] [STDOUT] Found 0 invoices for subscription: sub_QUxcCis3igdqUA
[2025-05-15T20:48:20.431Z] [STDOUT] Found 0 invoices for subscription sub_QUxcCis3igdqUA
[2025-05-15T20:48:20.431Z] [STDOUT] Processing subscription 24 with Razorpay ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:48:20.431Z] [STDOUT] Subscription 24 has 1 existing transactions
[2025-05-15T20:48:20.431Z] [STDOUT] Fetching invoices for subscription ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:48:20.431Z] [STDOUT] Found 1 invoices for subscription: sub_QV05DCrgh3A2rL
[2025-05-15T20:48:20.431Z] [STDOUT] Transaction for payment pay_QV05q44fHQzL1q already exists in database (1 records), skipping
[2025-05-15T20:48:20.431Z] [STDOUT] Found 1 invoices for subscription sub_QV05DCrgh3A2rL
[2025-05-15T20:48:20.431Z] [STDOUT] Processing subscription 25 with Razorpay ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:48:20.431Z] [STDOUT] Subscription 25 has 2 existing transactions
[2025-05-15T20:48:20.431Z] [STDOUT] Fetching invoices for subscription ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:48:20.431Z] [STDOUT] Found 1 invoices for subscription: sub_QV1W0JNq2cOk7s
[2025-05-15T20:48:20.431Z] [STDOUT] Transaction for payment pay_QV1WoyCgCY23iO already exists in database (2 records), skipping
[2025-05-15T20:48:20.431Z] [STDOUT] Found 1 invoices for subscription sub_QV1W0JNq2cOk7s
[2025-05-15T20:48:20.431Z] [STDOUT] Processing subscription 26 with Razorpay ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:48:20.431Z] [STDOUT] Subscription 26 has 2 existing transactions
[2025-05-15T20:48:20.431Z] [STDOUT] Fetching invoices for subscription ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:48:20.431Z] [STDOUT] Found 2 invoices for subscription: sub_QVIG6dAuP0UXXn
[2025-05-15T20:48:20.431Z] [STDOUT] Transaction for payment pay_QVILKDuy9v6ovq already exists in database (1 records), skipping
[2025-05-15T20:48:20.431Z] [STDOUT] Transaction for payment pay_QVIGtXTXkm93W8 already exists in database (1 records), skipping
[2025-05-15T20:48:20.431Z] [STDOUT] Found 2 invoices for subscription sub_QVIG6dAuP0UXXn
[2025-05-15T20:48:20.431Z] [STDOUT] Subscription invoice synchronization complete!
[2025-05-15T20:48:20.431Z] [STDOUT] Processed 4 subscriptions
[2025-05-15T20:48:20.431Z] [STDOUT] Success: 4, Errors: 0
[2025-05-15T20:48:20.431Z] [STDOUT] Added 0 new transactions
[2025-05-15T20:48:20.431Z] [STDOUT] Script execution completed
[2025-05-15T20:48:20.431Z] Synchronization completed successfully
[2025-05-15T20:48:20.431Z] Next sync scheduled in 5 seconds
[2025-05-15T20:48:20.931Z] Starting invoice synchronization...
[2025-05-15T20:48:20.931Z] Running sync script: /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:48:20.931Z] Executing command: cd /Users/raja/Development/ProsumeAI/server && npx tsx /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:48:25.308Z] [STDOUT] Using database connection: postgres://***:***@localhost:5432/prosumeai
[2025-05-15T20:48:25.309Z] [STDOUT] Starting subscription invoice synchronization...
[2025-05-15T20:48:25.309Z] [STDOUT] Found 4 active Razorpay subscriptions to sync
[2025-05-15T20:48:25.309Z] [STDOUT] Processing subscription 20 with Razorpay ID: sub_QUxcCis3igdqUA
[2025-05-15T20:48:25.309Z] [STDOUT] Database schema validated successfully
[2025-05-15T20:48:25.309Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:48:25.309Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:48:25.309Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:48:25.309Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:48:25.309Z] [STDOUT] Subscription 20 has 1 existing transactions
[2025-05-15T20:48:25.309Z] [STDOUT] Fetching invoices for subscription ID: sub_QUxcCis3igdqUA
[2025-05-15T20:48:25.309Z] [STDOUT] Found 0 invoices for subscription: sub_QUxcCis3igdqUA
[2025-05-15T20:48:25.309Z] [STDOUT] Found 0 invoices for subscription sub_QUxcCis3igdqUA
[2025-05-15T20:48:25.309Z] [STDOUT] Processing subscription 24 with Razorpay ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:48:25.309Z] [STDOUT] Subscription 24 has 1 existing transactions
[2025-05-15T20:48:25.309Z] [STDOUT] Fetching invoices for subscription ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:48:25.309Z] [STDOUT] Found 1 invoices for subscription: sub_QV05DCrgh3A2rL
[2025-05-15T20:48:25.309Z] [STDOUT] Transaction for payment pay_QV05q44fHQzL1q already exists in database (1 records), skipping
[2025-05-15T20:48:25.309Z] [STDOUT] Found 1 invoices for subscription sub_QV05DCrgh3A2rL
[2025-05-15T20:48:25.309Z] [STDOUT] Processing subscription 25 with Razorpay ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:48:25.309Z] [STDOUT] Subscription 25 has 2 existing transactions
[2025-05-15T20:48:25.309Z] [STDOUT] Fetching invoices for subscription ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:48:25.309Z] [STDOUT] Found 1 invoices for subscription: sub_QV1W0JNq2cOk7s
[2025-05-15T20:48:25.309Z] [STDOUT] Transaction for payment pay_QV1WoyCgCY23iO already exists in database (2 records), skipping
[2025-05-15T20:48:25.309Z] [STDOUT] Found 1 invoices for subscription sub_QV1W0JNq2cOk7s
[2025-05-15T20:48:25.309Z] [STDOUT] Processing subscription 26 with Razorpay ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:48:25.309Z] [STDOUT] Subscription 26 has 2 existing transactions
[2025-05-15T20:48:25.309Z] [STDOUT] Fetching invoices for subscription ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:48:25.309Z] [STDOUT] Found 2 invoices for subscription: sub_QVIG6dAuP0UXXn
[2025-05-15T20:48:25.309Z] [STDOUT] Transaction for payment pay_QVILKDuy9v6ovq already exists in database (1 records), skipping
[2025-05-15T20:48:25.309Z] [STDOUT] Transaction for payment pay_QVIGtXTXkm93W8 already exists in database (1 records), skipping
[2025-05-15T20:48:25.309Z] [STDOUT] Found 2 invoices for subscription sub_QVIG6dAuP0UXXn
[2025-05-15T20:48:25.309Z] [STDOUT] Subscription invoice synchronization complete!
[2025-05-15T20:48:25.309Z] [STDOUT] Processed 4 subscriptions
[2025-05-15T20:48:25.309Z] [STDOUT] Success: 4, Errors: 0
[2025-05-15T20:48:25.309Z] [STDOUT] Added 0 new transactions
[2025-05-15T20:48:25.309Z] [STDOUT] Script execution completed
[2025-05-15T20:48:25.309Z] Synchronization completed successfully
[2025-05-15T20:48:25.309Z] Next sync scheduled in 5 seconds
[2025-05-15T20:48:25.932Z] Starting invoice synchronization...
[2025-05-15T20:48:25.932Z] Running sync script: /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:48:25.932Z] Executing command: cd /Users/raja/Development/ProsumeAI/server && npx tsx /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:48:30.933Z] Starting invoice synchronization...
[2025-05-15T20:48:30.933Z] Running sync script: /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:48:30.933Z] Executing command: cd /Users/raja/Development/ProsumeAI/server && npx tsx /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:48:31.555Z] [STDOUT] Using database connection: postgres://***:***@localhost:5432/prosumeai
[2025-05-15T20:48:31.555Z] [STDOUT] Starting subscription invoice synchronization...
[2025-05-15T20:48:31.556Z] [STDOUT] Database schema validated successfully
[2025-05-15T20:48:31.556Z] [STDOUT] Found 4 active Razorpay subscriptions to sync
[2025-05-15T20:48:31.556Z] [STDOUT] Processing subscription 20 with Razorpay ID: sub_QUxcCis3igdqUA
[2025-05-15T20:48:31.556Z] [STDOUT] Subscription 20 has 1 existing transactions
[2025-05-15T20:48:31.556Z] [STDOUT] Razorpay initialization in progress, waiting...
[2025-05-15T20:48:31.556Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:48:31.556Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:48:31.556Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:48:31.556Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:48:31.556Z] [STDOUT] Fetching invoices for subscription ID: sub_QUxcCis3igdqUA
[2025-05-15T20:48:31.556Z] [STDOUT] Found 0 invoices for subscription: sub_QUxcCis3igdqUA
[2025-05-15T20:48:31.556Z] [STDOUT] Found 0 invoices for subscription sub_QUxcCis3igdqUA
[2025-05-15T20:48:31.556Z] [STDOUT] Processing subscription 24 with Razorpay ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:48:31.556Z] [STDOUT] Subscription 24 has 1 existing transactions
[2025-05-15T20:48:31.556Z] [STDOUT] Fetching invoices for subscription ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:48:31.556Z] [STDOUT] Found 1 invoices for subscription: sub_QV05DCrgh3A2rL
[2025-05-15T20:48:31.556Z] [STDOUT] Transaction for payment pay_QV05q44fHQzL1q already exists in database (1 records), skipping
[2025-05-15T20:48:31.556Z] [STDOUT] Found 1 invoices for subscription sub_QV05DCrgh3A2rL
[2025-05-15T20:48:31.556Z] [STDOUT] Processing subscription 25 with Razorpay ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:48:31.556Z] [STDOUT] Subscription 25 has 2 existing transactions
[2025-05-15T20:48:31.556Z] [STDOUT] Fetching invoices for subscription ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:48:31.556Z] [STDOUT] Found 1 invoices for subscription: sub_QV1W0JNq2cOk7s
[2025-05-15T20:48:31.556Z] [STDOUT] Transaction for payment pay_QV1WoyCgCY23iO already exists in database (2 records), skipping
[2025-05-15T20:48:31.556Z] [STDOUT] Found 1 invoices for subscription sub_QV1W0JNq2cOk7s
[2025-05-15T20:48:31.556Z] [STDOUT] Processing subscription 26 with Razorpay ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:48:31.556Z] [STDOUT] Subscription 26 has 2 existing transactions
[2025-05-15T20:48:31.556Z] [STDOUT] Fetching invoices for subscription ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:48:31.556Z] [STDOUT] Found 2 invoices for subscription: sub_QVIG6dAuP0UXXn
[2025-05-15T20:48:31.556Z] [STDOUT] Transaction for payment pay_QVILKDuy9v6ovq already exists in database (1 records), skipping
[2025-05-15T20:48:31.556Z] [STDOUT] Transaction for payment pay_QVIGtXTXkm93W8 already exists in database (1 records), skipping
[2025-05-15T20:48:31.556Z] [STDOUT] Found 2 invoices for subscription sub_QVIG6dAuP0UXXn
[2025-05-15T20:48:31.556Z] [STDOUT] Subscription invoice synchronization complete!
[2025-05-15T20:48:31.556Z] [STDOUT] Processed 4 subscriptions
[2025-05-15T20:48:31.556Z] [STDOUT] Success: 4, Errors: 0
[2025-05-15T20:48:31.556Z] [STDOUT] Added 0 new transactions
[2025-05-15T20:48:31.556Z] [STDOUT] Script execution completed
[2025-05-15T20:48:31.556Z] Synchronization completed successfully
[2025-05-15T20:48:31.556Z] Next sync scheduled in 5 seconds
[2025-05-15T20:48:35.527Z] [STDOUT] Using database connection: postgres://***:***@localhost:5432/prosumeai
[2025-05-15T20:48:35.527Z] [STDOUT] Starting subscription invoice synchronization...
[2025-05-15T20:48:35.527Z] [STDOUT] Database schema validated successfully
[2025-05-15T20:48:35.527Z] [STDOUT] Found 4 active Razorpay subscriptions to sync
[2025-05-15T20:48:35.527Z] [STDOUT] Processing subscription 20 with Razorpay ID: sub_QUxcCis3igdqUA
[2025-05-15T20:48:35.527Z] [STDOUT] Subscription 20 has 1 existing transactions
[2025-05-15T20:48:35.527Z] [STDOUT] Razorpay initialization in progress, waiting...
[2025-05-15T20:48:35.527Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:48:35.527Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:48:35.527Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:48:35.527Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:48:35.527Z] [STDOUT] Fetching invoices for subscription ID: sub_QUxcCis3igdqUA
[2025-05-15T20:48:35.528Z] [STDOUT] Found 0 invoices for subscription: sub_QUxcCis3igdqUA
[2025-05-15T20:48:35.528Z] [STDOUT] Found 0 invoices for subscription sub_QUxcCis3igdqUA
[2025-05-15T20:48:35.528Z] [STDOUT] Processing subscription 24 with Razorpay ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:48:35.528Z] [STDOUT] Subscription 24 has 1 existing transactions
[2025-05-15T20:48:35.528Z] [STDOUT] Fetching invoices for subscription ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:48:35.528Z] [STDOUT] Found 1 invoices for subscription: sub_QV05DCrgh3A2rL
[2025-05-15T20:48:35.528Z] [STDOUT] Transaction for payment pay_QV05q44fHQzL1q already exists in database (1 records), skipping
[2025-05-15T20:48:35.528Z] [STDOUT] Found 1 invoices for subscription sub_QV05DCrgh3A2rL
[2025-05-15T20:48:35.528Z] [STDOUT] Processing subscription 25 with Razorpay ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:48:35.528Z] [STDOUT] Subscription 25 has 2 existing transactions
[2025-05-15T20:48:35.528Z] [STDOUT] Fetching invoices for subscription ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:48:35.528Z] [STDOUT] Found 1 invoices for subscription: sub_QV1W0JNq2cOk7s
[2025-05-15T20:48:35.528Z] [STDOUT] Transaction for payment pay_QV1WoyCgCY23iO already exists in database (2 records), skipping
[2025-05-15T20:48:35.528Z] [STDOUT] Found 1 invoices for subscription sub_QV1W0JNq2cOk7s
[2025-05-15T20:48:35.528Z] [STDOUT] Processing subscription 26 with Razorpay ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:48:35.528Z] [STDOUT] Subscription 26 has 2 existing transactions
[2025-05-15T20:48:35.528Z] [STDOUT] Fetching invoices for subscription ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:48:35.528Z] [STDOUT] Found 2 invoices for subscription: sub_QVIG6dAuP0UXXn
[2025-05-15T20:48:35.528Z] [STDOUT] Transaction for payment pay_QVILKDuy9v6ovq already exists in database (1 records), skipping
[2025-05-15T20:48:35.528Z] [STDOUT] Transaction for payment pay_QVIGtXTXkm93W8 already exists in database (1 records), skipping
[2025-05-15T20:48:35.528Z] [STDOUT] Found 2 invoices for subscription sub_QVIG6dAuP0UXXn
[2025-05-15T20:48:35.528Z] [STDOUT] Subscription invoice synchronization complete!
[2025-05-15T20:48:35.528Z] [STDOUT] Processed 4 subscriptions
[2025-05-15T20:48:35.528Z] [STDOUT] Success: 4, Errors: 0
[2025-05-15T20:48:35.528Z] [STDOUT] Added 0 new transactions
[2025-05-15T20:48:35.528Z] [STDOUT] Script execution completed
[2025-05-15T20:48:35.528Z] Synchronization completed successfully
[2025-05-15T20:48:35.528Z] Next sync scheduled in 5 seconds
[2025-05-15T20:48:35.934Z] Starting invoice synchronization...
[2025-05-15T20:48:35.934Z] Running sync script: /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:48:35.934Z] Executing command: cd /Users/raja/Development/ProsumeAI/server && npx tsx /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:48:40.935Z] Starting invoice synchronization...
[2025-05-15T20:48:40.935Z] Running sync script: /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:48:40.935Z] Executing command: cd /Users/raja/Development/ProsumeAI/server && npx tsx /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:48:40.980Z] [STDOUT] Using database connection: postgres://***:***@localhost:5432/prosumeai
[2025-05-15T20:48:40.980Z] [STDOUT] Starting subscription invoice synchronization...
[2025-05-15T20:48:40.980Z] [STDOUT] Database schema validated successfully
[2025-05-15T20:48:40.980Z] [STDOUT] Found 4 active Razorpay subscriptions to sync
[2025-05-15T20:48:40.980Z] [STDOUT] Processing subscription 20 with Razorpay ID: sub_QUxcCis3igdqUA
[2025-05-15T20:48:40.980Z] [STDOUT] Subscription 20 has 1 existing transactions
[2025-05-15T20:48:40.980Z] [STDOUT] Razorpay initialization in progress, waiting...
[2025-05-15T20:48:40.980Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:48:40.980Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:48:40.980Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:48:40.980Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:48:40.980Z] [STDOUT] Fetching invoices for subscription ID: sub_QUxcCis3igdqUA
[2025-05-15T20:48:40.980Z] [STDOUT] Found 0 invoices for subscription: sub_QUxcCis3igdqUA
[2025-05-15T20:48:40.980Z] [STDOUT] Found 0 invoices for subscription sub_QUxcCis3igdqUA
[2025-05-15T20:48:40.980Z] [STDOUT] Processing subscription 24 with Razorpay ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:48:40.980Z] [STDOUT] Subscription 24 has 1 existing transactions
[2025-05-15T20:48:40.980Z] [STDOUT] Fetching invoices for subscription ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:48:40.980Z] [STDOUT] Found 1 invoices for subscription: sub_QV05DCrgh3A2rL
[2025-05-15T20:48:40.980Z] [STDOUT] Transaction for payment pay_QV05q44fHQzL1q already exists in database (1 records), skipping
[2025-05-15T20:48:40.980Z] [STDOUT] Found 1 invoices for subscription sub_QV05DCrgh3A2rL
[2025-05-15T20:48:40.980Z] [STDOUT] Processing subscription 25 with Razorpay ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:48:40.980Z] [STDOUT] Subscription 25 has 2 existing transactions
[2025-05-15T20:48:40.980Z] [STDOUT] Fetching invoices for subscription ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:48:40.980Z] [STDOUT] Found 1 invoices for subscription: sub_QV1W0JNq2cOk7s
[2025-05-15T20:48:40.980Z] [STDOUT] Transaction for payment pay_QV1WoyCgCY23iO already exists in database (2 records), skipping
[2025-05-15T20:48:40.980Z] [STDOUT] Found 1 invoices for subscription sub_QV1W0JNq2cOk7s
[2025-05-15T20:48:40.980Z] [STDOUT] Processing subscription 26 with Razorpay ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:48:40.980Z] [STDOUT] Subscription 26 has 2 existing transactions
[2025-05-15T20:48:40.980Z] [STDOUT] Fetching invoices for subscription ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:48:40.980Z] [STDOUT] Found 2 invoices for subscription: sub_QVIG6dAuP0UXXn
[2025-05-15T20:48:40.980Z] [STDOUT] Transaction for payment pay_QVILKDuy9v6ovq already exists in database (1 records), skipping
[2025-05-15T20:48:40.980Z] [STDOUT] Transaction for payment pay_QVIGtXTXkm93W8 already exists in database (1 records), skipping
[2025-05-15T20:48:40.980Z] [STDOUT] Found 2 invoices for subscription sub_QVIG6dAuP0UXXn
[2025-05-15T20:48:40.980Z] [STDOUT] Subscription invoice synchronization complete!
[2025-05-15T20:48:40.981Z] [STDOUT] Processed 4 subscriptions
[2025-05-15T20:48:40.981Z] [STDOUT] Success: 4, Errors: 0
[2025-05-15T20:48:40.981Z] [STDOUT] Added 0 new transactions
[2025-05-15T20:48:40.981Z] [STDOUT] Script execution completed
[2025-05-15T20:48:40.981Z] Synchronization completed successfully
[2025-05-15T20:48:40.981Z] Next sync scheduled in 5 seconds
[2025-05-15T20:48:45.936Z] Starting invoice synchronization...
[2025-05-15T20:48:45.936Z] Running sync script: /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:48:45.936Z] Executing command: cd /Users/raja/Development/ProsumeAI/server && npx tsx /Users/raja/Development/ProsumeAI/server/scripts/sync-subscription-invoices.ts
[2025-05-15T20:48:46.009Z] [STDOUT] Using database connection: postgres://***:***@localhost:5432/prosumeai
[2025-05-15T20:48:46.009Z] [STDOUT] Starting subscription invoice synchronization...
[2025-05-15T20:48:46.009Z] [STDOUT] Database schema validated successfully
[2025-05-15T20:48:46.009Z] [STDOUT] Found 4 active Razorpay subscriptions to sync
[2025-05-15T20:48:46.009Z] [STDOUT] Processing subscription 20 with Razorpay ID: sub_QUxcCis3igdqUA
[2025-05-15T20:48:46.009Z] [STDOUT] Subscription 20 has 1 existing transactions
[2025-05-15T20:48:46.009Z] [STDOUT] Razorpay initialization in progress, waiting...
[2025-05-15T20:48:46.009Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:48:46.009Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:48:46.009Z] [STDOUT] Retrieved and decrypted razorpay key
[2025-05-15T20:48:46.009Z] [STDOUT] Razorpay initialized successfully
[2025-05-15T20:48:46.009Z] [STDOUT] Fetching invoices for subscription ID: sub_QUxcCis3igdqUA
[2025-05-15T20:48:46.009Z] [STDOUT] Found 0 invoices for subscription: sub_QUxcCis3igdqUA
[2025-05-15T20:48:46.009Z] [STDOUT] Found 0 invoices for subscription sub_QUxcCis3igdqUA
[2025-05-15T20:48:46.009Z] [STDOUT] Processing subscription 24 with Razorpay ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:48:46.009Z] [STDOUT] Subscription 24 has 1 existing transactions
[2025-05-15T20:48:46.009Z] [STDOUT] Fetching invoices for subscription ID: sub_QV05DCrgh3A2rL
[2025-05-15T20:48:46.009Z] [STDOUT] Found 1 invoices for subscription: sub_QV05DCrgh3A2rL
[2025-05-15T20:48:46.009Z] [STDOUT] Transaction for payment pay_QV05q44fHQzL1q already exists in database (1 records), skipping
[2025-05-15T20:48:46.009Z] [STDOUT] Found 1 invoices for subscription sub_QV05DCrgh3A2rL
[2025-05-15T20:48:46.009Z] [STDOUT] Processing subscription 25 with Razorpay ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:48:46.009Z] [STDOUT] Subscription 25 has 2 existing transactions
[2025-05-15T20:48:46.009Z] [STDOUT] Fetching invoices for subscription ID: sub_QV1W0JNq2cOk7s
[2025-05-15T20:48:46.009Z] [STDOUT] Found 1 invoices for subscription: sub_QV1W0JNq2cOk7s
[2025-05-15T20:48:46.009Z] [STDOUT] Transaction for payment pay_QV1WoyCgCY23iO already exists in database (2 records), skipping
[2025-05-15T20:48:46.009Z] [STDOUT] Found 1 invoices for subscription sub_QV1W0JNq2cOk7s
[2025-05-15T20:48:46.009Z] [STDOUT] Processing subscription 26 with Razorpay ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:48:46.009Z] [STDOUT] Subscription 26 has 2 existing transactions
[2025-05-15T20:48:46.009Z] [STDOUT] Fetching invoices for subscription ID: sub_QVIG6dAuP0UXXn
[2025-05-15T20:48:46.009Z] [STDOUT] Found 2 invoices for subscription: sub_QVIG6dAuP0UXXn
[2025-05-15T20:48:46.009Z] [STDOUT] Transaction for payment pay_QVILKDuy9v6ovq already exists in database (1 records), skipping
[2025-05-15T20:48:46.009Z] [STDOUT] Transaction for payment pay_QVIGtXTXkm93W8 already exists in database (1 records), skipping
[2025-05-15T20:48:46.009Z] [STDOUT] Found 2 invoices for subscription sub_QVIG6dAuP0UXXn
[2025-05-15T20:48:46.009Z] [STDOUT] Subscription invoice synchronization complete!
[2025-05-15T20:48:46.009Z] [STDOUT] Processed 4 subscriptions
[2025-05-15T20:48:46.009Z] [STDOUT] Success: 4, Errors: 0
[2025-05-15T20:48:46.009Z] [STDOUT] Added 0 new transactions
[2025-05-15T20:48:46.009Z] [STDOUT] Script execution completed
[2025-05-15T20:48:46.009Z] Synchronization completed successfully
[2025-05-15T20:48:46.009Z] Next sync scheduled in 5 seconds
[2025-05-15T20:48:47.500Z] Received SIGTERM, shutting down...
